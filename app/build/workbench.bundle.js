/*! For license information please see workbench.bundle.js.LICENSE.txt */
(self.webpackChunk_skybrush_live=self.webpackChunk_skybrush_live||[]).push([[642],{272:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,o:()=>l});var r=n(65307),o=n(39441);const a={message:void 0,open:!1},{reducer:i,actions:l}=(0,r.Z0)({name:"error-handling",initialState:a,reducers:{closeErrorDialog:(0,o.kP)(e=>{e.open=!1}),showErrorMessage:{prepare:(e,t)=>({payload:t instanceof Error?`${e}: \n`+String(t):e}),reducer(e,t){e.message=t.payload,e.open=!0}}}})},623:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,o:()=>a});var r=n(65307);const o={dialogVisible:!1,editedLocationId:void 0},{actions:a,reducer:i}=(0,r.Z0)({name:"saved-location-editor",initialState:o,reducers:{_cancelLocationEditing(e){e.editedLocationId=void 0},_closeSavedLocationEditorDialog(e){e.dialogVisible=!1},editSavedLocation(e,{payload:t}){e.dialogVisible=!0,e.editedLocationId=t}}})},1229:(e,t,n)=>{"use strict";n.d(t,{Aq:()=>v,Ay:()=>E,E_:()=>y,I3:()=>p,Te:()=>f,Tz:()=>d,V1:()=>b,fc:()=>g,fm:()=>S,ge:()=>A,kP:()=>h,qz:()=>m});var r=n(65307),o=n(37566),a=n(37802),i=n(39441),l=n(39982);const c={open:!1,selectedUAVId:void 0,selectedTab:n(9702).Q.PREFLIGHT,position:{x:0,y:0},width:l.Vd},{actions:s,reducer:u}=(0,r.Z0)({name:"uav-details",initialState:c,reducers:{openUAVDetailsDialog(e,{payload:t}){e.selectedUAVId=t,e.open=!0},closeUAVDetailsDialog:(0,i.kP)(e=>{e.open=!1}),setSelectedTabInUAVDetailsDialog(e,{payload:t}){e.selectedTab=t},setSelectedUAVIdInUAVDetailsDialog(e,{payload:t}){e.selectedUAVId=t},setUAVDetailsDialogPosition(e,{payload:t}){e.position=t},setUAVDetailsDialogWidth(e,{payload:t}){e.width=t}},extraReducers(e){e.addCase(o.td,(e,{payload:t})=>{const n=t.find(a.wy);n&&(e.selectedUAVId=(0,a.Xc)(n))})}}),{openUAVDetailsDialog:f,closeUAVDetailsDialog:d,setSelectedTabInUAVDetailsDialog:p,setSelectedUAVIdInUAVDetailsDialog:m,setUAVDetailsDialogPosition:y,setUAVDetailsDialogWidth:g}=s,b=e=>e.dialogs.uavDetails.open,v=e=>e.dialogs.uavDetails.selectedUAVId,h=e=>e.dialogs.uavDetails.selectedTab,A=e=>e.dialogs.uavDetails.position,S=e=>e.dialogs.uavDetails.width,E=u},1442:(e,t,n)=>{"use strict";n.d(t,{$0:()=>s,Ay:()=>p,L0:()=>f,VI:()=>c,cT:()=>u,fy:()=>d,ue:()=>a});var r=n(65307),o=n(39441);const a={dialog:{open:!1,selectedTab:n(58477).I.GEOFENCE},geofence:{horizontalMargin:20,verticalMargin:10,generate:!0,simplify:!0,maxVertexCount:10},settings:{criticalBatteryVoltage:void 0,lowBatteryThreshold:void 0,returnToHomeAltitude:void 0,returnToHomeSpeed:void 0}},{actions:i,reducer:l}=(0,r.Z0)({name:"safety",initialState:a,reducers:{closeSafetyDialog:(0,o.kP)(e=>{e.dialog.open=!1}),openSafetyDialog:(0,o.kP)(e=>{e.dialog.open=!0}),setSafetyDialogTab(e,{payload:t}){e.dialog.selectedTab=t},updateGeofenceSettings(e,{payload:t}){Object.assign(e.geofence,t)},updateSafetySettings(e,{payload:t}){Object.assign(e.settings,t)}}}),{closeSafetyDialog:c,openSafetyDialog:s,setSafetyDialogTab:u,updateGeofenceSettings:f,updateSafetySettings:d}=i,p=l},1488:(e,t,n)=>{"use strict";n.d(t,{v1:()=>u,Ay:()=>p,z5:()=>d});var r=n(65307),o=n(70353),a=n(16238);function i(e,t,n){const r=e.byId[t];r?Object.assign(r,n):(e.byId[t]=Object.assign({id:t,position:void 0},n),e.order.push(t))}const l=a.Tg,{actions:c,reducer:s}=(0,r.Z0)({name:"docks",initialState:l,reducers:{clearDockList(e){(0,a.d5)(e)},setDockState(e,{payload:{id:t,...n}}){i(e,t,n)},setDockStateMultiple(e,{payload:t}){for(const[n,r]of Object.entries(t))i(e,n,r)}},extraReducers(e){e.addCase(o.D,(e,t)=>{(0,a.dE)(e,t.payload)})}}),{clearDockList:u,setDockState:f,setDockStateMultiple:d}=c,p=s},2306:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAGFBMVEX29vb19fXw8PDy8vL09PTz8/Pv7+/x8fGKuegbAAAAyUlEQVR42pXRQQ7CMBRDwST9pfe/MahEmgURbt7WmpVb6+vG0dd9REnn66xRy/qXiCgmEIIJhGACIZhACCYQgvlDCDFIEAwSBIMEwSBBMEgQDBIEgwTBIEEwCJEMQiSDENFMQmQzCZEbNyGemd6KeGZ6u4hnXe2qbdLHFjhf1XqNLXHev4wdMd9nspiEiWISJgqECQJhgkCYIBAmCIQJAmGCQJggECYJhAkCEUMEwhCBMEQgDJEIQ2RSg0iEIRJhiB/S+rrjqvXQ3paIJUgPBXxiAAAAAElFTkSuQmCC"},2645:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var r=n(74848),o=n(79239),a=n(76914),i=n(18432),l=n(53066),c=n(20724),s=n(78034),u=n(2929),f=n(32992),d=n(21079),p=n(50949),m=n(44327),y=n(82390),g=n(57859),b=n(99668),v=n(15178),h=n(33008),A=n(73533),S=n(37364),E=(n(96540),n(68394));const O=[o.A,a.A,i.A,l.A,c.A,s.A,u.A,f.A,d.A,p.A,m.A,y.A,g.A,b.A,v.A,h.A,A.A],w=["700","500","300"],T={colors:O.map(e=>w.map(t=>e[t])).concat([["#000000","#808080","#FFFFFF"]]),width:450,height:170},C={default:{overflow:{overflowY:"hidden"},body:{padding:0}}},I=({styles:e,...t})=>(0,r.jsx)(E.Lu,{className:"borderless",styles:(0,S.default)(C,e),...T,...t})},2652:(e,t,n)=>{"use strict";n.d(t,{BO:()=>h,DB:()=>S,J8:()=>f,Jd:()=>A,MH:()=>E,Sz:()=>b,Tr:()=>u,Vs:()=>i,XT:()=>j,Yw:()=>v,a3:()=>l,aD:()=>s,d:()=>w,iS:()=>T,sg:()=>p,ts:()=>C,wu:()=>I,xv:()=>x,zL:()=>O});var r=n(22315),o=n(40001),a=n(97859);function i(e){return`(${e.map(e=>e.toFixed(2)).join(", ")})`}function l(e){return void 0===e?"--:--:--":(e<3600?c:s)(e)}function c(e){e=Math.round(e);return`${String(Math.floor(e/60))}:${String(Math.floor(e)%60).padStart(2,"0")}`}function s(e,t={}){if(e<0)return"-"+s(-e,t);const{padHours:n}=t;let{precision:r=0}=t;if(r=Math.max(Math.floor(r),0),r>0){const t=10**r;e=Math.round(e*t)/t}let o=String(Math.floor(e/3600));n&&o.length<2&&(o="0"+o),e%=3600;let a=String(Math.floor(e/60));a.length<2&&(a="0"+a);let i=(e%=60).toFixed(r);return e<10&&(i="0"+i),`${o}:${a}:${i}`}function u(e,t){if(e<0)return u(-e,t);e<1&&(e=1);const n=Math.floor(e/3600);e%=3600;const r=Math.floor(e/60);e%=60;const o=Math.floor(e),a=[];return n>0&&a.push(t("general.time.hours",{count:n})),r>0&&a.push(t("general.time.minutes",{count:r})),o>0&&a.push(t("general.time.seconds",{count:o})),a.join(" ")}function f(e){return`s${e+1}`}const d=[{multiplier:1e9,unit:"GB"},{multiplier:1e6,unit:"MB"},{multiplier:1e3,unit:"KB"},{multiplier:1,unit:"B"}],p=[{multiplier:1e3,unit:"km"},{multiplier:1,unit:"m"},{multiplier:.01,unit:"cm"}],m=[{multiplier:1e6,unit:"km\xb2"},{multiplier:1e4,unit:"ha",breakpoint:.1},{multiplier:1,unit:"m\xb2"}],y=[{multiplier:1,unit:"m/s"}],g=(e,t)=>e+(/^[a-zA-Z]/.test(t)?"\xa0":"")+t,b=(e,t="",n=0)=>{if(Array.isArray(t)&&t.length>0){const{multiplier:r,unit:o,digits:a=n}=t.find(({multiplier:t,breakpoint:n=1})=>n<=Math.abs(e)/t)??t.at(-1);return g(0===e?"0":(e/r).toFixed(a),o)}return g(0===e?"0":e.toFixed(n),"string"==typeof t?t:"")},v=(e,t=2)=>b(e,d,t),h=(e,t=2)=>b(e,p,t),A=(e,t=2)=>b(e,m,t),S=(e,t=2)=>b(e,y,t),E=(e,t=String)=>0===e.length?"\u2014":1===e.length?t(e[0]):`${t(e[0])}-${t(e.at(-1))}`;function O(e,{maxCount:t=8,separator:n=" \xb7 "}={}){const r=Array.isArray(e)?e.length:0;return 0===r?"":r>t?`${e.slice(0,t-1).join(n)} and ${r-t+1} more`:e.join(n)}const w=(e,t=0,n="",r="\u2014")=>(0,a.default)(e)||Number.isNaN(e)?r:"number"==typeof e?n?`${e.toFixed(t)}${n}`:e.toFixed(t):e,T=(e,t="\u2014")=>(0,a.default)(e)||Number.isNaN(e)?t:(0,r.A)((0,o.A)(e)),C=(e,t)=>"month"===t?`${e}mo`:"second"===t&&e<1?"now":`${e}${t.charAt(0)}`,I=(e,t,n)=>{const r=C(e,t);return"now"===r?r:"ago"===n?`${r} ago`:`in ${r}`};function x(e,t,{ellipsis:n="\u2026"}={}){return(0,a.default)(e)?"":("string"!=typeof e&&(e=String(e)),e.length>t&&(e=e.slice(0,t)+n),e)}function j(e){return null==e||e<0||!Number.isFinite(e)?"\u2014":e.toFixed(0)+"%"}},2871:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var r=n(31601),o=n.n(r),a=n(76314),i=n.n(a),l=n(4417),c=n.n(l),s=new URL(n(49326),n.b),u=new URL(n(3995),n.b),f=new URL(n(85690),n.b),d=new URL(n(52195),n.b),p=new URL(n(8268),n.b),m=new URL(n(14141),n.b),y=new URL(n(66947),n.b),g=i()(o()),b=c()(s),v=c()(u),h=c()(f),A=c()(d),S=c()(p),E=c()(m),O=c()(y);g.push([e.id,`html,\nbody {\n  width: 100%;\n  height: 100%;\n}\nbody {\n  font-family: 'Fira Sans', Arial, sans-serif;\n  padding: 0px;\n  margin: 0px;\n  overflow: hidden;\n}\n/* Replace default monospaced font */\npre,\ncode {\n  font-family: 'Proggy Vector', 'Menlo', 'Consolas', 'DejaVu Sans Mono', 'Courier New', 'Courier', monospace;\n}\n/* Autocomplete highlights */\nmark {\n  background-color: yellow;\n  color: black;\n}\n/* Vertical centering */\n.vertical-center {\n  position: relative;\n  top: 50%;\n  -webkit-transform: perspective(1px) translateY(-50%);\n  -ms-transform: perspective(1px) translateY(-50%);\n  transform: perspective(1px) translateY(-50%);\n}\n/* Horizontal centering */\n.horizontal-center {\n  text-align: center;\n}\n/* Full (vertical + horizontal) centering */\n.full-center {\n  position: relative;\n  top: 50%;\n  -webkit-transform: perspective(1px) translateY(-50%);\n  -ms-transform: perspective(1px) translateY(-50%);\n  transform: perspective(1px) translateY(-50%);\n  text-align: center;\n}\n/* Mixin for styling boxes with drop shadows */\n/* Shadow settings for bottom bars commonly used on same panels */\n.bottom-bar {\n  box-shadow: rgba(0, 0, 0, 0.3) 0 -10px 10px -10px;\n  z-index: 10;\n}\n/* Drag proxy for the workbench */\n.drag-proxy {\n  height: 100%;\n  background: repeating-linear-gradient(-45deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 10px, rgba(0, 0, 0, 0.15) 10px, rgba(0, 0, 0, 0.15) 20px);\n}\n/* Hide unneeded focus ring on components where it appears */\n.no-focus-ring {\n  outline: none !important;\n}\n/* Root container for React */\n#root {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n/* Main workbench area of the root container */\n#workbench {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n/* Footer in which the lower buttons are placed */\n#footer {\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  padding: 20px;\n}\n/* Map in the background of the main screen */\n#map {\n  width: 100%;\n  height: 100%;\n}\n/* Special styling for Material-UI lists that are placed within a\n * Dialog and whose left edge lines up with the left edge of the dialog. */\n.dialog-sidebar {\n  padding: 0 !important;\n  min-width: 240px;\n}\n/* Styling for selected list items in Material-UI */\n.selected-list-item {\n  color: #2196f3;\n  box-shadow: 5px 0px #2196f3 inset;\n}\n/* Autosuggestion lists */\n.react-autosuggest__suggestions-list {\n  list-style-type: none;\n  padding-left: 0;\n}\n/* Error panels */\n.error-panel {\n  background: #f4f4f4;\n  box-sizing: border-box;\n  display: flex;\n  flex-flow: column nowrap;\n  font-size: 14px;\n  height: 100%;\n  justify-content: center;\n  left: 0;\n  top: 0;\n  opacity: 0.5;\n  padding: 0 24px;\n  position: absolute;\n  text-align: center;\n  width: 100%;\n}\n.error-panel .error-icon {\n  padding-bottom: 12px;\n}\n.error-panel .button-bar {\n  padding-top: 24px;\n}\n.error-panel .button-bar button {\n  padding: 6px;\n  margin: 0 12px;\n}\n/* Widgets placed over the map */\n.widget {\n  position: absolute !important;\n  min-width: 48px;\n  min-height: 48px;\n  /* Title of widget */\n  /* Action bar of the widget (overlaid on top of it) */\n}\n.widget .title {\n  font-size: 10pt;\n  font-weight: bold;\n  text-transform: uppercase;\n  line-height: 24px;\n  height: 24px;\n}\n.widget .widget-action-bar {\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  transition: opacity 0.2s;\n  opacity: 0;\n}\n.widget:hover .widget-action-bar {\n  opacity: 1;\n}\n/* Add OpenLayers styling to the main map view. These selectors need to be more\n * specific than the ones in ol.css because ol.css is lazy-loaded when the\n * map is mounted, and we don't want it to override any of our styles */\n#main-map-view,\n#adapt-map-view {\n  /* Styling for OpenLayers controls */\n  /* OpenLayers scale line should have a half-transparent "box styling" */\n  /* OpenLayers attribution widget should be in the lower right corner\n  * by default */\n}\n#main-map-view .ol-control,\n#adapt-map-view .ol-control {\n  background-color: #ffffff;\n  color: rgba(0, 0, 0, 0.87);\n  padding: 0 !important;\n  border-radius: 2px !important;\n  box-shadow: rgba(0, 0, 0, 0.117647) 0px 1px 6px, rgba(0, 0, 0, 0.117647) 0px 1px 4px;\n}\n#main-map-view .ol-control button,\n#adapt-map-view .ol-control button {\n  background-color: #ffffff;\n  color: rgba(0, 0, 0, 0.87);\n  margin: 0px;\n  /* to fit the Material design better */\n  width: 24px;\n  /* 24px because Material buttons are 48px */\n  height: 24px;\n}\n#main-map-view .ol-control button:hover,\n#adapt-map-view .ol-control button:hover,\n#main-map-view .ol-control button:focus,\n#adapt-map-view .ol-control button:focus {\n  background-color: #ffffff;\n  color: rgba(0, 0, 0, 0.87);\n}\n#main-map-view .ol-control.ol-full-screen,\n#adapt-map-view .ol-control.ol-full-screen {\n  right: auto;\n  top: 64px;\n  left: 8px;\n}\n#main-map-view .ol-control.ol-overviewmap,\n#adapt-map-view .ol-control.ol-overviewmap {\n  bottom: 4em;\n}\n#main-map-view .ol-control.ol-rotate,\n#adapt-map-view .ol-control.ol-rotate {\n  top: 4em;\n  right: auto;\n  left: 2.5em;\n}\n#main-map-view .ol-control.ol-zoom,\n#adapt-map-view .ol-control.ol-zoom {\n  top: 8px;\n  left: 8px;\n}\n#main-map-view .ol-control.ol-zoomslider,\n#adapt-map-view .ol-control.ol-zoomslider {\n  top: 4em;\n}\n#main-map-view .ol-control.ol-zoom-extent,\n#adapt-map-view .ol-control.ol-zoom-extent {\n  top: 4em;\n}\n#main-map-view .ol-scale-line,\n#adapt-map-view .ol-scale-line {\n  background-color: #ffffff;\n  color: rgba(0, 0, 0, 0.87);\n  padding: 0 !important;\n  border-radius: 2px !important;\n  box-shadow: rgba(0, 0, 0, 0.117647) 0px 1px 6px, rgba(0, 0, 0, 0.117647) 0px 1px 4px;\n  bottom: 8px;\n  left: 8px;\n}\n#main-map-view .ol-scale-line-inner,\n#adapt-map-view .ol-scale-line-inner {\n  border-color: rgba(0, 0, 0, 0.87);\n  color: rgba(0, 0, 0, 0.87);\n}\n.key-control .tool-select #main-map-view .ol-viewport,\n.key-control .tool-select #adapt-map-view .ol-viewport,\n.key-meta .tool-select #main-map-view .ol-viewport,\n.key-meta .tool-select #adapt-map-view .ol-viewport {\n  /* Path should be relative to LESS file otherwise it won't work in Electron */\n  cursor: url(${b}) 4 4, auto;\n}\n.key-shift .tool-select #main-map-view .ol-viewport,\n.key-shift .tool-select #adapt-map-view .ol-viewport {\n  cursor: url(${v}) 4 4, auto;\n}\n.key-alt .tool-select #main-map-view .ol-viewport,\n.key-alt .tool-select #adapt-map-view .ol-viewport {\n  cursor: url(${h}) 4 4, auto;\n}\n.tool-zoom #main-map-view .ol-viewport,\n.tool-zoom #adapt-map-view .ol-viewport {\n  cursor: url(${A}) 9 9, auto;\n}\n.key-shift .tool-zoom #main-map-view .ol-viewport,\n.key-shift .tool-zoom #adapt-map-view .ol-viewport {\n  cursor: url(${S}) 9 9, auto;\n}\n.tool-pan #main-map-view .ol-viewport,\n.tool-pan #adapt-map-view .ol-viewport {\n  cursor: url(${E}) 12 12, auto;\n}\n.key-control .tool-pan #main-map-view .ol-viewport,\n.key-control .tool-pan #adapt-map-view .ol-viewport,\n.key-meta .tool-pan #main-map-view .ol-viewport,\n.key-meta .tool-pan #adapt-map-view .ol-viewport {\n  cursor: url(${b}) 4 4, auto;\n}\n.key-shift .tool-pan #main-map-view .ol-viewport,\n.key-shift .tool-pan #adapt-map-view .ol-viewport {\n  cursor: url(${A}) 9 9, auto;\n}\n.key-shift.key-alt .tool-pan #main-map-view .ol-viewport,\n.key-shift.key-alt .tool-pan #adapt-map-view .ol-viewport {\n  cursor: url(${O}) 12 12, auto;\n}\n#main-map-view .ol-dragbox,\n#adapt-map-view .ol-dragbox,\n#main-map-view .ol-dragzoom,\n#adapt-map-view .ol-dragzoom {\n  background-color: rgba(0, 136, 255, 0.25);\n  border: 1px solid #08f;\n}\n#main-map-view .ol-attribution,\n#adapt-map-view .ol-attribution {\n  background-color: #ffffff;\n  color: rgba(0, 0, 0, 0.87);\n  padding: 0 !important;\n  border-radius: 2px !important;\n  box-shadow: rgba(0, 0, 0, 0.117647) 0px 1px 6px, rgba(0, 0, 0, 0.117647) 0px 1px 4px;\n  left: 8px;\n  bottom: 32px;\n  right: unset;\n}\n#main-map-view .ol-attribution ul,\n#adapt-map-view .ol-attribution ul {\n  color: rgba(0, 0, 0, 0.54);\n}\n#main-map-view .ol-attribution ul a,\n#adapt-map-view .ol-attribution ul a,\n#main-map-view .ol-attribution ul a:hover,\n#adapt-map-view .ol-attribution ul a:hover,\n#main-map-view .ol-attribution ul a:active,\n#adapt-map-view .ol-attribution ul a:active,\n#main-map-view .ol-attribution ul a:visited,\n#adapt-map-view .ol-attribution ul a:visited {\n  color: rgba(0, 0, 0, 0.87);\n  text-decoration: none;\n  text-shadow: none;\n}\n#main-map-view .ol-attribution.ol-uncollapsible,\n#adapt-map-view .ol-attribution.ol-uncollapsible {\n  border: 0 !important;\n  border-radius: 0 !important;\n  left: 0px;\n  bottom: 0px;\n  right: 0px;\n  max-width: unset;\n}\n#main-map-view .ol-mouse-position,\n#adapt-map-view .ol-mouse-position {\n  background-color: #ffffff;\n  color: rgba(0, 0, 0, 0.87);\n  padding: 0 !important;\n  border-radius: 2px !important;\n  box-shadow: rgba(0, 0, 0, 0.117647) 0px 1px 6px, rgba(0, 0, 0, 0.117647) 0px 1px 4px;\n  top: auto;\n  right: 8px;\n  bottom: 8px;\n  padding: 10px !important;\n  min-width: 175px;\n  text-align: right;\n}\n/* Styling for the heatmap scale */\n#heatmapScale {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  position: absolute;\n  left: 8px;\n  bottom: 30px;\n  width: 28px;\n  height: 200px;\n}\n#heatmapScale span {\n  background-color: rgba(200, 200, 200, 0.75);\n  position: relative;\n  left: 40px;\n  margin-right: auto;\n  padding: 2px;\n  white-space: nowrap;\n  border-top-right-radius: 3px;\n  border-bottom-right-radius: 3px;\n}\n#heatmapScale span:after {\n  display: block;\n  content: '';\n  position: absolute;\n  left: -12px;\n  top: 0px;\n  border-style: solid;\n  border-width: 12px 12px 12px 0;\n  border-color: transparent rgba(200, 200, 200, 0.75);\n}\n/* Styling for popup color pickers */\n.popup-color-picker {\n  display: inline-block;\n  vertical-align: middle;\n}\n.popup-color-picker .popup-color-picker-button {\n  min-height: 3ex;\n  width: 3em;\n  border: 1px solid rgba(0, 0, 0, 0.35);\n  cursor: pointer;\n}\n.popup-color-picker .popup-color-picker-dropdown {\n  background-color: #ffffff;\n  color: rgba(0, 0, 0, 0.87);\n  padding: 0 !important;\n  border-radius: 2px !important;\n  box-shadow: rgba(0, 0, 0, 0.117647) 0px 1px 6px, rgba(0, 0, 0, 0.117647) 0px 1px 4px;\n}\n/* Styling for the UAV count monitor */\n.coloredContainer span {\n  opacity: 0;\n  letter-spacing: -10px;\n  transition: letter-spacing 0.5s, opacity 0.2s;\n}\n.coloredContainer:hover span {\n  opacity: 1;\n  letter-spacing: normal;\n}\n/* Color picker customization */\n.swatches-picker.borderless > div > div:first-child {\n  background: transparent !important;\n  box-shadow: none !important;\n}\n/* Markdown editor customization for the "Field notes" panel */\n.EasyMDEContainer {\n  height: 100%;\n}\n.EasyMDEContainer .CodeMirror {\n  height: 100% !important;\n  border: none !important;\n  padding: 4px !important;\n}\n.EasyMDEContainer .CodeMirror .CodeMirror-scroll {\n  min-height: unset !important;\n}\n.EasyMDEContainer .CodeMirror .cm-link {\n  color: #4fadf8 !important;\n}\n`,""]);const w=g},3471:(e,t,n)=>{"use strict";n.d(t,{si:()=>ft,Ay:()=>mt,qj:()=>ct,de:()=>at,fq:()=>pt});n(52675),n(89463),n(2259),n(45700),n(28706),n(2008),n(23792),n(89572),n(2892),n(83851),n(81278),n(40875),n(79432),n(10287),n(26099),n(3362),n(47764),n(98992),n(54520),n(3949),n(23500),n(62953),n(3296),n(27208),n(48408);var r=n(65307),o=n(17880),a=n(82041),i=n(74167),l=n(73790),c=n.n(l),s=n(65738),u=n(89610),f=n(97313),d=n(98091),p=n(64784),m=n(9401),y=n(41385),g=n(74811),b=n(51012),v=n(61212),h=n(94203),A=n(32087),S=n(3825),E=n(90501),O=n(41241),w=n(84700),T=n(67089),C=n(272),I=n(95191),x=n(51300),j=n(7042),P=n(623),k=n(7213),_=n(54996),N=n(89826),R=n(81607),D=n(57754),M=n(1229),L=n(24426),F=n(99387),U=n(61587),G=n(49327),V=n(16238);const B=V.Tg,{actions:z,reducer:H}=(0,r.Z0)({name:"datasets",initialState:B,reducers:{removeDatasets(e,t){(0,V.Zj)(e,t.payload)}}}),{removeDatasets:W}=z,q=H;var K=n(19865),Y=n(1488),$=n(15224),Z=n(80109),J=n(56311),X=n(85876),Q=n(86150),ee=n(58364),te=n(34261),ne=n(6326),re=n(34566),oe=n(15786),ae=n(84692),ie=n(78196),le=n(37566),ce=n(20288),se=n(4607);const ue=(0,o.HY)({layers:ae.Ay,origin:ie.Ay,selection:le.Ay,tools:ce.Ay,view:se.A});var fe=n(6184),de=n(16054),pe=n(6692),me=n(31547),ye=n(1442),ge=n(44690),be=n(91236),ve=n(34808),he=n(19469),Ae=n(85188),Se=n(30439),Ee=n(91436),Oe=n(51870),we=n(92895),Te=n(58917),Ce=n(65756);const Ie=(0,o.HY)({appSettings:R.A,authentication:k.A,deauthentication:_.A,dockDetails:T.Ay,error:C.A,featureEditor:I.A,layerSettings:x.Ay,prompt:j.Ay,savedLocationEditor:P.A,serverSettings:N.Ay,showConfigurator:(0,w.Ay)(D.Ay,{clearHistoryType:D.Fs.type,filter:(0,w.F0)([D.js.type]),capture:({showData:e})=>({showData:e}),restore:({showData:e},t)=>({...t,showData:e}),jumpType:D.FZ.type,redoType:D.tD.type,undoType:D.ZC.type}),uavDetails:M.Ay}),xe=(0,o.HY)({alert:L.Ay,beacons:F.Ay,clocks:U.Ay,connections:G.Ay,datasets:q,detachablePanels:K.Ay,dialogs:Ie,docks:Y.Ay,features:oe.Ay,fieldNotes:$.A,firmwareUpdate:Z.Ay,hotkeys:J.Ay,lcdClock:X.Ay,licenseInfo:Q.Ay,lightControl:ee.Ay,localServer:te.Ay,log:ne.Ay,logDownload:Oe.Ay,map:ue,mapCaching:re.Ay,measurement:b.Ay,messages:fe.Ay,mission:de.Ay,parameters:pe.Ay,preflight:me.Ay,rtk:h.Ay,safety:ye.Ay,savedLocations:ge.A,servers:be.Ay,session:ve.Ay,settings:he.Ay,show:S.Ay,sidebar:Ae.A,threeD:Se.Ay,uavs:E.Ay,uavControl:Ee.Ay,upload:we.Ay,versionCheck:Te.Ay,weather:Ce.Ay,workbench:O.Ay});var je=n(1932),Pe=n(26625),ke=n(74974);function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach(function(t){De(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function De(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=_e(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_e(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Me={2:(0,je.jM)(function(e){e.settings.uavs=Re(Re({},e.settings.uavs),{},{defaultBatteryCellCount:ke.Fu,fullChargeVoltage:ke.r0,lowVoltageThreshold:ke.X8,criticalVoltageThreshold:ke.Wq})}),3:(0,je.jM)(function(e){"number"==typeof e.safety.settings.lowBatteryVoltage&&(e.safety.settings.lowBatteryThreshold={type:Pe.Z.VOLTAGE,value:e.safety.settings.lowBatteryVoltage})})};const Le=(0,y.createMigrate)(Me);var Fe=n(39622),Ue=n(41470),Ge=n(51869);function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach(function(t){He(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function He(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ve(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(e){return function(){var t=e.apply(void 0,arguments);return"number"==typeof a.A.session.maxLengthInSeconds&&a.A.session.maxLengthInSeconds>0&&(t=ze(ze({},t),{},{session:ze(ze({},t.session),{},{expiresAt:Date.now()+1e3*a.A.session.maxLengthInSeconds})})),t}}var qe=We(function(e,t,n){for(var r=function(e){return null!==e&&"object"===Ve(e)&&!Array.isArray(e)},o=function(e,t){for(var n=(0,Ue.A)(t,function(t,n){return!((r=e[n])&&(0,Fe.A)(r,"byId"));var r}),a=0,i=Object.keys(n);a<i.length;a++){var l=i[a];r(n[l])&&(0,Fe.A)(e,l)&&(n[l]=o(e[l],n[l]))}return n},a=arguments.length,i=new Array(a>3?a-3:0),l=3;l<a;l++)i[l-3]=arguments[l];if(e&&"object"===Ve(e)){var c=o(e,n);return Ge.A.apply(void 0,[e,c,c].concat(i))}return Ge.A.apply(void 0,[e,t,n].concat(i))}),Ke=We(function(e,t,n){return n}),Ye=n(59116),$e=n(87443),Ze=n.n($e);function Je(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return Xe(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Xe(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Xe(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,Xe(f,"constructor",s),Xe(s,"constructor",c),c.displayName="GeneratorFunction",Xe(s,o,"GeneratorFunction"),Xe(f),Xe(f,o,"Generator"),Xe(f,r,function(){return this}),Xe(f,"toString",function(){return"[object Generator]"}),(Je=function(){return{w:a,m:d}})()}function Xe(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Xe=function(e,t,n,r){function a(t,n){Xe(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},Xe(e,t,n,r)}function Qe(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function et(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Qe(a,r,o,i,l,"next",e)}function l(e){Qe(a,r,o,i,l,"throw",e)}i(void 0)})}}var tt={key:"flockwave-client",storage:window.bridge?window.bridge.createStateStore():c(),version:3,migrate:Le,stateReconciler:qe,blacklist:["alert","beacons","clocks","connections","datasets","detachablePanels","docks","firmwareUpdate","localServer","log","logDownload","messages","rtk","servers","session","snackbar","uavs","weather"],throttle:1e3,transforms:[(0,g.HI)("dialogs",["appSettings","featureEditor","layerSettings","messages","savedLocationEditor","serverSettings"]),(0,g.MI)("hotkeys",["pendingUAVId"]),(0,g.HI)("licenseInfo",["dialog"]),(0,g.MI)("mission",["landingPositions","takeoffHeadings","lastClearedMissionData"]),(0,g.MI)("preflight",["checked"]),(0,g.HI)("show",["environment"]),(0,g.HI)("upload",["settings"]),(0,g.MI)("threeD",["camera","tooltip","sceneId"])]},nt=new URL(window.location.href);(a.A.ephemeral||nt.searchParams&&nt.searchParams.get("pristine"))&&(tt.stateReconciler=Ke);var rt=(0,d.A)({simple:300}),ot=(0,p.Qo)({promiseTypeDelimiter:"Promise",promiseTypeSuffixes:["Pending","Fulfilled","Rejected"]}),at=(0,m.Ay)(),it=(0,r.U1)({reducer:(0,y.persistReducer)(tt,xe),middleware:function(e){return e({immutableCheck:!1,serializableCheck:{isSerializable:function(e){return(0,r.$i)(e)||(0,u.default)(e)||(0,i.A)(e)||(0,s.A)(e)},ignoredActions:[String(S.Z7),String(O.Q2)],ignoredPaths:["show.data","workbench"]}}).concat(rt,ot,at)},devTools:!1}),lt=(0,f.A)(),ct=(0,y.persistStore)(it,null,lt.resolve);function st(){return ut.apply(this,arguments)}function ut(){return(ut=et(Je().m(function e(){return Je().w(function(e){for(;;)if(0===e.n)return e.a(2,ct.purge())},e)}))).apply(this,arguments)}function ft(){return dt.apply(this,arguments)}function dt(){return(dt=et(Je().m(function e(){return Je().w(function(e){for(;;)switch(e.n){case 0:if(!window.confirm("Are you sure? All settings will be lost.")){e.n=2;break}return e.n=1,st();case 1:window.location.reload();case 2:return e.a(2)}},e)}))).apply(this,arguments)}var pt=function(){return lt.promise};window.bridge&&(window.bridge.provideActions((0,o.zH)({showAppSettingsDialog:A.iD},it.dispatch)),window.bridge.provideSubscriptions(function(e,t){return(0,Ye.A)(e,function(e){return function(n){return t.subscribe(Ze()(function(){return e(t.getState())})(n))}})}({shouldPreventSleepMode:v.UJ},it)));const mt=it},3825:(e,t,n)=>{"use strict";n.d(t,{Al:()=>D,Ay:()=>Q,Bm:()=>b,Dg:()=>x,Ej:()=>E,J4:()=>j,JI:()=>w,Jt:()=>B,L5:()=>X,Lx:()=>$,M8:()=>G,O1:()=>_,Po:()=>R,T6:()=>A,U9:()=>K,VU:()=>S,Vh:()=>q,W3:()=>z,Z7:()=>C,aC:()=>H,b1:()=>v,c4:()=>J,dQ:()=>Z,eD:()=>m,eR:()=>V,gJ:()=>Y,iI:()=>I,j8:()=>y,kY:()=>k,l9:()=>N,lO:()=>h,mZ:()=>g,pl:()=>P,qH:()=>U,rU:()=>W,sH:()=>T,w7:()=>O,xP:()=>F});var r=n(65307),o=n(26144),a=n(22278),i=n(97859),l=n(35704),c=n(39441),s=n(71458),u=n(69897);const f={data:void 0,base64Blob:void 0,loading:!1,progress:0,sourceUrl:void 0,changedSinceLoaded:!1,lastLoadAttemptFailed:!1,environment:{editing:!1,estimatingCoordinateSystem:!1,outdoor:{coordinateSystem:{orientation:"0",origin:void 0,type:o.COORDINATE_SYSTEM_TYPE},altitudeReference:{...s.n_},takeoffHeading:{...s.ay}},indoor:{coordinateSystem:{orientation:"0"},room:{visible:!1,firstCorner:[-s.EZ.width/2,-s.EZ.depth/2,0],secondCorner:[s.EZ.width/2,s.EZ.depth/2,s.EZ.height]},takeoffHeading:{...s.ay}},type:u.OX.OUTDOOR},loadShowFromCloudDialog:{open:!1},manualPreflightChecksDialog:{open:!1},onboardPreflightChecksDialog:{open:!1},preflight:{manualChecksSignedOffAt:void 0,onboardChecksSignedOffAt:void 0,takeoffAreaApprovedAt:void 0},start:{authorized:!1,clock:void 0,utcTime:void 0,timeOnClock:void 0,method:u._9.RC,uavIds:[],syncStatusWithServer:u.mb.NOT_SYNCED},startTimeDialog:{open:!1},takeoffAreaSetupDialog:{open:!1}},{actions:d,reducer:p}=(0,r.Z0)({name:"show",initialState:f,reducers:{approveTakeoffAreaAt(e,t){e.preflight.takeoffAreaApprovedAt=t.payload},_clearLoadedShow:(0,c.kP)(e=>{e.data=void 0,e.base64Blob=void 0,e.sourceUrl=void 0,e.changedSinceLoaded=!1,e.preflight.manualChecksSignedOffAt=void 0,e.preflight.onboardChecksSignedOffAt=void 0,e.preflight.takeoffAreaApprovedAt=void 0}),clearManualPreflightChecks:(0,c.kP)(e=>{e.preflight.manualChecksSignedOffAt=void 0}),clearOnboardPreflightChecks:(0,c.kP)(e=>{e.preflight.onboardChecksSignedOffAt=void 0}),clearStartTimeAndMethod(e){e.start.utcTime=void 0,e.start.timeOnClock=void 0,e.start.method=u._9.RC},closeEnvironmentEditorDialog:(0,c.kP)(e=>{e.environment.editing=!1}),closeLoadShowFromCloudDialog:(0,c.kP)(e=>{e.loadShowFromCloudDialog.open=!1}),closeManualPreflightChecksDialog:(0,c.kP)(e=>{e.manualPreflightChecksDialog.open=!1}),closeOnboardPreflightChecksDialog:(0,c.kP)(e=>{e.onboardPreflightChecksDialog.open=!1}),closeStartTimeDialog(e,t){e.startTimeDialog.open=!1,t.payload&&(e.startTimeDialog.authorizeWhenSettingStartTime=Boolean(t.payload.authorizeWhenSettingStartTime))},closeTakeoffAreaSetupDialog:(0,c.kP)(e=>{e.takeoffAreaSetupDialog.open=!1}),loadingProgress(e,t){if(e.loading){const n=Number(t.payload);Number.isNaN(n)?e.progress=void 0:e.progress=Math.min(1,Math.max(n,0))}},loadingPromisePending(e){e.loading=!0,e.progress=void 0,e.changedSinceLoaded=!1},loadingPromiseFulfilled(e,t){const{spec:n,url:r,base64Blob:o}=t.payload;e.data=n,e.base64Blob=o,e.sourceUrl=r,e.loading=!1,e.progress=void 0,e.changedSinceLoaded=!1},loadingPromiseRejected(e){e.loading=!1,e.progress=void 0,e.changedSinceLoaded=!1},coordinateSystemEstimationPromisePending(e){e.environment.estimatingCoordinateSystem=!0},coordinateSystemEstimationPromiseFulfilled(e){e.environment.estimatingCoordinateSystem=!1},coordinateSystemEstimationPromiseRejected(e){e.environment.estimatingCoordinateSystem=!1},notifyShowFileChangedSinceLoaded(e){e.changedSinceLoaded=!0},openEnvironmentEditorDialog:(0,c.kP)(e=>{e.environment.editing=!0}),openLoadShowFromCloudDialog:(0,c.kP)(e=>{e.loadShowFromCloudDialog.open=!0}),openManualPreflightChecksDialog:(0,c.kP)(e=>{e.manualPreflightChecksDialog.open=!0}),openOnboardPreflightChecksDialog:(0,c.kP)(e=>{e.onboardPreflightChecksDialog.open=!0}),openStartTimeDialog:(0,c.kP)(e=>{e.startTimeDialog.open=!0}),openTakeoffAreaSetupDialog:(0,c.kP)(e=>{e.takeoffAreaSetupDialog.open=!0}),revokeTakeoffAreaApproval:(0,c.kP)(e=>{e.preflight.takeoffAreaApprovedAt=void 0}),setEnvironmentType(e,t){e.environment.type=t.payload},setIndoorShowOrientation(e,t){e.environment.indoor.coordinateSystem.orientation=String(t.payload)},setIndoorShowTakeoffHeadingSpecification(e,t){e.environment.indoor.takeoffHeading=t.payload??s.ay},setLastLoadingAttemptFailed(e,t){e.lastLoadAttemptFailed=Boolean(t.payload)},_setOutdoorShowAltitudeReference(e,t){const{payload:n}=t;"object"==typeof n&&void 0!==n.type&&void 0!==n.value&&(e.environment.outdoor.altitudeReference=n)},setOutdoorShowOrientation(e,t){e.environment.outdoor.coordinateSystem.orientation=String(t.payload)},setOutdoorShowOrigin(e,t){e.environment.outdoor.coordinateSystem.origin=t.payload},setOutdoorShowTakeoffHeadingSpecification(e,t){e.environment.outdoor.takeoffHeading=t.payload??s.ay},setRoomCorners(e,t){const n=t.payload;if(!Array.isArray(n)||n.length<2)return;const r=n[0],o=n[1];!Array.isArray(r)||r.length<3||!Array.isArray(o)||o.length<3||((0,l.A)(e,"environment.indoor.room.firstCorner",r.slice(0,3)),(0,l.A)(e,"environment.indoor.room.secondCorner",o.slice(0,3)))},setRoomVisibility(e,t){(0,l.A)(e,"environment.indoor.room.visible",Boolean(t.payload))},setShowAuthorization(e,t){e.start.authorized=!0===t.payload},setShowSettingsSynchronizationStatus(e,t){Object.values(u.mb).includes(t.payload)&&(e.start.syncStatusWithServer=t.payload)},setStartMethod(e,t){Object.values(u._9).includes(t.payload)&&(e.start.method=t.payload)},setStartTime(e,t){const{payload:n}=t,{clock:r,time:o}=n||{};e.start.clock=(0,i.default)(r)||""===r?void 0:String(r);if(!(0,i.default)(e.start.clock))e.start.timeOnClock=(0,i.default)(o)||"number"!=typeof o?void 0:o;else{const t=o instanceof Date?(0,a.A)(o):o;e.start.utcTime="number"==typeof t?t:void 0}},setUAVIdsToStartAutomatically(e,t){Array.isArray(t.payload)&&(e.start.uavIds=t.payload)},signOffOnManualPreflightChecksAt(e,t){e.preflight.manualChecksSignedOffAt=t.payload},signOffOnOnboardPreflightChecksAt(e,t){e.preflight.onboardChecksSignedOffAt=t.payload},synchronizeShowSettings(e,t){}}}),{approveTakeoffAreaAt:m,_clearLoadedShow:y,clearManualPreflightChecks:g,clearOnboardPreflightChecks:b,clearStartTimeAndMethod:v,closeEnvironmentEditorDialog:h,closeLoadShowFromCloudDialog:A,closeManualPreflightChecksDialog:S,closeOnboardPreflightChecksDialog:E,closeStartTimeDialog:O,closeTakeoffAreaSetupDialog:w,loadingProgress:T,loadingPromiseFulfilled:C,notifyShowFileChangedSinceLoaded:I,openEnvironmentEditorDialog:x,openLoadShowFromCloudDialog:j,openManualPreflightChecksDialog:P,openOnboardPreflightChecksDialog:k,openStartTimeDialog:_,openTakeoffAreaSetupDialog:N,revokeTakeoffAreaApproval:R,setEnvironmentType:D,setIndoorShowOrientation:M,setIndoorShowTakeoffHeadingSpecification:L,setLastLoadingAttemptFailed:F,_setOutdoorShowAltitudeReference:U,setOutdoorShowOrientation:G,setOutdoorShowOrigin:V,setOutdoorShowTakeoffHeadingSpecification:B,setRoomCorners:z,setRoomVisibility:H,setShowAuthorization:W,setShowSettingsSynchronizationStatus:q,setStartMethod:K,setStartTime:Y,setUAVIdsToStartAutomatically:$,signOffOnManualPreflightChecksAt:Z,signOffOnOnboardPreflightChecksAt:J,synchronizeShowSettings:X}=d,Q=p},3995:(e,t,n)=>{"use strict";e.exports=n.p+"756a5d1d3cefa357cddd.png"},4180:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(85072),o=n.n(r),a=n(97825),i=n.n(a),l=n(77659),c=n.n(l),s=n(55056),u=n.n(s),f=n(10540),d=n.n(f),p=n(41113),m=n.n(p),y=n(48909),g={};g.styleTagTransform=m(),g.setAttributes=u(),g.insert=c().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=d();o()(y.A,g);const b=y.A&&y.A.locals?y.A.locals:void 0},4607:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,c:()=>s});var r=n(82041),o=n(65307),a=n(27989);const i=r.A.map.view,{actions:l,reducer:c}=(0,o.Z0)({name:"map/view",initialState:i,reducers:{updateMapViewSettings(e,t){const{angle:n,position:r,zoom:o}=t.payload;e.position=r,e.angle=(0,a.n0)(n),e.zoom=Math.max(Math.min(o,20),0)}}}),{updateMapViewSettings:s}=l,u=c},4729:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(74848),o=(n(96540),n(61225)),a=n(81709),i=n(51533);const l=(0,o.Ng)(e=>({formatCoordinate:(0,i.ap)(e),defaultDisplaySettings:e.settings.display}))(({defaultDisplaySettings:e,formatCoordinate:t,showAttribution:n,showMouseCoordinates:o,showScaleLine:i,showZoom:l})=>(0,r.jsxs)(r.Fragment,{children:[(l??!0)&&(0,r.jsx)(a.A4.Zoom,{}),(n??!0)&&(0,r.jsx)(a.A4.Attribution,{collapsed:!0,collapsible:!0,collapseLabel:"\xab"}),(o??e.showMouseCoordinates)&&(0,r.jsx)(a.A4.MousePosition,{hideWhenOut:!0,projection:"EPSG:4326",coordinateFormat:t},"control.MousePosition"),(i??e.showScaleLine)&&(0,r.jsx)(a.A4.ScaleLine,{minWidth:128},"control.ScaleLine")]}))},6184:(e,t,n)=>{"use strict";n.d(t,{tS:()=>u,k9:()=>c,hv:()=>s,D0:()=>f,PT:()=>d,Ay:()=>m,kt:()=>p});var r=n(65307),o=n(91949);function a(e,t,n,r){const o={id:e.nextMessageId++,...t};if(void 0!==r){const t=e.byId[r];t&&(t.responseId=o.id)}e.byId[o.id]=o;let a=e.uavIdsToMessageIds[n];return a||(a=[],e.uavIdsToMessageIds[n]=a),a.push(o.id),o.id}const{actions:i,reducer:l}=(0,r.Z0)({name:"messages",initialState:{byId:{},commandHistory:[],uavIdsToMessageIds:{},nextMessageId:1},reducers:{addErrorMessage(e,t){const{message:n,refs:r,uavId:i}=t.payload,l=a(e,{type:o.Go.ERROR,date:Date.now(),body:n},i,r);t.messageId=l},addInboundMessage(e,t){const{message:n,refs:r,severity:i,uavId:l}=t.payload,c=a(e,{type:o.Go.INBOUND,author:l,date:Date.now(),raw:!0,recipient:"Operator",severity:i,body:n},l,r);t.messageId=c},batchAddInboundMessages(e,t){const n=[];for(const{message:r,refs:i,severity:l,uavId:c}of t.payload)n.push(a(e,{type:o.Go.INBOUND,author:c,date:Date.now(),raw:!0,recipient:"Operator",severity:l,body:r},c,i));t.messageIds=n},addOutboundMessage(e,t){const{message:n,uavId:r}=t.payload;if(!r)return;const i=a(e,{type:o.Go.OUTBOUND,author:"Operator",date:Date.now(),responseId:void 0,recipient:r,body:n,percentage:void 0,status:void 0,suspended:!1},r);t.messageId=i,e.commandHistory.at(-1)!==n&&e.commandHistory.push(n)},clearMessagesOfUAVById(e,t){const{payload:n}=t,r=e.uavIdsToMessageIds[n]??[];for(const t of r)delete e.byId[t];delete e.uavIdsToMessageIds[n]},updateProgressByMessageId(e,t){const{messageId:n,progress:r,suspended:o}=t.payload,a=e.byId[n];a&&"object"==typeof r&&("number"==typeof r.percentage&&(a.percentage=Number(Math.max(0,Math.min(r.percentage,100)).toFixed(1))),void 0!==r.message&&(a.message=String(r.message)),void 0!==o&&(a.suspended=Boolean(o)))}}}),{addInboundMessage:c,addOutboundMessage:s,addErrorMessage:u,batchAddInboundMessages:f,clearMessagesOfUAVById:d,updateProgressByMessageId:p}=i,m=l},6326:(e,t,n)=>{"use strict";n.d(t,{Af:()=>u,Ay:()=>f,fp:()=>l});var r=n(97859),o=n(65307);const{actions:a,reducer:i}=(0,o.Z0)({name:"log",initialState:{highestUnseenMessageLevel:-1,items:[],nextId:0,panelVisible:!1},reducers:{addLogItem(e,t){const{auxiliaryId:n,message:o,module:a,level:i,timestamp:l}=t.payload,c={id:e.nextId,timestamp:(0,r.default)(l)?Date.now():l,message:o??"",module:a??"",level:i??0,auxiliaryId:n??""};e.items.push(c),e.nextId+=1,e.panelVisible||void 0===i||(e.highestUnseenMessageLevel=Math.max(e.highestUnseenMessageLevel,i))},clearLogItems(e){e.items=[],e.highestUnseenMessageLevel=-1},deleteLogItem(e,t){const n=t.payload,r=e.items.findIndex(e=>e.id===n);r>=0&&e.items.splice(r,1)},updateLogPanelVisibility(e,t){e.panelVisible=Boolean(t.payload),e.panelVisible&&(e.highestUnseenMessageLevel=-1)}}}),{addLogItem:l,clearLogItems:c,deleteLogItem:s,updateLogPanelVisibility:u}=a,f=i},6580:()=>{},6659:(e,t,n)=>{"use strict";n.d(t,{Ck:()=>V,Ej:()=>Q,Eo:()=>W,F7:()=>U,Gk:()=>ne,I9:()=>Z,Jj:()=>J,LL:()=>K,MZ:()=>X,Np:()=>ee,eo:()=>M,fU:()=>D,gF:()=>te,gk:()=>$,iZ:()=>F,mR:()=>B,mm:()=>z,rp:()=>q});n(52675),n(89463),n(2259),n(45700),n(2008),n(23418),n(23792),n(62062),n(34782),n(89572),n(62010),n(55081),n(2892),n(25428),n(9868),n(69085),n(52811),n(83851),n(81278),n(40875),n(79432),n(10287),n(26099),n(3362),n(27495),n(90906),n(38781),n(47764),n(98992),n(54520),n(3949),n(81454),n(23500),n(62953);var r=n(13293),o=n(70185),a=n(77500),i=n(50791),l=n(74022),c=n(44294),s=n(1932),u=n(26144),f=(n(71042),n(15786),n(16054)),d=n(58718),p=n(67932),m=n(40881),y=n(92895),g=n(62528),b=n(27989),v=n(40861),h=n(39441),A=n(74144),S=n(71458),E=n(69897),O=n(37813),w=n(3825);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return _(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(_(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,_(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,_(f,"constructor",s),_(s,"constructor",c),c.displayName="GeneratorFunction",_(s,o,"GeneratorFunction"),_(f),_(f,o,"Generator"),_(f,r,function(){return this}),_(f,"toString",function(){return"[object Generator]"}),(k=function(){return{w:a,m:d}})()}function _(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}_=function(e,t,n,r){function a(t,n){_(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},_(e,t,n,r)}function N(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function R(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){N(a,r,o,i,l,"next",e)}function l(e){N(a,r,o,i,l,"throw",e)}i(void 0)})}}var D=function(){return function(e){e((0,w.eD)(Date.now()))}},M=function(){return function(e,t){var n=(0,O.Rf)(t());e((0,w.rU)(n)),n&&e((0,f.I9)(!0))}},L=function(){return(0,y.G)(S.jp)},F=function(){return function(e){e((0,w.j8)()),e((0,f.V7)(g.Pp.UNKNOWN))}},U=function(){return function(e,t){var n=(0,O.LP)(t());e((0,w.gJ)({clock:n,time:void 0})),e((0,w.L5)("toServer"))}},G=function(){return function(e,t){var n=t(),r=(0,O.S6)(n),o=(0,O.on)(n),a=(0,O.sN)(n);e((0,f.V7)(g.Pp.SHOW)),e((0,f.fH)(r)),e((0,f.Rs)(o)),e((0,f.B5)(a))}},V=function(e){return function(t,n){var r=(0,O.wA)(n()),o=(0,b.Yn)(r,e);t(z({origin:o,setupMission:!0}))}},B=function(e,t){return function(n,r){var o=(0,b.Ur)((0,O.wA)(r())),a=new c.default(o);a.rotate((0,v.eh)(-e),t);var i,l=(0,b.Al)(a.flatCoordinates);n((0,w.eR)(l)),n((i=e,function(e,t){var n=(0,O.gQ)(t())+i;Number.isFinite(n)&&e(z({orientation:n.toFixed(1),setupMission:!0}))}))}},z=function(e){var t=e.origin,n=e.orientation,r=e.takeoffHeading,o=e.setupMission;return function(e){var a=!1;t&&(e((0,w.eR)(t)),a=!0),n&&(e((0,w.M8)(n)),a=!0),r&&(e((0,w.Jt)(r)),a=!0),a&&(e(L()),o&&e(G()))}},H=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).errorMessage,n=(0,h.vR)("show/loading",e,{minDelay:500});return function(e){return function(){var r=R(k().m(function r(o,a){var i,c,s;return k().w(function(r){for(;;)switch(r.p=r.n){case 0:return i=(0,l.A)(function(e){o({type:w.sH.type,payload:e})},200),o((0,w.xP)(!1)),o(L()),r.p=1,c=o(n(e,{dispatch:o,getState:a,onProgress:i})),r.n=2,c;case 2:s=r.v,Y(s.value.spec,o),r.n=4;break;case 3:r.p=3,r.v,o((0,d.Ds)({message:t||"Failed to load show.",semantics:p.N.ERROR,permanent:!0})),o((0,w.xP)(!0));case 4:return r.a(2)}},r,null,[[1,3]])}));return function(e,t){return r.apply(this,arguments)}}()}},W=H(function(){var e=R(k().m(function e(t){var n,o,a,i,l;return k().w(function(e){for(;;)switch(e.n){case 0:return n=t&&t.path?"file://".concat(t.path):void 0,e.n=1,A.A.loadShow(t,{returnBlob:!0});case 1:return o=e.v,a=o.spec,i=o.blob,l=i?r.o4.fromUint8Array(i):void 0,e.a(2,{spec:Object.freeze(a),url:n,base64Blob:l})}},e)}));return function(t){return e.apply(this,arguments)}}(),{errorMessage:"Failed to load show from the given file."}),q=H(function(){var e=R(k().m(function e(t){var n,o;return k().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,A.A.loadShow(r.o4.toUint8Array(t),{returnBlob:!1});case 1:return n=e.v,o=n.spec,e.a(2,{spec:Object.freeze(o),base64Blob:t})}},e)}));return function(t){return e.apply(this,arguments)}}(),{errorMessage:"Failed to load show from the given base64-encoded data."}),K=H(function(){var e=R(k().m(function e(t,n){var r,a,i,l,c,f;return k().w(function(e){for(;;)switch(e.n){case 0:return r=n.onProgress,e.n=1,(0,o.Ay)(t,{onDownloadProgress:function(e){e.totalBytes>0&&r(e.percent)}}).arrayBuffer();case 1:return a=e.v,e.n=2,(0,u.loadShowSpecificationAndZip)(a);case 2:return i=e.v,l=i.showSpec,c=i.zip,e.n=3,c.generateAsync({type:"base64"});case 3:return f=e.v,e.a(2,{spec:(0,s.CN)(l),url:t,base64Blob:f})}},e)}));return function(t,n){return e.apply(this,arguments)}}(),{errorMessage:"Failed to load show from the given URL."});function Y(e,t){var n=(0,a.A)(e,"swarm.drones");t((0,f.FH)(n.length));var r=(0,a.A)(e,"environment");r.type&&t((0,w.Al)(r.type)),"indoor"===r.type&&t((0,w.eR)(null)),t(G()),t((0,w.Po)()),"indoor"===r.type&&t((0,w.U9)(E._9.AUTO))}function $(){return function(){var e=R(k().m(function e(t,n){var r,o,a,i,l,c;return k().w(function(e){for(;;)switch(e.n){case 0:if(r=globalThis.bridge.getFileAsBlob){e.n=1;break}return e.a(2);case 1:if(!(o=(0,O.b8)(n()))){e.n=3;break}return e.n=2,r(o);case 2:return a=e.v,i=a.buffer,l=a.props,c=new Blob([i]),Object.assign(c,l),e.a(2,t(W(c)));case 3:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()}var Z=function(){return function(e){e((0,w.dQ)(Date.now()))}},J=function(){return function(e){e((0,w.c4)(Date.now()))}},X=function(e){return function(t,n){var r=(0,O.K3)(n());t((0,w.W3)([e,r[1]]))}},Q=function(e){return function(t,n){var r=(0,O.K3)(n());t((0,w.W3)([r[0],e]))}},ee=function(e){return function(t,n){t((0,w.qH)(j(j({},(0,O.xL)(n())),{},{type:e}))),t(L())}},te=function(e){return function(t,n){var r=Number(e);Number.isFinite(r)&&r>=-1e4&&r<=1e4&&(t((0,w.qH)(j(j({},(0,O.xL)(n())),{},{value:r}))),t(L()))}},ne=function(){return function(e,t){var n,r=t(),o=[],a=C((0,m.T4)(r));try{for(a.s();!(n=a.n()).done;){var l=n.value,c=(0,m.fk)(r,l);c&&"number"==typeof c.amsl&&Number.isFinite(c.amsl)&&o.push(c.amsl)}}catch(e){a.e(e)}finally{a.f()}if(o.length>0){var s=(0,i.A)(o)/o.length;e(te(s.toFixed(1)))}}}},6692:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>y,HC:()=>s,_l:()=>m,eQ:()=>u,h5:()=>p,hO:()=>d,pK:()=>f});var r=n(65307),o=n(16238),a=n(39441);const i={manifest:o.Tg,rebootAfterUpload:!1,dialog:{open:!1}},{actions:l,reducer:c}=(0,r.Z0)({name:"parameters",initialState:i,reducers:{clearManifest:(0,a.kP)(e=>{(0,o.d5)(e.manifest)}),closeParameterUploadSetupDialog:(0,a.kP)(e=>{e.dialog.open=!1}),removeParameterFromManifest(e,t){const{payload:n}=t,{manifest:r}=e;n&&"string"==typeof n&&(0,o.T$)(r,n)},setRebootAfterUpload(e,t){e.rebootAfterUpload=Boolean(t.payload)},showParameterUploadSetupDialog:(0,a.kP)(e=>{e.dialog.open=!0}),updateParametersInManifest(e,t){const{payload:n}=t,{manifest:r}=e;if(Array.isArray(n))for(const{name:e,value:t}of n)r.order.includes(e)&&(0,o.T$)(r,e),(0,o.BS)(r,{id:e,name:e,value:t})}}}),{clearManifest:s,closeParameterUploadSetupDialog:u,removeParameterFromManifest:f,setRebootAfterUpload:d,showParameterUploadSetupDialog:p,updateParametersInManifest:m}=l,y=c},7042:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>u,CF:()=>l,gP:()=>s,jr:()=>c});var r=n(65307);const o={open:!1,type:n(21417).r.GENERIC,initialValues:{},schema:{},cancelButtonLabel:void 0,message:void 0,submitButtonLabel:void 0,title:void 0},{reducer:a,actions:i}=(0,r.Z0)({name:"prompt",initialState:o,reducers:{_cancelPromptDialog(e){e.open=!1},_showPromptDialog(e,{payload:t}){e.open=!0,Object.assign(e,t)},_submitPromptDialog(e){e.open=!1}}}),{_cancelPromptDialog:l,_showPromptDialog:c,_submitPromptDialog:s}=i,u=a},7125:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var r=n(31601),o=n.n(r),a=n(76314),i=n.n(a),l=n(4417),c=n.n(l),s=new URL(n(29287),n.b),u=new URL(n(15911),n.b),f=new URL(n(46465),n.b),d=new URL(n(49947),n.b),p=new URL(n(44131),n.b),m=new URL(n(67309),n.b),y=i()(o()),g=c()(s),b=c()(u),v=c()(f),h=c()(d),A=c()(p),S=c()(m);y.push([e.id,`@font-face {\n  font-family: 'DSEG14-Classic';\n  src: url(${g}) format('woff2'),\n  url(${b}) format('woff'),\n  url(${v}) format('truetype');\n  font-weight: normal;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: 'DSEG7-Classic';\n  src: url(${h}) format('woff2'),\n  url(${A}) format('woff'),\n  url(${S}) format('truetype');\n  font-weight: normal;\n  font-style: normal;\n}\n`,""]);const E=y},7213:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,o:()=>a});var r=n(65307);const o={lastError:void 0,open:!1},{actions:a,reducer:i}=(0,r.Z0)({name:"authentication-dialog",initialState:o,reducers:{authenticateToServerFulfilled(e,{payload:t}){t.result?(e.lastError=void 0,e.open=!1):e.lastError=t.reason??"Unexpected failure"},authenticateToServerPending(e){e.lastError=void 0},closeAuthenticationDialog(e){e.lastError=void 0,e.open=!1},showAuthenticationDialog(e){e.lastError=void 0,e.open=!0}}})},7598:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(74848),o=n(19318),a=n(96540),i=n(81709);n(25045);const l=(0,a.forwardRef)((e,t)=>{const{interactions:n,...l}=e,c=(0,a.useMemo)(()=>n??(0,o.N)({keyboard:!1}),[n]);return(0,r.jsx)(i.T5,{interactions:c,ref:t,...l})})},8268:(e,t,n)=>{"use strict";e.exports=n.p+"17aa0f96c6a6c12802d0.png"},9702:(e,t,n)=>{"use strict";var r,o;n.d(t,{Q:()=>r,o:()=>o}),function(e){e.LOGS="logs",e.MESSAGES="messages",e.PREFLIGHT="preflight",e.TESTS="tests"}(r||(r={})),function(e){e.LOGS="logs",e.MESSAGES="messages",e.PREFLIGHT="preflight",e.TESTS="tests"}(o||(o={}))},10953:(e,t,n)=>{"use strict";var r;n.d(t,{h:()=>r}),function(e){e.NEU="neu",e.NWU="nwu"}(r||(r={}))},11104:(e,t,n)=>{"use strict";n.d(t,{I:()=>v,Q:()=>b});n(52675),n(89463),n(2259),n(45700),n(2008),n(23418),n(23792),n(62062),n(34782),n(89572),n(62010),n(2892),n(25428),n(9868),n(83851),n(81278),n(79432),n(26099),n(27495),n(90906),n(38781),n(47764),n(98992),n(54520),n(3949),n(81454),n(23500),n(62953);var r=n(6746),o=n(58718),a=n(40881),i=n(51533),l=n(27989),c=n(39064),s=n(91436);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){return"number"==typeof e.amsl&&Number.isFinite(e.amsl)},b=function(e){var t=e.coords,n=e.uavIds;return function(e,o){var l=o(),c=function(e){return(0,a.fk)(l,e)},u=n.filter(c).map(c),f=u.length;if(!(f<=0)){var d=1===f?u[0].ahl:(0,r.A)(u.filter(g),"amsl"),p=Number.isFinite(d)?d:0,m=1===f&&p?"ahl":"amsl",y=(0,i.MH)(l);e((0,s.Yq)({coords:y(t),mode:m,altitude:Number(p.toFixed(1))}))}}},v=function(e){return function(t,n){var r=(0,l.EK)(e.coords),i=n(),u=(0,a.YZ)(i);if(r)if(0===u.length)t((0,o.Qg)("Selection is empty"));else{var d=Number(e.altitude),p={lat:r[1],lon:r[0]};if(Number.isFinite(d))if("agl"===e.mode)p.agl=d;else if("ahl"===e.mode)p.ahl=d;else if("amsl"===e.mode)p.amsl=d;else if("relative"===e.mode&&Math.abs(d)>.01){var y=m({},p);p=function(e){var t=(0,a.fk)(i,e);return t&&t.amsl?m(m({},y),{},{amsl:t.amsl+d}):t&&t.ahl?m(m({},y),{},{ahl:t.ahl+d}):t&&t.agl?m(m({},y),{},{agl:t.agl+d}):void 0}}if("function"==typeof p){var g,b=f(u);try{for(b.s();!(g=b.n()).done;){var v=g.value,h=p(v);h&&(0,c.hU)([v],{target:h})}}catch(e){b.e(e)}finally{b.f()}}else(0,c.hU)(u,{target:p})}else t((0,o.Qg)("Coordinate format invalid"));t((0,s.ic)())}}},11191:(e,t,n)=>{"use strict";function r(e){if("string"!=typeof e||e.includes("."))throw new Error(`Invalid extension name: ${e}`)}function o(e){if("string"!=typeof e||0===e.length)throw new Error(`Invalid object ID: ${e}`)}n.d(t,{p:()=>o,r:()=>r})},12208:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(85072),o=n.n(r),a=n(97825),i=n.n(a),l=n(77659),c=n.n(l),s=n(55056),u=n.n(s),f=n(10540),d=n.n(f),p=n(41113),m=n.n(p),y=n(2871),g={};g.styleTagTransform=m(),g.setAttributes=u(),g.insert=c().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=d();o()(y.A,g);const b=y.A&&y.A.locals?y.A.locals:void 0},13732:()=>{},14024:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var r=n(31601),o=n.n(r),a=n(76314),i=n.n(a),l=n(4417),c=n.n(l),s=new URL(n(54244),n.b),u=new URL(n(31746),n.b),f=new URL(n(73970),n.b),d=i()(o()),p=c()(s),m=c()(u),y=c()(f);d.push([e.id,`@font-face {\n  font-family: 'Proggy Vector';\n  src: url(${p}) format('woff2'),\n  url(${m}) format('woff'),\n  url(${y}) format('truetype');\n  font-weight: normal;\n  font-style: normal;\n}\n`,""]);const g=d},14141:(e,t,n)=>{"use strict";e.exports=n.p+"accfa46338ac100df097.png"},14648:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});n(52675),n(89463),n(2259),n(45700),n(2008),n(23418),n(23792),n(62062),n(34782),n(89572),n(62010),n(2892),n(69085),n(40875),n(10287),n(26099),n(60825),n(27495),n(90906),n(38781),n(47764),n(98992),n(54520),n(81454),n(62953);var r=n(83869),o=n(58704),a=n(96702),i=n(34142),l=n(6292),c=n(60764),s=n(82986),u=n(5556),f=n.n(u),d=n(97258),p=n(27989),m=n(40861),y=n(20867);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function A(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}function S(e,t,n){return t=O(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,E()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(E=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}var T=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=S(this,t,[{handleEvent:function(t){var n=o.doubleClick(t);if(!o.click(t)&&!n)return!0;if(!o.primaryAction(t))return!0;if(!e._condition(t))return!0;if(!e._select)return!0;e._layerSelectorFunction||(e._layerSelectorFunction=(0,y.h)(e._layers));var a,i,l=t.coordinate,c=t.map;if(c.forEachFeatureAtPixel(t.pixel,function(t){if(e._isFeatureFeasible(t))return a=t,i=0,!0},{layerFilter:e._layerSelectorFunction}),!a){var s,u=(0,r.A)(e._distanceOfEventFromFeature,t),f=b(c.getLayers().getArray().filter(e._isLayerFeasible).filter(e._layerSelectorFunction).map(function(t){var n=t.getSource();return n?n.getClosestFeatureToCoordinate(l,e._isFeatureFeasible):void 0}).filter(e._isFeatureFeasible).reverse());try{for(f.s();!(s=f.n()).done;){var d=s.value;if((i=u(d))<=e._threshold){a=d;break}}}catch(e){f.e(e)}finally{f.f()}}var p=e._activateCondition(t)?"activate":e._addCondition(t)?"add":e._removeCondition(t)?"remove":e._toggleCondition(t)?"toggle":"set";return void 0!==a?(e._select(p,a,i),!1):("set"===p&&e._select("clear"),!0)}}]);var a={condition:o.primaryAction,activateCondition:o.never,addCondition:o.never,removeCondition:o.never,toggleCondition:o.never,threshold:Number.POSITIVE_INFINITY};return n=Object.assign(a,n),e._condition=n.condition,e._activateCondition=n.activateCondition,e._addCondition=n.addCondition,e._removeCondition=n.removeCondition,e._toggleCondition=n.toggleCondition,e._select=n.onSelect,e._threshold=n.threshold,e.setLayers(n.layers),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),n=t,(l=[{key:"_distanceOfEventFromFeature",value:function(e,t){var n=t.getGeometry()instanceof i.default?new a.A(t.getGeometry().getCoordinates()):t.getGeometry(),r=(0,p.OU)(n,e.coordinate),o=e.map.getPixelFromCoordinate(r);return(0,m.CX)(e.pixel,o)}},{key:"getLayers",value:function(){return this._layers}},{key:"_isFeatureFeasible",value:function(e){return Boolean(e)&&!e.get("skipSelection")}},{key:"_isLayerFeasible",value:function(e){return e&&e.getVisible()&&e instanceof s.default}},{key:"setLayers",value:function(e){this._layers=e,this._layerSelectorFunction=void 0}}])&&h(n.prototype,l),c&&h(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,l,c}(l.Ay);const C=(0,d.createOLInteractionComponent)("SelectNearestFeature",function(e){return new T(e)},{propTypes:{activateCondition:f().func,addCondition:f().func,layers:f().oneOfType([f().func,f().arrayOf(c.default)]),removeCondition:f().func,onSelect:f().func,threshold:f().number,toggleCondition:f().func},fragileProps:["activateCondition","addCondition","layers","removeCondition","threshold","toggleCondition"]})},14968:(e,t,n)=>{"use strict";n.d(t,{Kk:()=>c,bB:()=>l,nk:()=>s});var r=n(25508),o=n(59116),a=n(61212),i=n(98964);const l=e=>e.map.layers,c=(0,r.Mz)(l,a.UJ,a.q9,({order:e,byId:t},n,r)=>({order:e,byId:n?(0,o.A)(t,e=>i.q5.includes(e.type)&&!r?{id:e.id,type:i.mb.UNAVAILABLE,label:e.label,visible:!1,parameters:{}}:e):t})),s=e=>(0,r.Mz)(c,t=>t.byId[e])},15224:(e,t,n)=>{"use strict";n.d(t,{A:()=>c,L:()=>l});var r=n(65307);const o={contents:"\nYou can use Markdown syntax to format your notes, such as **bold**, _italic_ or ~~strikethrough~~.\nSee https://quickref.me/markdown for a quick reference guide to Markdown syntax.\n    ".trim()},{actions:a,reducer:i}=(0,r.Z0)({name:"field-notes",initialState:o,reducers:{updateFieldNotes(e,{payload:t}){e.contents=t}}}),{updateFieldNotes:l}=a,c=i},15340:()=>{},15518:(e,t,n)=>{"use strict";n.d(t,{ZZ:()=>Y,fm:()=>z});n(2008),n(46449),n(74423),n(62062),n(34782),n(93514),n(52675),n(89463),n(2259),n(45700),n(23418),n(23792),n(89572),n(62010),n(2892),n(69085),n(83851),n(81278),n(79432),n(26099),n(21699),n(27495),n(90906),n(38781),n(47764),n(98992),n(54520),n(3949),n(81454),n(23500),n(62953);var r=n(44913),o=n(18803),a=n(63486),i=n(30503),l=n(25252),c=n(34142),s=n(27733),u=n(29276),f=n(81426),d=n(5556),p=n.n(d),m=n(96540),y=n(61225),g=n(81709),b=n(95025),v=n(40535),h=n(59952),A=n(71042),S=n(20330),E=n(35026),O=n(58718),w=n(18728),T=n(37802),C=n(27989),I=n(40861),x=n(26649);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}var P=["feature","isSelected","isGeofence","shouldFill","shouldShowPoints","suggestedColor"];function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(null,arguments)}function _(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){D(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){if(e){if("string"==typeof e)return L(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var F=function(e){var t=e.points,n=e.type,r=t.map((0,o.A)(C.Ur));switch(n){case w.lo.CIRCLE:if(r.length>=2){var a=r[0],i=(0,I.CX)(r[0],r[1]);return m.createElement(g.N4.Circle,{center:a,radius:i})}return null;case w.lo.POINTS:return r.length>1?m.createElement(g.N4.MultiPoint,{coordinates:r}):m.createElement(g.N4.Point,{coordinates:r[0]});case w.lo.LINE_STRING:return m.createElement(g.N4.LineString,{coordinates:r});case w.lo.POLYGON:var l;(0,I.hR)(r);var c,s=(null!==(l=e.holes)&&void 0!==l?l:[]).map(function(e){return e.map((0,o.A)(C.Ur))}),u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=M(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(s);try{for(u.s();!(c=u.n()).done;){var f=c.value;(0,I.hR)(f)}}catch(e){u.e(e)}finally{u.f()}return m.createElement(g.N4.Polygon,{coordinates:r,holes:s});default:return null}},U=new u.default({stroke:x.nM}),G=D(D({},w.UQ.THIN_OUTLINE,x.Fu),w.UQ.THICK_OUTLINE,x.nM),V=function(e){return new i.default(e.getGeometry().getCoordinates())},B=function(e){return new i.default(e.getGeometry().getCoordinates().flat())},z=function(e,t){return new u.default({image:new s.A(R(R({},e&&{stroke:x.Fu}),{},{fill:(0,x.GS)(t),radius:5})),geometry:B})},H=function(e,t){var n,o,i,d,p=t.isGeofence,m=void 0!==p&&p,y=t.isSelected,g=void 0!==y&&y,b=t.shouldShowPoints,v=t.suggestedColor,h=t.shouldFill,A=e.label,S=e.labelStyle,E=e.measure,O=e.showPoints,T=e.type,I=(0,r.A)(v),j=[];switch(T){case w.lo.POINTS:j.push(new u.default({image:new s.A(R(R({},g&&{stroke:x.Fu}),{},{fill:(0,x.GS)(I.rgb().array()),radius:6}))}));break;case w.lo.LINE_STRING:g&&j.push(U),j.push(new u.default({stroke:(m?x.bp:x.SC)(I.rgb().array())})),b&&j.push((i=g,d=I.rgb().array(),new u.default({image:new s.A(R(R({},i&&{stroke:x.Fu}),{},{fill:(0,x.GS)(d),radius:5})),geometry:V})));break;case w.lo.POLYGON:j.push(new u.default({stroke:(0,x.mq)(I.rgb().array()),geometry:function(e){var t=L(_(e.getGeometry().getCoordinates())).slice(1);return new l.A(t.map(function(e){return[e]}))},zIndex:1})),(null!=O?O:b)&&j.push(z(g,I.rgb().array()));default:!h||null!=e&&null!==(n=e.attributes)&&void 0!==n&&n.isExclusionZone||j.push(new u.default({fill:(0,x.GS)(I.fade(g?.5:.75).rgb().array())})),null!=e&&null!==(o=e.attributes)&&void 0!==o&&o.isExclusionZone&&j.push(new u.default({fill:new a.A({pattern:"hatch",color:I.fade(g?.5:.75).rgb().array(),size:10,spacing:20,angle:45}),zIndex:1})),g&&j.push(U),j.push(new u.default({stroke:(m?x.bp:x.SC)(I.rgb().array()),geometry:function(e){if(T===w.lo.POLYGON){var t=e.getGeometry().getCoordinates()[0];return new c.default([t])}return e.getGeometry()}}))}return A&&A.length>0&&S!==w.UQ.HIDDEN&&j.push(new u.default({text:new f.default({font:"12px sans-serif",offsetY:T===w.lo.POINTS?16:0,placement:T===w.lo.LINE_STRING?"line":"point",stroke:G[S],text:A,textAlign:"center",textBaseline:T===w.lo.LINE_STRING?"bottom":"middle"})})),E&&j.push(new u.default({text:new f.default({font:"12px sans-serif",offsetY:T===w.lo.LINE_STRING?3:15,placement:"lineString"===T?"line":"point",stroke:G[S],text:"(".concat((0,C.TQ)(e),")"),textAlign:"center",textBaseline:T===w.lo.LINE_STRING?"top":"middle"})})),j},W=function(e){var t=e.feature,n=e.isSelected,r=e.isGeofence,o=e.shouldFill,a=e.shouldShowPoints,i=e.suggestedColor,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,P);return m.createElement(g.Xj,k({id:(0,T.Du)(t.id),style:H(t,{isGeofence:r,isSelected:n,shouldFill:o,shouldShowPoints:a,suggestedColor:i})},l),F(t))};W.propTypes={feature:p().object.isRequired,isGeofence:p().bool,isSelected:p().bool,shouldFill:p().bool,shouldShowPoints:p().bool,suggestedColor:p().string};var q=(0,y.Ng)(function(e,t){var n=t.feature;return{isGeofence:(0,E.Md)(e)===n.id,isSelected:(0,A.sU)(e).includes(n.id),shouldFill:(0,S.Vl)(e,n.id),shouldShowPoints:(0,S.zj)(e,n.id),suggestedColor:(0,S.MJ)(e,n.id)}})(W),K=function(e){var t=e.features,n=e.onError,r=e.onFeatureModificationStarted,o=e.onFeaturesModified,a=e.selectedTool,i=e.layerRefHandler,l=void 0===i?v.t2:i,c=e.zIndex;return m.createElement(g.qd.Vector,{ref:l,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:c},m.createElement(g.sP.Vector,null,t.filter(function(e){return e.visible}).map(function(e){return m.createElement(q,{key:e.id,feature:e})}),a===h.NL.CUT_HOLE?m.createElement(g.vY.CutHole,{abortCondition:b.Fm,onError:n,onCutStart:r,onCutEnd:o}):null))};K.propTypes={selectedTool:p().string,zIndex:p().number,layerRefHandler:p().func,features:p().arrayOf(p().object).isRequired,onError:p().func,onFeatureModificationStarted:p().func,onFeaturesModified:p().func};var Y=(0,y.Ng)(function(e){return{features:(0,A.VQ)(e)}},function(e){return{onError:function(t){e((0,O.Qg)(t))}}})(K)},15786:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>h,Hk:()=>u,Ig:()=>p,Jh:()=>m,Te:()=>g,Ui:()=>v,ai:()=>y,ci:()=>d,oP:()=>b,sO:()=>s,tl:()=>f});var r=n(65307),o=n(16238);const a=[void 0,!0,!1],i=e=>a[(a.indexOf(e)+1)%a.length],{actions:l,reducer:c}=(0,r.Z0)({name:"features",initialState:{byId:{},order:[]},reducers:{addFeatureById(e,t){const{id:n,feature:r,properties:a}=t.payload,{points:i,type:l}=r;if(!n)throw new Error("Feature must have an ID");if(!l)throw new Error("Feature must have a type");if(!i||0===i.length)throw new Error("Feature must have at least one point");if(e.byId[n])throw new Error("Feature ID is already taken");const c={id:n,visible:!0,...structuredClone(r),...a};t.featureId=n,(0,o.$$)(e,c)},removeFeaturesByIds(e,t){(0,o.Zj)(e,t.payload)},renameFeature(e,t){const{id:n,name:r}=t.payload,o=e.byId[n];void 0===o||(o.label=""===r?void 0:r)},setFeatureColor(e,t){const{id:n,color:r}=t.payload,o=e.byId[n];void 0===o||(o.color=r)},updateFeatureAttributes(e,t){const{id:n,attributes:r}=t.payload,o=e.byId[n];void 0===o||(o.attributes={...o.attributes,...r})},toggleFeatureFillVisible(e,t){const{id:n}=t.payload,r=e.byId[n];void 0===r||(r.filled=i(r.filled))},toggleFeatureMeasurementVisible(e,t){const{id:n}=t.payload,r=e.byId[n];void 0===r||(r.measure=i(r.measure))},toggleFeaturePointsVisible(e,t){const{id:n}=t.payload,r=e.byId[n];void 0===r||(r.showPoints=i(r.showPoints))},updateFeaturePropertiesByIds(e,t){for(const[n,r]of Object.entries(t.payload)){const t=e.byId[n];t&&Object.assign(t,r)}},updateFeatureVisibility(e,t){const{id:n,visible:r}=t.payload,o=e.byId[n];void 0===o||(o.visible=Boolean(r))}}}),{addFeatureById:s,removeFeaturesByIds:u,renameFeature:f,setFeatureColor:d,toggleFeatureFillVisible:p,toggleFeatureMeasurementVisible:m,toggleFeaturePointsVisible:y,updateFeatureAttributes:g,updateFeaturePropertiesByIds:b,updateFeatureVisibility:v}=l,h=c},15911:(e,t,n)=>{"use strict";e.exports=n.p+"4fee81dc0969cba3673c.woff"},16054:(e,t,n)=>{"use strict";n.d(t,{Vh:()=>J,B:()=>y,su:()=>g,Wy:()=>b,Xg:()=>v,MH:()=>h,$V:()=>S,XF:()=>E,Ay:()=>X,hH:()=>O,JK:()=>w,Oy:()=>T,Wb:()=>C,$q:()=>I,I9:()=>x,CE:()=>j,dJ:()=>P,kl:()=>k,z$:()=>_,RK:()=>N,FH:()=>R,CA:()=>D,r1:()=>M,Gy:()=>L,Ky:()=>F,gG:()=>U,V7:()=>G,c8:()=>V,OX:()=>B,re:()=>z,FQ:()=>H,n2:()=>W,NO:()=>q,fH:()=>K,Rs:()=>Y,RQ:()=>$,B5:()=>Z});var r=n(97859),o=n(65307),a=n(26144),i=n(15786),l=n(26625),c=n(62528),s=n(16238),u=n(39441);function f(e,t){const n=t.length;if(n<e){const r=t.concat();return r.length=e,r.fill(null,n),r}return t.slice(0,e)}const d={type:c.Pp.UNKNOWN,mapping:[],homePositions:[],landingPositions:[],takeoffHeadings:[],mappingEditor:{enabled:!1,indexBeingEdited:-1,calculating:!1},preferredChannelIndex:0,commandsAreBroadcast:!1,geofencePolygonId:void 0,geofenceAction:l.FU.RETURN,name:void 0,items:{byId:{},order:[]},editorPanel:{followScroll:!1},plannerDialog:{applyGeofence:!1,open:!1,parameters:{fromUser:{},fromContext:{}},selectedType:void 0},lastSuccessfulPlannerInvocationParameters:void 0,progress:{currentItemId:void 0,currentItemRatio:void 0},lastClearedMissionData:void 0},{actions:p,reducer:m}=(0,o.Z0)({name:"mission",initialState:d,reducers:{addMissionItem(e,t){const{item:n,index:r}=t.payload,{id:o,type:a}=n;if(!o)throw new Error("Mission item must have an ID");if(!a)throw new Error("Mission item must have a type");if(e.items.byId[o])throw new Error("Mission item ID is already taken");"number"==typeof r?(0,s.Mw)(e.items,n,r):(0,s.$$)(e.items,n)},adjustMissionMapping(e,t){const{uavId:n,to:o}=t.payload,a=e.mapping.indexOf(n),i=(0,r.default)(o)?null:e.mapping[o];a>=0&&(e.mapping[a]=i??null),(0,r.default)(o)||(e.mapping[o]=n)},calculateMappingPromisePending(e){e.mappingEditor.calculating=!0},calculateMappingPromiseFulfilled(e){e.mappingEditor.calculating=!1},calculateMappingPromiseRejected(e){e.mappingEditor.calculating=!1},cancelMappingEditorSessionAtCurrentSlot:(0,u.kP)(e=>{e.mappingEditor.indexBeingEdited=-1}),clearGeofencePolygonId:(0,u.kP)(e=>{e.geofencePolygonId=void 0}),clearMapping(e){e.mapping=Array.from({length:e.mapping.length},()=>null)},clearMappingSlot(e,t){const n=t.payload;n>=0&&n<e.mapping.length&&(e.mapping[n]=null)},closeMissionPlannerDialog:(0,u.kP)(e=>{e.plannerDialog.open=!1}),finishMappingEditorSession:(0,u.kP)(e=>{e.mappingEditor.enabled=!1,e.mappingEditor.indexBeingEdited=-1}),commitMappingEditorSessionAtCurrentSlot(e,t){const{continuation:n,value:o}=t.payload,a="string"==typeof o&&o.trim().length>0?o:null,i=e.mappingEditor.indexBeingEdited;if(i>=0&&i<e.mapping.length){const t=e.mapping[i],n=null===a?-1:e.mapping.indexOf(a);n>=0&&(e.mapping[n]=t??null),e.mapping[i]=a}e.mappingEditor.indexBeingEdited=function(e,t){const{mapping:n}=e,o=e.mappingEditor.indexBeingEdited,a=n.length,i="prev"===t||"prevEmpty"===t?-1:"next"===t||"nextEmpty"===t?1:0,l="prevEmpty"===t||"nextEmpty"===t;let c;if(0===i)c=-1;else for(c=(o+i)%a;c!==o&&l&&!(0,r.default)(n[c]);c=(c+i)%a);return c===o&&(c=-1),c}(e,n)},moveMissionItem:{prepare:(e,t)=>({payload:{oldIndex:e,newIndex:t}}),reducer(e,t){const{oldIndex:n,newIndex:r}=t.payload,o=e.items.order.length;if(n>=0&&n<o&&r>=0&&r<o&&n!==r){const[t]=e.items.order.splice(n,1);e.items.order.splice(r,0,t)}}},removeMissionItemsByIds(e,t){(0,s.Zj)(e.items,t.payload)},removeUAVsFromMapping(e,t){for(const n of t.payload){const t=e.mapping.indexOf(n);t>=0&&(e.mapping[t]=null)}},replaceMapping(e,t){const n=t.payload;if(!Array.isArray(n))throw new TypeError("New mapping must be an array");if(n.length!==e.mapping.length)throw new Error("Cannot change mapping length with replaceMapping()");e.mapping=n},setCommandsAreBroadcast(e,t){e.commandsAreBroadcast=Boolean(t.payload)},setEditorPanelFollowScroll(e,t){e.editorPanel.followScroll=Boolean(t.payload)},setGeofenceAction(e,t){e.geofenceAction=t.payload},setGeofencePolygonId(e,t){e.geofencePolygonId=t.payload},setMappingLength(e,t){const n="string"==typeof t.payload?Number.parseInt(t.payload,10):t.payload;if(Number.isNaN(n)||n<0||n>a.MAX_DRONE_COUNT)return;const r=e.mapping.length;if(n<r)e.mapping.splice(n),e.homePositions.splice(n),e.landingPositions.splice(n),e.takeoffHeadings.splice(n);else if(n>r){const t=Array.from({length:n-r},()=>null);e.mapping.push(...t),e.homePositions.push(...t),e.landingPositions.push(...t),e.takeoffHeadings.push(...t)}},_setMissionItemsFromValidatedArray(e,{payload:t}){e.items={order:t.map(e=>e.id),byId:Object.fromEntries(t.map(e=>[e.id,e]))},e.progress={currentItemId:void 0,currentItemRatio:void 0}},setMissionType(e,t){e.type="string"==typeof t.payload?t.payload:c.Pp.UNKNOWN},setMissionName(e,t){e.name=t.payload},setMissionPlannerDialogApplyGeofence(e,t){e.plannerDialog.applyGeofence=Boolean(t.payload)},setMissionPlannerDialogSelectedType(e,t){e.plannerDialog.selectedType=t.payload},setMissionPlannerDialogContextParameters(e,t){e.plannerDialog.parameters.fromContext=t.payload},setMissionPlannerDialogUserParameters(e,t){e.plannerDialog.parameters.fromUser=t.payload},setLastSuccessfulPlannerInvocationParameters(e,t){e.lastSuccessfulPlannerInvocationParameters=t.payload},setLastClearedMissionData(e,t){e.lastClearedMissionData=t.payload},showMissionPlannerDialog:(0,u.kP)(e=>{e.plannerDialog.open=!0}),startMappingEditorSessionAtSlot(e,t){const n="number"==typeof t.payload?t.payload:-1,r=n<0||n>=e.mapping.length?-1:n;e.mappingEditor.enabled=!0,e.mappingEditor.indexBeingEdited=r},startMappingEditorSession:(0,u.kP)(e=>{e.mappingEditor.enabled=!0,e.mappingEditor.indexBeingEdited=-1}),togglePreferredChannel(e){e.preferredChannelIndex=e.preferredChannelIndex?0:1},updateCurrentMissionItemId(e,t){e.progress.currentItemId=t.payload,e.progress.currentItemRatio=void 0},updateCurrentMissionItemRatio(e,t){e.progress.currentItemRatio=t.payload},updateHomePositions(e,t){e.homePositions=f(e.mapping.length,t.payload)},updateLandingPositions(e,t){e.landingPositions=f(e.mapping.length,t.payload)},updateMissionItemParameters:{prepare:(e,t)=>({payload:{itemId:e,parameters:t}}),reducer(e,t){const{itemId:n,parameters:r}=t.payload,o=e.items.byId[n];o&&(o.parameters={...o.parameters,...r})}},updateTakeoffHeadings(e,{payload:t}){Array.isArray(t)?e.takeoffHeadings=f(e.mapping.length,t):e.takeoffHeadings=Array.from({length:e.mapping.length},()=>t)}},extraReducers(e){e.addCase(i.Hk,(e,t)=>{const n=t.payload;e.geofencePolygonId&&n.includes(e.geofencePolygonId)&&(e.geofencePolygonId=void 0)})}}),{addMissionItem:y,adjustMissionMapping:g,cancelMappingEditorSessionAtCurrentSlot:b,clearGeofencePolygonId:v,clearMapping:h,clearMappingSlot:A,closeMissionPlannerDialog:S,commitMappingEditorSessionAtCurrentSlot:E,finishMappingEditorSession:O,moveMissionItem:w,removeMissionItemsByIds:T,removeUAVsFromMapping:C,replaceMapping:I,setCommandsAreBroadcast:x,setEditorPanelFollowScroll:j,setGeofenceAction:P,setGeofencePolygonId:k,setLastClearedMissionData:_,setLastSuccessfulPlannerInvocationParameters:N,setMappingLength:R,setMissionName:D,setMissionPlannerDialogApplyGeofence:M,setMissionPlannerDialogContextParameters:L,setMissionPlannerDialogSelectedType:F,setMissionPlannerDialogUserParameters:U,setMissionType:G,showMissionPlannerDialog:V,startMappingEditorSession:B,startMappingEditorSessionAtSlot:z,togglePreferredChannel:H,updateCurrentMissionItemId:W,updateCurrentMissionItemRatio:q,updateHomePositions:K,updateLandingPositions:Y,updateMissionItemParameters:$,updateTakeoffHeadings:Z,_setMissionItemsFromValidatedArray:J}=p,X=m},16238:(e,t,n)=>{"use strict";n.d(t,{$$:()=>O,BF:()=>g,BS:()=>w,H5:()=>N,Im:()=>k,M5:()=>R,Mw:()=>h,T$:()=>x,Tg:()=>y,Yb:()=>_,Zj:()=>j,ch:()=>E,d5:()=>T,dE:()=>P,k5:()=>D,q9:()=>C,so:()=>S,xQ:()=>I});var r=n(39622),o=n(97859),a=n(23149),i=n(85037),l=n(24089),c=n(38189),s=n(13346),u=n(975),f=n(30325),d=n(75348),p=n(39441),m=n(66401);const y=Object.freeze({byId:p.t0,order:p.Ml}),g="@@newItem",b=e=>void 0!==e?.id&&null!==e.id&&""!==e.id&&e.id!==g;class v extends Error{id;constructor(e,t="An item with the same ID already exists"){super(t),this.name="ItemExistsError",this.id=e}}const h=(e,t,n)=>{const o=t&&t.id===g;((e,t)=>{if(b(t)){if((0,r.A)(e.byId,t.id))throw new v(t.id)}else{if(!("name"in t)||"string"!=typeof t.name)throw new Error("New item needs either an ID or a name");t.id=(0,d.ls)(t.name,Object.keys(e.byId))}})(e,t={...t}),e.byId[t.id]=t,n<0?e.order.splice(0,0,t.id):n>=e.order.length?e.order.push(t.id):e.order.splice(n,0,t.id),o&&delete e.byId[g]};function A(e,t,n="id"){if("id"===n)return(0,c.A)(e.order,t.id);const r="function"==typeof n?n:(0,i.A)(n);return(0,s.A)(e.order,t.id,n=>{const o=e.byId[n];return r(void 0===o?t:o)})}const S=(e,t,n="id")=>{const r=A(e,t,n);h(e,t,r)},E=(e,t,n="id")=>{((e,t,n)=>{try{h(e,t,n)}catch(e){}})(e,t,A(e,t,n))},O=(e,t)=>{h(e,t,e.order.length)},w=(e,t)=>{h(e,t,0)},T=e=>{e.byId={},e.order=[]},C=(e,t="id")=>{let n=0;const r={byId:{},order:[]},a="function"==typeof t?t:(0,i.A)(t);for(const t of e){const e=a(t);if((0,o.default)(e))throw new Error(`Item at index ${n} has no key`);if(void 0!==r.byId[e])throw new Error(`Duplicate key: ${e}`);r.byId[e]=t,r.order.push(e),n++}return r},I=(e,t)=>{const n=g;"function"==typeof t?t(n):(0,a.A)(t)&&(t.id=n),e.byId[n]={id:n}},x=(e,t)=>{delete e.byId[t],(0,l.A)(e.order,t)},j=(e,t)=>{for(const n of t)delete e.byId[n];(0,m.A)(e.byId)?e.order.length=0:(0,l.A)(e.order,...t)},P=(e,t)=>{for(const n of t)void 0!==e.byId[n]&&j(e,t)},k=({byId:e,order:t})=>void 0===t?Object.values(e):0===t.length?p.Ml:(0,f.z)(t.map(t=>e[t])),_=(e,t)=>({...e,order:t}),N=(e,t,n="id")=>{b(t)&&e.byId[t.id]?e.byId[t.id]={...t}:S(e,t,n)},R=(e,t)=>{b(t)&&e.byId[t.id]?e.byId[t.id]={...t}:w(e,t)},D=e=>{e.order=(0,u.M)(e.order)}},16248:(e,t,n)=>{"use strict";var r;n.d(t,{p:()=>r}),function(e){e.LON_LAT="lonLat",e.ECEF="ecef"}(r||(r={}))},16258:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>bz});n(52675),n(89463),n(2259),n(45700),n(23792),n(89572),n(2892),n(40875),n(10287),n(26099),n(3362),n(60825),n(47764),n(62953);var r=n(34164),o=n(82041),a=n(5556),i=n.n(a),l=n(96540),c=n(94177),s=n(14224),u=n(61225),f=n(31720),d=n(68131),p=n(6747),m=n(88868),y=(n(79432),n(85072)),g=n.n(y),b=n(97825),v=n.n(b),h=n(77659),A=n.n(h),S=n(55056),E=n.n(S),O=n(10540),w=n.n(O),T=n(41113),C=n.n(T),I=n(30263),x={};x.styleTagTransform=C(),x.setAttributes=E(),x.insert=A().bind(null,"head"),x.domAPI=v(),x.insertStyleElement=w();g()(I.A,x);I.A&&I.A.locals&&I.A.locals;var j={topLeft:"left-top",topRight:"right-top",bottomLeft:"left-bottom",bottomRight:"right-bottom"},P=function(e){var t=e.label,n=e.position,o=void 0===n?"topRight":n;return l.createElement("div",{className:(0,r.A)("corner-ribbon",j[o]),"data-ribbon":t})};P.propTypes={label:i().string,position:i().oneOf(Object.keys(j))};const k=P;var _=n(55370),N=n(25418),R=n(64951),D=n(32389),M=n(61919),L=n(32087),F=(n(2008),n(23418),n(62062),n(34782),n(62010),n(27495),n(90906),n(38781),n(98992),n(81454),n(34477)),U=n(35124),G=n(7506),V=n(90952),B=n(48227),z=function(e){var t=e.dirty,n=e.form,r=e.label,o=e.onSubmit,a=e.t;return l.createElement(F.A,{sx:{display:"flex",flexDirection:"row"}},l.createElement(M.MW,{status:t?"warning":"success"},"".concat(r||"Form",t?" changed; do not forget to save.":" saved.")),n&&l.createElement(l.Fragment,null,l.createElement(B.A,{disabled:!t,onClick:function(){return n.reset()}},a("general.action.reset")),l.createElement(B.A,{color:"primary",disabled:!t,onClick:o},a("general.action.save"))))};z.propTypes={dirty:i().bool.isRequired,form:i().shape({reset:i().func}),label:i().string,onSubmit:i().func,t:i().func};const H=(0,D.CI)()(z);var W,q,K=n(19469);function Y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Z=null!==(W=null===o.A||void 0===o.A||null===(q=o.A.map)||void 0===q?void 0:q.tileProviders)&&void 0!==W?W:{},J=[!!Z.bingMaps&&{label:"Bing Maps",key:"BING"},!!Z.googleMaps&&{label:"Google Maps",key:"GOOGLE"},{label:"Mapbox",key:"MAPBOX"},{label:"Maptiler",key:"MAPTILER"}].filter(Boolean),X=function(e){var t=e.apiKeys,n=e.onSubmit,r=e.t;return l.createElement(V.lV,{initialValues:t,onSubmit:n},function(e){var t=e.dirty,n=e.form,o=e.handleSubmit;return l.createElement(F.A,null,J.map(function(e){return l.createElement(F.A,{key:e.key,sx:{py:1}},l.createElement(G.A_,{fullWidth:!0,name:e.key,label:"".concat(e.label," API key"),variant:"filled"}))}),l.createElement(U.A,{variant:"body2",color:"textSecondary"},r("APIKeysTab.description")),l.createElement(F.A,{sx:{pb:2}}),l.createElement(H,{dirty:t,form:n,label:"API keys",onSubmit:o}))})};X.propTypes={apiKeys:i().object,onSubmit:i().func,t:i().func};const Q=(0,u.Ng)(function(e){return{apiKeys:e.settings.apiKeys}},{onSubmit:function(e){var t,n={},r=Y(J);try{for(r.s();!(t=r.n()).done;){var o=t.value;n[o.key]=e[o.key]?String(e[o.key]):""}}catch(e){r.e(e)}finally{r.f()}return(0,K.uV)("apiKeys",n)}})((0,D.CI)()(X));n(83851),n(81278),n(54520),n(3949),n(23500);var ee=n(27629),te=n(91799),ne=n(87788),re=n(82181),oe=n(49068),ae=n(37603),ie=n(33682),le=(n(69085),n(28706),n(57599)),ce=n(32483),se=n(88634),ue=n(58132),fe=n(46996),de=n(27989),pe=["onChange","value"];function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(null,arguments)}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return be(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,we(r.key),r)}}function he(e,t,n){return t=Se(t),function(e,t){if(t&&("object"==me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ae()?Reflect.construct(t,n||[],Se(e).constructor):t.apply(e,n))}function Ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ae=function(){return!!e})()}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(e)}function Ee(e,t){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ee(e,t)}function Oe(e,t,n){return(t=we(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e){var t=function(e,t){if("object"!=me(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==me(t)?t:t+""}var Te=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Oe(e=he(this,t,[].concat(r)),"state",{dirty:!1,error:void 0,originalText:void 0,text:void 0}),Oe(e,"_onBlur",function(t){e._onMaybeCommitValue({text:t.target.value})}),Oe(e,"_onChange",function(t){e._updateValueFromText(t.target.value)}),Oe(e,"_onClearField",function(){e._updateValueFromText("",{commit:!0})}),Oe(e,"_onKeyDown",function(t){"Enter"===t.key&&(t.preventDefault(),e._updateValueFromText(t.target.value,{commit:!0}))}),Oe(e,"_onMaybeCommitValue",function(t){var n=t.mounted,r=void 0===n||n,o=t.text,a=ge(e._validate(o),2),i=a[0],l=a[1];if(i){var c=e.props,s=c.onChange,u=c.value;s&&!(0,fe.default)(u,l)&&s(l),r&&e._reset()}}),Oe(e,"_onMouseDownOnButton",function(e){e.preventDefault()}),Oe(e,"_reset",function(){e.setState({dirty:!1,text:void 0})}),Oe(e,"_updateValueFromText",function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).commit;e.setState(function(e){return t===e.originalText?{dirty:!1,text:void 0}:{dirty:!0,text:t}}),n?e._onMaybeCommitValue({text:t,mounted:!0}):e._validate(t)}),Oe(e,"_validate",function(t){var n=e.props.required,r=(0,de.EK)(t),o=(""!==t||n)&&void 0===r;return e.setState({error:o?"Not a valid coordinate":void 0}),[!o,r]}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(t,e),n=t,r=[{key:"componentWillUnmount",value:function(){this.state.dirty&&this._onMaybeCommitValue({text:this.state.text,mounted:!1})}},{key:"render",value:function(){var e=this.props,t=(e.onChange,e.value,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,pe)),n=this.state,r=n.dirty,o=n.error,a=n.originalText,i=n.text,c=r?i:a,s=c?l.createElement(se.A,{position:"end"},l.createElement(ce.A,{"aria-label":"Clear field",edge:"end",size:"large",tabIndex:-1,onClick:this._onClearField,onMouseDown:this._onMouseDownOnButton},l.createElement(le.A,null))):null;return l.createElement(ue.A,ye({value:c,error:Boolean(o),slotProps:{input:{endAdornment:s}},onBlur:this._onBlur,onChange:this._onChange,onKeyDown:this._onKeyDown},t))}}],o=[{key:"getDerivedStateFromProps",value:function(e){return{originalText:(0,de.cC)(e.value)}}}],r&&ve(n.prototype,r),o&&ve(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(l.Component);Oe(Te,"propTypes",{onChange:i().func,required:i().bool,value:i().arrayOf(i().number)}),Oe(Te,"defaultProps",{required:!1,value:void 0});n(40150),n(87220),n(25440);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}var Ie=["onChange","value"];function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe.apply(null,arguments)}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Le(r.key),r)}}function _e(e,t,n){return t=Re(t),function(e,t){if(t&&("object"==Ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ne()?Reflect.construct(t,n||[],Re(e).constructor):t.apply(e,n))}function Ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ne=function(){return!!e})()}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},De(e,t)}function Me(e,t,n){return(t=Le(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e){var t=function(e,t){if("object"!=Ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ce(t)?t:t+""}var Fe=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Me(e=_e(this,t,[].concat(r)),"state",{dirty:!1,error:void 0,originalText:void 0,text:void 0}),Me(e,"_onBlur",function(t){e._onMaybeCommitValue({text:t.target.value})}),Me(e,"_onChange",function(t){e._updateValueFromText(t.target.value)}),Me(e,"_onClearField",function(){e._updateValueFromText("0",{commit:!0})}),Me(e,"_onKeyDown",function(t){"Enter"===t.key&&(t.preventDefault(),e._updateValueFromText(t.target.value,{commit:!0}))}),Me(e,"_onMaybeCommitValue",function(t){var n=t.mounted,r=void 0===n||n,o=t.text,a=je(e._validate(o),2),i=a[0],l=a[1];if(i){var c=e.props,s=c.onChange,u=c.value;s&&u!==l&&s(l),r&&e._reset()}}),Me(e,"_onMouseDownOnButton",function(e){e.preventDefault()}),Me(e,"_reset",function(){e.setState({dirty:!1,text:void 0})}),Me(e,"_updateValueFromText",function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).commit;e.setState(function(e){return t===e.originalText?{dirty:!1,text:void 0}:{dirty:!0,text:t}}),n?e._onMaybeCommitValue({text:t,mounted:!0}):e._validate(t)}),Me(e,"_validate",function(t){var n=Number.parseFloat(t),r=Number.isNaN(n);return e.setState({error:r?"Not a valid angle":void 0}),[!r,(0,de.n0)(n)]}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}(t,e),n=t,r=[{key:"componentWillUnmount",value:function(){var e=this.state,t=e.dirty,n=e.originalText,r=e.text,o=t?r:n;this._onMaybeCommitValue({mounted:!1,text:o})}},{key:"render",value:function(){var e=this.props,t=(e.onChange,e.value,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ie)),n=this.state,r=n.dirty,o=n.error,a=n.originalText,i=n.text,c=r?i:a,s=c?l.createElement(se.A,{position:"end"},l.createElement(ce.A,{"aria-label":"Clear field",edge:"end",size:"large",tabIndex:-1,onClick:this._onClearField,onMouseDown:this._onMouseDownOnButton},l.createElement(le.A,null))):null;return l.createElement(ue.A,xe({error:Boolean(o),value:c,slotProps:{input:{endAdornment:s}},onBlur:this._onBlur,onChange:this._onChange,onKeyDown:this._onKeyDown},t))}}],o=[{key:"getDerivedStateFromProps",value:function(e){return{originalText:(t=e.value,(0,de.n0)(t).replace(",",".")+"\xb0")};var t}}],r&&ke(n.prototype,r),o&&ke(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(l.Component);Me(Fe,"propTypes",{onChange:i().func,value:i().oneOfType([i().string,i().number])}),Me(Fe,"defaultProps",{value:void 0});var Ue=function(e){var t=e.orientation,n=e.orientationLabel,r=void 0===n?"Orientation (X+ axis)":n,o=e.origin,a=e.originLabel,i=void 0===a?"Origin":a,c=e.type,s=e.onOrientationChanged,u=e.onOriginChanged,f=e.onTypeChanged;return l.createElement(F.A,{sx:{display:"flex",flexDirection:"row"}},l.createElement(te.A,{style:{minWidth:90},variant:"filled"},l.createElement(oe.A,{htmlFor:"coordinate-system-type"},"Type"),l.createElement(ie.A,{disabled:!f,value:c,inputProps:{id:"coordinate-system-type"},onChange:f},l.createElement(ae.A,{value:"neu"},"NEU"),l.createElement(ae.A,{value:"nwu"},"NWU"))),l.createElement(F.A,{sx:{p:1}}),l.createElement(Te,{fullWidth:!0,label:i,value:o,variant:"filled",onChange:u}),l.createElement(F.A,{sx:{p:1}}),l.createElement(Fe,{style:{minWidth:160},label:r,value:t,variant:"filled",onChange:s}))};Ue.propTypes={onOrientationChanged:i().func,onOriginChanged:i().func,onTypeChanged:i().func,orientation:i().oneOfType([i().number,i().string]),orientationLabel:i().string,origin:i().arrayOf(i().number),originLabel:i().string,type:i().string.isRequired};const Ge=Ue;var Ve=n(78196),Be=n(8244),ze=n(94954),He=n(26926);function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}var qe=["language","t"];function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ye(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=We(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=We(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==We(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $e=[ze.Sq.DEGREES,ze.Sq.DEGREES_MINUTES,ze.Sq.DEGREES_MINUTES_SECONDS,ze.Sq.SIGNED_DEGREES,ze.Sq.SIGNED_DEGREES_MINUTES,ze.Sq.SIGNED_DEGREES_MINUTES_SECONDS],Ze=function(e){var t=e.language,n=void 0===t?"en":t,r=e.t,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,qe);return l.createElement(l.Fragment,null,l.createElement(F.A,null,l.createElement(te.A,{fullWidth:!0,variant:"filled"},l.createElement(oe.A,{id:"language-selector-label"},r("settings.display.language")),l.createElement(ie.A,{labelId:"language-selector-label",name:"language",value:n,onChange:a.onFieldChanged},Be.h.map(function(e){var t=e.code,n=e.label;return l.createElement(ae.A,{key:t,value:t},n)})))),l.createElement(F.A,{sx:{my:2}},l.createElement(M.jQ,{value:a.theme,onChange:a.onFieldChanged})),l.createElement(F.A,null,l.createElement(te.A,{fullWidth:!0,variant:"filled"},l.createElement(oe.A,{id:"coordinate-format-label"},r("settings.display.coordinateFormat")),l.createElement(ie.A,{labelId:"coordinate-format-label",name:"coordinateFormat",value:a.coordinateFormat,onChange:a.onFieldChanged},$e.map(function(e){return l.createElement(ae.A,{key:e,value:e},(0,ze.pe)(e))}))),l.createElement(re.A,null,l.createElement(M.Mo,null,r("settings.display.mapWidgets")),l.createElement(ne.A,{label:r("settings.display.showMouseCoordinates"),control:l.createElement(ee.A,{checked:a.showMouseCoordinates,name:"showMouseCoordinates",onChange:a.onCheckboxToggled})}),l.createElement(ne.A,{label:r("settings.display.showScaleLine"),control:l.createElement(ee.A,{checked:a.showScaleLine,name:"showScaleLine",onChange:a.onCheckboxToggled})})),l.createElement(re.A,null,l.createElement(M.Mo,null,r("settings.display.flatEarthCoordinateSystem")),l.createElement(Ge,{origin:a.origin,originLabel:r("settings.display.mapOrigin"),orientation:a.orientation,type:a.coordinateSystemType,onOrientationChanged:a.onOrientationChanged,onOriginChanged:a.onOriginChanged,onTypeChanged:a.onCoordinateSystemTypeChanged})),l.createElement(re.A,null,l.createElement(M.Mo,null,r("settings.display.operationModes")),l.createElement(ne.A,{label:r("settings.display.optimizeForSingleUAV"),control:l.createElement(ee.A,{checked:a.optimizeForSingleUAV,disabled:o.A.optimizeForSingleUAV.force,name:"optimizeForSingleUAV",onChange:a.onCheckboxToggled})}),l.createElement(ne.A,{label:r("settings.display.optimizeUIForTouch"),control:l.createElement(ee.A,{checked:a.optimizeUIForTouch,disabled:o.A.optimizeUIForTouch.force,name:"optimizeUIForTouch",onChange:a.onCheckboxToggled})})),l.createElement(re.A,null,l.createElement(M.Mo,null,r("settings.display.miscellaneous")),l.createElement(ne.A,{label:r("settings.display.hideInactiveSegmentsOnDarkLCD"),control:l.createElement(ee.A,{checked:a.hideInactiveSegmentsOnDarkLCD,name:"hideInactiveSegmentsOnDarkLCD",onChange:a.onCheckboxToggled})}),l.createElement(ne.A,{label:r("settings.display.enableExperimentalFeatures"),control:l.createElement(ee.A,{checked:a.experimentalFeaturesEnabled,name:"experimentalFeaturesEnabled",onChange:a.onCheckboxToggled})}))))};Ze.propTypes={coordinateFormat:i().oneOf($e),coordinateSystemType:i().oneOf(["neu","nwu"]),experimentalFeaturesEnabled:i().bool,language:i().string,origin:i().arrayOf(i().number),onCheckboxToggled:i().func,onCoordinateSystemTypeChanged:i().func,onFieldChanged:i().func,onOriginChanged:i().func,onOrientationChanged:i().func,optimizeForSingleUAV:i().bool,optimizeUIForTouch:i().bool,orientation:i().number,hideInactiveSegmentsOnDarkLCD:i().bool,showMouseCoordinates:i().bool,showScaleLine:i().bool,t:i().func,theme:i().oneOf(["auto","dark","light"])};const Je=(0,u.Ng)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach(function(t){Ye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({coordinateSystemType:e.map.origin.type,origin:e.map.origin.position,orientation:(0,He.mB)(e)},e.settings.display)},function(e){return{onCheckboxToggled:function(t){e((0,K.uV)("display",Ye({},t.target.name,t.target.checked)))},onCoordinateSystemTypeChanged:function(t){e((0,Ve.Pg)(t.target.value))},onFieldChanged:function(t){e((0,K.uV)("display",Ye({},t.target.name,t.target.value)))},onOriginChanged:function(t){e((0,Ve.dK)(t))},onOrientationChanged:function(t){e((0,Ve.Zv)(t||0))}}})((0,D.CI)()(Ze));n(42762);var Xe=n(16238),Qe=n(31547);function et(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return tt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n(48598);var nt=n(97859),rt=n(25508);function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach(function(t){lt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ot(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ot(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e){return function(e){if(Array.isArray(e))return ut(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||st(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){if(e){if("string"==typeof e)return ut(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ut(e,t):void 0}}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ft=(0,rt.Mz)(function(e){return e.preflight.groups},Xe.Im),dt=(0,rt.Mz)(function(e){return e.preflight.items},Xe.Im),pt=(0,rt.Mz)(ft,dt,function(e,t){var n,r=t.filter(function(e){return(0,nt.default)(e.groupId)}),o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=st(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(e);try{var a=function(){var e=n.value,o=t.filter(function(t){return t.groupId===e.id});o.length>0&&r.push.apply(r,[it({type:"header"},e)].concat(ct(o)))};for(o.s();!(n=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return r}),mt=function(e){return e.preflight.checked},yt=(0,rt.Mz)(dt,function(e){return e.preflight.checked},function(e,t){return e.length===t.length}),gt=(0,rt.Mz)(pt,function(e){return e.map(function(e){var t=(e.label||"").trim();return"header"===e.type?"\n".concat(t,":"):t?"- ".concat(t):t}).join("\n").trim()}),bt=function(e){return e.preflight.items.order.length>0},vt=function(e){var t=e.items,n=e.onSubmit,r=e.t;return l.createElement(V.lV,{initialValues:{items:t},onSubmit:n},function(e){var t=e.dirty,n=e.form,o=e.handleSubmit;return l.createElement(F.A,null,l.createElement(U.A,null,r("preflightTab.enterCheckItems")),l.createElement(F.A,{sx:{py:1}},l.createElement(G.A_,{fullWidth:!0,multiline:!0,name:"items",label:r("preflightTab.manualPreflightCheckItems"),minRows:10,variant:"filled",helperText:r("preflightTab.headingsHint")})),l.createElement(H,{label:r("preflightTab.preflightCheckItems"),dirty:t,form:n,onSubmit:o}))})};vt.propTypes={items:i().string,onSubmit:i().func,t:i().func};const ht=(0,u.Ng)(function(e){return{items:gt(e)}},{onSubmit:function(e){var t,n=e.items;return t=n,function(e){var n=[],r=[],o="General",a="group0",i=!0;function l(){i||(n.push({label:o,id:a}),i=!0,a="group".concat(n.length))}var c,s=et((t||"").split("\n"));try{for(s.s();!(c=s.n()).done;){var u=c.value;if(0!==(u=u.trim()).length)if(":"===u.charAt(u.length-1))l(),o=u.slice(0,-1).trim();else{for(;"-"===u.charAt(0)||" "===u.charAt(0);)u=u.slice(1);u.length>0&&(r.push({label:u,id:"item".concat(r.length),groupId:a}),i=!1)}}}catch(e){s.e(e)}finally{s.f()}l(),n=(0,Xe.q9)(n),r=(0,Xe.q9)(r),e((0,Qe.Uq)({groups:n,items:r}))}}})((0,D.CI)()(vt));var At=n(6668),St=n(30073),Et=n(95884),Ot=n(12070),wt=n(16738),Tt=n(76320),Ct=n(82911),It=n(18381),xt=n(23139);var jt=[],Pt=function(e){var t=e.settings.localServer.searchPath;return Array.isArray(t)?t:jt},kt=function(e){return e.localServer.pathScan.result},_t=(0,rt.Mz)(kt,function(e){return"string"==typeof e&&e.length>0}),Nt=(0,rt.Mz)(function(e){return e.dialogs.serverSettings},function(e){return e.settings.localServer},_t,function(e,t,n){return window.bridge&&window.bridge.localServer&&t.enabled&&("localhost"===(r=e.hostName)||(0,xt.isLoopback)(r))&&e.active&&n;var r}),Rt=n(74848),Dt=n(16472),Mt=n(70802),Lt=n(8861),Ft=n(40644),Ut=n(21079),Gt=n(82390),Vt=n(79239),Bt=n(49591);const zt=(0,Bt.n9)(e=>({root:{backgroundColor:(0,Bt.Mw)(e)?"#303030":e.palette.grey[200],paddingTop:6}})),Ht=Object.freeze({success:(0,Rt.jsx)(Ot.A,{style:{color:Ut.A[500],margin:"0 0 0 19px"},children:(0,Rt.jsx)(Dt.A,{})}),warning:(0,Rt.jsx)(Ot.A,{style:{color:Gt.A[700],margin:"0 0 0 19px"},children:(0,Rt.jsx)(Mt.A,{})}),inProgress:(0,Rt.jsx)(Ot.A,{style:{margin:"0 0 0 19px"},children:(0,Rt.jsx)(Lt.A,{variant:"indeterminate",color:"secondary",size:32})}),error:(0,Rt.jsx)(Ot.A,{style:{color:Vt.A[500],margin:"0 0 0 19px"},children:(0,Rt.jsx)(le.A,{})})}),Wt=e=>{const t=zt();return(0,Rt.jsx)(Ft.Ay,{divider:!0,className:t.root,...e})};var qt=n(34261);function Kt(e){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kt(e)}function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $t(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Kt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zt=function(e){var t=e.error,n=e.notFoundMessage,r=void 0===n?"Server executable not found.":n,o=e.onRequestReload,a=e.result,i=e.scanning,c=e.scanningMessage,s=void 0===c?"Please wait\u2026":c,u=e.successMessage,f=void 0===u?"Server executable found successfully.":u;return l.createElement(Wt,{button:!0,onClick:o},i?Ht.inProgress:t?Ht.error:a?Ht.success:Ht.warning,l.createElement(wt.A,{primary:t||(a?f:i?s:r),secondary:i?"Looking for server":a||"Click to scan again"}))};Zt.propTypes={error:i().string,notFoundMessage:i().string,onRequestReload:i().func,result:i().string,scanning:i().bool,scanningMessage:i().string,successMessage:i().string};const Jt=(0,u.Ng)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach(function(t){$t(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.localServer.pathScan)},{onRequestReload:qt.Rk})(Zt);var Xt,Qt;function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return nn(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(nn(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,nn(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,nn(f,"constructor",s),nn(s,"constructor",c),c.displayName="GeneratorFunction",nn(s,o,"GeneratorFunction"),nn(f),nn(f,o,"Generator"),nn(f,r,function(){return this}),nn(f,"toString",function(){return"[object Generator]"}),(tn=function(){return{w:a,m:d}})()}function nn(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}nn=function(e,t,n,r){function a(t,n){nn(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},nn(e,t,n,r)}function rn(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach(function(t){ln(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ln(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=en(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=en(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==en(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cn=function(e){var t=e.cliArguments,n=e.enabled,r=e.onDisable,o=e.onEnable,a=e.onSearchPathChanged,i=e.onSelectSearchPath,c=e.onTextFieldChanged,s=e.searchPath;return l.createElement("div",{style:{position:"relative",top:-8}},l.createElement(St.A,{dense:!0,disablePadding:!0,style:{margin:"0 -24px"}},l.createElement(Jt,null),l.createElement(Et.A,{disableRipple:!0,onClick:n?r:o},l.createElement(Ot.A,{style:{margin:"0 17px 0 2px"}},l.createElement(Tt.A,{checked:n})),l.createElement(wt.A,{primary:"Launch local server automatically",secondary:"Only if the application is connecting to localhost"}))),l.createElement(re.A,null,l.createElement(F.A,{sx:{mt:1}},l.createElement(ue.A,{fullWidth:!0,id:"cliArguments",label:"Command line arguments",value:t,variant:"filled",helperText:"These arguments will be supplied to the local server upon startup.",onChange:c})),l.createElement(F.A,{sx:{mt:1,display:"flex",flexDirection:"row",alignItems:"baseline"}},l.createElement(ue.A,{fullWidth:!0,multiline:!0,id:"searchPath",label:"Search path",value:s,variant:"filled",helperText:"Enter directories to search for the Skybrush server executable, one per line.",onChange:a}),i&&l.createElement(M.m_,{content:"Select folder containing server executable"},l.createElement(ce.A,{size:"large",onClick:i},l.createElement(At.A,null))))))};cn.propTypes={cliArguments:i().string,enabled:i().bool,onDisable:i().func,onEnable:i().func,onSearchPathChanged:i().func,onSelectSearchPath:i().func,onTextFieldChanged:i().func,searchPath:i().string};const sn=(0,u.Ng)(function(e){return an(an({},e.settings.localServer),{},{searchPath:Pt(e).join("\n")})},{onCheckboxToggled:function(e){return(0,K.uV)("localServer",ln({},e.target.name,e.target.checked))},onDisable:function(){return(0,K.uV)("localServer",{enabled:!1})},onEnable:function(){return(0,K.uV)("localServer",{enabled:!0})},onSearchPathChanged:function(e){var t=e.target.value.split("\n").map(function(e){return(0,It.A)(e)}),n=t.indexOf("");return(0,Ct.A)(t,function(e,t){return!e&&t>n}),(0,K.uV)("localServer",{searchPath:t})},onSelectSearchPath:null!==(Xt=window.bridge)&&void 0!==Xt&&Xt.isElectron&&null!==(Qt=window.bridge)&&void 0!==Qt&&null!==(Qt=Qt.localServer)&&void 0!==Qt&&Qt.selectPath?function(){return function(){var e,t=(e=tn().m(function e(t,n){var r,o,a;return tn().w(function(e){for(;;)switch(e.n){case 0:return r=Pt(n()),o=Array.isArray(r)&&r.length>0?r[0]:null,e.n=1,window.bridge.localServer.selectPath(o);case 1:"string"==typeof(a=e.v)&&a.length>0&&t((0,K.uV)("localServer",{searchPath:[a]}));case 2:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){rn(a,r,o,i,l,"next",e)}function l(e){rn(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e,n){return t.apply(this,arguments)}}()}:null,onTextFieldChanged:function(e){return(0,K.uV)("localServer",ln({},e.target.id,e.target.value))}})(cn);var un=n(47530);function fn(e){return fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fn(e)}function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach(function(t){mn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=fn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yn=[{id:"auto",label:(0,Be.tt)("settings.threeDView.auto")},{id:"outdoor",label:(0,Be.tt)("settings.threeDView.outdoor")},{id:"indoor",label:(0,Be.tt)("settings.threeDView.indoor")}],gn=[{id:"light",label:(0,Be.tt)("settings.threeDView.light")},{id:"dark",label:(0,Be.tt)("settings.threeDView.dark")}],bn=[{id:"none",label:(0,Be.tt)("settings.threeDView.none")},{id:"1x1",label:(0,Be.tt)("settings.threeDView.1x1")},{id:"2x2",label:(0,Be.tt)("settings.threeDView.2x2")}],vn=function(e){return l.createElement(D.wD,null,function(t){return l.createElement(F.A,null,l.createElement(re.A,null,l.createElement(M.Mo,{disablePadding:!0},t("settings.threeDView.environment")),l.createElement(F.A,{sx:{display:"flex"}},l.createElement(te.A,{fullWidth:!0,variant:"filled"},l.createElement(oe.A,{id:"threed-scenery-label"},t("settings.threeDView.scenery")),l.createElement(ie.A,{labelId:"threed-scenery-label",name:"scenery",value:e.scenery,onChange:e.onFieldChanged},yn.map(function(e){return l.createElement(ae.A,{key:e.id,value:e.id},e.label(t))}))),l.createElement(F.A,{sx:{px:1}}),l.createElement(te.A,{fullWidth:!0,variant:"filled"},l.createElement(oe.A,{id:"threed-lighting-label"},t("settings.threeDView.lighting")),l.createElement(ie.A,{labelId:"threed-lighting-label",name:"lighting",value:e.lighting,onChange:e.onFieldChanged},gn.map(function(e){return l.createElement(ae.A,{key:e.id,value:e.id},e.label(t))}))),l.createElement(F.A,{sx:{px:1}}),l.createElement(te.A,{fullWidth:!0,variant:"filled"},l.createElement(oe.A,{id:"threed-grid-label"},t("settings.threeDView.grid")),l.createElement(ie.A,{labelId:"threed-grid-label",name:"grid",value:e.grid,onChange:e.onFieldChanged},bn.map(function(e){return l.createElement(ae.A,{key:e.id,value:e.id},e.label(t))})))),l.createElement(ne.A,{label:t("settings.threeDView.showAxes"),control:l.createElement(ee.A,{checked:e.showAxes,name:"showAxes",onChange:e.onCheckboxToggled})}),l.createElement(ne.A,{label:t("settings.threeDView.showHomePositions"),control:l.createElement(ee.A,{checked:e.showHomePositions,name:"showHomePositions",onChange:e.onCheckboxToggled})}),l.createElement(ne.A,{label:t("settings.threeDView.showLandingPositions"),control:l.createElement(ee.A,{checked:e.showLandingPositions,name:"showLandingPositions",onChange:e.onCheckboxToggled})}),l.createElement(ne.A,{label:t("settings.threeDView.showTrajectoriesOfSelection"),control:l.createElement(ee.A,{checked:e.showTrajectoriesOfSelection,name:"showTrajectoriesOfSelection",onChange:e.onCheckboxToggled})})),l.createElement(re.A,null,l.createElement(M.Mo,null,t("settings.threeDView.rendering")),l.createElement(ne.A,{label:t("settings.threeDView.showStatistics"),control:l.createElement(ee.A,{checked:e.showStatistics,name:"showStatistics",onChange:e.onCheckboxToggled})})))})};vn.propTypes={grid:i().string,lighting:i().string,onCheckboxToggled:i().func,onFieldChanged:i().func,scenery:i().string,showAxes:i().bool,showHomePositions:i().bool,showLandingPositions:i().bool,showTrajectoriesOfSelection:i().bool,showStatistics:i().bool};const hn=(0,u.Ng)(function(e){return pn(pn({},e.settings.threeD),{},{scenery:(0,un.Wb)(e),lighting:(0,un.bV)(e)})},function(e){return{onCheckboxToggled:function(t){e((0,K.uV)("threeD",mn({},t.target.name,t.target.checked)))},onFieldChanged:function(t){e((0,K.uV)("threeD",mn({},t.target.name,t.target.value)))}}})(vn);n(25428),n(25843);var An=n(86683);function Sn(e){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(e)}function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(Object(n),!0).forEach(function(t){wn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Sn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tn=[ze.Ji.VOLTAGE,ze.Ji.PERCENTAGE,ze.Ji.FORCED_PERCENTAGE],Cn=[ze.eB.NEVER,ze.eB.ONLY_MULTIPLE,ze.eB.ALWAYS],In=(0,Bt.n9)(function(e){return{gridFormControl:{display:"grid",gridTemplateColumns:"2fr 1fr",alignItems:"center",flexDirection:"row"},hidden:{visibility:"hidden"},horizontalSpacer:{width:e.spacing(2)}}}),xn=function(e){var t=e.autoRemove,n=e.criticalVoltageThreshold,r=e.defaultBatteryCellCount,o=e.forgetThreshold,a=e.fullChargeVoltage,i=e.goneThreshold,c=e.lowVoltageThreshold,s=e.maxUploadConcurrency,u=e.minIndoorTakeoffSpacing,f=e.minOutdoorTakeoffSpacing,d=e.onCheckboxToggled,p=e.onDistanceFieldUpdated,m=e.onEnumFieldUpdated,y=e.onIntegerFieldUpdated,g=e.onVoltageFieldUpdated,b=e.placementAccuracy,v=e.preferredBatteryDisplayStyle,h=void 0===v?ze.Ji.VOLTAGE:v,A=e.t,S=e.takeoffHeadingAccuracy,E=e.uavOperationConfirmationStyle,O=e.warnThreshold,w=In();return l.createElement(l.Fragment,null,l.createElement(re.A,{sx:{marginBottom:2}},l.createElement(te.A,{className:w.gridFormControl},l.createElement(ne.A,{label:A("settings.uavs.warn"),control:l.createElement(ee.A,{checked:!0,className:w.hidden})}),l.createElement(An.lg,{name:"warnThreshold",min:1,max:3600,value:O,variant:"standard",onChange:y})),l.createElement(te.A,{className:w.gridFormControl},l.createElement(ne.A,{label:A("settings.uavs.gone"),control:l.createElement(ee.A,{checked:!0,className:w.hidden})}),l.createElement(An.lg,{name:"goneThreshold",min:1,max:3600,value:i,variant:"standard",onChange:y})),l.createElement(te.A,{className:w.gridFormControl},l.createElement(ne.A,{label:A("settings.uavs.forget"),control:l.createElement(ee.A,{checked:Boolean(t),name:"autoRemove",onChange:d})}),l.createElement(An.lg,{name:"forgetThreshold",min:1,max:3600,value:o,disabled:!t,variant:"standard",onChange:y}))),l.createElement(F.A,{sx:{my:2}},l.createElement(M.Mo,null,A("settings.uavs.operationSettings")),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",mb:1}},l.createElement(te.A,{fullWidth:!0,variant:"filled"},l.createElement(oe.A,{id:"uav-operation-confirmation-style"},"UAV operation confirmations"),l.createElement(ie.A,{labelId:"uav-operation-confirmation-style",name:"uavOperationConfirmationStyle",value:E||ze.eB.NEVER,onChange:m},Cn.map(function(e){return l.createElement(ae.A,{key:e,value:e},(0,ze.Ri)(e))})))),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",mb:1}},l.createElement(An.mP,{fullWidth:!0,label:A("settings.uavs.maxUploadConcurrency"),name:"maxUploadConcurrency",min:1,max:250,step:1,value:s,onChange:y}))),l.createElement(F.A,{sx:{my:2}},l.createElement(M.Mo,null,A("settings.uavs.defaultBatterySettings")),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",mb:1}},l.createElement(An.mP,{fullWidth:!0,label:A("settings.uavs.cellCount"),name:"defaultBatteryCellCount",min:1,max:24,step:1,value:r,onChange:y}),l.createElement(F.A,{className:w.horizontalSpacer}),l.createElement(An.rl,{fullWidth:!0,name:"fullChargeVoltage",label:A("settings.uavs.fullCharge"),size:"medium",min:.1,max:20,step:.1,value:a,onChange:g}),l.createElement(F.A,{className:w.horizontalSpacer}),l.createElement(An.rl,{fullWidth:!0,name:"lowVoltageThreshold",label:A("settings.uavs.lowTreshold"),size:"medium",min:.1,max:20,step:.1,value:c,onChange:g}),l.createElement(F.A,{className:w.horizontalSpacer}),l.createElement(An.rl,{fullWidth:!0,name:"criticalVoltageThreshold",label:A("settings.uavs.criticalTreshold"),size:"medium",min:.1,max:20,step:.1,value:n,onChange:g})),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",mb:1}},l.createElement(te.A,{fullWidth:!0,variant:"filled"},l.createElement(oe.A,{id:"uav-battery-display-style"},A("settings.uavs.batteryDisplayStyle")),l.createElement(ie.A,{labelId:"uav-battery-display-style",name:"preferredBatteryDisplayStyle",value:h,onChange:m},Tn.map(function(e){return l.createElement(ae.A,{key:e,value:e},(0,ze.Gl)(e))}))))),l.createElement(F.A,null,l.createElement(M.Mo,null,A("settings.uavs.missionSetup")),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",mb:1}},l.createElement(An.C4,{fullWidth:!0,name:"minOutdoorTakeoffSpacing",label:A("settings.uavs.minOutdoorTakeoffSpacing"),min:.1,max:10,step:.1,value:f,onChange:p}),l.createElement(F.A,{className:w.horizontalSpacer}),l.createElement(An.C4,{fullWidth:!0,name:"minIndoorTakeoffSpacing",label:A("settings.uavs.minIndoorTakeoffSpacing"),min:.1,max:10,step:.1,value:u,onChange:p})),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",mb:1}},l.createElement(An.C4,{fullWidth:!0,name:"placementAccuracy",label:A("settings.uavs.desiredPlacementAccuracy"),min:.5,max:20,step:.5,value:b,onChange:p}),l.createElement(F.A,{className:w.horizontalSpacer}),l.createElement(An.Q6,{fullWidth:!0,name:"takeoffHeadingAccuracy",label:A("settings.uavs.desiredHeadingAccuracy"),min:1,max:45,step:1,value:S,onChange:y})),l.createElement(U.A,{variant:"body2",color:"textSecondary"},A("settings.uavs.missionSetupDescription"))))};xn.propTypes={autoRemove:i().bool,criticalVoltageThreshold:i().number,defaultBatteryCellCount:i().number,forgetThreshold:i().number,fullChargeVoltage:i().number,goneThreshold:i().number,lowVoltageThreshold:i().number,maxUploadConcurrency:i().number,minIndoorTakeoffSpacing:i().number,minOutdoorTakeoffSpacing:i().number,onCheckboxToggled:i().func,onDistanceFieldUpdated:i().func,onEnumFieldUpdated:i().func,onIntegerFieldUpdated:i().func,onVoltageFieldUpdated:i().func,placementAccuracy:i().number,preferredBatteryDisplayStyle:i().oneOf(Tn),t:i().func,takeoffHeadingAccuracy:i().number,uavOperationConfirmationStyle:i().oneOf(Cn),warnThreshold:i().number};const jn=(0,u.Ng)(function(e){return On(On({},e.settings.uavs),{},{placementAccuracy:(0,un.QA)(e),takeoffHeadingAccuracy:(0,un.gb)(e),maxUploadConcurrency:(0,un.fB)(e),minIndoorTakeoffSpacing:(0,un.hP)(e),minOutdoorTakeoffSpacing:(0,un.Iu)(e)})},function(e){return{onCheckboxToggled:function(t){e((0,K.uV)("uavs",wn({},t.target.name,t.target.checked)))},onDistanceFieldUpdated:function(t){var n=Math.round(1e3*Number.parseFloat(t.target.value));n>0&&e((0,K.uV)("uavs",wn({},t.target.name,n)))},onEnumFieldUpdated:function(t){e((0,K.uV)("uavs",wn({},t.target.name,t.target.value)))},onIntegerFieldUpdated:function(t){var n=Number.parseInt(t.target.value,10);n>0&&e((0,K.uV)("uavs",wn({},t.target.name,n)))},onVoltageFieldUpdated:function(t){var n=Number.parseFloat(t.target.value);n>0&&Number.isFinite(n)&&e((0,L.rZ)(t.target.name,n))}}})((0,D.CI)()(xn));var Pn={apiKeys:l.createElement(Q,null),display:l.createElement(Je,null),preflight:l.createElement(ht,null),server:l.createElement(sn,null),threeD:l.createElement(hn,null),uavs:l.createElement(jn,null)},kn=function(e){var t=e.onClose,n=e.onTabSelected,r=e.open,o=void 0!==r&&r,a=e.selectedTab,i=void 0===a?"display":a,c=e.t;return l.createElement(_.A,{fullWidth:!0,open:o,maxWidth:"sm",onClose:t},l.createElement(M.nv,{alignment:"center",value:i,onChange:n},l.createElement(R.A,{value:"display",label:c("settings.tabs.display")}),l.createElement(R.A,{value:"threeD",label:c("settings.tabs.threeDView")}),l.createElement(R.A,{value:"uavs",label:c("settings.tabs.uavs")}),l.createElement(R.A,{value:"preflight",label:c("settings.tabs.preflight")}),window.bridge&&window.bridge.isElectron?l.createElement(R.A,{value:"server",label:c("settings.tabs.server")}):null,l.createElement(R.A,{value:"apiKeys",label:c("settings.tabs.apiKeys")})),l.createElement(N.A,{style:{minHeight:200}},Pn[i]))};kn.propTypes={onClose:i().func,onTabSelected:i().func,open:i().bool,selectedTab:i().string,t:i().func};const _n=(0,u.Ng)(function(e){return e.dialogs.appSettings},function(e){return{onClose:function(){e((0,L.Lm)())},onTabSelected:function(t,n){e((0,L.sO)(n))}}})((0,D.CI)()(kn));n(16034);var Nn=n(57862),Rn=n(85448),Dn=n(71042),Mn=n(15786),Ln=n(45633),Fn=n(87714),Un=n(35026),Gn=n(16054),Vn=n(41895),Bn=n(18728),zn=n(66380),Hn=function(e){var t=e.clearGeofencePolygonId,n=e.feature,r=e.isGeofence,o=e.onSetFeatureAttributes;return n.type===Bn.lo.POLYGON?r?l.createElement(M.qq,{icon:l.createElement(Vn.A,null),header:"This feature is the current geofence",text:"It cannot be used as an exclusion zone at the same time",button:l.createElement(B.A,{onClick:t},"Clear")}):l.createElement(V.lV,{initialValues:n.attributes,validate:(0,zn.fH)({minAltitude:(0,zn.lq)(zn.yj),maxAltitude:(0,zn.lq)(zn.yj)}),onSubmit:function(e){var t=e.isExclusionZone,n=e.minAltitude,r=e.maxAltitude;o({isExclusionZone:t,minAltitude:Number(n)||void 0,maxAltitude:Number(r)||void 0})}},function(e){var t=e.form,n=e.values;return l.createElement("div",null,l.createElement(G.q_,{name:"isExclusionZone",data:{label:"Exclusion zone"}}),l.createElement(Fn.A,{style:{marginTop:-8,marginBottom:8}},"Treat this polygon as an obstacle marker that should be excluded from the mission zone during planning and avoided while flying."),l.createElement(G.A_,{name:"minAltitude",label:"Min AGL altitude",disabled:!n.isExclusionZone,slotProps:{input:{endAdornment:l.createElement(se.A,{position:"end"},"m"),inputProps:{inputMode:"numeric"}}}}),l.createElement(Fn.A,{style:{marginBottom:8}},"Distance of the top of the obstacle measured from the ground. UAVs should fly above this altitude limit to avoid collision."),l.createElement(G.A_,{name:"maxAltitude",label:"Max AGL altitude",disabled:!n.isExclusionZone,slotProps:{input:{endAdornment:l.createElement(se.A,{position:"end"},"m"),inputProps:{inputMode:"numeric"}}}}),l.createElement(Fn.A,{style:{marginBottom:8}},"Distance of the bottom of the obstacle measured from the ground. UAVs should fly below this altitude limit to avoid collision."),l.createElement(V.Pc,{subscription:{values:!0},onChange:function(){return t.submit()}}))}):l.createElement(M.qq,{text:"This feature type doesn't support attributes."})};Hn.propTypes={clearGeofencePolygonId:i().func,feature:i().object.isRequired,isGeofence:i().bool,onSetFeatureAttributes:i().func};const Wn=(0,u.Ng)(function(e,t){var n=t.featureId;return{isGeofence:(0,Un.Md)(e)===n}},function(e,t){var n=t.featureId;return{clearGeofencePolygonId:function(){return e((0,Gn.Xg)())},onSetFeatureAttributes:function(t){e((0,Mn.Te)({id:n,attributes:t}))}}})(Hn);var qn=function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),l.createElement("div",null,"Not implemented yet")};qn.propTypes={feature:i().object.isRequired,featureId:i().string.isRequired};const Kn=(0,u.Ng)(null,{})(qn);var Yn=n(77953),$n=n(24057),Zn=n(2645),Jn=n(20330),Xn=n(9792);const Qn=(0,Xn.A)((0,Rt.jsx)("path",{d:"M 5 3 C 3.8900044 3 3 3.9000044 3 5 L 3 19 C 3 20.099996 3.8900044 21 5 21 L 19 21 C 20.109996 21 21 20.099996 21 19 L 21 5 C 21 3.9000044 20.109996 3 19 3 L 5 3 z M 10.734375 6.2988281 L 13.265625 6.2988281 L 17.320312 17.701172 L 14.916016 17.701172 L 14.025391 15.167969 L 9.9746094 15.167969 L 9.0839844 17.701172 L 6.6796875 17.701172 L 10.734375 6.2988281 z M 12 8.8320312 L 10.542969 13.457031 L 13.457031 13.457031 L 12 8.8320312 z"}),"AutoCheckBox");var er=function(e){var t,n,r,o,a,i=e.feature,c=e.onSetFeatureColor,s=e.onSetFeatureLabel,u=e.onToggleFeatureFillVisible,f=e.onToggleFeatureMeasurementVisible,d=e.onToggleFeaturePointsVisible,p=e.onToggleFeatureVisibility,m=e.optimizeUIForTouch,y=e.shouldFill,g=e.shouldShowPoints,b=e.suggestedColor;return l.createElement("div",null,l.createElement(F.A,{sx:{display:"flex",alignItems:"center",py:"1em"}},l.createElement(F.A,{sx:{flex:"auto"}},l.createElement(ue.A,{fullWidth:!0,autoFocus:!m,label:"Label",variant:"filled",value:i.label||"",onChange:s})),l.createElement(Tt.A,{checked:i.visible,onChange:p})),l.createElement(F.A,{sx:{display:"flex"}},l.createElement(Zn.A,{styles:{default:{picker:{flexShrink:0}}},color:null!==(t=i.color)&&void 0!==t?t:b,onChangeComplete:c}),l.createElement(B.A,{disabled:void 0===i.color,onClick:function(){return c()}},l.createElement("div",null,l.createElement(Qn,{fontSize:"large"}),"Automatic color"))),l.createElement("div",null,(0,Bn.h$)(i.type)&&l.createElement(ne.A,{control:l.createElement(ee.A,{checked:null!==(n=i.filled)&&void 0!==n?n:y,indeterminate:void 0===i.filled,indeterminateIcon:l.createElement(Qn,null),onChange:u}),label:"Fill interior"}),(0,Bn.uw)(i.type)&&l.createElement(ne.A,{control:l.createElement(ee.A,{checked:null!==(r=i.showPoints)&&void 0!==r?r:g,indeterminate:void 0===i.showPoints,indeterminateIcon:l.createElement(Qn,null),onChange:d}),label:"Show individual points"}),(0,Bn.WM)(i.type)&&l.createElement(ne.A,{control:l.createElement(ee.A,{checked:null!==(o=i.measure)&&void 0!==o&&o,indeterminate:void 0===i.measure,indeterminateIcon:l.createElement(Qn,null),onChange:f}),label:"Show measurements"})),(a={fontSize:"inherit",style:{verticalAlign:"text-top"}},l.createElement(Fn.A,{style:{marginTop:-8}},"Click to cycle between automatic (",l.createElement(Qn,a),"), enabled (",l.createElement(Yn.A,a),") and disabled (",l.createElement($n.A,a),") states.")))};er.propTypes={feature:i().object.isRequired,onSetFeatureColor:i().func,onSetFeatureLabel:i().func,onToggleFeatureFillVisible:i().func,onToggleFeatureMeasurementVisible:i().func,onToggleFeaturePointsVisible:i().func,onToggleFeatureVisibility:i().func,optimizeUIForTouch:i().bool,shouldFill:i().bool,shouldShowPoints:i().bool,suggestedColor:i().string};const tr=(0,u.Ng)(function(e,t){var n=t.featureId;return{optimizeUIForTouch:(0,un.jz)(e),shouldFill:(0,Jn.Vl)(e,n),shouldShowPoints:(0,Jn.zj)(e,n),suggestedColor:(0,Jn.MJ)(e,n)}},function(e,t){var n=t.featureId;return{onSetFeatureColor:function(t){e((0,Mn.ci)({id:n,color:null==t?void 0:t.hex}))},onSetFeatureLabel:function(t){e((0,Mn.tl)({id:n,name:t.target.value}))},onToggleFeatureFillVisible:function(){e((0,Mn.Ig)({id:n}))},onToggleFeatureMeasurementVisible:function(){e((0,Mn.Jh)({id:n}))},onToggleFeaturePointsVisible:function(){e((0,Mn.ai)({id:n}))},onToggleFeatureVisibility:function(t){e((0,Mn.Ui)({id:n,visible:t.target.checked}))}}})(er);function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach(function(t){ar(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ar(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=nr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ir=function(e){var t=e.feature,n=e.featureId,r=e.onClose,o=e.onRemoveFeature,a=e.onTabSelected,i=e.open,c=e.selectedTab,s=void 0===c?Ln.bA.GENERAL:c,u=ar(ar(ar({},Ln.bA.GENERAL,tr),Ln.bA.ATTRIBUTES,Wn),Ln.bA.POINTS,Kn)[s],f=t?u&&l.createElement(u,{feature:t,featureId:n}):l.createElement("p",null,"Feature does not exist"),d=[l.createElement(B.A,{key:"remove",color:"secondary",disabled:!t,onClick:o},"Remove"),l.createElement(B.A,{key:"close",onClick:r},"Close")];return l.createElement(_.A,{fullWidth:!0,open:i,maxWidth:"sm",onClose:r},l.createElement(M.nv,{value:s,onChange:a},Ln.sV.map(function(e){return l.createElement(R.A,{key:e,value:e,label:Ln.Ui[e]})})),l.createElement(N.A,{style:{height:325}},f),l.createElement(Nn.A,null,d))};ir.propTypes={feature:i().object,featureId:i().string,onClose:i().func,onRemoveFeature:i().func,onTabSelected:i().func,open:i().bool.isRequired,selectedTab:i().oneOf(Object.values(Ln.bA))};const lr=(0,u.Ng)(function(e){var t=(0,Dn.bR)(e);return{featureId:t,selectedTab:(0,Dn.lg)(e),feature:(0,Dn.je)(e,t),open:(0,Dn.I_)(e)}},function(e){return{onClose:function(){e((0,Rn.u3)())},onRemoveFeature:function(t){e((0,Mn.Hk)([t])),e((0,Rn.u3)())},onTabSelected:function(t,n){e((0,Rn.zB)(n))}}},function(e,t){return or(or(or({},e),t),{},{onRemoveFeature:function(){return t.onRemoveFeature(e.featureId)}})})(ir);var cr=n(13293),sr=n(72030),ur=n(88276),fr=n(32560),dr=n(30679),pr=n(15526),mr=n(71379);async function yr(e,t={}){const{method:n="single"}=t;if("threshold"===n){let t,n,r=5;const o=()=>yr(e,{method:"single"});for(t=await o();r>0&&t.roundTripTime>mr.f;)r--,n=await o(),n.roundTripTime<t.roundTripTime&&(t=n);return t}if("accurate"===n){let t=10;const n=[],r=()=>yr(e,{method:"single"});for(;t>0;){const e=performance.now();t--;try{const e=await r();!e||(0,nt.default)(e.clockSkew)||(0,nt.default)(e.roundTripTime)||n.push(e)}catch{}const o=performance.now()-e,a=Math.max(500-o,0);t>0&&a>0&&await(0,fr.Ay)(a)}const o=(0,dr.A)(n,"roundTripTime");if(0===o.length)throw new Error("Failed to calculate clock skew and round-trip time");o.length>5?o.splice(-2,2):o.length>3&&o.splice(-1,1);return{roundTripTime:(0,pr.A)(o,"roundTripTime")/o.length,clockSkew:(0,pr.A)(o.slice(0,3),"clockSkew")/Math.min(o.length,3)}}const r=performance.now(),o=await e.sendMessage("SYS-TIME"),a=performance.now(),i=Date.now(),l=a-r,c=o.body.timestamp&&"number"==typeof o.body.timestamp?o.body.timestamp:null,s=(0,nt.default)(c)?null:c+l/2;return{clockSkew:(0,nt.default)(s)?null:s-i,roundTripTime:l}}var gr=n(39441),br=n(7213),vr=n(54996),hr=n(89826),Ar=n(61212);function Sr(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return Er(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Er(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Er(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,Er(f,"constructor",s),Er(s,"constructor",c),c.displayName="GeneratorFunction",Er(s,o,"GeneratorFunction"),Er(f),Er(f,o,"Generator"),Er(f,r,function(){return this}),Er(f,"toString",function(){return"[object Generator]"}),(Sr=function(){return{w:a,m:d}})()}function Er(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Er=function(e,t,n,r){function a(t,n){Er(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},Er(e,t,n,r)}function Or(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var wr=hr.o1.closeServerSettingsDialog,Tr=hr.o1.disconnectFromServer,Cr=hr.o1.setServerSettingsDialogTab,Ir=hr.o1.showServerSettingsDialog,xr=hr.o1.updateServerSettings,jr=br.o.closeAuthenticationDialog,Pr=br.o.showAuthenticationDialog,kr=vr.o.closeDeauthenticationDialog,_r=vr.o.showDeauthenticationDialog,Nr=(0,gr.vR)("servers/authenticateToServer",function(){var e,t=(e=Sr().m(function e(t){var n,r,o,a,i,l,c;return Sr().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.method,r=t.data,o=t.messageHub,e.p=1,e.n=2,o.sendMessage({type:"AUTH-REQ",method:n,data:r});case 2:if(a=e.v,"AUTH-RESP"!==(i=a.body).type){e.n=6;break}if(!i.data){e.n=3;break}throw new Error("Multi-step authentication not supported");case 3:if(!i.result){e.n=4;break}return e.a(2,{result:!0,user:i.user});case 4:throw new Error(String(i.reason)||"Authentication failed");case 5:e.n=7;break;case 6:throw new Error(String(i.reason)||"Unexpected message received from server");case 7:e.n=9;break;case 8:return e.p=8,c=e.v,l=c instanceof sr.M?"Authentication timeout; try again later":(0,ur.Nw)(c),e.a(2,{result:!1,reason:l});case 9:return e.a(2)}},e,null,[[1,8]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Or(a,r,o,i,l,"next",e)}function l(e){Or(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}());function Rr(e){var t=e.username,n=e.password,r=e.messageHub;return Nr({method:"basic",data:cr.o4.encode("".concat(t,":").concat(n)),messageHub:r})}var Dr=(0,gr.vR)("servers/calculateClockSkew",yr),Mr=(0,gr.vR)("servers/calculateClockSkew",yr,{minDelay:1e3}),Lr=(0,gr.vR)("servers/adjustServerTime",async function(e,t){let n;try{n=await e.sendMessage({type:"SYS-TIME",adjustment:-t})}catch{n=void 0}const{body:r}=n||{};if(!r||"SYS-TIME"!==r.type){const{reason:e}=r;throw new Error(r&&"ACK-NAK"===r.type&&e?`Failed to adjust server time: ${e}`:"Failed to adjust server time")}},{minDelay:1e3}),Fr=n(72732);function Ur(e){return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ur(e)}var Gr=["open","title"];function Vr(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return Br(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Br(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Br(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,Br(f,"constructor",s),Br(s,"constructor",c),c.displayName="GeneratorFunction",Br(s,o,"GeneratorFunction"),Br(f),Br(f,o,"Generator"),Br(f,r,function(){return this}),Br(f,"toString",function(){return"[object Generator]"}),(Vr=function(){return{w:a,m:d}})()}function Br(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Br=function(e,t,n,r){function a(t,n){Br(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},Br(e,t,n,r)}function zr(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach(function(t){qr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ur(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ur(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ur(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kr=(0,Bt.n9)(function(e){return{root:{marginBottom:0,"& .MuiDialogContent-root":{paddingTop:0},"& .MuiTextField-root":{marginBottom:e.spacing(1)}},dialogContent:{paddingBottom:0}}}),Yr=function(e){var t=e.initialValues,n=e.isAuthenticating,r=e.onCancel,o=e.onSubmit,a=e.optimizeUIForTouch,i=Kr();return l.createElement(F.A,{sx:{pt:4}},l.createElement(V.lV,{initialValues:t,onSubmit:o},function(e){var t=e.handleSubmit;return l.createElement("form",{className:i.root,onSubmit:t},l.createElement(N.A,{className:i.dialogContent},l.createElement(G.A_,{fullWidth:!0,autoFocus:!a,name:"username",label:"Username",autoComplete:"username",variant:"filled"}),l.createElement(An.s3,{fullWidth:!0,name:"password",label:"Password",autoComplete:"current-password"})),l.createElement(Nn.A,null,l.createElement(B.A,{disabled:n,color:"primary",type:"submit"},n?"Logging in\u2026":"Log in"),l.createElement(B.A,{onClick:r},"Cancel")))}))};Yr.propTypes={initialValues:i().object,isAuthenticating:i().bool,onCancel:i().func,onSubmit:i().func,optimizeUIForTouch:i().bool};var $r=function(e){var t=e.open,n=void 0!==t&&t,r=e.title,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Gr);return l.createElement(M.aQ,{maxWidth:"xs",open:n,title:r},l.createElement(Yr,o))};$r.propTypes={isAuthenticating:i().bool.isRequired,lastError:i().string,onCancel:i().func,onSubmit:i().func,open:i().bool,optimizeUIForTouch:i().bool,title:i().string.isRequired};var Zr=(0,u.Ng)(function(e){return Wr(Wr({},e.dialogs.authentication),{},{isAuthenticating:(0,Ar.nG)(e),optimizeUIForTouch:(0,un.jz)(e),title:(0,Ar.f1)(e)?"Authentication required":"Authenticate to server"})},function(e){return{onCancel:function(){e(jr())},onSubmit:function(t){return(n=Vr().m(function n(){var r;return Vr().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,e(Rr(Wr(Wr({},t),{},{messageHub:Fr.A})));case 1:(r=n.v)&&r.value&&r.value.result&&e(jr());case 2:return n.a(2)}},n)}),function(){var e=this,t=arguments;return new Promise(function(r,o){var a=n.apply(e,t);function i(e){zr(a,r,o,i,l,"next",e)}function l(e){zr(a,r,o,i,l,"throw",e)}i(void 0)})})();var n}}})($r);const Jr=Zr;var Xr=n(91236);function Qr(e){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qr(e)}function eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function to(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(n),!0).forEach(function(t){no(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function no(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Qr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ro=function(e){var t=e.onCancel,n=e.onDisconnect,r=e.open,o=void 0!==r&&r,a=e.title,i=e.user;return l.createElement(M.aQ,{maxWidth:"xs",open:o,title:a},l.createElement(N.A,null,l.createElement(F.A,null,l.createElement(U.A,{sx:{marginBottom:"16px"}},i?l.createElement(l.Fragment,null,"You are currently authenticated as ",l.createElement("code",null,i),". Are you sure you would like to disconnect?"):l.createElement(l.Fragment,null,"You are not authenticated at the moment. Are you sure you would like to disconnect?")))),l.createElement(Nn.A,null,l.createElement(B.A,{color:"secondary",onClick:n},"Disconnect"),l.createElement(B.A,{onClick:t},"Cancel")))};ro.propTypes={onCancel:i().func,onDisconnect:i().func,open:i().bool,title:i().string.isRequired,user:i().string};const oo=(0,u.Ng)(function(e){return to(to({},e.dialogs.deauthentication),{},{title:"Log out from server",user:(0,Ar.vD)(e)})},function(e){return{onCancel:function(){e(kr())},onDisconnect:function(){(0,u.vA)(function(){e(kr()),e((0,Xr.HC)()),e(Tr())})}}})(ro);var ao=n(975),io=n(2652),lo=n(8344),co=n(17437),so=n(44913),uo=n(71036),fo=(0,co.i7)({"0%":{boxShadow:"0 0 8px 2px ".concat((0,so.A)(uo.Ay.info).alpha(0))},"100%":{boxShadow:"0 0 8px 2px ".concat(uo.Ay.info)}}),po=(0,Bt.n9)(function(e){return{root:{position:"relative"},avatar:{backgroundColor:uo.Ay.off,color:e.palette.getContrastText(uo.Ay.off),borderRadius:"25%"},"avatar-off":{opacity:.5},"avatar-editing":{backgroundColor:uo.Ay.info,color:e.palette.getContrastText(uo.Ay.info),animation:"".concat(fo," 0.5s infinite"),animationDirection:"alternate"},"avatar-error":{backgroundColor:uo.Ay.error,boxShadow:"0 0 8px 2px ".concat(uo.Ay.error),color:e.palette.getContrastText(uo.Ay.error)},"avatar-success":{backgroundColor:uo.Ay.success,color:e.palette.getContrastText(uo.Ay.success)}}}),mo=function(e){var t=e.editing,n=e.label,o=e.status,a=void 0===o?"off":o,i=po();return l.createElement("div",{className:i.root},l.createElement(lo.A,{className:(0,r.A)(i.avatar,i["avatar-".concat(t?"editing":a)])},n))};mo.propTypes={editing:i().bool,label:i().node,status:i().oneOf(["off","editing","error","success"])};const yo=mo;var go=["actions","emptyMessage","items","maxCount","preferEmptyMessage","successMessage","title"];function bo(){return bo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bo.apply(null,arguments)}function vo(e){return function(e){if(Array.isArray(e))return ho(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ho(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ho(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ao=function(e){var t=e.actions,n=e.emptyMessage,r=e.items,o=void 0===r?[]:r,a=e.maxCount,i=void 0===a?8:a,c=e.preferEmptyMessage,s=e.successMessage,u=e.title,f=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,go),d=(0,ao.M)(o.slice(0,i).map(function(e){return"number"==typeof e?(0,io.J8)(e):String(e)}));return l.createElement(F.A,bo({},f,{sx:[{mt:1}].concat(vo(Array.isArray(f.sx)?f.sx:[f.sx]))}),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",minHeight:44}},u&&l.createElement(F.A,{key:"lead",sx:{minWidth:85}},u),d.map(function(e,t){return l.createElement(F.A,{key:e,sx:{ml:t>0||u?1:0}},l.createElement(yo,{label:e}))}),o.length>i?l.createElement(F.A,{key:"more",sx:{ml:1,color:"text.secondary"}},l.createElement(U.A,{variant:"body2"},"+ ",o.length-i," more")):null,0===o.length?s&&!c?l.createElement(l.Fragment,null,l.createElement(F.A,{key:"ok",sx:{ml:u?1:0}},l.createElement(yo,{label:"OK",status:"success"})),l.createElement(F.A,{key:"successMessage",sx:{color:"success.main",ml:1}},l.createElement(U.A,{variant:"body2"},s))):l.createElement(F.A,{key:"emptyMessage",sx:{color:u?"text.secondary":null,ml:u?1:0}},l.createElement(U.A,{variant:"body2"},n)):null,t&&l.createElement(l.Fragment,null,l.createElement(F.A,{key:"padding",sx:{flex:1}}),l.createElement(F.A,{key:"actions",sx:{ml:1}},t))))};Ao.propTypes={actions:i().oneOfType([i().node,i().arrayOf(i().node)]),emptyMessage:i().node,items:i().arrayOf(i().oneOfType([i().number,i().string])),maxCount:i().number,preferEmptyMessage:i().bool,successMessage:i().node,title:i().string};const So=Ao;var Eo=n(11104),Oo=n(91436),wo=n(40881),To=n(51533);function Co(e){return Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Co(e)}var Io=["onClose","open"];function xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(n),!0).forEach(function(t){Po(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Po(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Co(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Co(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Co(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ko(){return ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ko.apply(null,arguments)}var _o=i().shape({coords:i().string,mode:i().oneOf(["relative","amsl","ahl"]),altitude:i().number}),No=function(e){var t=e.coordinateFormatter,n=e.initialValues,r=e.onCancel,o=e.onSubmit,a=e.optimizeUIForTouch,i=e.uavIds;return l.createElement(V.lV,{initialValues:n,onSubmit:o},function(e){var n=e.handleSubmit;return l.createElement(F.A,null,l.createElement(N.A,null,l.createElement(So,{title:"Selection:",items:i,mt:0,mb:1}),l.createElement(An.tc,{autoFocus:!a,name:"coords",label:"Target coordinate",formatter:t}),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row"}},l.createElement(F.A,{sx:{flex:1}},l.createElement(An.Kn,{name:"altitude",label:"Altitude",margin:"normal"})),l.createElement(F.A,{sx:{flex:2}},l.createElement(An.l6,{name:"mode",label:"Alt mode",margin:"normal"},l.createElement(ae.A,{value:"relative"},"above current altitude"),l.createElement(ae.A,{value:"amsl"},"above mean sea level"),l.createElement(ae.A,{value:"ahl"},"above home level"))))),l.createElement(Nn.A,null,l.createElement(B.A,{color:"primary",onClick:n},"Confirm"),l.createElement(B.A,{onClick:r},"Cancel")))})};No.propTypes={coordinateFormatter:i().func,initialValues:_o,onCancel:i().func,onSubmit:i().func,optimizeUIForTouch:i().bool,uavIds:i().arrayOf(i().string)};var Ro=function(e){var t=e.onClose,n=e.open,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Io);return l.createElement(M.aQ,{open:n,maxWidth:"xs",title:"Fly to target",onClose:t},l.createElement(No,ko({onCancel:t},r)))};Ro.propTypes={coordinateFormatter:i().func,initialValues:_o,onClose:i().func,onSubmit:i().func,open:i().bool,optimizeUIForTouch:i().bool,uavIds:i().arrayOf(i().string)};const Do=(0,u.Ng)(function(e){return jo(jo({},e.uavControl.flyToTargetDialog),{},{coordinateFormatter:(0,To.MH)(e),optimizeUIForTouch:(0,un.jz)(e),uavIds:(0,wo.YZ)(e)})},{onClose:Oo.ic,onSubmit:Eo.I})(Ro);var Mo=n(49530),Lo=n(85916),Fo=n(34890),Uo=function(e){var t=e.open,n=e.message,r=e.onClose;return l.createElement(_.A,{open:t},l.createElement(Lo.A,null,"An error happened"),l.createElement(N.A,null,l.createElement(Mo.A,{style:{whiteSpace:"pre-line"}},n)),l.createElement(Nn.A,null,l.createElement(B.A,{onClick:r},"Close")))};Uo.propTypes={message:i().string,open:i().bool.isRequired,onClose:i().func};const Go=(0,u.Ng)(function(e){return e.dialogs.error},{onClose:Fo.L})(Uo);var Vo=n(97938),Bo=n(34187),zo=n(51300),Ho=n(84692),Wo=n(98964),qo=n(14968),Ko=n(30856);function Yo(e){return Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yo(e)}function $o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oa(r.key),r)}}function Jo(e,t,n){return t&&Zo(e.prototype,t),n&&Zo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xo(e,t,n){return t=ea(t),function(e,t){if(t&&("object"==Yo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qo()?Reflect.construct(t,n||[],ea(e).constructor):t.apply(e,n))}function Qo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Qo=function(){return!!e})()}function ea(e){return ea=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ea(e)}function ta(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&na(e,t)}function na(e,t){return na=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},na(e,t)}function ra(e,t,n){return(t=oa(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oa(e){var t=function(e,t){if("object"!=Yo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yo(t)?t:t+""}var aa=(0,zn.fH)({label:zn.mw}),ia=function(e){var t=e.layer,n=e.onSubmit,r=e.onToggleLayerVisibility,o=e.validate;return l.createElement(V.lV,{validateOnBlur:!0,initialValues:{label:t.label},validate:o,onSubmit:n},function(e){var n=e.handleSubmit;return l.createElement("form",{id:"basicLayerSettings",onSubmit:n},l.createElement(F.A,{sx:{display:"flex",alignItems:"center",pb:2}},l.createElement(G.A_,{name:"label",variant:"filled",label:"Layer name",placeholder:"New layer",style:{flex:"auto"}}),l.createElement("div",null,"\xa0"),l.createElement(Tt.A,{checked:t.visible,disabled:t.type===Wo.mb.UNAVAILABLE||t.type===Wo.mb.UNTYPED,style:{flex:"none"},onChange:r})))})};ia.propTypes={layer:i().shape({label:i().string,visible:i().bool,type:i().string}),validate:i().func,onSubmit:i().func,onToggleLayerVisibility:i().func};var la=(0,u.Ng)(null,function(e,t){return{onSubmit:function(n){e((0,Ho.IJ)(t.layerId,n.label))},validate:function(e){var t=aa(e);return void 0!==t&&0!==Object.keys(t).length||(0,An.Wp)("basicLayerSettings"),t},onToggleLayerVisibility:function(){e((0,Ho.Sr)(t.layerId))}}})(ia),ca=function(e){function t(){return $o(this,t),Xo(this,t,arguments)}return ta(t,e),Jo(t,[{key:"createChildrenForLayer",value:function(e,t){return e.type in Ko.HS?(0,Ko.Uz)(e,t):[l.createElement("div",{key:"_hint",style:{position:"relative",height:48}},l.createElement(M.qq,{text:"This layer has no additional settings."}))]}},{key:"render",value:function(){var e=this.props,t=e.layer,n=e.layerId;return n?void 0!==t&&l.createElement(F.A,{key:"settings_"+n,sx:{pt:2}},t.type===Wo.mb.UNTYPED?null:l.createElement(la,{layer:t,layerId:n}),this.createChildrenForLayer(t,n)):l.createElement("div",{key:"_hint",style:{position:"relative",height:48,marginTop:"2em"}},l.createElement(M.qq,{text:"Please select a layer from the layer list.",style:{marginTop:"2em"}}))}}])}(l.Component);ra(ca,"propTypes",{layer:i().object,layerId:i().string});var sa=(0,u.Ng)(function(e,t){return{layer:(0,qo.nk)(t.layerId)(e)}},{})(ca),ua=function(e){function t(){var e;$o(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return ra(e=Xo(this,t,[].concat(r)),"_moveSelectedLayer",function(t){var n=e.props,r=n.selectedLayerId;(0,n.onMoveLayer)(r,t)}),ra(e,"_moveSelectedLayerDown",function(){e._moveSelectedLayer(-1)}),ra(e,"_moveSelectedLayerUp",function(){e._moveSelectedLayer(1)}),ra(e,"_removeSelectedLayer",function(){var t=e.props,n=t.selectedLayerId;(0,t.onRemoveLayer)(n)}),e}return ta(t,e),Jo(t,[{key:"render",value:function(){var e=this.props,t=e.canMoveUp,n=e.canMoveDown,r=e.dialogVisible,o=e.selectedLayerId,a=this.props.onClose,i=[];return o&&i.push(l.createElement(ce.A,{key:"moveUp",disabled:!t,size:"large",onClick:this._moveSelectedLayerUp},l.createElement(Bo.A,null)),l.createElement(ce.A,{key:"moveDown",disabled:!n,size:"large",onClick:this._moveSelectedLayerDown},l.createElement(Vo.A,null)),l.createElement(B.A,{key:"remove",color:"secondary",onClick:this._removeSelectedLayer},"Remove")),i.push(l.createElement(B.A,{key:"close",color:"primary",onClick:a},"Close")),l.createElement(M.aQ,{fullWidth:!0,maxWidth:"sm",open:r,onClose:a,title:"Layer settings"},l.createElement(N.A,{style:{overflow:"auto"}},l.createElement(sa,{layerId:o})),l.createElement(Nn.A,null,i))}}])}(l.Component);ra(ua,"propTypes",{canMoveDown:i().bool.isRequired,canMoveUp:i().bool.isRequired,dialogVisible:i().bool.isRequired,selectedLayerId:i().string,onClose:i().func,onMoveLayer:i().func,onRemoveLayer:i().func});const fa=(0,u.Ng)(function(e){var t=e.dialogs.layerSettings,n=(0,qo.bB)(e).order,r=t.dialogVisible,o=t.selectedLayer,a=o&&n?n.indexOf(o):-1;return{canMoveDown:a>0,canMoveUp:a>=0&&a<n.length-1,dialogVisible:r,selectedLayerId:o}},{onClose:function(){return function(e,t){var n=t(),r=(n.dialogs.layerSettings||{}).selectedLayer,o=r?(0,qo.nk)(r)(n):void 0;o&&o.type===Wo.mb.UNTYPED&&e((0,Ho.e5)(r)),e((0,zo.JQ)())}},onMoveLayer:Ho.Jq,onRemoveLayer:Ho.e5})(ua);n(99449);var da=n(1737),pa=n(29608),ma=n(18164),ya=n(18909),ga=n(83869),ba=(n(74423),n(5746),n(3296),n(27208),n(48408),n(36062)),va=n.n(ba),ha=n(77500);function Aa(e){return Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Aa(e)}function Sa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ia(r.key),r)}}function Ea(e,t,n){return t=wa(t),function(e,t){if(t&&("object"==Aa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Oa()?Reflect.construct(t,n||[],wa(e).constructor):t.apply(e,n))}function Oa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Oa=function(){return!!e})()}function wa(e){return wa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wa(e)}function Ta(e,t){return Ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ta(e,t)}function Ca(e,t,n){return(t=Ia(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ia(e){var t=function(e,t){if("object"!=Aa(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Aa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Aa(t)?t:t+""}var xa=window.bridge&&window.bridge.createSSDPClient&&!(0,ha.A)(o.A,"server.preventAutodetection"),ja=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ca(n=Ea(this,t,[e]),"_onTimerFired",function(){n._ssdpClient.search("urn:collmot-com:service:flockwave-tcp:1")}),n._ssdpClient=void 0,n._timer=void 0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ta(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.onScanningStarted,r=t.onServerInferred;xa?(n&&n(),this._ssdpClient=window.bridge.createSSDPClient(function(t){if(void 0!==e._ssdpClient){var n=va()(t);if(200===n.statusCode){var r=n.headers.location;if(void 0!==r){var o=new URL(r).protocol;if(["tcp:","tcp+tls:"].includes(o)){var a="http:".concat(r.slice(o.length)),i=new URL(a),l=i.hostname,c=i.port,s=Number(c);if(!(!l||Number.isNaN(s)||s<=0||s>65535)&&e.props.onServerDetected){var u=e.props.onServerDetected({hostName:l,port:s,label:n.headers["label.collmot.com"],protocol:o}),f=u.key,d=u.wasAdded;if(f&&d&&((0,xt.isV4Format)(l)||(0,xt.isV6Format)(l))){var p=(0,ga.A)(e.props.onServerHostnameResolved,f);(0,xt.isLoopback)(l)?p("localhost"):window.bridge&&window.bridge.reverseDNSLookup(l).then(function(e){e&&e.length>0&&p(e[0])}).catch(function(e){})}}}}}}}),this._timer=setInterval(this._onTimerFired,5e3),this._onTimerFired()):r&&((0,ha.A)(o.A,"server.hostName")?r({hostName:o.A.server.hostName,port:o.A.server.port||(o.A.server.isSecure?443:80),protocol:o.A.server.isSecure?"sio+tls:":"sio:"}):"localhost"===window.location.hostname?r({hostName:window.location.hostname,port:5e3,protocol:"sio:"}):r({hostName:window.location.hostname,port:window.location.port||("http:"===window.location.protocol?80:443),protocol:"sio:"}))}},{key:"componentWillUnmount",value:function(){if(xa){var e=this.props.onScanningStopped;e&&e(),void 0!==this._timer&&(clearInterval(this._timer),this._timer=void 0),void 0!==this._ssdpClient&&(this._ssdpClient=void 0)}}},{key:"render",value:function(){return null}}])&&Sa(n.prototype,r),a&&Sa(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(l.Component);Ca(ja,"propTypes",{onScanningStarted:i().func,onScanningStopped:i().func,onServerDetected:i().func,onServerHostnameResolved:i().func,onServerInferred:i().func});var Pa=(0,u.Ng)(null,function(e){return{onScanningStarted:function(){e((0,Xr.gW)()),e((0,Xr._Y)())},onScanningStopped:function(){e((0,Xr.ww)())},onServerDetected:function(t){var n=t.hostName,r=t.port,o=t.protocol,a=t.label,i=(0,Xr.XP)({hostName:n,port:r,protocol:o,label:a});return e(i),{key:i.key,wasAdded:Boolean(i.wasAdded)}},onServerHostnameResolved:function(t,n){e((0,Xr.MX)({key:t,hostName:n}))},onServerInferred:function(t){var n=t.hostName,r=t.port,o=t.protocol,a=(0,Xr.sX)({hostName:n,port:r,protocol:o});return e(a),a.key}}})(ja),ka=n(53275);const _a=e=>{const t=(0,u.Pj)();return(0,l.useMemo)(()=>e(t.getState()),[e,t])};function Na(e){return Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Na(e)}var Ra,Da=["hostName"];function Ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ha(r.key),r)}}function La(e,t,n){return t=Ua(t),function(e,t){if(t&&("object"==Na(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fa()?Reflect.construct(t,n||[],Ua(e).constructor):t.apply(e,n))}function Fa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Fa=function(){return!!e})()}function Ua(e){return Ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ua(e)}function Ga(e,t){return Ga=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ga(e,t)}function Va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(n),!0).forEach(function(t){za(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Va(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function za(e,t,n){return(t=Ha(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ha(e){var t=function(e,t){if("object"!=Na(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Na(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Na(t)?t:t+""}function Wa(){return Wa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wa.apply(null,arguments)}var qa={dialogContent:{paddingBottom:0,paddingLeft:0,paddingRight:0},flexColumn:{display:"flex",flexDirection:"column",gap:"16px"},paddedBox:{paddingLeft:3,paddingRight:3},serverList:{height:"160px",overflow:"auto","& .MuiListItemButton-gutters":{paddingLeft:3,paddingRight:3}}},Ka=function(e){return"sio+tls:"===e.protocol},Ya=function(e){return"localhost"===e.hostName},$a=function(e){var t=e.hostName,n=e.port;return"".concat(t,":").concat(n)},Za=function(e){return Ka(e)?(0,Be.tt)("serverSettingsDialog.secureConnection"):Ya(e)?(0,Be.tt)("serverSettingsDialog.localConnection"):(0,Be.tt)("serverSettingsDialog.unsecuredConnection")},Ja=!(null!==o.A&&void 0!==o.A&&null!==(Ra=o.A.server)&&void 0!==Ra&&Ra.preventManualSetup),Xa=function(e){var t=e.hostName,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Da),r=(0,D.Bd)().t;return l.createElement(M.e0,Wa({label:t?r("serverSettingsDialog.connectingTo",{hostName:t}):r("serverSettingsDialog.connecting")},n))};Xa.propTypes={hostName:i().string};var Qa=function(e){var t=e.isScanning,n=e.items,r=e.onItemSelected,o=e.t;return l.createElement(St.A,{disablePadding:!0,sx:qa.serverList},!t||n&&0!==n.length?null:l.createElement(Ft.Ay,{key:"__scanning"},l.createElement(Ot.A,null,l.createElement(Lt.A,{color:"secondary",size:24})),l.createElement(wt.A,{primary:o("serverSettingsDialog.pleaseWait"),secondary:o("serverSettingsDialog.scanningNetwork")})),n.map(function(e){return l.createElement(Et.A,{key:e.id,onClick:(0,ga.A)(r,e)},l.createElement(Ot.A,null,(n=(t=e).hostName,"inferred"===t.type?l.createElement(ma.A,null):"localhost"===n?l.createElement(da.A,null):l.createElement(ya.A,null))),l.createElement(wt.A,e.label?{primary:e.label,secondary:[$a(e)].filter(Boolean).join(" ")}:{primary:$a(e),secondary:Za(e)(o)}));var t,n}),Ja&&l.createElement(Et.A,{key:"__manual",onClick:(0,ga.A)(r,null)},l.createElement(Ot.A,null,l.createElement(pa.A,null)),l.createElement(wt.A,{primary:o("serverSettingsDialog.enterManually")})))};Qa.propTypes={isScanning:i().bool,items:i().array,onItemSelected:i().func,t:i().func};var ei=(0,u.Ng)(function(e){return{isScanning:e.servers.isScanning,items:(0,Ar.aw)(e)}})((0,D.CI)()(Qa)),ti=(0,zn.fH)({hostName:zn.mw,port:[zn.mw,zn.nd,(0,zn.Tq)(1,65535)]}),ni=function(e){var t=e.onKeyPress,n=e.onSubmit,r=e.t,o=_a(function(e){return Ba(Ba({},e.dialogs.serverSettings),{},{isWebSocket:(0,Ar.nm)(e)===ka.Z.WS})});return l.createElement(V.lV,{initialValues:o,validate:ti,onSubmit:n},function(e){var n=e.handleSubmit;return l.createElement("form",{id:"serverSettings",style:qa.flexColumn,onSubmit:n,onKeyPress:t},l.createElement(G.A_,{fullWidth:!0,name:"hostName",label:r("serverSettingsDialog.hostname"),variant:"filled"}),l.createElement(G.A_,{fullWidth:!0,name:"port",label:r("serverSettingsDialog.port"),variant:"filled"}),l.createElement(G.bH,{name:"isSecure",data:{label:r("serverSettingsDialog.useSecureConnection")}}),hr.SD?l.createElement(G.bH,{name:"isWebSocket",data:{label:r("serverSettingsDialog.useWebSocketLabel")},helperText:r("serverSettingsDialog.useWebSocketHelperText")}):null)})};ni.propTypes={onKeyPress:i().func,onSubmit:i().func,t:i().func};var ri=(0,D.CI)()(ni),oi=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return za(e=La(this,t,[].concat(r)),"_handleKeyPress",function(t){"Enter"===t.nativeEvent.code&&e.props.forceFormSubmission()}),za(e,"_handleServerSelection",function(t){null==t?Ja&&e.props.onTabSelected(null,"manual"):e.props.onSubmit(Ba(Ba({},t),{},{isSecure:t.protocol.endsWith("+tls:")}))}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ga(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this.props,t=e.active,n=e.forceFormSubmission,r=e.hostName,o=e.isConnecting,a=e.onClose,i=e.onDisconnect,c=e.onSubmit,s=e.onTabSelected,u=e.open,f=e.selectedTab,d=[],p=[];switch(d.push(l.createElement(Xa,{key:"__connectionIndicator",hostName:r,visible:o})),f){case"auto":p.push(l.createElement(ei,{key:"serverList",onItemSelected:this._handleServerSelection})),Ja?xa||p.push(l.createElement(D.wD,{key:"content"},function(e){return l.createElement(U.A,{variant:"body2",color:"textSecondary",sx:qa.paddedBox},e("serverSettingsDialog.autodiscoveryIsNotAvailable"))})):p.push(l.createElement(D.wD,{key:"content"},function(e){return l.createElement(U.A,{variant:"body2",color:"textSecondary",sx:qa.paddedBox},e("serverSettingsDialog.serverSelectionRestricted"))}));break;case"manual":Ja&&(p.push(l.createElement(F.A,{key:"content",sx:qa.paddedBox},l.createElement(ri,{onSubmit:c,onKeyPress:this._handleKeyPress}))),d.push(l.createElement(D.wD,{key:"connect"},function(e){return l.createElement(B.A,{color:"primary",onClick:n},e("serverSettingsDialog.connect"))})))}return Ja&&d.push(l.createElement(D.wD,{key:"disconnect"},function(e){return l.createElement(B.A,{disabled:!t,onClick:t?i:void 0},e("serverSettingsDialog.disconnect"))})),d.push(l.createElement(D.wD,{key:"close"},function(e){return l.createElement(B.A,{onClick:a},e("general.action.close"))})),l.createElement(D.wD,null,function(e){return l.createElement(_.A,{fullWidth:!0,open:u,maxWidth:"xs",onClose:a},l.createElement(M.nv,{value:f,onChange:s},l.createElement(R.A,{value:"auto",label:e(Ja?"serverSettingsDialog.autodetected":"serverSettingsDialog.preconfiguredServer")}),Ja&&l.createElement(R.A,{value:"manual",label:e("serverSettingsDialog.manual")})),l.createElement(Pa,null),l.createElement(N.A,{key:"contents",sx:qa.dialogContent},p),l.createElement(Nn.A,null,d))})}}],r&&Ma(n.prototype,r),o&&Ma(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(l.Component);za(oi,"propTypes",{active:i().bool,forceFormSubmission:i().func,hostName:i().string,isConnecting:i().bool,onClose:i().func,onDisconnect:i().func,onSubmit:i().func,onTabSelected:i().func,open:i().bool.isRequired,selectedTab:i().string}),za(oi,"defaultProps",{selectedTab:"auto"});const ai=(0,u.Ng)(function(e){return{active:e.dialogs.serverSettings.active,hostName:(0,Ar.XP)(e),isConnecting:(0,Ar.XE)(e),open:e.dialogs.serverSettings.dialogVisible,selectedTab:e.dialogs.serverSettings.selectedTab}},function(e){return{forceFormSubmission:function(){(0,An.Wp)("serverSettings")},onClose:function(){e(wr())},onDisconnect:function(){e(Tr())},onSubmit:function(t){e(wr({active:!0,hostName:t.hostName,isSecure:t.isSecure,port:Number(t.port),protocol:!hr.SD||t.isWebSocket?ka.Z.WS:ka.Z.TCP}))},onTabSelected:function(t,n){e(Cr(n))}}})(oi);var ii=function(e){var t=e.onClose,n=e.open;return l.createElement(_.A,{open:n},l.createElement(Lo.A,null,"Session expired"),l.createElement(N.A,null,l.createElement(Mo.A,null,"Your demo session has expired. Thank you for evaluating Skybrush Live!"),l.createElement(B.A,{fullWidth:!0,onClick:t},"Click here to return to your Skybrush account")))};ii.propTypes={onClose:i().func,open:i().bool};const li=(0,u.Ng)(function(e){return{open:e.session.isExpired}},function(){return{onClose:function(e,t){"backdropClick"!==t&&"escapeKeyDown"!==t&&window.location.replace(o.A.urls.exit||"https://skybrush.io")}}})(ii);var ci=n(50256),si=n(41105),ui=n(3376),fi=n(21751),di=["clockSkew","component","format","updateInterval"];var pi=function(e){var t=e.clockSkew,n=e.component,r=void 0===n?"span":n,o=e.format,a=void 0===o?"yyyy-MM-dd HH:mm:ss":o,i=e.updateInterval,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,di),s=Date.now()+(t||0),u="function"==typeof a?a(s):(0,si.A)(s,a),f=(0,ui.A)();return(0,fi.A)(f,i||1e3),l.createElement(r,c,u)};pi.propTypes={component:i().string,clockSkew:i().number,format:i().string,updateInterval:i().number};const mi=pi;var yi=(0,Bt.n9)(function(e){return{content:{"& strong":{color:e.palette.text.primary}},card:{flex:1,fontSize:"16px",margin:e.spacing(0,2)},cardLeft:{textAlign:"right"},localTime:{color:uo.Ay.info,fontWeight:"bold"},serverTime:{color:uo.Ay.warning,fontWeight:"bold"}}}),gi=function(e){var t=e.clockSkew,n=yi();return l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",mx:-2,mb:2}},l.createElement(F.A,{className:(0,r.A)(n.card,n.cardLeft)},l.createElement(U.A,{gutterBottom:!0,color:"textPrimary"},"Time on this device"),l.createElement(mi,{className:n.localTime,component:"div"})),l.createElement(F.A,{variant:"outlined",className:n.card},l.createElement(U.A,{gutterBottom:!0,color:"textPrimary"},"Server time"),(0,nt.default)(t)?l.createElement("div",{className:n.serverTime},"unknown"):l.createElement(mi,{className:n.serverTime,clockSkew:t,component:"div"})))};gi.propTypes={clockSkew:i().number};var bi=function(e){var t=e.clockSkew,n=yi();return l.createElement(N.A,{className:n.content},l.createElement(Mo.A,null,"The internal clock of your device and the clock of the Skybrush server are now in sync:"),l.createElement(gi,{clockSkew:t}))};bi.propTypes={clockSkew:i().number};var vi=function(e){var t=e.clockSkew,n=yi();return l.createElement(N.A,{className:n.content},l.createElement(F.A,{sx:{my:2}},l.createElement(U.A,{variant:"h6"},"Why am I seeing this warning?")),l.createElement(Mo.A,null,"The internal clock of your device and the clock of the Skybrush server you have connected to are not in sync:"),l.createElement(gi,{clockSkew:t}),l.createElement(Mo.A,null,"Scheduled actions (such as the coordinated start of a drone swarm at a given time) are performed according to the server clock. If the server clock is behind or ahead of wall clock time, these actions may happen too early or too late."," ",l.createElement("strong",null,"It is your responsibility to ensure that the clock of the server is synchronized to UTC.")),l.createElement(F.A,{sx:{my:2}},l.createElement(U.A,{variant:"h6"},"What should I do now?")),l.createElement(Mo.A,null,"Please check the timestamps reported above and decide which one is correct."),l.createElement(Mo.A,null,l.createElement("span",{className:n.localTime},"If the local time is correct"),", please click on the ",l.createElement("strong",null,"Adjust server time")," button below to adjust the server clock to match the time on this device."),l.createElement(Mo.A,null,l.createElement("span",{className:n.serverTime},"If the server time is correct"),", please update the time on this device and then click on the"," ",l.createElement("strong",null,"Check clock skew")," button to perform another measurement after the update."))};vi.propTypes={clockSkew:i().number};var hi=function(e){var t=e.clockSkew,n=e.isAdjustingServerTime,r=e.isCalculatingClockSkew,o=e.isClockSkewSignificant,a=e.onAdjustServerTime,i=e.onCalculateAndStoreClockSkew,c=e.onClose,s=e.open;return l.createElement(M.aQ,{open:s,title:o?"Clock skew detected between server and client":"Server and client clocks are in sync"},r&&(0,nt.default)(t)?l.createElement(N.A,null,l.createElement(F.A,{align:"center",sx:{my:4}},l.createElement(F.A,null,l.createElement(Lt.A,null)),"Please wait, estimating clock skew...")):o?l.createElement(vi,{clockSkew:t}):l.createElement(bi,{clockSkew:t}),l.createElement(Nn.A,{className:"bottom-bar"},l.createElement(M.e0,{label:n?"Adjusting server time...":"Calculating clock skew...",visible:n||r,flex:1}),l.createElement(B.A,{disabled:(0,nt.default)(t)||r||!o,onClick:a},"Adjust server time"),l.createElement(B.A,{disabled:r,onClick:i},"Check clock skew"),l.createElement(B.A,{onClick:c},"Close")))};hi.propTypes={clockSkew:i().number,isAdjustingServerTime:i().bool,isCalculatingClockSkew:i().bool,isClockSkewSignificant:i().bool,onAdjustServerTime:i().func,onCalculateAndStoreClockSkew:i().func,onClose:i().func,open:i().bool};const Ai=(0,u.Ng)(function(e){return{clockSkew:(0,Ar.my)(e),isAdjustingServerTime:(0,Ar.O2)(e),isCalculatingClockSkew:(0,Ar._O)(e),isClockSkewSignificant:(0,Ar._r)(e),open:(0,Ar.$9)(e)}},{onAdjustServerTime:function(){return e=Fr.A,(0,ur.uC)(function(t,n){var r=(0,Ar.my)(n());if((0,nt.default)(r))throw new Error("Clock skew between server and client is not known");t(Lr(e,r)),t(Dr(e,{method:"accurate"}))});var e},onCalculateAndStoreClockSkew:function(){return Mr(Fr.A,{method:"accurate"})},onClose:Xr.Jp})(hi);const Si={AppSettingsDialog:_n,AuthenticationDialog:Jr,DeauthenticationDialog:oo,FeatureEditorDialog:lr,FlyToTargetDialog:Do,GlobalErrorDialog:Go,LayerSettingsDialog:fa,ServerSettingsDialog:ai,SessionExpiryDialog:li,SubscriptionDialog:ci.A,TimeSyncDialog:Ai};n(78350),n(30237),n(30670);var Ei=n(82067),Oi=n(48555),wi=n(29008),Ti=n(19395),Ci=n(58718),Ii=n(67932),xi=n(35025),ji=(n(5506),n(80243)),Pi=n(64741),ki=n(40961);const _i=(0,Xn.A)((0,Rt.jsx)("path",{d:"M 19,19 H 5 V 5 h 7 V 3 H 5 C 3.89,3 3,3.9 3,5 v 14 c 0,1.1 0.89,2 2,2 h 14 c 1.1,0 2,-0.9 2,-2 v -7 h -2 z m -4.24,-2.76 v -2 H 11.17 L 21,4.41 19.59,3 9.76,12.83 V 9.24 h -2 v 7 z"}),"RestoreWindow");n(21699);var Ni=function(e){return e.detachablePanels.detachedPanels},Ri=function(e,t){return e.detachablePanels.detachedPanels.includes(t)},Di=n(19865);function Mi(e){return Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mi(e)}var Li=["glContainer"];function Fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wi(r.key),r)}}function Gi(e,t,n){return t=Bi(t),function(e,t){if(t&&("object"==Mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Vi()?Reflect.construct(t,n||[],Bi(e).constructor):t.apply(e,n))}function Vi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Vi=function(){return!!e})()}function Bi(e){return Bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bi(e)}function zi(e,t){return zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zi(e,t)}function Hi(e,t,n){return(t=Wi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wi(e){var t=function(e,t){if("object"!=Mi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mi(t)?t:t+""}function qi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ki(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ki(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Yi=function(e){var t=e.element[0].querySelector(".portal-container");if(null!==t)return t;var n=document.createElement("div");return n.classList.add("portal-container"),n.style.display="inline-block",e.titleElement[0].after(n),n},$i=function(e){var t=e.glContainer,n=e.label,r=e.onClick,o=qi((0,l.useState)(Yi(t.tab)),2),a=o[0],i=o[1];(0,l.useEffect)(function(){var e=function(e){return i(Yi(e))};return t.on("tab",e),function(){t.off("tab",e)}},[t]);var c=l.createElement("div",{style:{width:"18px",height:"18px",position:"relative",marginLeft:"5px",marginRight:"-10px"}},l.createElement("ul",{className:"lm_controls"},l.createElement("li",{className:"lm_popout",title:"Detach ".concat(n," panel"),onClick:r})));return ki.createPortal(c,a)};$i.propTypes={glContainer:i().object.isRequired,label:i().string.isRequired,onClick:i().func};var Zi=function(e){var t=e.children,n=e.detached,r=e.glContainer,o=e.label,a=e.onAttach,i=e.onDetach;return n?l.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around",height:"100%",textAlign:"center"}},l.createElement("div",null,o," panel has been detached.",l.createElement("div",{style:{minHeight:"1em"}}),l.createElement(B.A,{variant:"outlined",startIcon:l.createElement(_i,null),onClick:a},"Attach"))):l.createElement(l.Fragment,null,l.createElement($i,{glContainer:r,label:o,onClick:i}),t)};Zi.propTypes={children:i().node.isRequired,detached:i().bool.isRequired,glContainer:i().object.isRequired,label:i().string.isRequired,onAttach:i().func.isRequired,onDetach:i().func.isRequired};var Ji=(0,u.Ng)(function(e,t){return{detached:Ri(e,t.name)}},function(e,t){var n=t.name;return{onAttach:function(){e((0,Di.yv)(n))},onDetach:function(){e((0,Di.kX)(n))}}})(Zi);var Xi=function(e,t,n){var r;return r=function(r){function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Gi(this,o,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zi(e,t)}(o,r),a=o,i=[{key:"render",value:function(){var r=this.props,o=r.glContainer,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(r,Li);return l.createElement(Ji,{glContainer:o,name:e,label:t},l.createElement(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(n),!0).forEach(function(t){Hi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({glContainer:o},a)))}}],i&&Ui(a.prototype,i),c&&Ui(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,i,c}(l.Component),Hi(r,"propTypes",{glContainer:i().object.isRequired}),r};const Qi={default:{label:"Default",layout:{type:"columns",contents:[{type:"stack",contents:[{type:"panel",component:"map",id:"map"},{type:"panel",component:"uav-list",id:"uavList"},{type:"panel",component:"three-d-view",id:"threeDView"}]},{type:"rows",contents:[{type:"stack",contents:[{type:"panel",component:"lcd-clock-panel",id:"clocks"},{type:"panel",component:"saved-location-list",id:"locations"},{type:"panel",component:"layer-list",id:"layers"}],height:25},{type:"stack",contents:[{type:"panel",component:"show-control",id:"show"},{type:"panel",component:"light-control",id:"lights"}]}],width:25}]}}};function el(e){return el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},el(e)}function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(n),!0).forEach(function(t){rl(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rl(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=el(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=el(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==el(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ol(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return al(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?al(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function al(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var il=function(e,t){var n=t.perspectiveBuilder,r=t.componentRegistry;switch(e.type){case"columns":case"rows":case"stack":n[{rows:"makeRows",columns:"makeColumns",stack:"makeStack"}[e.type]]();var o,a=ol(e.contents);try{for(a.s();!(o=a.n()).done;){var i=o.value;il(i,t)}}catch(e){a.e(e)}finally{a.f()}n.finish();break;case"panel":n.add(e.component).setTitle(r[e.component].label),e.id&&n.setId(e.id);break;default:throw new Error("Unknown layout type: ".concat(e.type))}e.width&&n.setRelativeWidth(e.width),e.height&&n.setRelativeHeight(e.height)},ll=function(e,t){return function(n){for(var r=("string"==typeof n?{inherits:n}:n)||{};r.inherits;){var o=Qi[r.inherits]||{};delete r.inherits,r=nl(nl({},o),r)}var a=r,i=a.hideHeaders,l=a.isFixed,c=a.label,u=a.layout,f=new s.OK(t);return il(u,{perspectiveBuilder:f,componentRegistry:e}),{label:c,isFixed:l,state:{content:f.build(),settings:{hasHeaders:!i}}}}},cl=n(41241),sl=n(78641),ul=n(3471),fl=n(16349),dl=n(52764),pl=n(17613),ml=n(65963),yl=n(37566),gl=n(37802),bl=n(37849),vl=n(98999),hl=["onItemActivated","onSelectionChanged","selectedIds"];function Al(){return Al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Al.apply(null,arguments)}var Sl=(0,ml.T_)(function(e,t,n){var r=e.position?l.createElement(M.m_,{content:"Show on map"},l.createElement(ce.A,{edge:"end",size:"large",onClick:function(){return(0,vl.K$)(e.position)}},l.createElement(dl.A,null))):null;return l.createElement(Et.A,{key:e.id,className:n?"selected-list-item":void 0,onClick:t.onItemSelected},l.createElement(M.BG,{status:e.active?"success":"error"}),l.createElement(wt.A,{primary:(0,bl.op)(e)}),l.createElement(pl.A,null,r))},{backgroundHint:"No beacons",dataProvider:"beacons"}),El=function(e){var t=e.onItemActivated,n=e.onSelectionChanged,r=e.selectedIds,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,hl);return l.createElement(F.A,{sx:{display:"flex",flexDirection:"column",height:"100%"}},l.createElement(F.A,{sx:{height:"100%",overflow:"auto"}},l.createElement(Sl,Al({dense:!0,value:r||[],onActivate:t,onChange:n},o))))};El.propTypes={selectedIds:i().arrayOf(i().string).isRequired,onItemActivated:i().func,onSelectionChanged:i().func};const Ol=(0,u.Ng)(function(e){return{beacons:(0,bl.le)(e),selectedIds:(0,bl.iE)(e)}},{onSelectionChanged:function(e){return(0,yl.td)(e.map(gl.LM))}})(El);var wl=n(84241),Tl=n(61612),Cl=n(31404);function Il(e){return Il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Il(e)}function xl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function jl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xl(Object(n),!0).forEach(function(t){Pl(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Pl(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Il(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Il(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Il(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kl=function(e,t){return e.clocks.byId[t]},_l=(0,rt.Mz)(function(e){return e.clocks},Xe.Im),Nl=(0,rt.Mz)(_l,function(e){return e.map(function(e){return jl(jl({},e),{},{updateInterval:(0,Cl.Px)(e)})})}),Rl=[l.createElement(lo.A,{key:"stop",style:{backgroundColor:Vt.A.A700}},l.createElement(Tl.A,null)),l.createElement(lo.A,{key:"play",style:{backgroundColor:Ut.A[500]}},l.createElement(wl.A,null))],Dl=function(e){var t=e.affectedByClockSkew,n=void 0!==t&&t,r=e.clock,o=e.clockSkew,a=void 0===o?0:o,i=e.format,c=void 0===i?"yyyy-MM-dd HH:mm:ss xx":i,s=r.running,u=r.updateInterval,f=Rl[s?1:0],d=(0,Cl.Ag)(r),p=Date.now()+(n&&!(0,nt.default)(a)?a:0),m=(0,Cl.b0)(r,p),y=(0,Cl.bj)(m,r,{format:c}),g=(0,ui.A)();return(0,fi.A)(g,s?u:null),l.createElement(Ft.Ay,null,l.createElement(Ot.A,null,f),l.createElement(wt.A,{primary:y,secondary:d}))};Dl.propTypes={affectedByClockSkew:i().bool,clock:i().shape({epoch:i().number,id:i().string.isRequired,referenceTime:i().number.isRequired,ticks:i().number.isRequired,ticksPerSecond:i().number.isRequired,running:i().bool.isRequired,updateInterval:i().number.isRequired}),clockSkew:i().number,format:i().oneOfType([i().string,i().func])};var Ml=(0,ml.c3)(function(e){return l.createElement(Dl,{key:e.id,clock:e})},{dataProvider:"clocks",displayName:"ClockDisplayListPresentation",backgroundHint:"No clocks"});const Ll=(0,u.Ng)(function(e){return{clocks:Nl(e),dense:!0}},void 0)(Ml);var Fl=n(40845),Ul=n(46821),Gl=n(92750),Vl=n(3797),Bl=n(91683),zl=n(91949),Hl=n(48641);function Wl(e){return Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wl(e)}function ql(){return ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ql.apply(null,arguments)}function Kl(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Wl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wl(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yl=Kl(Kl(Kl(Kl({},zl.KN.CONNECTED,l.createElement(Ot.A,{style:{color:Ut.A[500]}},l.createElement(Dt.A,null))),zl.KN.CONNECTING,l.createElement(Ot.A,{style:{color:Gt.A[700]}},l.createElement(Gl.A,null))),zl.KN.DISCONNECTED,l.createElement(Ot.A,{style:{color:Vt.A.A700}},l.createElement(le.A,null))),zl.KN.DISCONNECTING,l.createElement(Ot.A,{style:{color:Gt.A[700]}},l.createElement(Gl.A,null))),$l=l.createElement(Ot.A,{style:{color:Vl.A[500]}},l.createElement(Fl.A,null)),Zl=Kl(Kl(Kl(Kl({},zl.KN.CONNECTED,"Connected"),zl.KN.CONNECTING,"Connecting"),zl.KN.DISCONNECTED,"Disconnected"),zl.KN.DISCONNECTING,"Disconnecting"),Jl=function(e){var t=e.action,n=e.name,r=e.state,o=e.stateChangedAt,a=Yl[r]||$l,i=o?l.createElement(Bl.A,{date:o}):null,c=t?l.createElement(ce.A,{edge:"end",size:"large",onClick:t},l.createElement(Ul.A,null)):null,s=Zl[r]||"Unknown state";return i&&(s=l.createElement("span",null,s," ",i)),l.createElement(Ft.Ay,null,a,l.createElement(wt.A,{primary:n,secondary:s}),l.createElement(pl.A,null,c))};Jl.propTypes={name:i().string.isRequired,state:i().string.isRequired,stateChangedAt:i().number,action:i().func};var Xl=(0,ml.c3)(function(e){return l.createElement(Jl,ql({key:e.id},e))},{backgroundHint:"No connections",dataProvider:"connections",displayName:"ConnectionListPresentation"});const Ql=(0,u.Ng)(function(e){return{connections:(0,Hl.Rk)(e)}},function(e){return{onShowSettings:function(){e(Ir())}}})(Xl);var ec=(0,rt.Mz)(function(e){return e.datasets},Xe.Im),tc=function(){return l.createElement(Ft.Ay,null,l.createElement(wt.A,{primary:"Dataset"}))};tc.propTypes={id:i().string.isRequired};var nc=(0,ml.c3)(tc,{backgroundHint:"No datasets",dataProvider:"datasets",displayName:"DatasetListPresentation"});const rc=(0,u.Ng)(function(e){return{datasets:ec(e),dense:!0}},void 0)(nc);var oc=n(67089),ac=n(37624),ic=["onItemActivated","onSelectionChanged","selectedIds"];function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lc.apply(null,arguments)}var cc=(0,ml.T_)(function(e,t,n){var r=e.position?l.createElement(M.m_,{content:"Show on map"},l.createElement(ce.A,{edge:"end",size:"large",onClick:function(){return(0,vl.K$)(e.position)}},l.createElement(dl.A,null))):null;return l.createElement(Et.A,{key:e.id,className:n?"selected-list-item":void 0,onClick:t.onItemSelected},l.createElement(wt.A,{primary:e.id}),l.createElement(pl.A,null,r))},{backgroundHint:"No docking stations",dataProvider:"docks"}),sc=function(e){var t=e.onItemActivated,n=e.onSelectionChanged,r=e.selectedIds,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ic);return l.createElement(F.A,{sx:{display:"flex",flexDirection:"column",height:"100%"}},l.createElement(F.A,{sx:{height:"100%",overflow:"auto"}},l.createElement(cc,lc({dense:!0,value:r||[],onActivate:t,onChange:n},o))))};sc.propTypes={selectedIds:i().arrayOf(i().string).isRequired,onItemActivated:i().func,onSelectionChanged:i().func};const uc=(0,u.Ng)(function(e){return{docks:(0,ac.Q)(e),selectedIds:(0,ac.z)(e)}},{onItemActivated:oc.E9,onSelectionChanged:e=>(0,yl.td)(e.map(gl.Kg))})(sc);var fc=n(82139),dc=n(14391),pc=n(75710),mc=n(31600),yc=n(70791),gc=n(51475),bc=n(17880),vc=n(28749);const hc=()=>{const[e,t]=(0,l.useState)(null),n=()=>{t(null)};return[e,e=>{t(e.currentTarget)},n,e=>e?t=>{e(t),n()}:void 0]};function Ac(e){return Ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ac(e)}function Sc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ec(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ac(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ac(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ac(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Tc=(0,Bt.n9)({button:{"@container (max-width: 350px)":{display:"none"}},menu:{"@container (min-width: 351px)":{display:"none"}}}),Cc=function(e){var t=e.feature,n=e.onEdit,r=e.onRemove,o=e.onSelect,a=e.onToggleVisibility,i=e.selected,c=e.shouldFill,s=e.suggestedColor,u=e.suggestedLabel,f=(0,l.useCallback)(function(){t.type,Bn.lo.CIRCLE,(0,vl.eg)(t.points)},[t.points,t.type]),d=t.label,p=t.type,m=t.visible,y=(0,Bn.tX)(p,c),g=[{action:f,icon:l.createElement(dc.A,null),key:"focus",label:"Focus feature"},{action:a,icon:m?l.createElement(mc.A,null):l.createElement(yc.A,{color:"disabled"}),key:"visibility",label:"Toggle visibility"},{action:n,icon:l.createElement(pa.A,null),key:"edit",label:"Feature properties"},{action:r,icon:l.createElement(fc.A,null),key:"delete",label:"Remove"}],b=Tc(),v=l.createElement(l.Fragment,null,g.map(function(e){var t=e.action,n=e.icon,r=e.key,o=e.label;return l.createElement(vc.W1,{key:r,content:o},l.createElement(ce.A,{className:b.button,edge:"end",size:"large",onClick:t},n))})),h=Oc(hc(),4),A=h[0],S=h[1],E=h[2],O=h[3],w=l.createElement(l.Fragment,null,l.createElement(ce.A,{className:b.menu,edge:"end",size:"large",onClick:S},l.createElement(pc.A,null)),l.createElement(gc.A,{anchorEl:A,open:null!==A,variant:"menu",onClose:E},g.map(function(e){var t=e.action,n=e.icon,r=e.key,o=e.label;return l.createElement(ae.A,{key:r,onClick:O(t)},l.createElement(Ot.A,null,n),l.createElement(wt.A,{primary:o}))})));return l.createElement(Et.A,{sx:{containerType:"inline-size","@container (min-width: 351px)":{paddingRight:24*g.length+12*(g.length+1)}},selected:i,onClick:o},l.createElement(Ot.A,{style:{color:s,minWidth:0,marginRight:"16px"}},l.createElement(y,null)),d?l.createElement(wt.A,{style:{overflowWrap:"break-word"},primary:d}):l.createElement(wt.A,{secondary:u}),l.createElement(pl.A,null,v,w))};Cc.propTypes={onEdit:i().func,onRemove:i().func,onSelect:i().func,onToggleVisibility:i().func,feature:i().object.isRequired,selected:i().bool,shouldFill:i().bool,suggestedColor:i().string,suggestedLabel:i().string};var Ic=(0,u.Ng)(function(e,t){var n=t.feature;return{selected:(0,Dn.sU)(e).includes(n.id),shouldFill:(0,Jn.Vl)(e,n.id),suggestedColor:(0,Jn.MJ)(e,n.id),suggestedLabel:(0,Jn.TP)(e,n.id)}},function(e,t){var n=t.feature,r=(0,ml.p_)({activateItem:Rn.jQ,getSelection:Dn.sU,setSelection:Rn.ky,getListItems:Dn.TG});return function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sc(Object(n),!0).forEach(function(t){Ec(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},(0,bc.zH)({onEdit:Rn.jQ.bind(null,n.id),onSelect:r.bind(null,n.id),onRemove:Mn.Hk.bind(null,[n.id]),onToggleVisibility:Rn.r5.bind(null,n.id)},e))}})(Cc),xc=(0,ml.c3)(function(e){return l.createElement(Ic,{key:e.id,feature:e})},{backgroundHint:"No features",dataProvider:"features",displayName:"FeatureListPresentation"});const jc=(0,u.Ng)(function(e){return{features:(0,Dn.VQ)(e)}})(xc);n(46449),n(93514);var Pc=n(49565),kc=n(96224),_c=n(11365),Nc=n(68054),Rc=n(81963),Dc=n(49648),Mc=n(57632);function Lc(e){return Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(e)}function Fc(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return Uc(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Uc(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Uc(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,Uc(f,"constructor",s),Uc(s,"constructor",c),c.displayName="GeneratorFunction",Uc(s,o,"GeneratorFunction"),Uc(f),Uc(f,o,"Generator"),Uc(f,r,function(){return this}),Uc(f,"toString",function(){return"[object Generator]"}),(Fc=function(){return{w:a,m:d}})()}function Uc(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Uc=function(e,t,n,r){function a(t,n){Uc(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},Uc(e,t,n,r)}function Gc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gc(Object(n),!0).forEach(function(t){Bc(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Bc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Lc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lc(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||Wc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Wc(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function Wc(e,t){if(e){if("string"==typeof e)return qc(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qc(e,t):void 0}}function qc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Kc(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var Yc=(0,Bt.n9)(function(e){return{root:{background:e.palette.action.hover,padding:e.spacing(0,1)}}}),$c=function(e){var t=e.importShapeFile,n=Yc();return l.createElement(Pc.A,{square:!0,className:n.root,elevation:4},l.createElement(kc.A,{disableGutters:!0,variant:"dense",style:{height:36,minHeight:36}},l.createElement(Rc.A,{size:"small",filter:["application/zip"],startIcon:l.createElement(At.A,null),onSelected:t},"Import shapefile")))};$c.propTypes={importShapeFile:i().func};const Zc=(0,u.Ng)(null,function(e){return{importShapeFile:function(t){return(n=Fc().m(function n(){var r,o,a,i,l,c;return Fc().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,(0,Mc.g6)(t);case 1:return r=n.v,n.n=2,(0,Nc.Ay)(r);case 2:l=n.v,o=[l].flat(),a=new _c.A({featureProjection:"EPSG:3857"}),i=0,(0,u.vA)(function(){var t,n=Hc(o);try{for(n.s();!(t=n.n()).done;){var r,l=t.value,c=a.readFeatures(l).flatMap(function(e){return(0,Dc.o3)(e)}),s=Hc(c.entries());try{for(s.s();!(r=s.n()).done;){var u=zc(r.value,2),f=u[0],d=u[1],p=0===f?"":" (".concat(f,")");e((0,Rn.zT)(Vc(Vc({},d),{},{label:l.fileName+p,owner:"user"}),l.fileName)),i++}}catch(e){s.e(e)}finally{s.f()}}}catch(e){n.e(e)}finally{n.f()}}),e((0,Ci.Te)("Successfully imported ".concat(i," feature").concat(i>1?"s":""))),n.n=4;break;case 3:n.p=3,c=n.v,e((0,Ci.Qg)("Error while importing shapefile: ".concat(c)));case 4:return n.a(2)}},n,null,[[0,3]])}),function(){var e=this,t=arguments;return new Promise(function(r,o){var a=n.apply(e,t);function i(e){Kc(a,r,o,i,l,"next",e)}function l(e){Kc(a,r,o,i,l,"throw",e)}i(void 0)})})();var n}}})($c);const Jc=function(){return l.createElement(F.A,{sx:{display:"flex",flexDirection:"column",height:"100%"}},l.createElement(F.A,{sx:{height:"100%",overflowY:"auto"}},l.createElement(jc,{dense:!0})),l.createElement(Zc,null))};var Xc=n(64155);function Qc(e){return function(e){if(Array.isArray(e))return es(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return es(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?es(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ts=function(e){return l.createElement(Et.A,{key:"__newItem__",onClick:e.onNewItem},l.createElement(Ot.A,null,l.createElement(Xc.A,null)),l.createElement(wt.A,{primary:"Add new layer"}))},ns=(0,ml.k3)(function(e,t){var n=(0,Wo.AT)(e.type);return l.createElement(Et.A,{key:e.id,style:e.visible?void 0:{opacity:.3},onClick:t.onItemSelected},n&&l.createElement(Ot.A,null,n),l.createElement(wt.A,{primary:e.label,secondary:(0,Wo.Pr)(e.type)}))},{dataProvider:"layers",postprocess:function(e,t){return[ts(t)].concat(Qc(e))}});ns.propTypes={onChange:i().func,onNewItem:i().func,layers:i().arrayOf(i().oneOfType([i().object,i().string])).isRequired};const rs=(0,u.Ng)(function(e){return{dense:!0,layers:(0,Hl.mg)(e)}},function(e){return{onChange:function(t,n){e((0,zo.Mj)(n.id))},onNewItem:function(){var t=(0,Ho.VE)();e(t),t.id&&e((0,zo.Mj)(t.id))}}})(ns);n(33771),n(26910);var os=n(90),as=n(41470);function is(e){return function(e){if(Array.isArray(e))return ss(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ls(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=cs(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function cs(e,t){if(e){if("string"==typeof e)return ss(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ss(e,t):void 0}}function ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var us=function(e,t){var n=e.lcdClock.byId[t];return n?n.clockId:void 0},fs=function(e,t){var n=e.lcdClock.byId[t];return n?n.preset:0},ds=(0,rt.Mz)(_l,function(e){for(var t=e.map(function(e){return{id:e.id,label:(0,Cl.SQ)(e)}}),n=(0,os.A)(t,"label"),r=0,o=Object.keys(n);r<o.length;r++){var a=o[r];if(n[a]>1){var i,l=1,c=ls(t);try{for(c.s();!(i=c.n()).done;){var s=i.value;s.label===a&&(s.label="".concat(a).concat(l),l++)}}catch(e){c.e(e)}finally{c.f()}}}return t}),ps=((0,rt.Mz)(function(e){return e.lcdClock},Xe.Im),function(e){var t,n=e.lcdClock,r=n.byId,o=n.order.map(function(e){return r[e]?r[e].clockId:void 0}).filter(Boolean),a=ls(_l(e));try{for(a.s();!(t=a.n()).done;){var i=t.value;if(!o.includes(i.id))return i.id}}catch(e){a.e(e)}finally{a.f()}var l=(0,os.A)(o),c=Math.min.apply(Math,is(Object.values(l))),s=Object.keys((0,as.A)(l,function(e){return e===c}));return s.sort(),s[0]}),ms=function(e){var t,n=e.lcdClock,r=n.byId,o=n.order,a=new Array(5).fill(0),i=ls(o);try{for(i.s();!(t=i.n()).done;){var l=r[t.value];l&&"number"==typeof l.preset&&l.preset>=0&&l.preset<5&&a[l.preset]++}}catch(e){i.e(e)}finally{i.f()}return a.indexOf(Math.min.apply(Math,is(a)))},ys=n(85876);var gs=n(7348),bs=n(53356),vs=n(44522);function hs(e){return hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hs(e)}var As=["children","color","decoration","height","off","offSegments","variant"];function Ss(){return Ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ss.apply(null,arguments)}function Es(e){return function(e){if(Array.isArray(e))return Os(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Os(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Os(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Os(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(n),!0).forEach(function(t){Cs(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Cs(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=hs(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hs(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(94746);var Is={default:{},"7segment":{fontFamily:"DSEG7-Classic",allSegmentsChar:"8"},"14segment":{fontFamily:"DSEG14-Classic",allSegmentsChar:"~"}},xs={position:"absolute",left:0,top:0,opacity:.2},js=function(e){var t=e.children,n=e.color,r=e.decoration,o=void 0===r?"plain":r,a=e.height,i=e.off,c=e.offSegments,s=e.variant,u=void 0===s?"default":s,f=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,As),d=(0,l.useMemo)(function(){var e=void 0===a?void 0:Math.floor(.7*a),t={fontSize:e,height:a};if(void 0!==n&&(t.color=n),i&&(t.opacity=.3),!i)switch(o){case"glow":var r=void 0===e?4:Math.round(e);t.textShadow="0 0 ".concat(r,"px ").concat(n||"currentColor");break;case"shadow":var l=void 0===e||e<=16?1:2,c=new so.A(n||"black").alpha(.3).string();t.textShadow="".concat(l,"px ").concat(l,"px 0 ").concat(c)}return t.transition="color 150ms",t},[n,o,a,i]),p=(0,l.useMemo)(function(){var e=Math.floor(.7*a);return Ts(Ts({},xs),{},{color:n||"black",fontSize:e,height:a})},[n,a]);return u=u||"default",l.createElement(F.A,Ss({},f,{sx:[{position:"relative",display:"inline-block",fontFamily:Is[u].fontFamily}].concat(Es(Array.isArray(f.sx)?f.sx:[f.sx]))}),c&&"default"!==u&&l.createElement("div",{style:p},t.replace(/[^:. ]/g,Is[u].allSegmentsChar||"")),l.createElement("div",{style:d},t))};js.propTypes={children:i().node,color:i().string,decoration:i().oneOf(["plain","glow","shadow"]),height:i().number,off:i().bool,offSegments:i().bool,variant:i().oneOf(["default","7segment","14segment"])};const Ps=js;function ks(){return ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ks.apply(null,arguments)}var _s=function(e){var t=e.clocks,n=e.lcdStyle,r=e.onClick,o=e.selectedClockId;return t.map(function(e){return l.createElement(Ps,ks({key:e.id},n,{p:.5,off:e.id!==o,onClick:e.id!==o&&r?function(){return r(e.id)}:void 0}),e.label)})};_s.propTypes={clocks:i().arrayOf(i().shape({id:i().string,label:i().string})),lcdStyle:i().object,onClock:i().func,selectedClockId:i().string};const Ns=_s;var Rs=["affectedByClockSkew","clock","clockId","clockSkew","format","signed","updateInterval"];var Ds=function(e){var t=e.affectedByClockSkew,n=e.clock,r=(e.clockId,e.clockSkew),o=e.format,a=void 0===o?"HH:mm:ss":o,i=e.signed,c=e.updateInterval,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Rs),u=(n||{}).running,f=Date.now()+(t&&!(0,nt.default)(r)?r:0),d=n?(0,Cl.b0)(n,f):void 0,p=void 0===d?"--:--:--":(0,Cl.bj)(d,n,{format:a}),m=(0,ui.A)();return i&&"-"!==p.charAt(0)&&(p="!"+p),(0,fi.A)(m,u?c:null),l.createElement(Ps,s,p)};Ds.propTypes={affectedByClockSkew:i().bool,clock:i().object,clockId:i().string,clockSkew:i().number,format:i().string,signed:i().bool,updateInterval:i().number};const Ms=(0,u.Ng)(function(e,t){var n=kl(e,t.clockId),r=(0,Cl.$t)(n),o=(0,Cl.KK)(n),a=(0,Cl.Px)(n);return{affectedByClockSkew:o,clock:n,clockSkew:(0,Ar.li)(e),signed:r,updateInterval:a}},{})(Ds);function Ls(e){return Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ls(e)}var Fs=["clocks","id","onAdd","onClockSelected","onNextPreset","onRemove","preset","selectedClockId","hideInactiveSegmentsOnDarkLCD","style"];function Us(){return Us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Us.apply(null,arguments)}function Gs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vs(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ls(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ls(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ls(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zs(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zs(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Hs=(0,Bt.n9)(function(e){return{root:{alignItems:"stretch",borderBottom:"light"===e.palette.mode?"4px solid #f4f4f4":"4px solid black",display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",position:"relative",userSelect:"none",boxShadow:"light"===e.palette.mode?"0 0 6px 2px rgba(0, 0, 0, 0.4) inset":void 0,transition:"background-color 150ms","&:last-child":{borderBottom:"none"}},button:{width:24,textAlign:"center",lineHeight:"24px"}}}),Ws={dark:[{backgroundColor:"black",color:function(e){return e.palette.secondary.main}},{backgroundColor:"black",color:"#f00"},{backgroundColor:"black",color:"#0f0"},{backgroundColor:"black",color:"#fc0"},{backgroundColor:"black",color:"#c0f"}],light:[{backgroundColor:"rgb(149, 177, 89)",color:"black",noise:!0},{backgroundColor:"#f80",color:"black",noise:!0},{backgroundColor:"#0cf",color:"black",noise:!0},{backgroundColor:"#fc0",color:"black",noise:!0},{backgroundColor:"#4fc",color:"black",noise:!0}]},qs=function(e,t,n){return("function"==typeof t?t(e):t)||n},Ks=function(e){var t=e.clocks,n=(e.id,e.onAdd),o=e.onClockSelected,a=e.onNextPreset,i=e.onRemove,c=e.preset,s=void 0===c?0:c,u=e.selectedClockId,f=e.hideInactiveSegmentsOnDarkLCD,d=e.style,p=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Fs),m=Hs(),y=(0,bs.A)(),g=Bs((0,vs.A)(),2),b=g[0],v=g[1],h=v.height,A=v.width,S=(0,Bt.Mw)(y)?"dark":"light",E=Ws[S][s]||Ws[S][0],O="dark"===S?{color:qs(y,E.color,y.palette.secondary.main),decoration:"glow",offSegments:!f}:{color:qs(y,E.color,"black"),decoration:"shadow"},w=A>0&&h>0?Math.floor(A<5*h?A/5:h):0,T=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gs(Object(n),!0).forEach(function(t){Vs(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({backgroundColor:qs(y,E.backgroundColor,"black"),backgroundImage:qs(y,E.noise,!1)?"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWDg4N3d3dtbW17e3t1dXWBgYGHh4d5eXlzc3OLi4ubm5uVlZWPj4+NjY19fX2JiYl/f39ra2uRkZGZmZlpaWmXl5dvb29xcXGTk5NnZ2c8TV1mAAAAG3RSTlNAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAvEOwtAAAFVklEQVR4XpWWB67c2BUFb3g557T/hRo9/WUMZHlgr4Bg8Z4qQgQJlHI4A8SzFVrapvmTF9O7dmYRFZ60YiBhJRCgh1FYhiLAmdvX0CzTOpNE77ME0Zty/nWWzchDtiqrmQDeuv3powQ5ta2eN0FY0InkqDD73lT9c9lEzwUNqgFHs9VQce3TVClFCQrSTfOiYkVJQBmpbq2L6iZavPnAPcoU0dSw0SUTqz/GtrGuXfbyyBniKykOWQWGqwwMA7QiYAxi+IlPdqo+hYHnUt5ZPfnsHJyNiDtnpJyayNBkF6cWoYGAMY92U2hXHF/C1M8uP/ZtYdiuj26UdAdQQSXQErwSOMzt/XWRWAz5GuSBIkwG1H3FabJ2OsUOUhGC6tK4EMtJO0ttC6IBD3kM0ve0tJwMdSfjZo+EEISaeTr9P3wYrGjXqyC1krcKdhMpxEnt5JetoulscpyzhXN5FRpuPHvbeQaKxFAEB6EN+cYN6xD7RYGpXpNndMmZgM5Dcs3YSNFDHUo2LGfZuukSWyUYirJAdYbF3MfqEKmjM+I2EfhA94iG3L7uKrR+GdWD73ydlIB+6hgref1QTlmgmbM3/LeX5GI1Ux1RWpgxpLuZ2+I+IjzZ8wqE4nilvQdkUdfhzI5QDWy+kw5Wgg2pGpeEVeCCA7b85BO3F9DzxB3cdqvBzWcmzbyMiqhzuYqtHRVG2y4x+KOlnyqla8AoWWpuBoYRxzXrfKuILl6SfiWCbjxoZJUaCBj1CjH7GIaDbc9kqBY3W/Rgjda1iqQcOJu2WW+76pZC9QG7M00dffe9hNnseupFL53r8F7YHSwJWUKP2q+k7RdsxyOB11n0xtOvnW4irMMFNV4H0uqwS5ExsmP9AxbDTc9JwgneAT5vTiUSm1E7BSflSt3bfa1tv8Di3R8n3Af7MNWzs49hmauE2wP+ttrq+AsWpFG2awvsuOqbipWHgtuvuaAE+A1Z/7gC9hesnr+7wqCwG8c5yAg3AL1fm8T9AZtp/bbJGwl1pNrE7RuOX7PeMRUERVaPpEs+yqeoSmuOlokqw49pgomjLeh7icHNlG19yjs6XXOMedYm5xH2YxpV2tc0Ro2jJfxC50ApuxGob7lMsxfTbeUv07TyYxpeLucEH1gNd4IKH2LAg5TdVhlCafZvpskfncCfx8pOhJzd76bJWeYFnFciwcYfubRc12Ip/ppIhA1/mSZ/RxjFDrJC5xifFjJpY2Xl5zXdguFqYyTR1zSp1Y9p+tktDYYSNflcxI0iyO4TPBdlRcpeqjK/piF5bklq77VSEaA+z8qmJTFzIWiitbnzR794USKBUaT0NTEsVjZqLaFVqJoPN9ODG70IPbfBHKK+/q/AWR0tJzYHRULOa4MP+W/HfGadZUbfw177G7j/OGbIs8TahLyynl4X4RinF793Oz+BU0saXtUHrVBFT/DnA3ctNPoGbs4hRIjTok8i+algT1lTHi4SxFvONKNrgQFAq2/gFnWMXgwffgYMJpiKYkmW3tTg3ZQ9Jq+f8XN+A5eeUKHWvJWJ2sgJ1Sop+wwhqFVijqWaJhwtD8MNlSBeWNNWTa5Z5kPZw5+LbVT99wqTdx29lMUH4OIG/D86ruKEauBjvH5xy6um/Sfj7ei6UUVk4AIl3MyD4MSSTOFgSwsH/QJWaQ5as7ZcmgBZkzjjU1UrQ74ci1gWBCSGHtuV1H2mhSnO3Wp/3fEV5a+4wz//6qy8JxjZsmxxy5+4w9CDNJY09T072iKG0EnOS0arEYgXqYnXcYHwjTtUNAcMelOd4xpkoqiTYICWFq0JSiPfPDQdnt+4/wuqcXY47QILbgAAAABJRU5ErkJggg==)":void 0},d);return l.createElement(F.A,Us({className:(0,r.A)(m.root),style:T},p),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},n&&l.createElement(F.A,{className:(0,r.A)(m.button),onClick:n},l.createElement(Ps,O,"+")),i&&l.createElement(F.A,{className:(0,r.A)(m.button),onClick:i},l.createElement(Ps,O,"X")),l.createElement(F.A,{sx:{flex:1}}),l.createElement(Ns,{clocks:t,lcdStyle:O,selectedClockId:u,onClick:o}),l.createElement(F.A,{sx:{flex:1}}),l.createElement(F.A,{className:(0,r.A)(m.button),onClick:a},l.createElement(Ps,O,l.createElement(gs.A,{style:{fontSize:12}})))),l.createElement(F.A,{ref:b,sx:{flex:1,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"}},l.createElement(Ms,Us({clockId:u,height:w,variant:"14segment"},O))))};Ks.propTypes={clocks:i().arrayOf(i().shape({id:i().string,label:i().string})),id:i().string,preset:i().number,onAdd:i().func,onClockSelected:i().func,onNextPreset:i().func,onRemove:i().func,selectedClockId:i().string,hideInactiveSegmentsOnDarkLCD:i().bool,style:i().object};const Ys=(0,u.Ng)(function(e,t){return{clocks:ds(e),preset:fs(e,t.id),selectedClockId:us(e,t.id),hideInactiveSegmentsOnDarkLCD:(0,un.Cu)(e)}},function(e,t){return{onClockSelected:function(n){e((0,ys.vf)({clockId:n,id:t.id}))},onNextPreset:function(){var n;e((n=t.id,function(e,t){var r,o=t().lcdClock.byId[n],a=o?o.preset:-1;e((0,ys.Br)({id:n,preset:(r=a,(r+1)%5)}))}))}}})(Ks);var $s=(0,Bt.n9)(function(){return{root:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"}}}),Zs=function(e){var t=e.addClockDisplay,n=e.ids,o=e.removeClockDisplay,a=$s();return l.createElement(F.A,{className:(0,r.A)(a.root)},(n||[]).map(function(e,n){return l.createElement(Ys,{key:e,id:e,flex:1,onAdd:0===n?t:null,onRemove:0===n?null:function(){return o(e)}})}))};Zs.propTypes={ids:i().arrayOf(i().string),addClockDisplay:i().func,removeClockDisplay:i().func};const Js=(0,u.Ng)(function(e){return{ids:e.lcdClock.order}},{addClockDisplay:function(){return function(e,t){var n=t();e((0,ys.e_)({clockId:ps(n),preset:ms(n)}))}},removeClockDisplay:ys.VG})(Zs);var Xs=n(15548),Qs=n(7612),eu=n(42149);const tu=(0,Bt.n9)(e=>({icon:{fontSize:"48px"},root:{...e.typography.button,borderRadius:e.spacing(.5),boxShadow:e.shadows[2],boxSizing:"border-box",flexDirection:"column",textDecoration:"none",transition:e.transitions.create(["background-color","box-shadow"],{duration:e.transitions.duration.short})}})),nu=({children:e,className:t,color:n,dense:o=!1,icon:a,...i})=>{const c=(0,l.useMemo)(()=>(0,so.A)(n),[n]),s=tu();return(0,Rt.jsxs)(eu.A,{focusRipple:!0,className:(0,r.A)(s.root,t),sx:e=>({backgroundColor:n,color:c.isLight()?"rgba(0, 0, 0, 0.87)":"rgba(255, 255, 255, 0.87)",padding:e.spacing(1,o?1:3),"&:hover":{backgroundColor:c.darken(.16).string(),boxShadow:e.shadows[4]}}),...i,children:[a&&(0,Rt.jsx)("div",{className:s.icon,children:a}),(0,Rt.jsx)("div",{children:e})]})};function ru(e){return e.lightControl.active}function ou(e){return e.lightControl.color}var au=n(58364);function iu(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return lu(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(lu(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,lu(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,lu(f,"constructor",s),lu(s,"constructor",c),c.displayName="GeneratorFunction",lu(s,o,"GeneratorFunction"),lu(f),lu(f,o,"Generator"),lu(f,r,function(){return this}),lu(f,"toString",function(){return"[object Generator]"}),(iu=function(){return{w:a,m:d}})()}function lu(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}lu=function(e,t,n,r){function a(t,n){lu(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},lu(e,t,n,r)}function cu(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function su(e,t){return uu.apply(this,arguments)}function uu(){var e;return e=iu().m(function e(t,n){var r,o,a;return iu().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=n(),o=ru(r),a=ou(r),e.p=1,e.n=2,Fr.A.execute.setShowLightConfiguration({effect:o?"solid":"off",color:(0,so.A)(a).rgb().array()});case 2:e.n=4;break;case 3:e.p=3,e.v,t((0,Ci.Ds)({message:"Failed to update light configuration on the server.",semantics:Ii.N.ERROR}));case 4:return e.a(2)}},e,null,[[1,3]])}),uu=function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){cu(a,r,o,i,l,"next",e)}function l(e){cu(a,r,o,i,l,"throw",e)}i(void 0)})},uu.apply(this,arguments)}var fu=["color","label","onClick"];function du(){return du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},du.apply(null,arguments)}var pu=function(e){var t=e.color,n=e.label,r=void 0===n?"\xa0":n,o=e.onClick,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,fu);return l.createElement(nu,du({dense:!0,color:t},a,{onClick:o?function(){return o(t)}:void 0}),r)};pu.propTypes={color:i().string,label:i().string,onClick:i().func};var mu=(0,Bt.n9)(function(e){return{root:{display:"flex",flex:1,flexDirection:"column",height:"100%",padding:e.spacing(1),"& .react-colorful":{borderRadius:e.shape.borderRadius,width:"100%"},"& .react-colorful__saturation":{borderRadius:"".concat(e.shape.borderRadius,"px ").concat(e.shape.borderRadius,"px 0 0")},"& .react-colorful__last_control":{borderRadius:"0 0 ".concat(e.shape.borderRadius,"px ").concat(e.shape.borderRadius,"px")}},grid:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:e.spacing(.5)},picker:{flex:1,padding:e.spacing(1,0)},textField:{background:e.palette.action.hover,border:"none",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,padding:e.spacing(1),textAlign:"center",textTransform:"uppercase","&:focus":{outline:"none"}}}}),yu=function(e){var t=e.color,n=e.onSetColor,r=e.onSetColorAndActivate,o=e.t,a=mu();return l.createElement(F.A,{className:a.root},l.createElement(F.A,{className:a.grid},l.createElement(pu,{color:"#000000",label:o("lightControlGrid.allOff"),style:{gridColumn:"1 / span 2"},onClick:r}),l.createElement(pu,{color:"#404040",label:"25%",onClick:r}),l.createElement(pu,{color:"#808080",label:"50%",onClick:r}),l.createElement(pu,{color:"#ffffff",label:o("lightControlGrid.allOn"),style:{gridColumn:"5 / span 3"},onClick:r}),l.createElement(pu,{color:"#ff0000",onClick:r}),l.createElement(pu,{color:"#ffff00",onClick:r}),l.createElement(pu,{color:"#00ff00",onClick:r}),l.createElement(pu,{color:"#00ffff",onClick:r}),l.createElement(pu,{color:"#0000ff",onClick:r}),l.createElement(pu,{color:"#ff00ff",onClick:r})),l.createElement(Qs.jI,{className:a.picker,color:t,onChange:n}),l.createElement(Qs.HC,{prefixed:!0,className:a.textField,color:t,onChange:n}))};yu.propTypes={color:i().string,onSetColor:i().func,onSetColorAndActivate:i().func,t:i().func};const gu=(0,u.Ng)(function(e){return{color:ou(e)}},{onSetColor:function(e){return function(t,n){var r=ru(n());t((0,au.wW)(e)),r&&su(t,n)}},onSetColorAndActivate:function(e){return function(t,n){t((0,au.wW)(e)),t((0,au.eY)(!0)),su(t,n)}}})((0,D.CI)()(yu));var bu=function(e){var t=e.active,n=e.connected,r=e.onToggle,o=e.t;return l.createElement(Et.A,{disabled:!n,onClick:n?r:void 0},l.createElement(Tt.A,{checked:t&&n}),l.createElement(wt.A,{primary:o(n?t?"lightControl.fromGCS":"lightControl.notFromGCS":"lightControl.notConnected"),secondary:o(n?t?"lightControl.restoreDefault":"lightControl.takeControl":"lightControl.connectToAServer")}))};bu.propTypes={active:i().bool,connected:i().bool,onToggle:i().func,t:i().func};const vu=(0,u.Ng)(function(e){return{active:ru(e),connected:(0,Ar.UJ)(e)}},{onToggle:function(){return function(e,t){var n=ru(t());e((0,au.eY)(!n)),su(e,t)}}})((0,D.CI)()(bu));const hu=function(){return l.createElement(F.A,{sx:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"}},l.createElement(St.A,{dense:!0},l.createElement(vu,null)),l.createElement(Xs.A,null),l.createElement(gu,null))};var Au=n(82077),Su=(n(9868),(0,rt.Mz)(function(e){return e.savedLocations},Xe.Im)),Eu=(0,rt.Mz)(function(e){return e.map.view},function(e){return(0,He.Ts)(e)},function(e,t){return{center:{lon:e.position[0].toFixed(6),lat:e.position[1].toFixed(6)},rotation:t,zoom:Math.round(e.zoom)}}),Ou=function(e){return e.dialogs.savedLocationEditor.editedLocationId},wu=function(e){return e.dialogs.savedLocationEditor.dialogVisible},Tu=n(44690),Cu=n(623);function Iu(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return xu(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(xu(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,xu(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,xu(f,"constructor",s),xu(s,"constructor",c),c.displayName="GeneratorFunction",xu(s,o,"GeneratorFunction"),xu(f),xu(f,o,"Generator"),xu(f,r,function(){return this}),xu(f,"toString",function(){return"[object Generator]"}),(Iu=function(){return{w:a,m:d}})()}function xu(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}xu=function(e,t,n,r){function a(t,n){xu(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},xu(e,t,n,r)}function ju(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}Tu.o.addSavedLocation;var Pu=Tu.o.createNewSavedLocation,ku=Tu.o.deleteSavedLocation,_u=Tu.o.updateSavedLocation,Nu=Cu.o.editSavedLocation,Ru=Cu.o._cancelLocationEditing,Du=Cu.o._closeSavedLocationEditorDialog,Mu=function(){return function(){var e,t=(e=Iu().m(function e(t,n){return Iu().w(function(e){for(;;)switch(e.n){case 0:return t(Du()),e.n=1,(0,fr.Ay)(1e3);case 1:wu(n())||t(Ru());case 2:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){ju(a,r,o,i,l,"next",e)}function l(e){ju(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e,n){return t.apply(this,arguments)}}()};function Lu(e){return function(e){if(Array.isArray(e))return Fu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Fu(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fu(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Uu=function(e){var t=e.location,n=e.onEditItem,r=t.id,o=t.name,a=function(){return n(r)},i=l.createElement(D.wD,null,function(e){return l.createElement(vc.W1,{content:e("savedLocation.edit")},l.createElement(ce.A,{edge:"end",size:"large",onClick:a},l.createElement(pa.A,null)))});return l.createElement(Et.A,{onClick:function(){return(0,vl.K$)(t.center,{rotation:t.rotation,zoom:t.zoom})}},l.createElement(wt.A,{primary:o}),l.createElement(pl.A,null,i))};Uu.propTypes={onEditItem:i().func.isRequired,location:i().object.isRequired};var Gu=function(e){return l.createElement(Et.A,{key:"__addNew__",onClick:e.onNewItem},l.createElement(D.wD,null,function(e){return l.createElement(wt.A,{primary:e("savedLocation.addNew")})}),l.createElement(pl.A,null,l.createElement(ce.A,{edge:"end",size:"large",onClick:e.onNewItem},l.createElement(Au.A,null))))},Vu=(0,ml.c3)(function(e,t){return l.createElement(Uu,{key:e.id,location:e,onEditItem:t.onEditItem})},{backgroundHint:"No saved locations",dataProvider:"savedLocations",displayName:"LocationListPresentation",postprocess:function(e,t){return[Gu(t)].concat(Lu(e))}});const Bu=(0,u.Ng)(function(e){return{dense:!0,savedLocations:Su(e)}},function(e){return{onEditItem:function(t){e(Nu(t))},onNewItem:function(){var t=Pu();e(t),t.id&&e(Nu(t.id))}}})(Vu);var zu=n(94701),Hu=n(6326),Wu=n(30245),qu=n(71029),Ku=n(71163),Yu=n(30301),$u=n(75067);function Zu(e,t){const{timeout:n,easing:r,style:o={}}=e;return{duration:o.transitionDuration??("number"==typeof n?n:n[t.mode]||0),easing:o.transitionTimingFunction??("object"==typeof r?r[t.mode]:r),delay:o.transitionDelay}}function Ju(e){return Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ju(e)}var Xu=["children","direction","in","onEnter","onExit","style","timeout"];function Qu(){return Qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qu.apply(null,arguments)}function ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(n),!0).forEach(function(t){nf(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nf(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ju(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ju(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ju(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rf={up:{entering:{opacity:1,transform:"translateY(0)"},entered:{opacity:1,transform:"translateY(0)"},exiting:{opacity:0,transform:"translateY(-16px)"},exited:{opacity:0,transform:"translateY(16px)"}},left:{entering:{opacity:1,transform:"translateX(0)"},entered:{opacity:1,transform:"translateX(0)"},exiting:{opacity:0,transform:"translateX(-16px)"},exited:{opacity:0,transform:"translateX(16px)"}}},of={enter:225,exit:195},af=l.forwardRef(function(e,t){var n=e.children,r=e.direction,o=void 0===r?"up":r,a=e.in,i=e.onEnter,c=e.onExit,s=e.style,u=e.timeout,f=void 0===u?of:u,d=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Xu),p=(0,bs.A)(),m=(0,Yu.A)(n.ref,t),y=rf[o];return l.createElement($u.default,Qu({in:a,timeout:f,onEnter:function(e,t){(e=>{e.scrollTop})(e);var n=Zu({style:s,timeout:f},{mode:"enter"});e.style.webkitTransition=p.transitions.create(["opacity","transform"],n),e.style.transition=p.transitions.create(["opacity","transform"],n),i&&i(e,t)},onExit:function(e){var t=Zu({style:s,timeout:f},{mode:"exit"});e.style.webkitTransition=p.transitions.create(["opacity","transform"],t),e.style.transition=p.transitions.create(["opacity","transform"],t),c&&c(e)}},d),function(e,t){return l.cloneElement(n,tf({style:tf(tf(tf({visibility:"exited"!==e||a?void 0:"hidden"},y[e]),s),n.props.style),ref:m},t))})});af.propTypes={children:i().element,direction:i().oneOf(Object.keys(rf)),in:i().bool,onEnter:i().func,onExit:i().func,style:i().object,timeout:i().oneOfType([i().number,i().shape({enter:i().number,exit:i().number})])};const lf=af;var cf=n(63101);function sf(e){return sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(e)}function uf(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=sf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sf(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ff=uf(uf(uf(uf(uf({},cf.$b.DEBUG,Bt.nW.DEBUG),cf.$b.INFO,null),cf.$b.WARNING,Bt.nW.WARNING),cf.$b.ERROR,Bt.nW.ERROR),cf.$b.FATAL,Bt.nW.FATAL);function df(e){return"success"===e.semantics?Bt.nW.SUCCESS:(t=e.level)<=cf.$b.DEBUG?ff[cf.$b.DEBUG]:t<=cf.$b.INFO?ff[cf.$b.INFO]:t<=cf.$b.WARNING?ff[cf.$b.WARNING]:t<=cf.$b.ERROR?ff[cf.$b.ERROR]:t<=cf.$b.FATAL?ff[cf.$b.FATAL]:Bt.nW.OFF;var t}var pf=(0,Bt.n9)(function(e){return{root:{display:"flex",padding:e.spacing(0,1),alignItems:"stretch",borderBottom:"1px solid ".concat(e.palette.divider),cursor:"default","&:hover":{backgroundColor:e.palette.action.hover}},statusLight:{paddingTop:2,width:20},timestamp:{color:e.palette.text.secondary,paddingRight:e.spacing(1),width:56,textAlign:"right"},module:{color:e.palette.primary[500],overflow:"hidden",paddingRight:e.spacing(1),textOverflow:"ellipsis",width:96},auxiliaryId:{color:e.palette.text.secondary,overflow:"hidden",paddingRight:e.spacing(1),textOverflow:"ellipsis",width:80},moduleExtended:{color:e.palette.primary[500],overflow:"hidden",paddingRight:e.spacing(1),textOverflow:"ellipsis",width:176},message:{flex:1,overflow:"hidden",whiteSpace:"noWrap"}}}),mf=l.memo(function(e){var t,n=e.item,r=df(n),o=pf();try{t=(0,si.A)(n.timestamp,"H:mm:ss")}catch(e){t="??:??:??"}return l.createElement("div",{className:o.root},l.createElement("div",{className:o.statusLight},r&&l.createElement(M.BG,{inline:!0,status:df(n)})),l.createElement("div",{className:o.timestamp},t),n.auxiliaryId?l.createElement(l.Fragment,null,l.createElement("div",{className:o.module},n.module),l.createElement("div",{className:o.auxiliaryId},n.auxiliaryId)):l.createElement("div",{className:o.moduleExtended},n.module),l.createElement("div",{className:o.message},n.message))});mf.propTypes={item:i().shape({level:i().number,message:i().string,module:i().string,timestamp:i().number,auxiliaryId:i().string})};const yf=mf;function gf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bf(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bf(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var vf=function(e,t){return l.createElement(yf,{item:t})},hf=(0,Bt.n9)(function(e){return{scrollToBottomButton:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}),Af=function(e){var t=e.items,n=(0,l.useRef)(null),r=(0,l.useRef)(null),o=gf((0,l.useState)(!0),2),a=o[0],i=o[1],c=gf((0,l.useState)(!1),2),s=c[0],u=c[1],f=hf(),d=(0,l.useCallback)(function(){n.current&&n.current.scrollToIndex({index:t.length,behaviour:"smooth"})},[n,t]);return(0,l.useEffect)(function(){if(t&&t.length>0){var e=t[t.length-1].id;e!==r.current&&(a&&(u(!0),setTimeout(d,100),setTimeout(function(){return u(!1)},500)),r.current=e)}else r.current=null},[a,t,d]),l.createElement(l.Fragment,null,l.createElement(Ku.aY,{ref:n,followOutput:!0,data:t,itemContent:vf,atBottomStateChange:i}),l.createElement(lf,{in:!a&&!s},l.createElement(qu.A,{color:"secondary",size:"small",className:f.scrollToBottomButton,onClick:d},l.createElement(Wu.A,null))))};Af.propTypes={items:i().array};const Sf=Af;var Ef=function(e){var t=e.items,n=e.updateLogPanelVisibility;return(0,zu.A)(function(){return n(!0),function(){return n(!1)}}),l.createElement(Sf,{items:t})};Ef.propTypes={items:i().array,updateLogPanelVisibility:i().func.isRequired};const Of=(0,u.Ng)(function(e){return{items:e.log.items}},{updateLogPanelVisibility:Hu.Af})(Ef);var wf=n(27475);var Tf=function(e){return e.messages.commandHistory},Cf=n(6184),If=n(94854),xf=n(32084),jf=n(3153);function Pf(e){(0,xf.A)(e)&&(e={type:"plain",data:e});const{type:t,data:n}=e;switch(t){case"plain":return(0,If.A)((0,jf.A)(n));case"preformatted":return"<pre>"+(0,If.A)((0,jf.A)(n))+"</pre>";default:return(0,If.A)(JSON.stringify(e,null,2))}}var kf=n(98810),_f=["children"];function Nf(e){return Nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(e)}function Rf(){return Rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rf.apply(null,arguments)}function Df(e){return function(e){if(Array.isArray(e))return Mf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Mf(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mf(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Lf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bf(r.key),r)}}function Ff(e,t,n){return t=Gf(t),function(e,t){if(t&&("object"==Nf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Uf()?Reflect.construct(t,n||[],Gf(e).constructor):t.apply(e,n))}function Uf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Uf=function(){return!!e})()}function Gf(e){return Gf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gf(e)}function Vf(e,t){return Vf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vf(e,t)}function Bf(e){var t=function(e,t){if("object"!=Nf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nf(t)?t:t+""}var zf,Hf,Wf,qf=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ff(this,t,[e]))._domNode=l.createRef(),n._endNode=l.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vf(e,t)}(t,e),n=t,r=[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(e,t,n){n&&n.shouldScrollToBottom&&this.scrollToBottom()}},{key:"getSnapshotBeforeUpdate",value:function(){var e=this._domNode.current;return{shouldScrollToBottom:e&&e.scrollTop+e.clientHeight>=e.scrollHeight-20}}},{key:"render",value:function(){var e=this.props,t=e.children,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,_f);return l.createElement(F.A,Rf({ref:this._domNode},n,{sx:[{position:"relative",overflow:"auto",flex:"1 1 100%"}].concat(Df(Array.isArray(n.sx)?n.sx:[n.sx]))}),t,l.createElement("div",{ref:this._endNode}))}},{key:"scrollToBottom",value:function(){var e=this._endNode.current;e&&e.scrollIntoView({behaviour:"smooth"})}}],r&&Lf(n.prototype,r),o&&Lf(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(l.Component);zf=qf,Hf="propTypes",Wf={children:i().oneOfType([i().arrayOf(i().node),i().node]),style:i().object},(Hf=Bf(Hf))in zf?Object.defineProperty(zf,Hf,{value:Wf,enumerable:!0,configurable:!0,writable:!0}):zf[Hf]=Wf;var Kf=n(78034),Yf=n(54087),$f=n(34023),Zf=(0,Bt.n9)(function(e){return{root:{margin:e.spacing(.25,0,0,0),display:"flex",alignItems:"flex-start",width:"100%"},bubble:{position:"relative",borderRadius:5,padding:e.spacing(.5,1),margin:e.spacing(.25,0,0,0),minHeight:e.spacing(1),overflowX:"auto","& pre":{margin:e.spacing(.5)}},ownBubble:{background:(0,Bt.Mw)(e)?Kf.A[400]:Kf.A[600],color:e.palette.getContrastText((0,Bt.Mw)(e)?Kf.A[400]:Kf.A[600])},otherBubble:{background:(0,Bt.Mw)(e)?Vl.A[900]:Vl.A[100],color:e.palette.getContrastText((0,Bt.Mw)(e)?Vl.A[900]:Vl.A[100]),"& .chat-meta":{textAlign:"right"},"&.severity-critical":{borderLeft:"3px solid ".concat((0,uo.M7)(zl.AI.CRITICAL))},"&.severity-debug":{borderLeft:"3px solid ".concat((0,uo.M7)(zl.AI.DEBUG))},"&.severity-error":{borderLeft:"3px solid ".concat((0,uo.M7)(zl.AI.ERROR))},"&.severity-info":{borderLeft:"3px solid ".concat((0,uo.M7)(zl.AI.INFO))},"&.severity-warning":{borderLeft:"3px solid ".concat((0,uo.M7)(zl.AI.WARNING))}},meta:{fontSize:"smaller",margin:e.spacing(.5,0,0,0),textAlign:"left","& .author":{fontWeight:"bold",color:e.palette.text.secondary},"& .date":{color:e.palette.text.hint,float:"right"}}}}),Jf=function(e){var t=e.author,n=void 0===t?"Anonymous":t,o=e.body,a=void 0===o?"":o,i=e.date,c=e.leftComponent,s=e.own,u=void 0===s||s,f=e.raw,d=e.rightComponent,p=e.severity,m=e.showMeta,y=Zf(),g=i&&m&&l.createElement("span",{className:"date"},i),b=c&&l.createElement("div",{style:{flex:0}},c),v=d&&l.createElement("div",{style:{flex:0}},d),h=(0,r.A)(y.bubble,u?y.ownBubble:y.otherBubble,p&&"severity-".concat(p)),A=l.createElement("div",{className:h},f?l.createElement(Yf.VK,{content:a}):a);return l.createElement("div",{className:(0,r.A)(y.root,u?y.own:y.other)},b,l.createElement("div",{style:{flex:1,maxWidth:"100%"}},m&&l.createElement("div",{className:y.meta},l.createElement("span",{className:"author"},n)," ",g),A),v)};Jf.propTypes={author:i().string,body:i().string,date:i().string,own:i().bool,raw:i().bool,leftComponent:i().oneOfType([i().node,i().arrayOf(i().node)]),rightComponent:i().oneOfType([i().node,i().arrayOf(i().node)]),severity:$f.A.severity,showMeta:i().bool};const Xf=Jf;var Qf=(0,Bt.n9)(function(e){return{root:{margin:e.spacing(.5,0),"& .date":{color:e.palette.text.secondary}},"level-error":{"& .message":{fontWeight:"bold",color:e.palette.error.main}},"level-warning":{"& .message":{fontWeight:"bold",color:e.palette.warning.main}}}}),ed=function(e){var t=e.date,n=e.level,o=void 0===n?"info":n,a=e.message,i=void 0===a?"":a,c=Qf(),s=(0,r.A)(c.root,c["level-".concat(o)]||c["level-info"]),u=t&&l.createElement("span",{className:"date"},l.createElement(Bl.A,{date:t}));return l.createElement("div",{className:s},l.createElement("span",{className:"message"},i)," ",u)};ed.propTypes={level:i().string,message:i().string,date:i().instanceOf(Date)};const td=ed;var nd=["history","onEscape","onSubmit"];function rd(){return rd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rd.apply(null,arguments)}function od(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ad(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ad(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ad(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var id=l.forwardRef(function(e,t){var n=e.history,r=e.onEscape,o=e.onSubmit,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,nd),i=od((0,l.useState)(""),2),c=i[0],s=i[1],u=(0,l.useCallback)(function(e){s(e.target.value)},[s]),f=od((0,l.useState)(0),2),d=f[0],p=f[1];(0,l.useEffect)(function(){var e;s(null!==(e=n[n.length-d])&&void 0!==e?e:"")},[n,d]);var m=(0,l.useCallback)(function(e){switch(e.key){case"Enter":c.length>0&&(o(c),s(""),p(0));break;case"Escape":r(e);break;case"ArrowUp":p(function(e){return Math.min(e+1,n.length)});break;case"ArrowDown":p(function(e){return Math.max(e-1,0)})}},[n,c,r,o]),y=(0,l.useCallback)(function(e){e.relatedTarget&&(e.relatedTarget.focusRestorationTarget=e.target)},[]);return l.createElement(ue.A,rd({ref:t,value:c,onBlur:y,onChange:u,onKeyDown:m},a))});id.propTypes={history:i().arrayOf(i().string),onEscape:i().func,onSubmit:i().func};const ld=id;function cd(e){return cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cd(e)}var sd=["hasSelectedUAV","textFieldPlacement"];function ud(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return fd(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(fd(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,fd(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,fd(f,"constructor",s),fd(s,"constructor",c),c.displayName="GeneratorFunction",fd(s,o,"GeneratorFunction"),fd(f),fd(f,o,"Generator"),fd(f,r,function(){return this}),fd(f,"toString",function(){return"[object Generator]"}),(ud=function(){return{w:a,m:d}})()}function fd(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}fd=function(e,t,n,r){function a(t,n){fd(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},fd(e,t,n,r)}function dd(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function md(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ad(r.key),r)}}function yd(e,t,n){return t=bd(t),function(e,t){if(t&&("object"==cd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gd()?Reflect.construct(t,n||[],bd(e).constructor):t.apply(e,n))}function gd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(gd=function(){return!!e})()}function bd(e){return bd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bd(e)}function vd(e,t){return vd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vd(e,t)}function hd(e,t,n){return(t=Ad(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ad(e){var t=function(e,t){if("object"!=cd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cd(t)?t:t+""}function Sd(){return Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sd.apply(null,arguments)}function Ed(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="message".concat(e.id),o=!e.responseId,a="number"==typeof(null==e?void 0:e.date),i=a?(t=e.date,(0,si.A)(t,"H:mm")):"",c=null==e?void 0:e.author,s=a&&Math.abs(n.date-e.date)<500,u=n.author!==c||n.formattedDate!==i&&!s;switch(n.author=c,n.date=null==e?void 0:e.date,s||(n.formattedDate=i),e.type){case zl.Go.OUTBOUND:return[l.createElement(Xf,{key:r,own:!0,showMeta:u,author:c,raw:e.raw,date:i,body:e.body,severity:e.severity,rightComponent:!!o&&l.createElement(Lt.A,{size:30,thickness:3.5,style:{margin:"14px 8px"},value:e.percentage,variant:void 0!==e.percentage?"determinate":"indeterminate"})})];case zl.Go.INBOUND:return[l.createElement(Xf,{key:r,showMeta:u,author:c,own:!1,raw:e.raw,date:i,body:e.body,severity:e.severity})];case zl.Go.ERROR:return[l.createElement(td,{key:r+"Marker",level:"error",message:e.body})];default:return[l.createElement(td,{key:r+"Marker",level:"error",message:"Invalid message type: ".concat(e.type)})]}}var Od=function(e){var t=e.hasSelectedUAV,n=e.textFieldPlacement,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,sd);return t?l.createElement(M.qq,Sd({key:"backgroundHint",header:"No messages",text:"Send a message to the selected UAV using the text box ".concat("bottom"===n?"below":"above")},r)):l.createElement(M.qq,Sd({key:"backgroundHint",header:"No UAV selected",text:"Select the UAV to send messages to"},r))};Od.propTypes={hasSelectedUAV:i().bool,textFieldPlacement:i().oneOf(["bottom","top"])};var wd=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),hd(e=yd(this,t),"_onSubmit",function(t){e.props.onSend(t),e.scrollToBottom()}),e._chatAreaRef=l.createRef(),e._messageFieldRef=l.createRef(),e._messageFieldContainerRef=l.createRef(),e._uavSelectorFieldRef=l.createRef(),e.focusOnTextField=e.focusOnTextField.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vd(e,t)}(t,e),function(e,t,n){return t&&md(e.prototype,t),n&&md(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"focusOnUAVSelectorField",value:function(){this._uavSelectorFieldRef.current&&this._uavSelectorFieldRef.current.focus()}},{key:"focusOnTextField",value:function(){this._messageFieldRef.current&&this._messageFieldRef.current.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.chatEntries,r=t.commandHistory,o=t.hideClearButton,a=t.onClearMessages,i=t.optimizeUIForTouch,c=t.style,s=t.textFieldPlacement,u=t.uavId,f={},d=n.map(function(e){return Ed(e,f)}),p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pd(Object(n),!0).forEach(function(t){hd(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pd(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({display:"flex",flexDirection:"column",height:"100%"},c),m=d.length>0?l.createElement(qf,{key:"chatArea",ref:this._chatAreaRef,px:2,pt:2},d):l.createElement(Od,{key:"chatAreaBackgroundHint",hasSelectedUAV:!(0,nt.default)(u),textFieldPlacement:s,p:1}),y=a&&!o,g=l.createElement(F.A,{ref:this._messageFieldContainerRef,key:"textFieldContainer",className:"bottom-bar",tabIndex:"-1",onKeyDown:function(t){"Enter"===t.code&&e._messageFieldRef.current.focus()},sx:{display:"flex",alignItems:"baseline",pb:2,pl:2,pr:y?0:2,"&:focus":{outline:"none"}}},l.createElement(ld,{fullWidth:!0,autoFocus:!i,history:r,inputRef:this._messageFieldRef,variant:"standard",onSubmit:this._onSubmit,onEscape:function(t){e._messageFieldContainerRef.current.focus(),t.stopPropagation()}}),y&&l.createElement(ce.A,{disabled:0===d.length,size:"large",style:{transform:"translateY(8px)"},onClick:a},l.createElement(wf.A,null))),b="bottom"===s?[m,g]:[g,m];return l.createElement("div",{style:p},b)}},{key:"scrollToBottom",value:function(){this._chatAreaRef.current&&this._chatAreaRef.current.scrollToBottom()}}])}(l.Component);hd(wd,"propTypes",{chatEntries:i().arrayOf(i().object),commandHistory:i().arrayOf(i().string),hideClearButton:i().bool,onClearMessages:i().func,onSend:i().func,optimizeUIForTouch:i().bool,style:i().object,textFieldPlacement:i().oneOf(["bottom","top"]),uavId:i().string}),hd(wd,"defaultProps",{textFieldPlacement:"bottom"});const Td=(0,u.Ng)(function(){var e=(0,rt.Mz)(function(e){return e.messages},function(e,t){return e.messages.uavIdsToMessageIds?e.messages.uavIdsToMessageIds[t]:void 0},function(e,t){return t&&0!==t.length?(0,Xe.Im)((0,Xe.Yb)(e,t)):gr.Ml});return function(t,n){return{chatEntries:e(t,n.uavId),commandHistory:Tf(t),optimizeUIForTouch:(0,un.jz)(t)}}},function(e,t){return{onClearMessages:function(){e((0,Cf.PT)(t.uavId))},onSend:function(n){return(r=ud().m(function r(){var o,a,i,l,c,s,u,f,d,p,m;return ud().w(function(r){for(;;)switch(r.p=r.n){case 0:if(o=t.uavId){r.n=1;break}return r.a(2);case 1:return a=(0,Cf.hv)({message:n,uavId:o}),e(a),i=(0,kf.AL)(n),l=i.command,c=i.args,s=i.kwds,u=a.messageId,r.p=2,r.n=3,Fr.A.sendCommandRequest({uavId:o,command:l,args:c,kwds:s},{onProgress:function(t){var n=t.progress,r=t.suspended;e((0,Cf.kt)({messageId:u,progress:n,suspended:r}))}});case 3:f=r.v,(0,nt.default)(f)||(d=Pf(f),e((0,Cf.k9)({message:d,uavId:o,refs:u}))),r.n=5;break;case 4:r.p=4,m=r.v,p=m.userMessage||m.message,e((0,Cf.tS)({message:p,uavId:o,refs:u}));case 5:return r.a(2)}},r,null,[[2,4]])}),function(){var e=this,t=arguments;return new Promise(function(n,o){var a=r.apply(e,t);function i(e){dd(a,n,o,i,l,"next",e)}function l(e){dd(a,n,o,i,l,"throw",e)}i(void 0)})})();var r}}},null,{forwardRef:!0})(wd),Cd=(0,u.Ng)(function(e){return{uavId:(0,wo.BB)(e)}},{})(Td);var Id=n(53054),xd=n(97715),jd=n(66401),Pd=n(21879),kd=n(58477),_d=n(1442),Nd=n(62528);function Rd(e){return Rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rd(e)}var Dd=["editMissionItemParameters"];function Md(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ld(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Md(Object(n),!0).forEach(function(t){Fd(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Md(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Fd(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Rd(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rd(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ud=(0,Bt.n9)(function(e){return{error:{backgroundColor:uo.Ay.error,color:e.palette.getContrastText(uo.Ay.error)},success:{backgroundColor:uo.Ay.success,color:e.palette.getContrastText(uo.Ay.success)},warning:{backgroundColor:uo.Ay.warning,color:e.palette.getContrastText(uo.Ay.warning)}}}),Gd=function(e){var t,n,r,o,a,i,c,s,u,f,d,p=e.editMissionItemParameters,m=e.id,y=e.index,g=e.item,b=e.missionGeofenceStatus,v=e.ratio,h=e.selected,A=e.onSelectItem,S=e.openGeofenceSettingsTab,E=e.openSafetySettingsTab,O=Ud(),w=Nd.y8[g.type],T=A.bind(null,m),C=Nd.XV[g.type],I=(0,Nd.SO)(g);switch(g.type){case Nd.IU.GO_TO:w=y,d=I?(0,de.iw)([null===(t=g.parameters)||void 0===t?void 0:t.lon,null===(n=g.parameters)||void 0===n?void 0:n.lat]):"Invalid mission item";break;case Nd.IU.HOVER:d=I?"for ".concat(g.parameters.duration," seconds"):"Invalid mission item";break;case Nd.IU.LAND:g.parameters.velocityZ&&(d="".concat(g.parameters.velocityZ," m/s vertical"));break;case Nd.IU.RETURN_TO_HOME:break;case Nd.IU.TAKEOFF:d=I?(0,de.ve)(null===(r=g.parameters)||void 0===r?void 0:r.alt,"No altitude specified"):"Invalid mission item";break;case Nd.IU.CHANGE_ALTITUDE:d=I?(0,de.ve)(null===(o=g.parameters)||void 0===o?void 0:o.alt,"No altitude specified"):"Invalid mission item";break;case Nd.IU.CHANGE_FLIGHT_MODE:d="".concat(null===(a=g.parameters)||void 0===a?void 0:a.mode);break;case Nd.IU.CHANGE_HEADING:d=I?(0,de.dK)(null===(i=g.parameters)||void 0===i?void 0:i.heading,"No heading specified"):"Invalid mission item";break;case Nd.IU.CHANGE_SPEED:var x=g.parameters,j=x.velocityXY,P=x.velocityZ,k=[];"number"==typeof j&&k.push("".concat(j," m/s horizontal")),"number"==typeof P&&k.push("".concat(P," m/s vertical")),d=k.join(", ");break;case Nd.IU.MARKER:d=function(e,t){var n={start:"Mission has started",end:"Mission has ended"};return(e in n?n[e]:"Unknown marker: ".concat(e))+((0,Pd.A)(t)?" (ratio=".concat(t.toFixed(4),")"):"")}(null===(c=g.parameters)||void 0===c?void 0:c.marker,null===(s=g.parameters)||void 0===s?void 0:s.ratio);break;case Nd.IU.SET_PAYLOAD:var _=g.parameters,N=_.name,R=_.action,D=_.value;d="".concat(N,": ").concat(R)+(void 0!==D?" ".concat(D):"");break;case Nd.IU.SET_PARAMETER:d="".concat(null===(u=g.parameters)||void 0===u?void 0:u.name,"=").concat(null===(f=g.parameters)||void 0===f?void 0:f.value);break;case Nd.IU.UPDATE_FLIGHT_AREA:break;case Nd.IU.UPDATE_GEOFENCE:T=S,d=function(e){switch(e){case Bt.nW.OFF:return"No geofence defined yet";case Bt.nW.SUCCESS:return"Automatic geofence in use";case Bt.nW.WARNING:return"Manual geofence in use";case Bt.nW.ERROR:return"Mission area lies outside the geofence";default:return""}}(b);break;case Nd.IU.UPDATE_SAFETY:T=E;break;default:w=Nd.y8[Nd.IU.UNKNOWN],C=Nd.XV[Nd.IU.UNKNOWN],d="Type = ".concat(g.type)}return l.createElement(F.A,{sx:{position:"relative"}},l.createElement("div",{style:{position:"absolute",height:"100%",backgroundColor:1===v?uo.Ay.success:uo.Ay.info,opacity:.25,transition:"0.25s",width:"".concat(100*(null!=v?v:0),"%")}}),l.createElement(Et.A,{dense:!0,selected:h,onClick:T,ContainerComponent:"div"},w&&l.createElement(xd.A,null,l.createElement(lo.A,{className:I?null:O.error},w)),l.createElement(wt.A,{primary:C,secondary:d}),p&&l.createElement(pl.A,null,l.createElement(ce.A,{edge:"end",size:"large",onClick:p},l.createElement(Ul.A,null)))))};Gd.propTypes={editMissionItemParameters:i().func,id:i().string,index:i().number,item:i().shape({type:i().string,parameters:i().object}),missionGeofenceStatus:i().oneOf(Object.values(Bt.nW)),ratio:i().number,selected:i().bool,onSelectItem:i().func,openGeofenceSettingsTab:i().func,openSafetySettingsTab:i().func};const Vd=(0,u.Ng)(function(e,t){var n;return{item:null!==(n=(0,Un.SA)(e,t.id))&&void 0!==n?n:{type:Nd.IU.UNKNOWN},missionGeofenceStatus:(0,Un.NF)(e)?(0,Un.C3)(e)?(0,Un.TF)(e).owner===Nd.Pp.WAYPOINT?Bt.nW.SUCCESS:Bt.nW.WARNING:Bt.nW.ERROR:Bt.nW.OFF}},{editMissionItemParameters:Id.o2,openGeofenceSettingsTab:function(){return function(e){e((0,_d.cT)(kd.I.GEOFENCE)),e((0,_d.$0)())}},openSafetySettingsTab:function(){return function(e){e((0,_d.cT)(kd.I.SETTINGS)),e((0,_d.$0)())}}},function(e,t,n){var r=t.editMissionItemParameters,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,Dd);return Ld(Ld(Ld(Ld({},n),e),o),!(0,jd.A)(Nd.kE[e.item.type].properties)&&{editMissionItemParameters:function(){return r(n.id)}})})(Gd);var Bd=function(e,t,n){return l.createElement(Vd,{done:e<n.currentItemIndex,ratio:e<n.currentItemIndex?1:e===n.currentItemIndex?n.currentItemRatio:0,id:t,index:e+1,selected:n.selection.includes(t),onSelectItem:n.onSelectItem})},zd=function(e){var t=e.currentItemIndex,n=e.currentItemRatio,r=e.followScroll,o=e.itemIds,a=e.onSelectItem,i=e.selectedIds,c={currentItemIndex:t,currentItemRatio:n,selection:Array.isArray(i)?i:[],onSelectItem:a},s=(0,l.useRef)(null),u=(0,l.useCallback)(function(){return setTimeout(function(){s.current.scrollToIndex({index:t,align:"center",behavior:"smooth"})},0)},[t,s]);return(0,l.useEffect)(function(){r&&u()},[r,u]),l.createElement(Ku.aY,{ref:s,data:o,context:c,itemContent:Bd})};zd.propTypes={currentItemIndex:i().number,currentItemRatio:i().number,followScroll:i().bool,itemIds:i().arrayOf(i().string),onSelectItem:i().func,selectedIds:i().arrayOf(i().string)};const Hd=(0,u.Ng)(function(e){return{currentItemIndex:(0,Un.XW)(e),currentItemRatio:(0,Un.WQ)(e),followScroll:(0,Un.V_)(e),itemIds:(0,Un.OH)(e),selectedIds:(0,Un.$I)(e)}},{onFollowScrollChanged:Gn.CE,onSelectItem:(0,ml.p_)({getSelection:Un.$I,setSelection:Id.fC,getListItems:Un.OH})})(zd);var Wd=n(54301),qd=(0,Bt.n9)(function(e){return{root:{background:e.palette.action.hover,padding:e.spacing(0,1)}}}),Kd=[Nd.IU.TAKEOFF,Nd.IU.RETURN_TO_HOME,Nd.IU.LAND,Nd.IU.CHANGE_ALTITUDE],Yd=function(e){var t=e.addNewMissionItem,n=e.canMoveDown,r=e.canMoveUp,o=e.onMoveDown,a=e.onMoveUp,i=e.onRemoveSelectedMissionItems,c=e.selectedIds,s=qd(),u=Array.isArray(c)&&c.length>0;return l.createElement(Pc.A,{square:!0,className:s.root,elevation:4},l.createElement(kc.A,{disableGutters:!0,variant:"dense",style:{height:36,minHeight:36}},Kd.map(function(e){return l.createElement(vc.W1,{key:"add-".concat(e),content:"Add '".concat(Nd.XV[e],"' command"),placement:"top"},l.createElement(ce.A,{size:"small",onClick:function(){return t(e)}},l.cloneElement(Nd.y8[e],{fontSize:"small"})))}),l.createElement(F.A,{sx:{flex:1}}),l.createElement(Wd.A,{orientation:"vertical"}),l.createElement(vc.W1,{content:"Move selected mission items up",placement:"top"},l.createElement(ce.A,{size:"small",disabled:!r,onClick:a},l.createElement(Bo.A,{fontSize:"small"}))),l.createElement(vc.W1,{content:"Move selected mission items down",placement:"top"},l.createElement(ce.A,{size:"small",disabled:!n,onClick:o},l.createElement(Vo.A,{fontSize:"small"}))),l.createElement(Wd.A,{orientation:"vertical"}),l.createElement(vc.W1,{content:"Remove selected mission items",placement:"top"},l.createElement(ce.A,{disabled:!u,size:"small",onClick:i},l.createElement(fc.A,{fontSize:"small"})))))};Yd.propTypes={addNewMissionItem:i().func,canMoveDown:i().bool,canMoveUp:i().bool,onMoveDown:i().func,onMoveUp:i().func,onRemoveSelectedMissionItems:i().func,selectedIds:i().arrayOf(i().string)};const $d=(0,u.Ng)(function(e){return{canMoveDown:(0,Un.zY)(e),canMoveUp:(0,Un.Ol)(e),selectedIds:(0,Un.$I)(e)}},{addNewMissionItem:function(e){return function(t){var n=t((0,Id.tv)(e));(0,jd.A)(Nd.kE[e].properties)||t((0,Id.o2)(n.id))}},onMoveDown:function(){return(0,Id.c1)(1)},onMoveUp:function(){return(0,Id.c1)(-1)},onRemoveSelectedMissionItems:Id._L})(Yd);var Zd=n(56152),Jd=n(79891);function Xd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qd(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const ep=function(){var e=Xd((0,l.useState)(null),2),t=e[0],n=e[1];return[t,function(e){n(e.currentTarget)},function(){n(null)}]},tp=(0,Xn.A)((0,Rt.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download"),np=(0,Xn.A)((0,Rt.jsx)("path",{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"}),"Upload");function rp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return op(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?op(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function op(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ap=(0,Bt.n9)(function(e){return{root:{background:e.palette.action.hover,padding:e.spacing(0,1)}}}),ip=function(e){var t=e.canPlan,n=e.canResume,r=e.canUpload,o=e.onClearMission,a=e.onExportMission,i=e.onImportMission,c=e.onInvokePlanner,s=e.onShowMissionPlannerDialog,u=e.onUploadMissionItems,f=ap(),d=rp(ep(),3),p=d[0],m=d[1],y=d[2],g=(0,l.useCallback)(function(){y(),s()},[y,s]),b=(0,l.useCallback)(function(){y(),c({resume:!0})},[y,c]);return l.createElement(Pc.A,{square:!0,className:f.root,elevation:4},l.createElement(kc.A,{disableGutters:!0,variant:"dense",style:{height:36,minHeight:36}},l.createElement(vc.W1,{content:"Clear mission",placement:"top"},l.createElement(ce.A,{size:"small",onClick:o},l.createElement(le.A,{fontSize:"small"}))),l.createElement(vc.W1,{content:"Import mission",placement:"top"},l.createElement(Rc.A,{style:{minWidth:"26px"},filter:[".json"],onSelected:i},l.createElement(np,{fontSize:"small"}))),l.createElement(vc.W1,{content:"Export mission",placement:"top"},l.createElement(ce.A,{size:"small",onClick:a},l.createElement(tp,{fontSize:"small"}))),l.createElement(F.A,{component:"div",sx:{flex:1}}),l.createElement(B.A,{disabled:!t,size:"small",onClick:n?m:g},"Plan"),l.createElement(vc.kF,{open:Boolean(p),anchorEl:p,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:y},l.createElement(B.A,{disabled:!t,size:"small",startIcon:l.createElement(Zd.A,null),onClick:g},"New"),l.createElement(B.A,{disabled:!t,size:"small",startIcon:l.createElement(wl.A,null),onClick:b},"Resume")),l.createElement(B.A,{color:"primary",disabled:!r,size:"small",onClick:u},"Upload")))};ip.propTypes={canPlan:i().bool,canResume:i().bool,canUpload:i().bool,onClearMission:i().func,onExportMission:i().func,onImportMission:i().func,onInvokePlanner:i().func,onShowMissionPlannerDialog:i().func,onUploadMissionItems:i().func};const lp=(0,u.Ng)(function(e){return{canPlan:(0,Ar.UJ)(e),canResume:(0,Un.Ee)(e),canUpload:(t={singleSelectedUAVId:(0,wo.BB)(e)},r=t.singleSelectedUAVId,(0,Ar.UJ)(e)&&void 0!==r&&(null===(n=(0,wo.Pz)(e,r))||void 0===n||null===(n=n.errors)||void 0===n?void 0:n.includes(Jd.A.ON_GROUND)))};var t,n,r},{onClearMission:Id.O_,onExportMission:Id.LM,onImportMission:Id.Ig,onInvokePlanner:Id.dd,onShowMissionPlannerDialog:Gn.c8,onUploadMissionItems:Id.uf})(ip);var cp=n(32044),sp=n(79072),up=n(339),fp=n(49939),dp=n(17862),pp=n(26739),mp=n(15279);const yp=(0,pp.Ay)(mp.A)({border:"none !important"}),gp=(0,Xn.A)((0,Rt.jsx)("path",{d:"M 17.24,7.77 18.52,6.23 12,0.82 5.48,6.23 6.76,7.77 12,3.42 Z M 11,7 v 2 h 2 V 7 Z m 2,10 v -2 h -2 v 2 z m -2,-6 v 2 h 2 V 11 Z M 18.52,17.77 17.24,16.23 12,20.58 6.76,16.23 5.48,17.77 12,23.18 Z"}),"FollowScroll");function bp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vp(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vp(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var hp=(0,Bt.n9)(function(e){return{root:{background:e.palette.action.hover,padding:e.spacing(.5,1)}}}),Ap=function(e){return l.createElement("ul",{style:{paddingLeft:28}},e.map(function(e){var t=e.key,n=e.text;return l.createElement("li",{key:t},n)}))},Sp=function(e){var t=e.followScroll,n=bp(e.homePositions,1)[0],r=e.missionEstimates,o=r.distance,a=r.duration,i=r.error,c=e.onFollowScrollChanged,s=hp(),u=[];n||u.push({key:"home",text:"Estimates are imprecise due to missing home position"}),Number.isFinite(a)||u.push({key:"speed",text:"Cannot estimate time due to missing speed information"});var f=(0,l.useCallback)(function(){c(!t)},[t,c]);return l.createElement(Pc.A,{square:!0,className:s.root},l.createElement(kc.A,{disableGutters:!0,variant:"dense",style:{minHeight:28}},o>0?l.createElement(l.Fragment,null,u.length>0&&l.createElement(vc.W1,{content:Ap(u),placement:"top"},l.createElement(Mt.A,{style:{color:uo.Ay.warning,marginRight:8},fontSize:"small"})),l.createElement(F.A,{sx:{py:.25}},l.createElement(vc.W1,{content:"Estimated route"},l.createElement(dp.A,{icon:l.createElement(up.A,{style:{marginLeft:6}}),label:(0,io.BO)(o),size:"small",style:{margin:2},variant:"outlined"})),l.createElement(vc.W1,{content:"Estimated time"},l.createElement(dp.A,{icon:l.createElement(fp.A,{style:{marginLeft:6}}),label:(0,io.a3)(a),size:"small",style:{margin:2},variant:"outlined"})))):i?l.createElement(dp.A,{icon:l.createElement(cp.A,{style:{color:uo.Ay.error}}),label:l.createElement("span",{style:{whiteSpace:"normal"}},i),size:"small",style:{height:"auto",marginRight:8},variant:"outlined"}):l.createElement(dp.A,{icon:l.createElement(sp.A,{style:{color:uo.Ay.info}}),label:l.createElement("span",{style:{whiteSpace:"normal"}},"Add waypoints to the mission to get distance and duration estimates!"),size:"small",style:{height:"auto",marginRight:8},variant:"outlined"}),l.createElement(F.A,{component:"div",sx:{flex:1}}),l.createElement(vc.W1,{content:"Follow the active mission item"},l.createElement(yp,{size:"small",style:{margin:-3},value:"followScroll",selected:t,onChange:f},l.createElement(gp,null)))))};Sp.propTypes={followScroll:i().bool,homePositions:i().arrayOf($f.A.coordinate),missionEstimates:i().shape({distance:i().number,duration:i().number,error:i().string}),onFollowScrollChanged:i().func};const Ep=(0,u.Ng)(function(e){return{followScroll:(0,Un.V_)(e),homePositions:(0,Un.vT)(e),missionEstimates:(0,Un.u3)(e)}},{onFollowScrollChanged:Gn.CE})(Sp);const Op=function(){return l.createElement(F.A,{sx:{display:"flex",flexDirection:"column",height:"100%"}},l.createElement(lp,null),l.createElement(Hd,null),l.createElement(Ep,null),l.createElement($d,null))};var wp=n(37813),Tp=n(3825),Cp=n(71458);function Ip(e){return Ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(e)}function xp(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ip(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ip(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ip(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jp=(0,rt.Mz)(wp.ut,Un.C3,Un.Xk,function(e,t,n){return xp(xp({},Nd.Pp.SHOW,e),Nd.Pp.WAYPOINT,t)[n]}),Pp=(0,rt.Mz)(Un.NF,Un.TF,jp,Un.Xk,function(e,t,n,r){return e?n?t.owner===r?Ti.n.SUCCESS:Ti.n.WARNING:Ti.n.ERROR:Ti.n.OFF}),kp=n(17723);const _p="firmwareUpload",Np=e=>e.firmwareUpdate.dialog.open;var Rp=n(27322),Dp=n(30325),Mp=n(74651);const Lp=(0,rt.Mz)(e=>e.upload.currentJob,({type:e,payload:t})=>({type:e??null,payload:t})),Fp=(0,rt.Mz)(e=>e.upload.currentJob,({type:e,running:t})=>!(0,nt.default)(e)&&t?e:void 0),Up=(e,t)=>t?e.upload.history.byId[t]?.result:void 0,Gp=(0,rt.Mz)(e=>e.upload.queues.itemsQueued,e=>e.upload.queues.itemsInProgress,(e,t)=>[...e,...t]),Vp=(0,rt.Mz)(e=>e.upload.queues.itemsQueued,e=>e.upload.queues.itemsWaitingToStart,(e,t)=>[...e,...t]);function Bp(e,t){const{itemsQueued:n,itemsWaitingToStart:r}=e.upload.queues;return r.includes(t)||n.includes(t)}const zp=e=>{const{itemsWaitingToStart:t}=e.upload.queues;if(t&&t.length>0)return t[0]},Hp=e=>e.upload.dialog,Wp=e=>Boolean(e.upload.settings?.autoRetry),qp=e=>Boolean(e.upload.settings?.flashFailed),Kp=e=>Boolean(e.upload.settings.restrictToGlobalSelection),Yp=e=>Hp(e)?.selectedJob??{},$p=(0,rt.Mz)(Yp,({type:e})=>e?(0,Mp.lb)(e):Mp.uw.ALL),Zp=(0,rt.Mz)(Un.VZ,e=>{const t=e.reduce((e,t,n)=>(null===t||(e[t]=(0,io.J8)(n)),e),{});return e=>t[e]??"N/A"}),Jp=(0,rt.Mz)(Un.VZ,Rp.Lo,Kp,(e,t,n)=>{if(!n)return e;const r=new Set(t);return e.filter(e=>null!==e&&r.has((0,gl.ZO)(e)))}),Xp=e=>{const t=Yp(e),n=(0,Rp.Lo)(e),r=Kp(e);let o;if(t.type!==_p)return[];if(o=((e,t)=>e.firmwareUpdate.supportingObjectIdsByTargetIds[t])(e,t.payload.target)??[],r){const e=new Set(n);o=o.filter(t=>e.has((0,gl.ZO)(t)))}return o},Qp=e=>e.upload.errors,em=(0,rt.Mz)(e=>e.upload.queues,({failedItems:e,itemsFinished:t,itemsInProgress:n,itemsQueued:r,itemsWaitingToStart:o})=>({failed:Array.isArray(e)?e.length:0,finished:Array.isArray(t)?t.length:0,inProgress:Array.isArray(n)?n.length:0,waiting:(Array.isArray(r)?r.length:0)+(Array.isArray(o)?o.length:0)})),tm=(0,rt.Mz)(e=>e.upload.queues,({failedItems:e,itemsFinished:t,itemsInProgress:n,itemsQueued:r,itemsWaitingToStart:o})=>{const a={};for(const e of o)a[e]=Ti.n.WAITING;for(const e of r)a[e]=Ti.n.NEXT;for(const e of n)a[e]=Ti.n.WARNING;for(const e of t)a[e]=Ti.n.SUCCESS;for(const t of e)a[t]=Ti.n.ERROR;return a}),nm=(0,rt.Mz)(e=>e.upload.queues.itemsInProgress,e=>e.upload.progresses,(e,t)=>e.length>0?(0,kp.A)(e.map(e=>t[e]??0)):0),rm=(0,rt.Mz)(em,nm,({failed:e,finished:t,inProgress:n,waiting:r},o)=>{const a=e+t+n+r;return a>0?[Math.round(100*(t+n*o)/a),Math.round(100*(t+n)/a)]:[0,0]}),om=e=>Vp(e).length>0,am=e=>e.upload.currentJob.running,im=(0,rt.Mz)(wo.Ev,Rp.Lo,Kp,(e,t,n)=>{if(!n)return e;const r=new Set(t);return e.filter(e=>r.has((0,gl.ZO)(e)))}),lm=(0,rt.Mz)(Jp,e=>(0,Dp.z)(e)),cm=(0,rt.Mz)(e=>e,$p,(e,t)=>{let n;switch(t){case Mp.uw.ALL:n=im;break;case Mp.uw.COMPATIBLE:n=Xp;break;case Mp.uw.MISSION:n=lm;break;case Mp.uw.SINGLE:n=wo.kX;break;default:n=im}return n(e)}),sm=(0,rt.Mz)(function(e){const{itemsQueued:t,itemsWaitingToStart:n}=e.upload.queues;return t.length>0||n.length>0},Vp,cm,(e,t,n)=>e?t:n),um=(0,rt.Mz)(sm,cm,(e,t)=>{if(null===e)return!1;const n=new Set(t);return e.some(e=>!n.has(e))}),fm=e=>e.upload.timing?.estimatedEndAt,dm={selectShowFile:{evaluate(e){if((0,wp.fb)(e))return Ti.n.SKIPPED;const t=(0,wp.Cs)(e);if("ok"!==t&&"loading"!==t&&"notLoaded"!==t)return Ti.n.ERROR;return(0,wp.$8)(e)?Ti.n.ERROR:(0,wp.tS)(e)?Ti.n.SUCCESS:(0,wp.oH)(e)?Ti.n.WAITING:Ti.n.OFF}},setupEnvironment:{evaluate:e=>(0,wp.tS)(e)&&((0,wp.El)(e)||(0,wp.nk)(e)),requires:["selectShowFile"]},showConfigurator:{evaluate:()=>Ti.n.OFF,requires:["selectShowFile"]},setupTakeoffArea:{evaluate:e=>(0,wp.du)(e)?(0,jd.A)((0,Un.fA)(e))&&(0,jd.A)((0,wo.WF)(e))?Ti.n.SUCCESS:Ti.n.SKIPPED:Ti.n.OFF,requires:["setupEnvironment"]},setupGeofence:{evaluate:e=>(0,wp.kP)(e)&&(0,Un.NF)(e)?(0,wp.ut)(e)?Pp(e):Ti.n.ERROR:Ti.n.OFF,requires:["selectShowFile","setupEnvironment"]},uploadShow:{evaluate(e){const t=Up(e,Cp.jp);return"error"===t?Ti.n.ERROR:"cancelled"===t?Ti.n.SKIPPED:"success"===t?Ti.n.SUCCESS:Ti.n.OFF},requires:["selectShowFile","setupEnvironment",Un.f4]},waitForOnboardPreflightChecks:{evaluate:e=>(0,wp.P_)(e)?(0,wo.jE)(e)?Ti.n.SUCCESS:Ti.n.SKIPPED:Ti.n.OFF,requires:["uploadShow"]},performManualPreflightChecks:{evaluate:e=>(0,wp.Mj)(e)||!bt(e)?yt(e)?Ti.n.SUCCESS:Ti.n.SKIPPED:Ti.n.OFF,requires:["uploadShow"]},setupStartTime:{evaluate:e=>(0,wp.qG)(e)?Ti.n.ERROR:(0,wp._0)(e)?(0,wp.Rf)(e)?Ti.n.SUCCESS:Ti.n.OFF:(0,Ar.UJ)(e)?Ti.n.WAITING:Ti.n.OFF,requires:["selectShowFile"],suggests:["waitForOnboardPreflightChecks","performManualPreflightChecks"]},authorization:{evaluate:e=>(0,wp.Mv)(e)?Ti.n.SUCCESS:(0,wp.qG)(e)?Ti.n.ERROR:(0,wp.fX)(e)?Ti.n.WAITING:Ti.n.OFF,requires:["waitForOnboardPreflightChecks","performManualPreflightChecks"]}},pm=["selectShowFile","setupEnvironment","showConfigurator","setupTakeoffArea","setupGeofence","uploadShow","waitForOnboardPreflightChecks","performManualPreflightChecks","setupStartTime","authorization"],mm=(e,t,n)=>(t??[]).every(t=>{return"function"==typeof t?t(n):(r=e[t])===Ti.n.SUCCESS||r===Ti.n.SKIPPED;var r}),ym=e=>{const t={};for(const n of pm){const r=dm[n];let o;mm(t,r.requires,e)?(o=r.evaluate(e),"boolean"==typeof o&&(o=o?Ti.n.SUCCESS:Ti.n.OFF),o===Ti.n.OFF&&(o=mm(t,r.suggests,e)?Ti.n.NEXT:Ti.n.OFF)):o=Ti.n.OFF,t[n]=o}return t},gm={"&.Mui-selected":{backgroundColor:"rgba(255, 255, 255, 0.16)"}},bm=(0,u.Ng)(e=>({isAuthorized:(0,wp.fX)(e),numUAVsTakingOffAutomatically:(0,wp.VP)(e),status:ym(e).authorization}),{onClick:()=>(e,t)=>{const n=t(),r=!(0,wp.fX)(n);e((0,Tp.rU)(r)),e((0,Tp.L5)("toServer")),r&&e((0,Gn.I9)(!0))}})(({isAuthorized:e,numUAVsTakingOffAutomatically:t,status:n,...r})=>{const{t:o}=(0,D.Bd)();return(0,Rt.jsxs)(Et.A,{selected:e,sx:gm,...r,children:[(0,Rt.jsx)(M.BG,{status:e&&n===Ti.n.OFF?Ti.n.SKIPPED:n}),(0,Rt.jsx)(wt.A,{disableTypography:!0,primary:(0,Rt.jsx)(U.A,{variant:"button",children:o(e?"show.authorized":"show.authorizeTheStart")}),secondary:(0,Rt.jsx)(U.A,{variant:"body2",color:"textSecondary",children:e?t<=0?o("show.revokeAuthorization"):1===t?o("show.takeOffOne"):o("show.takeOffMore",{quantity:t}):o("show.authorizationReq")})})]})});var vm=n(56527);function hm(e){return function(e){if(Array.isArray(e))return Am(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Am(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Am(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Am(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Sm=[0,1,2],Em=function(e){var t=e.onChange,n=e.value,r=Sm.map(function(e){return function(r){if(t){var o=Number.parseFloat(r.target.value);if(!Number.isNaN(o)){var a=hm(n);a[e]=o,t(a)}}}});return l.createElement(F.A,{sx:{display:"flex",flexDirection:"row"}},l.createElement(vm.C4,{label:"X",value:n[0],onChange:r[0]}),l.createElement(F.A,{sx:{p:1}}),l.createElement(vm.C4,{label:"Y",value:n[1],onChange:r[1]}),l.createElement(F.A,{sx:{p:1}}),l.createElement(vm.C4,{label:"Z",value:n[2],onChange:r[2]}))};Em.propTypes={value:i().arrayOf(i().number),onChange:i().func};const Om=Em;var wm=n(6659),Tm=function(e){var t=e.roomVisible,n=e.firstCorner,r=e.secondCorner,o=e.onRoomVisibilityChanged,a=e.onFirstCornerChanged,i=e.onSecondCornerChanged,c=e.t;return l.createElement(re.A,null,l.createElement(M.Mo,null,c("indoorEnvironmentEditor.coordinatesOfTheCorners")),l.createElement(Om,{value:n,onChange:a}),l.createElement(F.A,{sx:{p:1}}),l.createElement(Om,{value:r,onChange:i}),l.createElement(F.A,{sx:{p:1}}),l.createElement(ne.A,{label:c("indoorEnvironmentEditor.roomVisibleIn3D"),control:l.createElement(ee.A,{checked:Boolean(t),onChange:o})}))};Tm.propTypes={roomVisible:i().bool,firstCorner:i().arrayOf(i().number),secondCorner:i().arrayOf(i().number),onFirstCornerChanged:i().func,onSecondCornerChanged:i().func,onRoomVisibilityChanged:i().func,t:i().func};const Cm=(0,u.Ng)(function(e){var t=(0,wp.K3)(e);return{firstCorner:t[0],secondCorner:t[1],roomVisible:(0,wp._q)(e)}},{onRoomVisibilityChanged:function(e){return(0,Tp.aC)(e.target.checked)},onFirstCornerChanged:wm.MZ,onSecondCornerChanged:wm.Ej})((0,D.CI)()(Tm));var Im=n(79506),xm=n(83924),jm=n(26144),Pm=n(74144);const km=wo.T4;function _m(e){return(0,wp.kP)(e)&&km(e).length>0&&(0,wp.SZ)(e)>0}function Nm(e){const t=km(e),n=t.map(t=>{const n=(0,wo.fk)(e,t);return n?[n.lon,n.lat]:void 0}),r=t.map(t=>(0,wo.uC)(e,t)),o=[];let a=n.length;for(let e=0;e<a;e++)(0,nt.default)(n[e])&&o.push(e);a=o.length;for(let e=a-1;e>=0;e--){const a=o[e];t.splice(a,1),n.splice(a,1),r.splice(a,1)}const i=(0,wp.MM)(e);if(i?.type===Cp.us.RELATIVE){const t=(0,wp.MC)(e);if("number"==typeof t)for(let e=0;e<r.length;e++){const n=r[e];"number"==typeof n&&(r[e]=(n-t)%360)}}return{uavIds:t,uavGPSCoordinates:n,uavHeadings:r,takeoffCoordinates:(0,wp.Oy)(e).filter(Boolean).map(e=>e?[e[0],e[1]]:void 0).filter(e=>void 0!==e)}}const Rm=(0,gr.vR)("show/coordinateSystemEstimation",async e=>{const{problem:t}=e;e.result=await Pm.A.estimateShowCoordinateSystem(t)});var Dm=n(91829),Mm=n(16817),Lm=n(94203);function Fm(e){return function(e){if(Array.isArray(e))return Wm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Hm(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Um(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return Gm(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Gm(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Gm(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,Gm(f,"constructor",s),Gm(s,"constructor",c),c.displayName="GeneratorFunction",Gm(s,o,"GeneratorFunction"),Gm(f),Gm(f,o,"Generator"),Gm(f,r,function(){return this}),Gm(f,"toString",function(){return"[object Generator]"}),(Um=function(){return{w:a,m:d}})()}function Gm(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Gm=function(e,t,n,r){function a(t,n){Gm(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},Gm(e,t,n,r)}function Vm(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Bm(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Vm(a,r,o,i,l,"next",e)}function l(e){Vm(a,r,o,i,l,"throw",e)}i(void 0)})}}function zm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||Hm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hm(e,t){if(e){if("string"==typeof e)return Wm(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wm(e,t):void 0}}function Wm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var qm="__null__",Km={id:qm,title:"RTK disabled"},Ym=function(e){var t=e.onSourceChanged,n=e.t,r=zm((0,l.useState)(),2),o=r[0],a=r[1],i=zm((0,Dm.A)(Bm(Um().m(function e(){return Um().w(function(e){for(;;)if(0===e.n)return e.a(2,Fr.A.query.getSelectedRTKPresetId())},e)}))),2),c=i[0],s=i[1],u=(0,Mm.A)(Bm(Um().m(function e(){return Um().w(function(e){for(;;)if(0===e.n)return e.a(2,Fr.A.query.getRTKPresets())},e)})),[]),f=u.loading||c.loading,d=u.error||c.error,p=u.value?u.value:[],m=void 0!==c.value,y=void 0!==c.value?null===c.value?qm:c.value:void 0,g=p&&p.length>0,b=function(){var e=Bm(Um().m(function e(n){return Um().w(function(e){for(;;)switch(e.n){case 0:a(n.target.value),t&&t();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return(0,l.useEffect)(function(){f||d||!g||void 0!==y||s()}),(0,l.useEffect)(function(){var e=!0;if(void 0!==o&&o!==y){var t=function(){var t=Bm(Um().m(function t(){var n;return Um().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=o===qm?null:o,t.p=1,t.n=2,Fr.A.execute.setRTKCorrectionsSource(n);case 2:t.n=4;break;case 3:t.p=3,t.v;case 4:t.p=4,e&&(a(void 0),s()),t.n=6;break;case 5:throw t.p=5,t.v;case 6:return t.a(2)}},t,null,[[4,5],[1,3]])}));return function(){return t.apply(this,arguments)}}();t()}return function(){e=!1}},[s,o,y,a]),l.createElement(re.A,null,l.createElement(te.A,{variant:"filled",error:d&&!f},l.createElement(oe.A,{htmlFor:"rtk-corrections"},n("RTKCorrectionSourceSelector.RTKCorrections")),l.createElement(ie.A,{displayEmpty:!0,disabled:Boolean(d||f||!g),value:o||(m?y:qm),inputProps:{id:"rtk-corrections"},onChange:b},u.loading?l.createElement(ae.A,{disabled:!0,value:qm},n("RTKCorrectionSourceSelector.pleaseWait")):d?l.createElement(ae.A,{disabled:!0,value:qm},n("RTKCorrectionSourceSelector.error")):g?[Km].concat(Fm(p)).map(function(e){return l.createElement(ae.A,{key:e.id,value:e.id},e.title)}):l.createElement(ae.A,{disabled:!0,value:"__null__"},n("RTKCorrectionSourceSelector.noRTKData")))))};Ym.propTypes={onSourceChanged:i().func,t:i().func};const $m=(0,u.Ng)(null,{onSourceChanged:Lm.i2})((0,D.CI)()(Ym)),Zm=(0,Xn.A)((0,Rt.jsx)("path",{d:"M7.5,5.6L5,7L6.4,4.5L5,2L7.5,3.4L10,2L8.6,4.5L10,7L7.5,5.6M19.5,15.4L22,14L20.6,16.5L22,19L19.5,17.6L17,19L18.4,16.5L17,14L19.5,15.4M22,2L20.6,4.5L22,7L19.5,5.6L17,7L18.4,4.5L17,2L19.5,3.4L22,2M13.34,12.78L15.78,10.34L13.66,8.22L11.22,10.66L13.34,12.78M14.37,7.29L16.71,9.63C17.1,10 17.1,10.65 16.71,11.04L5.04,22.71C4.65,23.1 4,23.1 3.63,22.71L1.29,20.37C0.9,20 0.9,19.35 1.29,18.96L12.96,7.29C13.35,6.9 14,6.9 14.37,7.29Z"}),"AutoFix");var Jm=n(19728);function Xm(e){return Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xm(e)}function Qm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ey(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qm(Object(n),!0).forEach(function(t){ty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Xm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xm(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ny=function(e){var t=e.takeoffHeading,n=e.onChange,r=e.onSetToAverageHeading,o=t||Cp.ay,a=o.type,i=void 0===a?Cp.us.NONE:a,c=o.value,s=void 0===c?"0":c,u=(0,l.useCallback)(function(e){var r=e.target.value;n&&n(ey(ey({},t),{},{type:r}))},[n,t]),f=(0,l.useCallback)(function(e){n&&n(ey(ey({},t),{},{value:String(e)}))},[n,t]);return l.createElement(D.wD,null,function(e){return l.createElement(F.A,{sx:{display:"flex",flexDirection:"row"}},l.createElement(te.A,{fullWidth:!0,variant:"filled"},l.createElement(oe.A,{htmlFor:"takeoff-heading-type"},e("takeoffHeadingSpecEditor.UAVheadings")),l.createElement(ie.A,{value:i,inputProps:{id:"takeoff-heading-type"},onChange:u},l.createElement(ae.A,{value:Cp.us.NONE},e("takeoffHeadingSpecEditor.unspecified")),l.createElement(ae.A,{value:Cp.us.ABSOLUTE},e("takeoffHeadingSpecEditor.specifiedByAbsoluteCompassDirection")),l.createElement(ae.A,{value:Cp.us.RELATIVE},e("takeoffHeadingSpecEditor.specifiedRelativeToShowOrientation")))),l.createElement(F.A,{sx:{p:1}}),l.createElement(Fe,{disabled:i===Cp.us.NONE,style:{minWidth:160},label:i===Cp.us.ABSOLUTE?e("takeoffHeadingSpecEditor.compassDirection"):e("takeoffHeadingSpecEditor.headingOffset"),value:s,variant:"filled",onChange:f}),r&&l.createElement(F.A,{sx:{alignSelf:"bottom",pt:1}},l.createElement(M.m_,{content:e("takeoffHeadingSpecEditor.setToAverageHeading")},l.createElement(ce.A,{edge:"end",size:"large",onClick:r},l.createElement(Jm.A,null)))))})};function ry(e){return ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ry(e)}ny.propTypes={takeoffHeading:i().shape({mode:i().oneOf(Object.values(Cp.us)),value:i().string.isRequired}),onChange:i().func,onSetToAverageHeading:i().func};var oy=["environmentFromLoadedShowData","mapCoordinateSystem","showCoordinateSystem"],ay=["showNotificationWithNavigationOption","updateFlatEarthCoordinateSystem","updateOutdoorShowSettings"];function iy(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ly(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ly(Object(n),!0).forEach(function(t){sy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ly(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sy(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ry(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ry(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ry(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uy(){return uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uy.apply(null,arguments)}var fy=function(e){var t=e.altitudeReference,n=e.canEstimateShowCoordinateSystem,r=e.environmentFromLoadedShowData,o=e.estimatingCoordinateSystem,a=e.onAltitudeReferenceTypeChanged,i=e.onAltitudeReferenceValueChanged,c=e.onCopyCoordinateSystemToMap,s=e.onEstimateShowCoordinateSystem,u=e.onOriginChanged,f=e.onOrientationChanged,d=e.onSetAltitudeReferenceToAverageAMSL,p=e.onSetCoordinateSystemFromFile,m=e.onSetCoordinateSystemFromMap,y=e.onSetTakeoffHeading,g=e.onSetTakeoffHeadingToAverageActiveUAVHeading,b=e.showCoordinateSystem,v=e.t,h=e.takeoffHeading,A=t&&t.type===Cp.Mb.AMSL;return l.createElement(l.Fragment,null,l.createElement(M.Mo,null,v("outdoorEnvironmentEditor.coordinateSystem")),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row"}},l.createElement(F.A,null,l.createElement(Ge,uy({type:jm.COORDINATE_SYSTEM_TYPE},b,{orientationLabel:v("outdoorEnvironmentEditor.showOrientation"),originLabel:v("outdoorEnvironmentEditor.showOrigin"),onOriginChanged:u,onOrientationChanged:f})),l.createElement(F.A,{sx:{display:"flex",justifyContent:"space-evenly",alignItems:"center",py:1}},l.createElement(U.A,{variant:"button",color:"textSecondary"},"Copy coordinate system:"),l.createElement(M.m_,{disabled:null==r?void 0:r.location,content:v("outdoorEnvironmentEditor.fileToShowTooltip")},l.createElement("span",null,l.createElement(B.A,{disabled:!(null!=r&&r.location),onClick:p},v("outdoorEnvironmentEditor.fileToShow")))),l.createElement(B.A,{onClick:m},v("outdoorEnvironmentEditor.mapToShow")),l.createElement(B.A,{onClick:c},v("outdoorEnvironmentEditor.showToMap")))),l.createElement(F.A,{sx:{alignSelf:"bottom",pt:1}},l.createElement(M.m_,{content:v("outdoorEnvironmentEditor.fitCoordinateSysToCurrentDrone")},l.createElement(ce.A,{disabled:!n||o,edge:"end",size:"large",onClick:s},l.createElement(Zm,null))))),l.createElement(ny,{takeoffHeading:h,onChange:y,onSetToAverageHeading:g}),l.createElement(F.A,{sx:{pt:1,display:"flex",flexDirection:"row"}},l.createElement(F.A,{style:{color:uo.Jy.warning}},l.createElement(Mt.A,null)),l.createElement(F.A,{sx:{flex:1,pl:1}},l.createElement(U.A,{color:"textSecondary",variant:"body2"},l.createElement(D.x6,{i18nKey:"outdoorEnvironmentEditor.warningText",components:{underline:l.createElement("u",null)}})))),l.createElement(M.Mo,null,v("outdoorEnvironmentEditor.altitudeControl")),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",pb:2}},l.createElement(te.A,{fullWidth:!0,variant:"filled"},l.createElement(oe.A,{htmlFor:"altitude-reference-type"},v("outdoorEnvironmentEditor.showIsControlledBasedOn")),l.createElement(ie.A,{value:(t?t.type:null)||Cp.Mb.AHL,inputProps:{id:"altitude-reference-type"},onChange:a},l.createElement(ae.A,{value:Cp.Mb.AHL},v("outdoorEnvironmentEditor.AHL")),l.createElement(ae.A,{value:Cp.Mb.AMSL},v("outdoorEnvironmentEditor.AMSL")))),l.createElement(F.A,{sx:{p:1}}),l.createElement(vm.C4,{disabled:!A,label:v("outdoorEnvironmentEditor.AMSLReference"),value:(t?t.value:null)||0,step:.1,min:-1e4,max:1e4,onChange:i}),l.createElement(F.A,{sx:{alignSelf:"bottom",pt:1}},l.createElement(M.m_,{content:v("outdoorEnvironmentEditor.setToAverageAMSL")},l.createElement(ce.A,{disabled:!A,edge:"end",size:"large",onClick:d},l.createElement(xm.A,null))))),l.createElement($m,null),l.createElement(F.A,{sx:{pt:1,mb:-1}},l.createElement(M.e0,{label:"Fitting coordinate system...",visible:o})))};fy.propTypes={altitudeReference:i().shape({type:i().oneOf(Object.values(Cp.Mb)),value:i().number}),canEstimateShowCoordinateSystem:i().bool,environmentFromLoadedShowData:i().object,estimatingCoordinateSystem:i().bool,onAltitudeReferenceTypeChanged:i().func,onAltitudeReferenceValueChanged:i().func,onCopyCoordinateSystemToMap:i().func,onEstimateShowCoordinateSystem:i().func,onOriginChanged:i().func,onOrientationChanged:i().func,onSetAltitudeReferenceToAverageAMSL:i().func,onSetCoordinateSystemFromFile:i().func,onSetCoordinateSystemFromMap:i().func,onSetTakeoffHeading:i().func,onSetTakeoffHeadingToAverageActiveUAVHeading:i().func,showCoordinateSystem:i().shape({orientation:i().string.isRequired,origin:i().arrayOf(i().number)}),t:i().func,takeoffHeading:i().shape({type:i().oneOf(Object.values(Cp.us)),value:i().string.isRequired})};const dy=(0,u.Ng)(function(e){return{altitudeReference:e.show.environment.outdoor.altitudeReference,canEstimateShowCoordinateSystem:_m(e),environmentFromLoadedShowData:(0,wp._)(e),estimatingCoordinateSystem:Boolean(e.show.environment.estimatingCoordinateSystem),showCoordinateSystem:e.show.environment.outdoor.coordinateSystem,mapCoordinateSystem:e.map.origin,takeoffHeading:(0,wp.Z1)(e)}},{onAltitudeReferenceTypeChanged:function(e){return(0,wm.Np)(e.target.value)},onAltitudeReferenceValueChanged:function(e){return(0,wm.gF)(e.target.value)},onEstimateShowCoordinateSystem:function(){return async(e,t)=>{const n=t();if(!_m(n))return;const r={problem:Nm(n),result:void 0};try{await e(Rm(r))}catch(t){return void e((0,Fo.f)((0,ur.Nw)(t,"Failed to calculate show coordinate system")))}const{origin:o,orientation:a,type:i}=r.result;e((0,wm.mm)({origin:o,orientation:a.toFixed(1),setupMission:!0})),e((0,wm.Gk)()),e((0,Id.CV)()),(0,He.Qr)(t())||e((0,Ve._F)({position:o,angle:a.toFixed(1),type:i}))}},onOrientationChanged:function(e){return(0,wm.mm)({orientation:e,setupMission:!0})},onOriginChanged:function(e){return(0,wm.mm)({origin:e,setupMission:!0})},onSetAltitudeReferenceToAverageAMSL:wm.Gk,onSetTakeoffHeading:function(e){return(0,wm.mm)({takeoffHeading:e,setupMission:!0})},onSetTakeoffHeadingToAverageActiveUAVHeading:function(){return function(e,t){var n=t(),r=(0,wo.mP)(n);if(Number.isFinite(r)){var o=cy(cy({},Cp.ay),(0,wp.Z1)(n));if((null==o?void 0:o.type)===Cp.us.ABSOLUTE)o.value=(0,de.n0)(r);else{var a=(0,wp.gQ)(n);o.type=Cp.us.RELATIVE,o.value=(0,de.n0)(r-a)}e((0,wm.mm)({takeoffHeading:o,setupMission:!0}))}}},showNotificationWithNavigationOption:function(e,t){return function(n){n((0,Ci.Ds)({message:e,semantics:Ii.N.SUCCESS,buttons:[{label:Be.A.t("general.action.navigate","Navigate"),endIcon:l.createElement(Im.A,null),action:function(){return(0,vl.K$)(t)}}],timeout:1e4,topic:"coordinate-system-updated"}))}},updateFlatEarthCoordinateSystem:Ve._F,updateOutdoorShowSettings:wm.mm},function(e,t,n){var r=e.environmentFromLoadedShowData,o=e.mapCoordinateSystem,a=e.showCoordinateSystem,i=iy(e,oy),l=t.showNotificationWithNavigationOption,c=t.updateFlatEarthCoordinateSystem,s=t.updateOutdoorShowSettings,u=iy(t,ay);return cy(cy(cy(cy({},n),i),u),{},{environmentFromLoadedShowData:r,showCoordinateSystem:a,onCopyCoordinateSystemToMap:function(){c({position:a.origin,angle:a.orientation}),l(Be.A.t("outdoorEnvironmentEditor.showCoordinateSystemAppliedToMap"),a.origin)},onSetCoordinateSystemFromMap:function(){s({origin:o.position,orientation:o.angle,setupMission:!0}),l(Be.A.t("outdoorEnvironmentEditor.showCoordinateSystemUpdatedFromMap"),o.position)},onSetCoordinateSystemFromFile:function(){var e=r.location,t=e.origin,n=e.orientation,o=(0,de.Yo)(t);s({origin:o,orientation:n,setupMission:!0}),l(Be.A.t("outdoorEnvironmentEditor.showCoordinateSystemUpdatedFromFile"),o)}})})((0,D.CI)()(fy));var py={indoor:"environmentEditorDialog.indoor",outdoor:"environmentEditorDialog.outdoor"},my=(0,D.CI)()(function(e){var t=e.type,n=e.t;return l.createElement(U.A,{variant:"body1"},n(py[t]))});my.propTypes={type:i().oneOf(Object.keys(py))};var yy=function(e){var t=e.editing,n=void 0!==t&&t,r=e.onClose,o=e.type,a=e.t;return l.createElement(M.aQ,{fullWidth:!0,open:n,maxWidth:"sm",title:a("environmentEditorDialog.environmentSettings"),onClose:r},l.createElement(N.A,null,l.createElement(F.A,null,l.createElement(my,{type:o}),"outdoor"===o&&l.createElement(dy,null),"indoor"===o&&l.createElement(Cm,null))))};yy.propTypes={editing:i().bool,onClose:i().func,type:i().oneOf(["indoor","outdoor"]),t:i().func};const gy=(0,u.Ng)(function(e){return{editing:e.show.environment.editing,type:(0,wp.Dy)(e)}},{onClose:Tp.lO})((0,D.CI)()(yy));var by=n(22730);function vy(e){return vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vy(e)}function hy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ay(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=vy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vy(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sy=function(e){var t=e.open,n=void 0!==t&&t,r=e.onClose,a=e.onLoadShowFromUrl;return l.createElement(_.A,{fullWidth:!0,open:n,onClose:r},l.createElement(M.nv,{value:"skybrushAccount"},l.createElement(R.A,{value:"skybrushAccount",label:"Skybrush Account"}),l.createElement(R.A,{disabled:!0,value:"web",label:"Web Link"}),l.createElement(R.A,{disabled:!0,value:"git",label:"Git Repository"})),l.createElement(St.A,null,l.createElement(by.A,null,"Shared with me"),o.A.examples.shows.map(function(e){var t=e.id,n=e.title,r=e.url;return l.createElement(Et.A,{key:t,onClick:function(){return a(r)}},l.createElement(wt.A,{primary:n}))})))};Sy.propTypes={onClose:i().func,onLoadShowFromUrl:i().func,open:i().bool};const Ey=(0,u.Ng)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hy(Object(n),!0).forEach(function(t){Ay(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.show.loadShowFromCloudDialog)},function(e){return{onClose:function(){e((0,Tp.T6)())},onLoadShowFromUrl:function(t){e((0,Tp.T6)()),e((0,wm.LL)(t))}}})(Sy);function Oy(e){return Oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(e)}var wy=["checkedItemIds","items","onToggle"];function Ty(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ty(Object(n),!0).forEach(function(t){Iy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ty(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Iy(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Oy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Oy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oy(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xy(){return xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xy.apply(null,arguments)}var jy=function(e){var t=e.checkedItemIds,n=e.items,r=e.onToggle,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,wy);return l.createElement(St.A,xy({dense:!0,disablePadding:n.length>0},o),n.map(function(e){if("header"===e.type)return l.createElement(by.A,{key:"preflight-header-".concat(e.id)},e.label);var n="preflight-item-".concat(e.id);return l.createElement(Et.A,{key:n,disableRipple:!0,onClick:function(){return r(e.id)}},l.createElement(Ot.A,null,l.createElement(ee.A,{checked:t.includes(e.id),edge:"start",slotProps:{input:{"aria-labelledby":n}},value:e.id})),l.createElement(wt.A,{id:n,primary:e.label}))}),0===n.length&&l.createElement(Ft.Ay,null,l.createElement(wt.A,{primary:"There are no manual preflight check items.",secondary:"You can add them in the Settings dialog."})))};jy.propTypes={checkedItemIds:i().arrayOf(i().string),items:i().arrayOf(i().shape({id:i().string,type:i().string})),onToggle:i().func};var Py=(0,u.Ng)(function(e){return{checkedItemIds:mt(e),items:pt(e)}},function(e){return{onToggle:function(t){e((0,Qe.Wl)(t))}}})(jy),ky=function(e){var t=e.open,n=void 0!==t&&t,r=e.onClear,o=e.onClose,a=e.onSignOff,i=e.signedOff,c=void 0!==i&&i;return l.createElement(_.A,{fullWidth:!0,open:n,maxWidth:"xs",onClose:o},l.createElement(N.A,{style:{display:"flex",flexDirection:"column",paddingLeft:"1em",paddingRight:"1em"}},l.createElement(F.A,{sx:{flex:1,overflow:"auto",minHeight:0}},l.createElement(Py,null)),l.createElement(F.A,{className:"bottom-bar",sx:{textAlign:"center",pt:2}},l.createElement(ne.A,{control:l.createElement(Tt.A,{checked:c,value:"signedOff",onChange:c?r:a}),label:"Sign off on manual preflight checks"}))))};ky.propTypes={onClear:i().func,onClose:i().func,onSignOff:i().func,open:i().bool,signedOff:i().bool};const _y=(0,u.Ng)(function(e){return Cy(Cy({},e.show.manualPreflightChecksDialog),{},{signedOff:(0,wp.Mj)(e)})},{onClear:Tp.mZ,onClose:Tp.VU,onSignOff:wm.I9})(ky);var Ny=n(9313),Ry=n(32499),Dy=n(35412);const My=(0,u.Ng)(e=>({selected:(0,un.W_)(e)}),{onChange:K.vZ})(function({selected:e,onChange:t}){const{t:n}=(0,D.Bd)();return(0,Rt.jsx)(vc.W1,{content:n("mappingToggleButton.sortByMissionID"),children:(0,Rt.jsx)(yp,{value:"missionIds",selected:e,onChange:t,children:(0,Rt.jsx)(Dy.A,{})})})});function Ly(e){return Ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ly(e)}var Fy=["items","showMissionIds"];function Uy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Gy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uy(Object(n),!0).forEach(function(t){Vy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vy(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ly(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ly(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ly(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},By.apply(null,arguments)}var zy=[Ti.n.INFO,Ti.n.SKIPPED,Ti.n.ERROR,Ti.n.ERROR],Hy=function(e){var t=e.items,n=e.showMissionIds,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Fy),o=(0,D.Bd)().t;return t.length>0?l.createElement(St.A,By({dense:!0,disablePadding:!0},r),t.map(function(e){var t="preflight-item-".concat(e.code),r=zy[(0,Ry.kx)(e.code)];return l.createElement(Et.A,{key:t,button:!0,disableRipple:!0},l.createElement(M.BG,{status:r}),l.createElement(wt.A,{id:t,primary:Jd.A.describe(e.code),secondary:(0,io.zL)(e.uavIdsAndIndices.map(n?function(e){return(0,io.J8)(e[1])}:function(e){return String(e[0])}))}))})):l.createElement(M.qq,{header:o("OnboardPreflightChecksDialog.passed"),text:o("OnboardPreflightChecksDialog.noError"),icon:l.createElement(Ny.A,null),iconColor:uo.Jy.success})};Hy.propTypes={items:i().arrayOf(i().shape({id:i().string,type:i().string})),onToggle:i().func,showMissionIds:i().bool,t:i().func};var Wy=(0,u.Ng)(function(e){return{items:(0,wo.Ty)(e),showMissionIds:(0,un.W_)(e)}},{})(Hy),qy=function(e){var t=e.open,n=void 0!==t&&t,r=e.onClear,o=e.onClose,a=e.onSignOff,i=e.signedOff,c=void 0!==i&&i,s=e.t;return l.createElement(M.aQ,{fullWidth:!0,open:n,maxWidth:"xs",title:s("show.onboardPreflightChecks"),titleComponents:l.createElement(My,null),onClose:o},l.createElement(N.A,{style:{display:"flex",flexDirection:"column",paddingLeft:"1em",paddingRight:"1em"}},l.createElement(F.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",flex:1,overflow:"auto",minHeight:"240px"}},l.createElement(Wy,null)),l.createElement(F.A,{className:"bottom-bar",sx:{textAlign:"center",pt:2}},l.createElement(ne.A,{control:l.createElement(Tt.A,{checked:c,value:"signedOff",onChange:c?r:a}),label:s("OnboardPreflightChecksDialog.signOffOn")}))))};qy.propTypes={onClear:i().func,onClose:i().func,onSignOff:i().func,open:i().bool,signedOff:i().bool,t:i().func};const Ky=(0,u.Ng)(function(e){return Gy(Gy({},e.show.onboardPreflightChecksDialog),{},{signedOff:(0,wp.P_)(e)})},{onClear:Tp.Bm,onClose:Tp.Ej,onSignOff:wm.Jj})((0,D.CI)()(qy));var Yy,$y=["children","direction","onChange","selectedPage"],Zy=["className","id","keepMounted","scrollable"];function Jy(){return Jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jy.apply(null,arguments)}function Xy(e){return function(e){if(Array.isArray(e))return Qy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Qy(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qy(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eg(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var tg=(0,Bt.n9)(function(){return{page:{position:"absolute",left:0,top:0,right:0,bottom:0},scrollable:{overflow:"auto"}}}),ng=function(e){return e.id};ng.propTypes={children:i().node,id:i().string,keepMounted:i().bool,scrollable:i().bool};var rg=function(e){var t=e.children,n=e.direction,o=void 0===n?"left":n,a=(e.onChange,e.selectedPage),i=eg(e,$y),c=tg();return l.createElement(F.A,Jy({},i,{sx:[{position:"relative"}].concat(Xy(Array.isArray(i.sx)?i.sx:[i.sx]))}),l.Children.map(t,function(e){var t=e.props,n=t.className,i=t.id,s=t.keepMounted,u=t.scrollable,f=eg(t,Zy),d={in:i===a,direction:o,children:e.children};s||(d.mountOnEnter=!0,d.unmountOnExit=!0);var p=(0,r.A)(c.page,u&&c.scrollable,n);return l.createElement(lf,d,l.createElement(F.A,Jy({className:p},f)))}))};rg.propTypes={children:i().arrayOf(ng),direction:null===(Yy=lf.propTypes)||void 0===Yy?void 0:Yy.direction,onChange:i().func,selectedPage:i().string};const og=rg;var ag=["onEditEnvironment","secondaryText","status"];function ig(){return ig=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ig.apply(null,arguments)}var lg=(0,rt.Mz)(wp.Dy,wp.xL,function(e,t){switch(e){case"indoor":return(0,Be.tt)("show.indoor");case"outdoor":var n=t.type,r=t.value;return n===Cp.Mb.AMSL?Number.isFinite(r)?(0,Be.tt)("show.outdoor.relativeToAMSL",{altitude:r.toFixed(1)}):(0,Be.tt)("show.outdoor.invalidAltitudeReference"):n===Cp.Mb.AHL?(0,Be.tt)("show.outdoor.relativeToHome"):(0,Be.tt)("show.outdoor.unknownAltitudeReference");default:return(0,Be.tt)("show.unknown")}}),cg=function(e){var t=e.onEditEnvironment,n=e.secondaryText,r=e.status,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ag),a=(0,D.Bd)().t;return l.createElement(Et.A,ig({disabled:r===Ti.n.OFF,onClick:t},o),l.createElement(M.BG,{status:r}),l.createElement(wt.A,{primary:a("show.setupEnvironment"),secondary:n(a)}))};cg.propTypes={onEditEnvironment:i().func,secondaryText:i().func,status:i().oneOf(Object.values(Ti.n))};const sg=(0,u.Ng)(function(e){return{status:ym(e).setupEnvironment,secondaryText:lg(e)}},{onEditEnvironment:Tp.Dg})(cg);var ug=["onClick","status"];function fg(){return fg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fg.apply(null,arguments)}var dg=function(e){switch(e){case Ti.n.OFF:case Ti.n.NEXT:return(0,Be.tt)("geofence.statusText.no");case Ti.n.SUCCESS:return(0,Be.tt)("geofence.statusText.automatic");case Ti.n.WARNING:return(0,Be.tt)("geofence.statusText.manual");case Ti.n.ERROR:return(0,Be.tt)("geofence.statusText.error");default:return""}},pg=function(e){var t=e.onClick,n=e.status,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ug),o=(0,D.Bd)().t;return l.createElement(Et.A,fg({disabled:n===Ti.n.OFF,onClick:t},r),l.createElement(M.BG,{status:n}),l.createElement(wt.A,{primary:o("show.setupGeofence","Setup geofence"),secondary:dg(n)(o)}))};pg.propTypes={onClick:i().func,status:i().oneOf(Object.values(Ti.n))};const mg=(0,u.Ng)(function(e){return{status:ym(e).setupGeofence}},{onClick:function(){return function(e){e((0,_d.cT)(kd.I.GEOFENCE)),e((0,_d.$0)())}}})(pg);var yg=n(92602),gg=n(15443),bg=n(15147),vg=n(55282),hg=n(39064),Ag=n(39899),Sg=n(60463),Eg=["affectedByClockSkew","clock","clockId","clockSkew","emptyText","format","signed","updateInterval"];var Og=function(e){var t=e.affectedByClockSkew,n=e.clock,r=(e.clockId,e.clockSkew),o=e.emptyText,a=e.format,i=void 0===a?"HH:mm:ss":a,c=(e.signed,e.updateInterval),s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Eg),u=(n||{}).running,f=Date.now()+(t&&!(0,nt.default)(r)?r:0),d=n?(0,Cl.b0)(n,f):void 0,p=void 0===d?o:(0,Cl.bj)(d,n,{format:i}),m=(0,ui.A)();return(0,fi.A)(m,u?c:null),l.createElement("span",s,p)};Og.propTypes={affectedByClockSkew:i().bool,clock:i().object,clockId:i().string,clockSkew:i().number,emptyText:i().string,format:i().string,signed:i().bool,updateInterval:i().number};const wg=(0,u.Ng)(function(e,t){var n=kl(e,t.clockId),r=(0,Cl.$t)(n),o=(0,Cl.KK)(n),a=(0,Cl.Px)(n);return{affectedByClockSkew:o,clock:n,clockSkew:(0,Ar.li)(e),signed:r,updateInterval:a}},{})(Og);var Tg=n(69897);function Cg(e){return Cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(e)}function Ig(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Cg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Cg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cg(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xg=Ig(Ig({},Tg._9.RC,(0,Be.tt)("show.startMethod.RC")),Tg._9.AUTO,(0,Be.tt)("show.startMethod.AUTO")),jg=Ig(Ig({},Tg._9.RC,l.createElement(Sg.A,null)),Tg._9.AUTO,l.createElement(Ag.A,null)),Pg=function(e){var t,n=e.hasScheduledStartTime,r=e.startMethod,o=e.t;return l.createElement(St.A,{dense:!0},l.createElement(Ft.Ay,null,l.createElement(Ot.A,null,jg[r]||l.createElement(Fl.A,null)),l.createElement(wt.A,{primary:(null===(t=xg[r])||void 0===t?void 0:t.call(xg,o))||o("show.unknownStartMode"),secondary:n?l.createElement(l.Fragment,null,o("show.clock","Show clock:")," ",l.createElement(wg,{clockId:"show"})):o("show.startTimeNotSet")})))};Pg.propTypes={hasScheduledStartTime:i().bool,startMethod:i().oneOf(Object.values(Tg._9)),t:i().func};const kg=(0,u.Ng)(function(e){return{hasScheduledStartTime:(0,wp.Rf)(e),startMethod:(0,wp.bY)(e)}},{})((0,D.CI)()(Pg));var _g=(0,Bt.n9)(function(e){return{root:{position:"absolute",left:0,top:0,right:0,bottom:0},scrollable:{overflow:"auto"},button:{flex:1,margin:e.spacing(.5),lineHeight:"1 !important"}}}),Ng=function(e){var t=e.broadcast,n=e.onChangeBroadcastMode,r=e.t,o=e.uavActions,a=_g();return l.createElement(l.Fragment,null,l.createElement(kg,null),l.createElement(Xs.A,null),l.createElement(F.A,{display:"flex",alignItems:"center",flexDirection:"row",mt:.5},l.createElement(F.A,{flex:"1",textAlign:"right"},l.createElement(U.A,{variant:"body2",color:t?"textSecondary":"textPrimary"},r("largeControlButtonGroup.selectionOnly"))),l.createElement(Tt.A,{checked:t,onChange:n}),l.createElement(F.A,{flex:"1"},l.createElement(U.A,{variant:"body2",color:t?"textPrimary":"textSecondary"},r("largeControlButtonGroup.broadcast")))),l.createElement(F.A,{display:"flex",flexDirection:"row",flex:1},l.createElement(nu,{className:a.button,color:uo.Ay.success,icon:l.createElement(wl.A,{fontSize:"inherit"}),onClick:o.turnMotorsOn},r(t?"largeControlButtonGroup.armAll":"largeControlButtonGroup.arm")),l.createElement(nu,{className:a.button,color:uo.Ay.info,icon:l.createElement(le.A,{fontSize:"inherit"}),onClick:o.turnMotorsOff},r(t?"largeControlButtonGroup.disarmAll":"largeControlButtonGroup.disarm"))),l.createElement(F.A,{display:"flex",flexDirection:"row",flex:1},l.createElement(nu,{className:a.button,color:uo.Ay.positionHold,icon:l.createElement(yg.A,{fontSize:"inherit"}),onClick:o.holdPosition},r(t?"largeControlButtonGroup.holdAll":"largeControlButtonGroup.hold")),l.createElement(nu,{className:a.button,color:uo.Ay.warning,icon:l.createElement(bg.A,{fontSize:"inherit"}),onClick:o.returnToHome},r(t?"largeControlButtonGroup.RTHAll":"largeControlButtonGroup.RTH"))),l.createElement(F.A,{display:"flex",flexDirection:"row",flex:1,mb:.5},l.createElement(nu,{className:a.button,color:uo.Ay.seriousWarning,icon:l.createElement(gg.A,{fontSize:"inherit"}),onClick:o.land},r(t?"largeControlButtonGroup.landAll":"largeControlButtonGroup.land")),l.createElement(nu,{className:a.button,color:uo.Ay.error,icon:l.createElement(vg.A,{fontSize:"inherit"}),onClick:o.shutdown},r(t?"largeControlButtonGroup.shutdownAll":"largeControlButtonGroup.shutdown"))))};Ng.propTypes={broadcast:i().bool,onChangeBroadcastMode:i().func,t:i().func,uavActions:i().objectOf(i().func)};const Rg=(0,u.Ng)(function(e){return{allUAVIdsInMission:(0,Un.Rl)(e),broadcast:(0,Un.Cg)(e),channel:(0,Un.$D)(e),selectedUAVIds:(0,wo.YZ)(e)}},function(e){return{onChangeBroadcastMode:function(t){return e((0,Gn.I9)(Boolean(t.target.checked)))},uavActions:(0,bc.zH)((0,hg.xM)({getTargetedUAVIds:function(e){return(0,Un.Cg)(e)?(0,Un.Rl)(e):(0,wo.YZ)(e)},getTransportOptions:function(e){return{channel:(0,Un.$D)(e),broadcast:(0,Un.Cg)(e)}}}),e)}})((0,D.CI)()(Ng));var Dg=n(40547),Mg=n(65341),Lg=n(67221),Fg=["secondary"];function Ug(){return Ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ug.apply(null,arguments)}var Gg=function(e){var t=e.secondary,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Fg);return l.createElement(wt.A,Ug({},n,{disableTypography:!0,secondary:l.createElement(F.A,{sx:{minHeight:20.1,display:"flex",flexDirection:"column",justifyContent:"center"}},l.createElement(U.A,{component:"div",variant:"body2",color:"textSecondary"},t))}))};Gg.propTypes={secondary:i().node};const Vg=Gg;var Bg=function(e){return(null==e?void 0:e.size)>0},zg=[".skyc"],Hg=function(e,t){switch(e){case"ok":case"loading":case"notLoaded":return"";case"loadingFailed":return"Failed to load show";case"takeoffPositionsTooClose":return"Takeoff positions are too close";case"landingPositionsTooClose":return"Landing positions are too close";default:return"Show validation failed"}},Wg=function(e){var t,n=e.changedSinceLoaded,r=e.description,o=e.hasLoadedShowFile,a=e.loading,i=e.onClearLoadedShow,c=e.onLoadShowFromCloud,s=e.onReloadShowFile,u=e.onShowFileSelected,f=e.progress,d=e.status,p=e.t,m=e.title,y=e.validationResult;return l.createElement(Rc.A,{accepts:Bg,component:Et.A,componentProps:{sx:{paddingRight:6}},filter:zg,id:"show-file-upload",onSelected:u},l.createElement(M.BG,{status:d}),l.createElement(Vg,{primary:a?p("show.loading"):o?(0,io.xv)(m,60):p("show.noFileLoaded"),secondary:a?l.createElement(Lg.A,{value:f,variant:(0,nt.default)(f)?"indeterminate":"determinate"}):n?l.createElement("span",{style:{color:uo.Ay.warning}},p("show.changedSinceLoaded")):(t=y,"ok"!==t&&"loading"!==t&&"notLoaded"!==t?l.createElement("span",{style:{color:uo.Ay.warning}},Hg(y)):o?r:p("show.selectFile"))}),l.createElement(pl.A,null,n?l.createElement(vc.W1,{content:p("show.reload")},l.createElement(ce.A,{edge:"end",size:"large",onClick:s},l.createElement(Mg.A,null))):o?l.createElement(vc.W1,{content:p("show.clear")},l.createElement(ce.A,{edge:"end",size:"large",onClick:i},l.createElement(le.A,null))):(0,fl.jI)("loadShowFromCloud")?l.createElement(vc.W1,{content:p("show.fromCloud")},l.createElement(ce.A,{edge:"end",size:"large",onClick:c},l.createElement(Dg.A,null))):null))};Wg.propTypes={changedSinceLoaded:i().bool,description:i().string,hasLoadedShowFile:i().bool,loading:i().bool,onClearLoadedShow:i().func,onLoadShowFromCloud:i().func,onReloadShowFile:i().func,onShowFileSelected:i().func,progress:i().number,status:i().oneOf(Object.values(Ti.n)),t:i().func,title:i().string};const qg=(0,u.Ng)(function(e){return{changedSinceLoaded:(0,wp.fb)(e),description:(0,wp.I7)(e),hasLoadedShowFile:(0,wp.tS)(e),loading:(0,wp.oH)(e),progress:(0,wp.nX)(e),status:ym(e).selectShowFile,title:(0,wp.ob)(e),validationResult:(0,wp.Cs)(e)}},{onClearLoadedShow:wm.iZ,onLoadShowFromCloud:Tp.J4,onReloadShowFile:wm.gk,onShowFileSelected:wm.Eo})((0,D.CI)()(Wg));var Kg=["areChecksSignedOff","hasManualChecks","onApprove","onRevoke","status"];function Yg(){return Yg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yg.apply(null,arguments)}var $g=function(e){e.areChecksSignedOff;var t=e.hasManualChecks,n=(e.onApprove,e.onRevoke,e.status),r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Kg),o=(0,D.Bd)().t;return t?l.createElement(Et.A,Yg({disabled:n===Ti.n.OFF},r),l.createElement(M.BG,{status:n}),l.createElement(wt.A,{primary:o("show.manualPreflightChecks","Manual preflight checks")})):null};$g.propTypes={areChecksSignedOff:i().bool,hasManualChecks:i().bool,onApprove:i().func,onClick:i().func,onRevoke:i().func,status:i().oneOf(Object.values(Ti.n))};const Zg=(0,u.Ng)(function(e){return{areChecksSignedOff:(0,wp.Mj)(e),hasManualChecks:bt(e),status:ym(e).performManualPreflightChecks}},{onApprove:wm.I9,onClick:Tp.pl,onRevoke:Tp.mZ})($g);var Jg=["areChecksSignedOff","onApprove","onRevoke","status"];function Xg(){return Xg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xg.apply(null,arguments)}var Qg=function(e){e.areChecksSignedOff,e.onApprove,e.onRevoke;var t=e.status,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Jg),r=(0,D.Bd)().t;return l.createElement(Et.A,Xg({disabled:t===Ti.n.OFF},n),l.createElement(M.BG,{status:t}),l.createElement(wt.A,{primary:r("show.onboardPreflightChecks","Onboard preflight checks")}))};Qg.propTypes={areChecksSignedOff:i().bool,onApprove:i().func,onRevoke:i().func,status:i().oneOf(Object.values(Ti.n))};const eb=(0,u.Ng)(function(e){return{areChecksSignedOff:(0,wp.P_)(e),status:ym(e).waitForOnboardPreflightChecks}},{onApprove:wm.Jj,onClick:Tp.kY,onRevoke:Tp.Bm})(Qg);var tb=n(92895),nb=n(77038);const rb=()=>{const e=(0,u.d4)(rm),t=(0,u.d4)(am),[n,r]=(0,nb.A)(e,500);return(0,Rt.jsx)(Lg.A,{variant:t?"buffer":"determinate",value:n,valueBuffer:r})};var ob=["loading","status"];function ab(){return ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ab.apply(null,arguments)}var ib=function(e){var t=e.loading,n=e.status,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ob),o=(0,D.Bd)().t;return l.createElement(Et.A,ab({disabled:n===Ti.n.OFF},r),l.createElement(M.BG,{status:n}),l.createElement(Vg,{primary:o(t?"show.uploadShowDataLoading":"show.uploadShowData"),secondary:t?l.createElement(rb,null):o("show.uploadShowDataStart")}))};ib.propTypes={loading:i().bool,onClick:i().func,status:i().oneOf(Object.values(Ti.n))};const lb=(0,u.Ng)(function(e){return{loading:am(e),progress:rm(e),status:ym(e).uploadShow}},{onClick:function(){return(0,tb.mP)({job:Cp._e})}})(ib);var cb=n(29132),sb=n(52490),ub=n(21220),fb=n.n(ub),db=n(40861);function pb(e,t){const{algorithm:n,...r}=t??{algorithm:"greedy"};switch(n){case"hungarian":return fb()(e);case"greedy":return function(e,t={}){const n=e.length,r=n>0?Math.min(...e.map(e=>e.length)):0,o=[],a=[];let{threshold:i}=t;if(0===n||0===r)return[];("number"!=typeof i||i<=0||Number.isNaN(i))&&(i=Number.POSITIVE_INFINITY);for(const[t,n]of e.entries())for(const[e,r]of n.entries())r<=i&&o.push([t,e,r]);const l=(0,dr.A)(o,e=>e[2]),c=Array.from({length:n}).fill(!1),s=Array.from({length:r}).fill(!1);let u=n,f=r;for(const[e,t,n]of l)if(!(c[e]||s[t]||(a.push([e,t]),c[e]=!0,s[t]=!0,u--,f--,u&&f)))break;return a}(e,r);default:throw new Error("unknown assignment algorithm: "+n)}}var mb=n(92680),yb=n(33209),gb=n(57754);function bb(e){return"transform"===e.type&&!(e.event instanceof cb.ModifyEvent)}const vb=(e,t)=>n=>{if(!bb(t))return;const{event:r}=t,o=void 0===e?void 0:e.reduce((e,t)=>{const n=Number.parseInt((0,gl.JT)(t)??"",10);return Number.isFinite(n)&&(e[n]=!0),e},{});if("move"===r.subType){const e=r.delta;n((0,gb.wA)({delta:e,drones:o}))}else"rotate"===r.subType&&r.angleDelta&&r.origin&&n((0,gb.Rr)({rotationOriginInMapCoordinates:r.origin,angle:(0,db.xW)(r.angleDelta),drones:o}))},hb=()=>(e,t)=>{const n=(0,yb.QN)(t()),r=(0,wo.yS)(t());if(void 0===n||0===r.length)return;const o=function(e,t,n){const{matching:r,...o}=n,a=n?.matching;return pb((0,db.HR)(e,t,o),a)}(n,r,{distanceFunction:sb.Yf,getter:e=>e?[e.lon,e.lat]:[Number.NaN,Number.NaN],matching:{algorithm:"greedy"}}),a=o.map(([e,t])=>{const n=r[t];return[e,n?[n.lon,n.lat]:void 0]});e((0,gb.ur)(a)),e((0,gb.js)())},Ab=(0,Xn.A)((0,Rt.jsx)("path",{d:"M4 4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2Zm-.25 5h4a.998.998 0 0 1 1 1v2a.998.998 0 0 1-1 1h-2.5v2h-1.5v-3ZM9.5 9H13c.8 0 1.5.7 1.5 1.5v1c0 .6-.4 1.1-.9 1.4l.9 2.1H13l-.9-2H11v2H9.5Zm6.75 0h3c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1zm-11 1.5v1h2v-1h-1zm5.75 0v1h2v-1zm5.75 0v3h2v-3z"}),"Pro"),Sb=Object.freeze([{selector:wp.tS,message:(0,Be.tt)("show.showConfigurator.prerequisites.loaded")},{selector:e=>void 0!==(0,wp.eg)(e)?.show,message:(0,Be.tt)("show.showConfigurator.prerequisites.segments")},{selector:Ar.UJ,message:(0,Be.tt)("show.showConfigurator.prerequisites.server")},{selector:Ar.K2,message:(0,Be.tt)("show.showConfigurator.prerequisites.extension")},{selector:e=>[(0,wp.wA)(e),(0,wp._)(e)?.location?.origin].some(e=>void 0!==e),message:(0,Be.tt)("show.showConfigurator.prerequisites.origin")}]),Eb=(0,u.Ng)(e=>({show:(0,yb.aM)(e),status:ym(e).showConfigurator}),{showDialogAndClearUndoHistory:e=>t=>{t((0,gb.ui)(e)),t((0,gb.Fs)())}})(e=>{const{show:t,showDialogAndClearUndoHistory:n,status:r}=e,o=(0,u.wA)(),{t:a}=(0,D.Bd)(),[i,c]=(0,l.useState)(),s=Sb.map(({selector:e,message:t})=>({result:(0,u.d4)(e),message:t(a)})),f=s.every(({result:e})=>e),d=(0,l.useCallback)(()=>{t?n(t):o((0,Ci.Qg)(a("show.showConfigurator.noShowData")))},[o,t,n,a]),p=(0,Rt.jsx)(M.G7,{children:s.map(({result:e,message:t},n)=>(0,Rt.jsx)(M.RU,{iconPreset:e?"success":"disconnected",primaryText:t},n))}),m=r!==Ti.n.OFF&&!f,y=r===Ti.n.OFF||!f;return(0,Rt.jsx)("div",{ref:c,children:(0,Rt.jsxs)(Et.A,{disabled:y,onClick:d,children:[(0,Rt.jsx)(M.BG,{status:y?Ti.n.OFF:r}),(0,Rt.jsx)(wt.A,{primary:(0,Rt.jsx)(M.m_,{content:p,disabled:!m,maxWidth:500,placement:"left",triggerTarget:i,children:(0,Rt.jsxs)("span",{children:[a("show.showConfigurator.button"),(0,Rt.jsx)(Ab,{style:{verticalAlign:"middle",marginLeft:8}})]})}),secondary:a("show.showConfigurator.description")})]})})}),Ob=Eb;var wb=function(e){var t=e.formattedStartTime,n=e.onClick,r=e.status,o=(0,D.Bd)().t;return l.createElement(Et.A,{onClick:n},l.createElement(M.BG,{status:r}),l.createElement(wt.A,{primary:o("show.chooseStartTime"),secondary:t?o("show.startsAt",{time:t}):o("show.chooseStartTimeNotSet","Not set yet")}))};wb.propTypes={formattedStartTime:i().string,onClick:i().func,status:i().oneOf(Object.values(Ti.n))};const Tb=(0,u.Ng)(function(e){return{formattedStartTime:(0,wp.k2)(e),status:ym(e).setupStartTime}},{onClick:Tp.O1})(wb);var Cb=["maxDistance","onClick","status"];function Ib(){return Ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ib.apply(null,arguments)}var xb=function(e,t){if("number"==typeof t)return Number.isFinite(t)?(0,Be.tt)("show.placementAccuracy",{distance:(0,io.BO)(t)}):(0,Be.tt)("show.takeOffNoPosition");switch(e){case Ti.n.OFF:case Ti.n.NEXT:return(0,Be.tt)("show.takeOffPlace");case Ti.n.SUCCESS:return(0,Be.tt)("show.dronePlacementApproved");case Ti.n.ERROR:return(0,Be.tt)("show.dronePlacementError");case Ti.n.SKIPPED:return(0,Be.tt)("show.dronePlacementPartial");case Ti.n.WAITING:return(0,Be.tt)("show.dronePlacementCheck");default:return""}},jb=function(e){var t=e.maxDistance,n=e.onClick,r=e.status,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Cb),a=(0,D.Bd)().t;return l.createElement(Et.A,Ib({disabled:r===Ti.n.OFF,onClick:n},o),l.createElement(M.BG,{status:r}),l.createElement(wt.A,{primary:a("show.setupTakeoffArea","Setup takeoff area"),secondary:xb(r,t)(a)}))};jb.propTypes={maxDistance:i().number,onClick:i().func,status:i().oneOf(Object.values(Ti.n))};const Pb=(0,u.Ng)(function(e){return{maxDistance:ym(e).setupTakeoffArea!==Ti.n.OFF?(0,wo.O6)(e):void 0,status:ym(e).setupTakeoffArea}},{onClick:Tp.l9})(jb);var kb=function(e){var t=e.environmentType,n=e.isAuthorized;return l.createElement(og,{flex:1,selectedPage:n?"execution":"setup"},l.createElement(ng,{scrollable:!0,id:"setup"},l.createElement(St.A,{dense:!0},l.createElement(qg,null),l.createElement(Xs.A,null),l.createElement(sg,null),"outdoor"===t&&l.createElement(Ob,null),l.createElement(Pb,null),"outdoor"===t&&l.createElement(mg,null),l.createElement(lb,null),l.createElement(Xs.A,null),l.createElement(eb,null),l.createElement(Zg,null),l.createElement(Xs.A,null),l.createElement(Tb,null))),l.createElement(ng,{scrollable:!0,id:"execution",display:"flex",flexDirection:"column"},l.createElement(Rg,null)))};kb.propTypes={environmentType:i().oneOf(["indoor","outdoor"]),isAuthorized:i().bool};const _b=(0,u.Ng)(function(e){return{environmentType:(0,wp.Dy)(e),filename:null,isAuthorized:(0,wp.fX)(e)}})(kb);var Nb=n(70342),Rb=n(61714),Db=n(31127),Mb=n(99768),Lb=n(65886),Fb=n(66212),Ub=n(40001),Gb=n(41591),Vb=n(96746),Bb=n(22278),zb=n(73451),Hb=n(77440),Wb=n(69091),qb=n(99198);const Kb=()=>{const e=(0,u.wA)(),t=(0,u.d4)(wp.k2),{t:n}=(0,D.Bd)();return(0,Rt.jsx)(qb.A,{severity:t?"info":"warning",variant:"filled",action:t?(0,Rt.jsx)(B.A,{color:"inherit",startIcon:(0,Rt.jsx)(le.A,{}),onClick:()=>{e((0,wm.F7)())},children:n("general.action.clear")}):null,children:(0,Rt.jsx)(F.A,{children:t?(0,Rt.jsx)(D.x6,{i18nKey:"startTimeDisplay.startTimeIsSetTo",components:{strong:(0,Rt.jsx)("strong",{})},values:{formattedStartTime:t}}):n("startTimeDisplay.noStartTimeIsSet")})})};var Yb=n(58760),$b=n(12563),Zb=n(9251),Jb=n(619),Xb=n(88559);const Qb=function(e){const t=(0,ui.A)();(0,Xb.A)(t,e)},ev=(0,pp.Ay)(B.A)({border:"0 !important",textTransform:"none"}),tv=(({relativeIntervals:e=[],divisors:t=[]}={})=>n=>{let r=(0,Vb.A)((0,Jb.A)((0,Vb.A)(n,{seconds:30})),{minutes:2});const o=e.map(e=>({time:e,relative:!0}));if(t.length>0){o.push({time:r,relative:!1});for(const e of t){const t=(0,$b.A)(r),n=(0,Vb.A)(r,{minutes:e-t%e});o.push({time:n,relative:!1}),r=n}}return o})({relativeIntervals:[15,30,60],divisors:[5,15,30,60]}),nv=({onChange:e,startTimes:t=tv,...n})=>{const r="function"==typeof t?t(Date.now()):t;return Qb(1e4),(0,Rt.jsx)(Yb.A,{variant:"text",...n,children:r.map((t,n)=>(0,Rt.jsx)(ev,{color:"inherit",onClick:()=>{e(t)},children:t.relative?`${t.time>0?"+":""}${t.time}s`:0===(0,Zb.A)(t.time)?(0,si.A)(t.time,"HH:mm"):(0,si.A)(t.time,"HH:mm:ss")},`button${n}`))})},rv=({label:e,...t})=>(0,Rt.jsxs)(F.A,{sx:{mt:1,flexDirection:"row",display:"flex",alignItems:"center"},children:[(0,Rt.jsx)(F.A,{sx:{mr:2},children:(0,Rt.jsx)(U.A,{variant:"body2",color:"textSecondary",children:e})}),(0,Rt.jsx)(nv,{...t})]});var ov;!function(e){e.ABSOLUTE="__local__",e.RELATIVE="__local_relative__"}(ov||(ov={}));function av(e,t){const n=(0,Db.A)(e);return n.setHours(t.getHours(),t.getMinutes(),t.getSeconds()),n}const iv=({alwaysAllowSubmission:e,initialValues:t,onClose:n,onSubmit:r})=>{const{t:o}=(0,D.Bd)(),a=(0,l.useMemo)(()=>(e=>t=>{const n={};if((0,Mb.A)(t.utcDate))if((0,Mb.A)(t.utcTime)){if(t.clock===ov.ABSOLUTE)if((0,Lb.A)((0,Fb.A)(t.utcDate)))n.utcDate=e("startTimeDialog.errors.pastDate");else{const r=av(t.utcDate,t.utcTime);(0,Lb.A)(r)&&(n.utcTime=e("startTimeDialog.errors.pastTime"))}}else n.utcTime=e("startTimeDialog.errors.invalidTime");else n.utcDate=e("startTimeDialog.errors.invalidDate");return n})(o),[o]);return(0,Rt.jsx)(V.lV,{initialValues:t,validate:a,onSubmit:r,children:({dirty:t,form:r,handleSubmit:a,invalid:i,values:l})=>(0,Rt.jsxs)("form",{id:"start-time-form",onSubmit:a,children:[(0,Rt.jsxs)(N.A,{sx:{paddingBottom:0,paddingTop:2},children:[(0,Rt.jsx)(Kb,{}),(0,Rt.jsx)(F.A,{sx:{mt:2},children:(0,Rt.jsx)(M.Mo,{children:o("startTimeDialog.setTheStartTime")})}),(0,Rt.jsxs)(re.A,{row:!0,sx:{gap:1},children:[(0,Rt.jsx)(F.A,{sx:{alignContent:"center",minWidth:"160px"},children:(0,Rt.jsxs)(G.l6,{labelId:"reference-clock-label",name:"clock",label:o("startTimeDialog.reference"),formControlProps:{fullWidth:!0,variant:"filled"},children:[(0,Rt.jsx)(ae.A,{value:ov.ABSOLUTE,children:o("startTimeDialog.localTime")}),(0,Rt.jsx)(ae.A,{value:ov.RELATIVE,children:o("startTimeDialog.localTimeRelative")}),(0,Rt.jsx)(ae.A,{value:Hb.v.MTC,children:o("startTimeDialog.SMPTETimecode")})]})}),l?.clock===ov.ABSOLUTE?(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(F.A,{sx:{alignContent:"center",minWidth:"160px",flex:1},children:(0,Rt.jsx)(G.lr,{disablePast:!0,format:"yyyy-MM-dd",label:o("startTimeDialog.startDate"),name:"utcDate",textFieldProps:{variant:"filled"}})}),(0,Rt.jsx)(F.A,{sx:{alignContent:"center",minWidth:"160px",flex:1},children:(0,Rt.jsx)(G.AG,{ampm:!1,format:"HH:mm:ss",label:o("startTimeDialog.startTime"),name:"utcTime",textFieldProps:{variant:"filled"}})})]}):(0,Rt.jsx)(F.A,{sx:{alignContent:"center",flex:1},children:(0,Rt.jsx)(vm.ft,{label:o("startTimeDialog.startTimeHms"),size:"small",name:"timeOnClock",variant:"filled"})})]}),(l?.clock===ov.ABSOLUTE||l?.clock===ov.RELATIVE)&&(0,Rt.jsx)(rv,{label:o("startTimeDialog.suggestions"),onChange:e=>{((e,t)=>{const{time:n,relative:r}=t;r?(e.change("clock",ov.RELATIVE),e.change("timeOnClock",(0,io.aD)(n,{padHours:!0}))):e.batch(()=>{e.change("clock",ov.ABSOLUTE),e.change("utcDate",n),e.change("utcTime",n)})})(r,e)}}),(0,Rt.jsx)(F.A,{sx:{mt:2},children:(0,Rt.jsx)(M.Mo,{children:i?"invalid":o("startTimeDialog.additionalSettings")})}),(0,Rt.jsxs)(G.l6,{labelId:"start-signal-label",name:"method",label:o("startTimeDialog.startSignal"),formControlProps:{fullWidth:!0,margin:"dense",variant:"filled"},children:[(0,Rt.jsx)(ae.A,{value:Tg._9.RC,children:o("startTimeDialog.startShowWithRC")}),(0,Rt.jsx)(ae.A,{value:Tg._9.AUTO,children:o("startTimeDialog.startShowAuto")})]}),(0,Rt.jsx)(G.q_,{name:"authorizeWhenSettingStartTime",data:{label:o("startTimeDialog.authorizeWhenSettingStartTime"),value:!0}})]}),(0,Rt.jsxs)(Nn.A,{children:[(0,Rt.jsx)(B.A,{disabled:!t,onClick:()=>{r.reset()},children:o("startTimeDialog.resetForm")}),n&&(0,Rt.jsx)(B.A,{onClick:n,children:o("general.action.close")}),(0,Rt.jsx)(B.A,{color:"primary",type:"submit",disabled:i||!e&&!t,children:o("startTimeDialog.setNewStartTime")})]})]})})},lv=(0,u.Ng)(e=>({...e.show.startTimeDialog,...e.show.start}),e=>({onClose(){e((0,Tp.w7)())},onUpdateSettings({authorizeWhenSettingStartTime:t,clock:n,method:r,timeOnClock:o,utcDate:a,utcTime:i}){if(e((0,Tp.U9)(r)),n===ov.ABSOLUTE)e((0,Tp.gJ)({time:(0,Bb.A)(av(a,i)),clock:void 0}));else if(n===ov.RELATIVE){const t=(0,Wb.Kw)(o);e((0,Tp.gJ)({time:Number.isNaN(t)?void 0:(0,Bb.A)((0,zb.A)((0,Vb.A)(Date.now(),{seconds:t}))),clock:void 0}))}else{const t=(0,Wb.Kw)(o);e((0,Tp.gJ)({time:Number.isNaN(t)?void 0:t,clock:n}))}t&&e((0,wm.eo)()),e((0,Tp.L5)("toServer")),e((0,Tp.w7)({authorizeWhenSettingStartTime:t}))}}))(({authorizeWhenSettingStartTime:e=!1,clock:t,method:n=Tg._9.RC,open:r=!1,onClose:o,onUpdateSettings:a,timeOnClock:i,utcTime:l})=>{const c="number"==typeof l,s="number"==typeof i,u=c?(0,Ub.A)(l):(0,Gb.A)((0,Vb.A)(new Date,{minutes:30}),0),f=s?i:0,d=(e=>e===ov.ABSOLUTE||e===ov.RELATIVE||e===Hb.v.MTC)(t)?t:ov.ABSOLUTE;return(0,Rt.jsx)(Rb.$J,{dateAdapter:Nb.h,children:(0,Rt.jsx)(_.A,{fullWidth:!0,open:r,maxWidth:"sm",onClose:o,children:(0,Rt.jsx)(iv,{alwaysAllowSubmission:!c,initialValues:{authorizeWhenSettingStartTime:e,method:n,clock:d,timeOnClock:(0,io.aD)(f,{padHours:!0}),utcDate:(0,Db.A)(u),utcTime:u},onClose:o,onSubmit:a})})})});var cv=n(68669),sv=n(83794),uv=n(86676),fv=n(3431);const dv=e=>{const{t}=(0,D.Bd)(),n=(0,u.wA)(),r=(0,u.d4)(Un.xg);return(0,Rt.jsx)(B.A,{startIcon:(0,Rt.jsx)(fv.A,{}),disabled:!r,onClick:()=>{n((0,Id.Dn)())},...e,children:t("augmentMappingButton.assignSparesToEmptySlots")})},pv=e=>{const{t}=(0,D.Bd)(),n=(0,u.d4)(Un.f4),r=(0,u.d4)(Un.MB),o=(0,u.wA)();return(0,Rt.jsx)(B.A,{startIcon:(0,Rt.jsx)(Zm,{}),disabled:r,onClick:()=>{o((0,Id.CV)())},...e,children:t(n?"recalculateMappingButton.recalculateMapping":"recalculateMappingButton.findOptimalMapping")})};function mv(e){return mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mv(e)}function yv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yv(Object(n),!0).forEach(function(t){bv(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bv(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=mv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mv(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vv={cursor:"pointer"},hv=function(e){var t=e.indices;return l.createElement(D.wD,null,function(e){return l.createElement(So,{items:t,title:e("takeoffAreaSetupDialog.emptySlots"),successMessage:e("takeoffAreaSetupDialog.allSlotsFilled")})})};hv.propTypes={indices:i().arrayOf(i().number)};var Av=function(e){var t=e.hasNonemptyMappingSlot,n=e.selectDrones,r=e.uavIds;return l.createElement(D.wD,null,function(e){return l.createElement(So,{items:r,title:e("takeoffAreaSetupDialog.missing"),successMessage:e("takeoffAreaSetupDialog.allDroneOnline"),emptyMessage:e("takeoffAreaSetupDialog.noDrones"),preferEmptyMessage:!t,actions:r&&r.length>0&&l.createElement(cv.A,{style:vv,fontSize:"large",onClick:function(){return n(r)}})})})};Av.propTypes={hasNonemptyMappingSlot:i().bool,selectDrones:i().func.isRequired,uavIds:i().arrayOf(i().string)};var Sv=function(e){var t=e.hasNonemptyMappingSlot,n=e.selectDrones,r=e.uavIds;return l.createElement(D.wD,null,function(e){return l.createElement(So,{items:r,title:e("takeoffAreaSetupDialog.misplaced"),successMessage:e("takeoffAreaSetupDialog.allDronesAtTakeoffPositions"),emptyMessage:e("takeoffAreaSetupDialog.noDrones"),preferEmptyMessage:!t,actions:r&&r.length>0&&l.createElement(cv.A,{style:vv,fontSize:"large",onClick:function(){return n(r)}})})})};Sv.propTypes={hasNonemptyMappingSlot:i().bool,selectDrones:i().func.isRequired,uavIds:i().arrayOf(i().string)};var Ev=function(e){var t=e.hasNonemptyMappingSlot,n=e.selectDrones,r=e.uavIds;return l.createElement(D.wD,null,function(e){return l.createElement(So,{items:r,title:e("takeoffAreaSetupDialog.misaligned"),successMessage:e("takeoffAreaSetupDialog.allDronesFacingCorrectDirection"),emptyMessage:e("takeoffAreaSetupDialog.noDrones"),preferEmptyMessage:!t,actions:r&&r.length>0&&l.createElement(cv.A,{style:vv,fontSize:"large",onClick:function(){return n(r)}})})})};Ev.propTypes={hasNonemptyMappingSlot:i().bool,selectDrones:i().func.isRequired,uavIds:i().arrayOf(i().string)};var Ov=function(e){var t=e.emptySlotIndices,n=e.hasNonemptyMappingSlot,r=e.misalignedUAVIds,o=e.misplacedUAVIds,a=e.missingUAVIds,i=e.selectDrones;return l.createElement(l.Fragment,null,l.createElement(hv,{indices:t}),l.createElement(Av,{uavIds:a,hasNonemptyMappingSlot:n,selectDrones:i}),l.createElement(Sv,{uavIds:o,hasNonemptyMappingSlot:n,selectDrones:i}),l.createElement(Ev,{uavIds:r,hasNonemptyMappingSlot:n,selectDrones:i}))};Ov.propTypes={emptySlotIndices:i().arrayOf(i().number),hasNonemptyMappingSlot:i().bool,misalignedUAVIds:i().arrayOf(i().string),misplacedUAVIds:i().arrayOf(i().string),missingUAVIds:i().arrayOf(i().string),selectDrones:i().func.isRequired};var wv=(0,u.Ng)(function(e){return{emptySlotIndices:(0,Un.fA)(e),hasNonemptyMappingSlot:(0,Un.f4)(e),missingUAVIds:(0,wo.WF)(e),misplacedUAVIds:(0,wo.Lz)(e),misalignedUAVIds:(0,wo.WW)(e)}},function(e){return{selectDrones:function(t){return e((0,uv.KY)(t))}}})(Ov),Tv=function(e){var t=e.approved,n=void 0!==t&&t,r=e.calculating,o=e.hasVirtualDrones,a=e.open,i=void 0!==a&&a,c=e.onAddVirtualDrones,s=e.onApprove,u=e.onClose,f=e.onRevoke,d=e.t,p=o&&l.createElement(B.A,{color:"inherit",startIcon:l.createElement(sv.A,null),onClick:c},d("takeoffAreaSetupDialog.placeVirtualDrones"));return l.createElement(M.aQ,{fullWidth:!0,open:i,maxWidth:"sm",title:d("takeoffAreaSetupDialog.takeoffAreaSetup"),titleComponents:p,onClose:u},l.createElement(N.A,null,l.createElement(wv,null),l.createElement(F.A,{sx:{pt:2,display:"flex",flexDirection:"row",justifyContent:"center"}},l.createElement(pv,null),l.createElement(dv,null)),l.createElement(F.A,{sx:{pb:1,display:"flex",flexDirection:"row",justifyContent:"center"}},l.createElement(M.e0,{label:d("mappingEditorToolbar.calculatingMapping"),visible:r})),l.createElement(F.A,{className:"bottom-bar",sx:{textAlign:"center",pt:2}},l.createElement(ne.A,{control:l.createElement(Tt.A,{checked:n,value:"approved",onChange:n?f:s}),label:d("takeoffAreaSetupDialog.approveTakeoffAreaArrangement")}))))};Tv.propTypes={approved:i().bool,calculating:i().bool,hasVirtualDrones:i().bool,onAddVirtualDrones:i().func,onApprove:i().func,onClose:i().func,onRevoke:i().func,open:i().bool,t:i().func};const Cv=(0,u.Ng)(function(e){return gv(gv({},e.show.takeoffAreaSetupDialog),{},{approved:(0,wp.du)(e),calculating:(0,Un.MB)(e),hasVirtualDrones:(0,Ar.jG)(e)})},function(e){return{onAddVirtualDrones:function(){e((0,Id.dZ)())},onApprove:function(){e((0,wm.fU)()),setTimeout(function(){return e((0,Tp.JI)())},300)},onClose:function(){e((0,Tp.JI)())},onRevoke:function(){e((0,Tp.Po)())}}})((0,D.CI)()(Tv));const Iv=function(){return l.createElement(F.A,{sx:{display:"flex",flexDirection:"column",height:"100%"}},l.createElement(_b,null),l.createElement(F.A,{className:"bottom-bar"},l.createElement(St.A,{dense:!0,disablePadding:!0},l.createElement(bm,null))),(0,fl.jI)("loadShowFromCloud")&&l.createElement(Ey,null),l.createElement(gy,null),l.createElement(lv,null),l.createElement(Cv,null),l.createElement(Ky,null),l.createElement(_y,null))};var xv=n(40567),jv=n(45493),Pv=n(2662),kv=n(27083),_v=n(51870);const Nv=function(){return Fr.A};function Rv(e){return Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(e)}function Dv(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Rv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rv(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mv=Dv(Dv(Dv(Dv(Dv({},zl.Zm.TEXT,".txt"),zl.Zm.ARDUPILOT,".bin"),zl.Zm.ULOG,".ulg"),zl.Zm.UNKNOWN,".log"),zl.Zm.FLOCKCTRL,".log");function Lv(e){var t=e.id,n=e.kind,r=e.timestamp,o=Mv[n]||Mv[zl.Zm.UNKNOWN],a=(0,nt.default)(r)?void 0:(0,si.A)((0,Ub.A)(r),"yyyyMMdd_HHmmss");return(0,nt.default)(t)&&(0,nt.default)(a)?"flight_log".concat(o):(0,nt.default)(t)?"".concat(a).concat(o):(0,nt.default)(a)?"".concat(t).concat(o):"".concat(t,"_").concat(a).concat(o)}var Fv=function(e){var t=(e.progress||{}).percentage;return(0,nt.default)(t)?l.createElement(Lg.A,{value:null,variant:"indeterminate"}):"number"==typeof t&&t>=0&&t<100?l.createElement(Lg.A,{value:t,variant:"determinate"}):null};Fv.propTypes={progress:i().shape({percentage:i().number,message:i().string})};const Uv=Fv;function Gv(e){return Gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gv(e)}function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vv.apply(null,arguments)}function Bv(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Gv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Gv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gv(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zv=(0,Bt.n9)(function(e){return{progress:{padding:e.spacing(1,0)}}}),Hv=function(e){var t=function(e){var t,n=e.kind,r=e.body;t=n===zl.Zm.TEXT?new Blob([r],{type:"text/plain;charset=utf-8"}):new Blob([cr.o4.toUint8Array(r)],{type:"application/octet-stream"});return{filename:Lv(e),blob:t}}(e),n=t.filename,r=t.blob;(0,mb.sd)(r,n)},Wv=function(e){var t,n=e.id,r=e.kind,o=e.size,a=e.timestamp,i=e.uavId,c=(0,u.wA)(),s=Nv(),f=zv(),d=(0,u.d4)((0,_v.yE)(i,n)),p=(0,u.d4)((0,_v.Im)(i,n)),m=(0,l.useCallback)(function(){c((0,_v.qy)(i,n)),s.query.getFlightLog(i,n,{onProgress:function(e){var t=e.progress;c((0,_v.Av)(i,n,t))}}).then(function(e){c((0,_v.rE)(i,n,e)),c((0,Ci.Ds)({message:"Log ".concat(n," of UAV ").concat(i," downloaded successfully."),semantics:Ii.N.SUCCESS,buttons:[{label:"Save",action:function(){return Hv(e)}}],timeout:2e4}))}).catch(function(e){var t=e.message;c((0,Ci.Ds)({message:"Couldn't download log ".concat(n," of UAV ").concat(i,": ").concat(t),semantics:Ii.N.ERROR,buttons:[{label:"Retry",action:m}],timeout:2e4})),c((0,_v.Bx)(i,n,t))})},[c,n,s,i]),y=(0,l.useCallback)(function(){Hv(p)},[p]),g=[],b=[];(0,nt.default)(n)||g.push(n),g.push((0,nt.default)(a)?"Date unknown":(0,io.iS)(a)),(null==d?void 0:d.status)===_v.bo.ERROR?b.push(null==d?void 0:d.error):(b.push((0,zl.GR)(r)),(0,nt.default)(o)||b.push((0,Pv.A)(o)));var v=(null==d?void 0:d.status)===_v.bo.LOADING?l.createElement("div",{className:f.progress},l.createElement(Uv,{progress:d.progress})):l.createElement(U.A,{variant:"body2",color:"textSecondary"},b.join(" \xb7 ")),h=(null==d?void 0:d.status)===_v.bo.LOADING,A=h?void 0:p?y:m;return l.createElement(Et.A,{onClick:A},l.createElement(M.BG,{status:null!==(t=Bv(Bv(Bv({},_v.bo.LOADING,"next"),_v.bo.ERROR,"error"),_v.bo.SUCCESS,"success")[null==d?void 0:d.status])&&void 0!==t?t:"off"}),l.createElement(wt.A,{disableTypography:!0,primary:l.createElement(U.A,{variant:"body2"},g.join(" \xb7 ")),secondary:v}),l.createElement(pl.A,null,l.createElement(ce.A,{edge:"end",disabled:h,size:"large",onClick:A},(null==d?void 0:d.status)===_v.bo.SUCCESS?l.createElement(jv.A,null):l.createElement(xv.A,null))))};Wv.propTypes={id:i().string,kind:i().string,size:i().number,timestamp:i().number,uavId:i().string};var qv=(0,ml.c3)(function(e,t){return l.createElement(Wv,Vv({key:e.id,uavId:t.uavId},e))},{dataProvider:"items",backgroundHint:"No logs found"}),Kv=(0,l.memo)(function(e){var t=e.uavId,n=Nv(),r=(0,kv.A)(function(){return t?n.query.getFlightLogList(t):{}},[n,t]);return r.error&&!r.loading?l.createElement(M.qq,{icon:l.createElement(cp.A,null),text:"Error while loading log list",button:l.createElement(B.A,{onClick:r.retry},"Try again")}):r.loading?l.createElement(M.U5,{fullHeight:!0,label:"Retrieving log list..."}):Array.isArray(r.value)?l.createElement(qv,{dense:!0,uavId:t,items:r.value}):l.createElement(M.qq,{text:"Log list not loaded yet",button:l.createElement(B.A,{onClick:r.retry},"Try again")})});Kv.propTypes={uavId:i().string};const Yv=Kv;var $v=n(64305),Zv=function(e){var t=(e.errorCodes||[]).filter(function(e){return e!==Jd.A.PREARM_CHECK_IN_PROGRESS&&e!==Jd.A.PREARM_CHECK_FAILURE});return 0===t.length?null:l.createElement(l.Fragment,null,l.createElement(St.A,{dense:!0},t.map(function(e){return l.createElement(Ft.Ay,{key:e},l.createElement(M.BG,{status:(0,Ry.W9)(e)}),l.createElement(wt.A,{primary:Jd.A.describe(e)}))})),l.createElement(Xs.A,null))};Zv.propTypes={errorCodes:i().arrayOf(i().number)};var Jv=function(e){var t=e.message,n=e.result,r=e.items;return l.createElement(l.Fragment,null,l.createElement(St.A,{dense:!0},l.createElement(Ft.Ay,null,l.createElement(M.BG,{status:(0,zl.ri)(n)}),l.createElement(wt.A,{primary:(0,zl.RG)(n),secondary:t}))),r&&r.length>0?l.createElement(l.Fragment,null,l.createElement(Xs.A,null),l.createElement(M.Mo,{ml:2},"Details"),l.createElement(St.A,{dense:!0},r.map(function(e){return l.createElement(Ft.Ay,{key:e.id},l.createElement(M.BG,{status:(0,zl.ri)(e.result)}),l.createElement(wt.A,{primary:t||(e.result===zl.DR.PASS?e.label:"".concat(e.label," \u2014 ").concat((0,zl.Y9)(e.result)))}))}))):null)};Jv.propTypes={items:i().arrayOf(i().shape({id:i().string,label:i().string,message:i().string,result:$f.A.preflightCheckResult})),message:i().string,result:$f.A.preflightCheckResult};var Xv=(0,l.memo)(function(e){var t=e.uavId,n=Nv(),r=(0,kv.A)(function(){return t?n.query.getPreflightStatus(t):{}},[n,t]),o=(0,l.useRef)();return(0,l.useEffect)(function(){t&&!r.loading&&!r.error&&Boolean(r.value)&&!o.current&&(o.current=setTimeout(function(){o.current=void 0,r.retry()},1e3))},[r,t]),(0,$v.A)(function(){o.current&&clearTimeout(o.current)}),r.error&&!r.loading?l.createElement(M.qq,{icon:l.createElement(cp.A,null),text:"Error while loading preflight status report",button:l.createElement(B.A,{onClick:r.retry},"Try again")}):r.value?l.createElement(Jv,{message:r.value.message,result:r.value.result,items:r.value.items}):r.loading?l.createElement(M.U5,{fullHeight:!0,label:"Retrieving status report..."}):l.createElement(M.qq,{text:"Preflight status report not loaded yet",button:l.createElement(B.A,{onClick:r.retry},"Try again")})});Xv.propTypes={uavId:i().string};var Qv=function(e){var t=e.errorCodes,n=e.uavId;return l.createElement(l.Fragment,null,l.createElement(Zv,{errorCodes:t}),l.createElement(Xv,{uavId:n}))};Qv.propTypes={errorCodes:i().arrayOf(i().number),uavId:i().string};const eh=(0,u.Ng)(function(e,t){var n;return{errorCodes:t.uavId?null===(n=(0,wo.Pz)(e,t.uavId))||void 0===n?void 0:n.errors:null}},{})(Qv);function th(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return nh(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(nh(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,nh(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,nh(f,"constructor",s),nh(s,"constructor",c),c.displayName="GeneratorFunction",nh(s,o,"GeneratorFunction"),nh(f),nh(f,o,"Generator"),nh(f,r,function(){return this}),nh(f,"toString",function(){return"[object Generator]"}),(th=function(){return{w:a,m:d}})()}function nh(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}nh=function(e,t,n,r){function a(t,n){nh(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},nh(e,t,n,r)}function rh(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function oh(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){rh(a,r,o,i,l,"next",e)}function l(e){rh(a,r,o,i,l,"throw",e)}i(void 0)})}}function ah(e,t){var n=Nv();(0,l.useEffect)(function(){var r=n.subscribe(e,t);return oh(th().m(function e(){return th().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r;case 1:(0,e.v)();case 2:return e.a(2)}},e)}))},[n,e,t])}function ih(e){return ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(e)}function lh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ch(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lh(Object(n),!0).forEach(function(t){sh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sh(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ih(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ih(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ih(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uh={NEAR:"near",MID:"mid",FAR:"far",OFF:"off"},fh=function(e,t,n){return sh({},e,sh({top:"-".concat(t,"em"),left:"-".concat(t,"em")},".".concat(e," &:before"),{borderColor:n}))},dh=(0,Bt.n9)(function(e){return ch(ch(ch(ch({root:{width:"100%",height:"100%",position:"absolute"},arc:{position:"absolute",right:"50%",bottom:"50%",transformOrigin:"100% 100%",transform:function(e){var t=e.angle;return"rotate(".concat(t/2,"deg) skewY(").concat(90-t,"deg)")},overflow:"hidden","&:before":{content:'""',display:"block",width:"200%",height:"200%",border:"solid 1.5em ".concat(e.palette.action.selected),borderRadius:"50%",transform:function(e){var t=e.angle;return"skewY(-".concat(90-t,"deg)")}}}},fh(uh.NEAR,2,e.palette.error.main)),fh(uh.MID,4,e.palette.warning.main)),fh(uh.FAR,6,e.palette.success.main)),{},{text:{height:"100%",textAlign:"center",transform:"translateY(-8em)"}})}),ph=function(e){var t=e.angle,n=e.distance,o=e.rotation,a=e.status,i=dh({angle:t});return l.createElement("div",{className:(0,r.A)(i.root,a),style:{transform:"rotate(".concat(o,"deg)")}},l.createElement("div",{className:(0,r.A)(i.arc,i.near)}),l.createElement("div",{className:(0,r.A)(i.arc,i.mid)}),l.createElement("div",{className:(0,r.A)(i.arc,i.far)}),l.createElement("div",{className:i.text},n))};ph.propTypes={angle:i().number,distance:i().string,rotation:i().number,status:i().oneOf(Object.values(uh))};const mh=ph;function yh(e){return yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yh(e)}function gh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gh(Object(n),!0).forEach(function(t){vh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function vh(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=yh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yh(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hh=function(e,t,n){return vh({},e,vh({width:"".concat(t,"%"),height:"".concat(t,"%")},".".concat(e," &"),{borderColor:n}))},Ah=(0,Bt.n9)(function(e){return bh(bh(bh({root:{width:"100%",height:"100%",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},ring:{position:"absolute",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)",border:"solid 0.75em ".concat(e.palette.action.selected),borderRadius:"50%"}},hh(uh.NEAR,45,e.palette.error.main)),hh(uh.MID,65,e.palette.warning.main)),hh(uh.FAR,85,e.palette.success.main))}),Sh=function(e){var t=e.distance,n=e.status,o=Ah();return l.createElement("div",{className:(0,r.A)(o.root,n)},l.createElement("div",{className:(0,r.A)(o.ring,o.near)}),l.createElement("div",{className:(0,r.A)(o.ring,o.mid)}),l.createElement("div",{className:(0,r.A)(o.ring,o.far)}),l.createElement("div",null,t))};Sh.propTypes={distance:i().string,status:i().oneOf(Object.values(uh))};const Eh=Sh;function Oh(e){return Oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(e)}function wh(){return wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wh.apply(null,arguments)}function Th(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ch(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Th(Object(n),!0).forEach(function(t){Ih(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Th(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ih(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Oh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Oh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oh(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xh=(0,Bt.n9)(function(e){return{container:{maxWidth:"35%",maxHeight:"35%",aspectRatio:"1 / 1",position:"relative",inset:"50%",transform:"translateX(-50%) translateY(-50%)"},circle:{position:"absolute",width:"100%",height:"100%",border:"0.5em solid ".concat(e.palette.info.main),borderRadius:"50%"}}}),jh="horizontal",Ph="vertical",kh=[{name:"down",dimension:Ph,heading:180},{name:"front",dimension:jh,heading:0},{name:"front-right",dimension:jh,heading:45},{name:"front-left",dimension:jh,heading:-45},{name:"right",dimension:jh,heading:90},{name:"left",dimension:jh,heading:-90},{name:"back-right",dimension:jh,heading:135},{name:"back-left",dimension:jh,heading:-135},{name:"back",dimension:jh,heading:180},{name:"up",dimension:Ph,heading:0}],_h=[{multiplier:1,unit:"m",digits:2},{multiplier:.01,unit:"cm",digits:0}],Nh=function(e){var t=e.limits,n=void 0===t?{near:2.5,mid:5,far:7.5}:t,r=e.values,o=void 0===r?[]:r,a=xh(),i=kh.map(function(e,t){return Ch(Ch({},e),{},{value:o[t]})}),c=function(e){return{distance:Number.isFinite(e)?(0,io.Sz)(e,_h):"\u221e",status:e<n.near?uh.NEAR:e<n.mid?uh.MID:e<n.far?uh.FAR:uh.OFF}};return l.createElement(F.A,{widht:"100%",sx:{height:"100%",overflow:"hidden"}},l.createElement("div",{className:a.container},l.createElement(Eh,c(o[0])),l.createElement("div",{className:a.circle}),i.filter(function(e){return e.dimension===jh&&null!==e.value}).map(function(e){var t=e.name,n=e.heading,r=e.value;return l.createElement(mh,wh({key:t,angle:40,rotation:n},c(r)))})))};Nh.propTypes={limits:i().objectOf(i().number),values:i().arrayOf(i().number)};const Rh=Nh;function Dh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Mh(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mh(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Lh=function(e){return 65534===e?Number.POSITIVE_INFINITY:"number"==typeof e?e/100:e},Fh=function(e){var t=e.uavId,n=Dh((0,l.useState)([]),2),r=n[0],o=n[1];return ah("/".concat(t,"/rangefinder/measurements"),o),l.createElement(Rh,{values:r.map(Lh)})};Fh.propTypes={uavId:i().string};const Uh=Fh;var Gh=n(20348);n(77552);const Vh=(e,t)=>{const n=(0,u.Pj)(),[r,o]=(0,l.useState)(()=>e(n.getState())),a=(0,l.useCallback)(()=>{o(e(n.getState()))},[e,o,n]);return(0,Xb.A)(a,t),(0,l.useEffect)(a,[a]),r};const Bh=function(e,t){(0,l.useEffect)(()=>{const n=e.add(t);return()=>{e.detach(n)}},[e,t])};var zh=n(39982),Hh=["component"];function Wh(){return Wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wh.apply(null,arguments)}function qh(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return Kh(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Kh(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Kh(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,Kh(f,"constructor",s),Kh(s,"constructor",c),c.displayName="GeneratorFunction",Kh(s,o,"GeneratorFunction"),Kh(f),Kh(f,o,"Generator"),Kh(f,r,function(){return this}),Kh(f,"toString",function(){return"[object Generator]"}),(qh=function(){return{w:a,m:d}})()}function Kh(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Kh=function(e,t,n,r){function a(t,n){Kh(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},Kh(e,t,n,r)}function Yh(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function $h(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Yh(a,r,o,i,l,"next",e)}function l(e){Yh(a,r,o,i,l,"throw",e)}i(void 0)})}}function Zh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jh(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jh(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Xh=[{component:"compass",label:"Calibrate compass",type:"calib",timeout:zh.VR},{component:"accel",label:"Calibrate accelerometer",type:"calib",timeout:90},{component:"baro",label:"Calibrate ground pressure",type:"calib",timeout:10},{component:"gyro",label:"Calibrate gyroscope",type:"calib",timeout:10},{component:"level",label:"Calibrate level position",type:"calib",timeout:10},{component:"led",label:"Execute LED test",type:"test"},{component:"pyro",label:"Execute pyro test",needsConfirmation:!0,type:"test"},{component:"motor",label:"Execute motor test",needsConfirmation:!0,type:"test"}],Qh=function(e){var t=e.component,n=e.label,r=e.needsConfirmation,o=void 0!==r&&r,a=e.timeout,i=e.type,c=e.uavId,s=Nv(),u=Zh((0,l.useState)(null),2),f=u[0],d=u[1],p=Zh((0,l.useState)(null),2),m=p[0],y=p[1],g=Zh((0,l.useState)(!1),2),b=g[0],v=g[1],h=(0,l.useRef)(null),A=(0,l.useCallback)(function(){clearTimeout(f),d(null)},[f,d]),S=(0,l.useCallback)(function(){A(),d(setTimeout(A,3e3))},[A,d]),E=(0,l.useCallback)(function(){A(),b?I():C()},[A,C,I,b]),O=(0,l.useCallback)(function(e){var t=e.progress,n=e.resume,r=e.suspended;y(t),v(Boolean(r)),h.current=n},[]),w=Zh((0,Dm.A)($h(qh().m(function e(){return qh().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,s.sendCommandRequest({uavId:c,command:"test"===i?"test":"calib",args:[String(t)]},{onProgress:O,timeout:a});case 1:return e.a(2,!0)}},e)})),[s,O]),2),T=w[0],C=w[1],I=Zh((0,Dm.A)($h(qh().m(function e(){return qh().w(function(e){for(;;)switch(e.n){case 0:if(!h.current){e.n=1;break}return e.a(2,h.current());case 1:throw new Error("No resume callback has been provided");case 2:return e.a(2)}},e)})),[]),2)[1];return l.createElement(Et.A,{onClick:o?S:E},l.createElement(M.BG,{status:b?"warning":T.loading?"next":T.error?"error":(0,nt.default)(T.value)?"off":T.value?"success":"error"}),l.createElement(wt.A,{primary:b?"".concat(m.message||"Operation suspended",". Click to resume."):!m||T.error&&!T.loading?n:"".concat(m.message||n),secondary:!T.loading&&T.error?(0,ur.Nw)(T.error):m?l.createElement(Uv,{progress:m}):b?l.createElement(Uv,null):null}),l.createElement(pl.A,null,l.createElement(Gh.A,{in:Boolean(f)},l.createElement(B.A,{style:{color:uo.Ay.seriousWarning},onClick:E},"Confirm"))))};Qh.propTypes={component:i().string,label:i().string,needsConfirmation:i().bool,uavId:i().string,timeout:i().number,type:i().oneOf(["calib","test"])};var eA=function(e){var t=e.uavId;return l.createElement(St.A,{dense:!0},Xh.map(function(e){var n=e.component,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Hh);return l.createElement(Qh,Wh({key:n,component:n,uavId:t},r))}))};eA.propTypes={uavId:i().string};const tA=eA;var nA={preflight:eh,tests:tA,messages:Td,logs:Yv,rangefinder:Uh},rA=function(e){var t,n=e.selectedTab,r=e.uavId;return r?n in nA?(t=nA[n],l.createElement(t,{uavId:r})):l.createElement(M.qq,{text:"Please select a view!"}):l.createElement(M.qq,{text:"Please select a UAV id!"})};rA.propTypes={selectedTab:i().oneOf(Object.keys(nA)),uavId:i().string};const oA=(0,u.Ng)(function(e){return{selectedTab:(0,wo.yl)(e),uavId:(0,wo.ys)(e)}})(rA);var aA=n(5744),iA=n(87480),lA=n(90501);function cA(){return cA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cA.apply(null,arguments)}var sA=function(e){var t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return l.createElement(ie.A,cA({style:{width:128,textAlign:"center"}},t),Object.keys(nA).map(function(e){return l.createElement(ae.A,{key:e,value:e},(0,iA.A)(e))}))};sA.propTypes={onChange:i().func,value:i().string};const uA=(0,u.Ng)(function(e){return{value:(0,wo.yl)(e)}},{onChange:function(e){return(0,lA.Of)(e.target.value)}})(sA);var fA=n(61140);var dA=function(e){var t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return l.createElement(fA.A,t,Object.keys(nA).map(function(e){return l.createElement(R.A,{key:e,label:e,value:e})}))};dA.propTypes={onChange:i().func,value:i().string};const pA=(0,u.Ng)(function(e){return{value:(0,wo.yl)(e)}},{onChange:function(e,t){return(0,lA.Of)(t)}})(dA);var mA=n(55258),yA=n(44539),gA=(0,co.i7)({"0%, 49%":{opacity:.5},"50%, 100%":{opacity:1}}),bA=(0,Bt.n9)(function(e){return{root:{position:"absolute",height:e.spacing(1.5),width:e.spacing(1.5),right:-2,top:-2,backgroundColor:e.palette.background.paper,border:"2px solid ".concat(e.palette.background.paper),borderRadius:"50%",boxSizing:"content-box"},light:{position:"absolute",width:"100%",height:"100%",backgroundColor:e.palette.background.paper,borderRadius:"50%",boxSizing:"content-box"},"status-off":{backgroundColor:uo.Ay.off},"status-success":{backgroundColor:uo.Ay.success},"status-warning":{backgroundColor:uo.Ay.warning},"status-rth":{animation:"".concat(gA," 0.5s infinite"),animationDirection:"alternate",backgroundColor:uo.Ay.warning},"status-error":{backgroundColor:uo.Ay.error,color:"white"},"status-critical":{animation:"".concat(gA," 0.5s infinite"),animationDirection:"alternate",backgroundColor:uo.Ay.error,color:"white"}}}),vA=function(e){var t=e.status,n=void 0===t?"off":t,o=bA();return l.createElement("div",{className:(0,r.A)(o.root)},l.createElement("div",{className:(0,r.A)(o.light,o["status-".concat(n)])}))};vA.propTypes={status:i().oneOf(["off","success","warning","rth","error","critical"])};const hA=vA;function AA(){return AA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AA.apply(null,arguments)}var SA=(0,Bt.n9)(function(e){return{avatarWrapper:{position:"relative","&:not(:last-child)":{marginBottom:e.spacing(.5)},"&::after":{background:Bt.Jy.error,boxShadow:"1px 1px 4px rgba(0, 0, 0, 0.6), 1px 1px 2px rgba(255, 255, 255, 0.3) inset",content:'""',height:4,left:"50%",position:"absolute",top:"calc(50% - 2px)",transform:"rotate(-45deg)",transition:"left 300ms, width 300ms",width:"0%"},"&.crossed::after":{left:"-20%",width:"140%"}},avatarContent:{width:"100%",textAlign:"center"},batteryStatus:{marginTop:e.spacing(.25)},gone:{opacity:.7},hint:{fontSize:"0.75rem"},hintSeparator:{width:"75%",marginTop:0,marginBottom:2,border:"1px solid",borderBottomWidth:0,opacity:.6,color:"inherit"},progress:{position:"absolute",top:-2,left:-2}}}),EA=function(e){var t=e.AvatarProps,n=e.batteryFormatter,o=e.batteryStatus,a=e.hint,i=e.crossed,c=e.details,s=e.editing,u=e.gone,f=e.id,d=e.label,p=e.progress,m=e.secondaryStatus,y=e.status,g=void 0===y?"off":y,b=e.text,v=e.textSemantics,h=void 0===v?"info":v,A=SA();g===Bt.nW.INFO&&(g=Bt.nW.SUCCESS);var S=a||(void 0===d||d===f?"":f);return l.createElement(l.Fragment,null,l.createElement("div",{className:(0,r.A)(A.avatarWrapper,i&&"crossed",u&&A.gone)},l.createElement(M.Wi,AA({status:s?Bt.nW.NEXT:g},t),l.createElement("div",{className:A.avatarContent},void 0===d?f:d,l.createElement("hr",{className:A.hintSeparator}),l.createElement("div",{className:A.hint},S||"\u2014"))),p>0&&l.createElement(Lt.A,{className:A.progress,size:44,value:p,variant:"determinate"}),m&&l.createElement(hA,{status:m})),(c||b)&&l.createElement(M.qs,{status:h},c||b),o&&l.createElement(yA.A,AA({className:A.batteryStatus,formatter:n},o)))};EA.propTypes={AvatarProps:i().object,batteryFormatter:i().instanceOf(mA.K),batteryStatus:i().shape({cellCount:i().number,voltage:i().number,percentage:i().number}),hint:i().string,crossed:i().bool,details:i().string,editing:i().bool,gone:i().bool,id:i().string,label:i().string,progress:i().number,secondaryStatus:i().oneOf(["off","info","success","warning","rth","error","critical"]),selected:i().bool,status:i().oneOf(["off","info","success","warning","rth","error","critical"]),text:i().string,textSemantics:i().oneOf(["off","info","success","warning","rth","error","critical"])};const OA=EA;function wA(e){return wA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wA(e)}function TA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function CA(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=wA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wA(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var IA=(0,u.Ng)(function(){var e=(0,wo.q5)();return(0,rt.Mz)(un.sk,Un.Ps,function(t,n){var r=n.id;return e(t,r)},function(e,t){return t},function(e,t,n,r){var o=r.hint,a=r.id,i=r.label,l=r.variant,c=void 0===l?"full":l,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TA(Object(n),!0).forEach(function(t){CA(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({batteryFormatter:e},n);return o||i&&i!==a||!(a in t)||(s.hint=(0,io.J8)(t[a])),"full"!==c&&(delete s.batteryStatus,delete s.text,delete s.details),s})})(OA);IA.propTypes={id:i().string,variant:i().oneOf(["full","minimal"])};const xA=IA;n(11392);var jA=["children"];function PA(){return PA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PA.apply(null,arguments)}function kA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var NA=(0,Bt.n9)(function(e){return{content:{marginRight:-10,width:200+6*Number.parseInt(e.spacing(1))+10,maxHeight:200+6*Number.parseInt(e.spacing(1)),padding:e.spacing(1),display:"flex",flexWrap:"wrap",gap:e.spacing(1),overflow:"hidden auto"}}}),RA=function(e){var t=e.anchorEl,n=e.filterable,r=e.onClose,o=e.onFocus,a=e.onSelect,i=e.open,c=e.sortedByError,s=(0,D.Bd)().t,f=(0,u.d4)(c?wo.aq:wo.Ev,{equalityFn:u.bN}),d=(0,u.d4)(Un.Ps),p=(0,l.useMemo)(function(){if(!t)return 0;var e=t.getBoundingClientRect();return(e.left+e.right)/2},[t]),m=NA(),y=kA((0,l.useState)(""),2),g=y[0],b=y[1];(0,l.useEffect)(function(){i&&b("")},[i]);var v=f.filter(function(e){return e.startsWith(g)||e in d&&(0,io.J8)(d[e]).startsWith(g)});return l.createElement(vc.kF,{open:i,anchorEl:t,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},slotProps:{paper:{sx:function(e){return{overflow:"visible","&::before":{content:'""',display:"block",width:e.spacing(2),height:e.spacing(2),position:"absolute",top:"-".concat(e.spacing(1)),left:"calc(50% - ".concat(e.spacing(1)," + ").concat((t=Number.parseInt(e.spacing(2))+(200+6*Number.parseInt(e.spacing(1)))/2,n=window.innerWidth-t,p<t?p-t:p>n?p-n:0),"px)"),transform:"rotate(45deg)",backgroundColor:e.palette.background.paper}};var t,n},onKeyDown:n?function(e){switch(e.key){case"Enter":v.length>0&&(a(v[0]),r(),e.stopPropagation(),e.preventDefault());break;case"Backspace":b(g.slice(0,-1));break;case"s":g.startsWith("s")?b(g.slice(1)):b("s"+g),e.stopPropagation();break;default:/^\d$/.test(e.key)&&(b(g+e.key),e.stopPropagation())}}:void 0}},onClose:r,onFocus:o},l.createElement("div",{className:m.content,tabIndex:0},v.length>0?v.map(function(e){return l.createElement("div",{key:e},l.createElement(xA,{variant:"minimal",id:e,AvatarProps:{style:{cursor:"pointer"},onClick:function(){a(e),r()}}}))}):l.createElement(M.qq,{text:s("UAVSelector.noMatchingUAVs",{filter:g})})))};RA.propTypes={anchorEl:i().object,filterable:i().bool,onClose:i().func,onFocus:i().func,onSelect:i().func,open:i().bool,sortedByError:i().bool};var DA=function(e){var t=e.children,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,jA),r=kA((0,l.useState)(null),2),o=r[0],a=r[1],i=kA((0,l.useState)(null),2),c=i[0],s=i[1];return l.createElement(l.Fragment,null,t(function(e){a(e.currentTarget)}),l.createElement(RA,PA({anchorEl:o,open:Boolean(o),onClose:function(){a(null),c&&setTimeout(function(){return c.focus()},0)},onFocus:function(e){var t;null!=e&&null!==(t=e.relatedTarget)&&void 0!==t&&t.focusRestorationTarget&&s(e.relatedTarget.focusRestorationTarget)}},n)))};DA.propTypes={children:i().func,sortedByError:i().bool};var MA=function(e){var t=e.followMapSelection,n=e.selectedUAVId,r=e.setSelectedUAVId,o=e.toggleFollowMapSelection;return l.createElement(F.A,{sx:{display:"flex",alignItems:"center",mx:.5}},l.createElement(DA,{sortedByError:!0,onSelect:r},function(e){return l.createElement("div",null,l.createElement(xA,{variant:"minimal",id:n,AvatarProps:{onClick:e,style:{cursor:"pointer"}}}))}),l.createElement(vc.W1,{content:"Follow the selection on the map"},l.createElement(yp,{size:"small",value:"followMapSelection",selected:t,onChange:o},l.createElement(cv.A,null))))};MA.propTypes={followMapSelection:i().bool,selectedUAVId:i().string,setSelectedUAVId:i().func,toggleFollowMapSelection:i().func,uavIds:i().arrayOf(i().string)};const LA=(0,u.Ng)(function(e){return{followMapSelection:(0,wo.X6)(e),selectedUAVId:(0,wo.ys)(e),uavIds:(0,wo.Ev)(e)}},{setSelectedUAVId:lA.Qj,toggleFollowMapSelection:lA.PZ})(MA);var FA=(0,Bt.n9)(function(e){return{root:{position:"sticky",top:0,containerType:"inline-size",flexDirection:"row",justifyContent:"space-between",backgroundColor:(0,Bt.Mw)(e)?"#535353":"#fff",color:(0,Bt.Mw)(e)?e.palette.getContrastText("#535353"):"#000"},select:{"@container (min-width: 525px)":{display:"none"}},tabs:{"@container (max-width: 526px)":{display:"none"}}}});const UA=function(){var e=FA();return l.createElement(aA.A,{className:e.root,style:{}},l.createElement(LA,null),l.createElement(pA,{className:e.tabs}),l.createElement(uA,{className:e.select}))};const GA=function(){return l.createElement(F.A,{sx:{display:"flex",flexDirection:"column",height:"100%"}},l.createElement(UA,null),l.createElement(oA,null))};var VA=n(44329),BA=n(11962),zA=n(2175),HA=new(n(38967).MiniSignal),WA=function(e){return function(t){return HA.dispatch(e,t)}};const qA=HA;var KA,YA=n(20222);!function(e){e.ALL="all",e.ASSIGNED="assigned",e.SPARE="spare"}(KA||(KA={}));const $A=e=>e?(e=>`global-dom-node-${e.replace("$","-")}`)((0,gl.ZO)(e)):void 0;function ZA(e){return(0,nt.default)(e[0])?(0,nt.default)(e[1])?void 0:(0,gl.PI)(String(e[1])):(0,gl.ZO)(e[0])}function JA(e){return(0,Rp.Lo)(e).filter(e=>(0,gl.wy)(e)||(0,gl.Sc)(e))}function XA(e){const t="string"==typeof e?document.querySelector(e):e;return!!t&&(window.requestAnimationFrame(()=>{t.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})}),!0)}const QA={};var eS;!function(e){e.UAV_LIST="uavList"}(eS||(eS={}));var tS=n(58410),nS=n(5079);const rS=(0,Bt.n9)(e=>({root:{alignItems:"center",cursor:"pointer",display:"flex",flexDirection:"column",minWidth:80,padding:e.spacing(.25,.5),position:"relative",scrollMarginTop:"3em"},draggable:{"&:hover":{boxShadow:e.shadows[4]}},selectable:{"&:hover":{backgroundColor:e.palette.action.hover}},selected:{backgroundColor:e.palette.action.selected,"&:hover":{backgroundColor:e.palette.action.selected}},fill:{flexGrow:1,padding:e.spacing(2,0)},stretch:{alignItems:"stretch !important"}})),oS={style:{opacity:0}},aS={style:{backgroundColor:uo.Ay.dropTarget}},iS=({children:e,id:t,onDrop:n,...r})=>{const[o,a]=(0,tS.i)({item:{id:t},type:"uav",collect:e=>e.isDragging()&&oS}),[i,c]=(0,nS.H)({accept:"uav",canDrop:e=>t!==e.id,collect:e=>e.isOver()&&e.canDrop()&&aS,drop:n?e=>{n(e.id)}:void 0}),s=(0,l.useCallback)(e=>{a(e),c(e)},[a,c]);return(0,Rt.jsx)("div",{ref:s,id:$A(t),...r,...o,...i,children:e})},lS=({children:e,className:t,draggable:n,fill:o,onClick:a,onDrop:i,selected:l,stretch:c,uavId:s})=>{const u=rS(),f=(0,r.A)(u.root,t,a&&u.selectable,n&&u.draggable,l&&u.selected,o&&u.fill,c&&u.stretch);return n||i?(0,Rt.jsx)(iS,{className:f,id:s,onClick:a,onDrop:i,children:e}):(0,Rt.jsx)("div",{id:$A(s),className:f,onClick:a,children:e})};var cS=n(87980),sS=n(86965);function uS(e){return uS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uS(e)}var fS=["color","inline","size","style"];function dS(){return dS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dS.apply(null,arguments)}function pS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pS(Object(n),!0).forEach(function(t){yS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=uS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=uS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uS(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gS=(0,Bt.n9)(function(e){return{root:{border:"1px solid rgba(0, 0, 0, 0.3)",borderRadius:"50%",color:"black",height:"1em",minWidth:"1em",marginRight:e.spacing(2),position:"relative",width:"1em"},inline:{display:"inline-block",marginRight:"0px !important",verticalAlign:"sub"},"size-small":{fontSize:"0.75em"},"size-large":{fontSize:"1.25em"}}}),bS=function(e){var t=e.color,n=void 0===t?"#000000":t,o=e.inline,a=e.size,i=void 0===a?"normal":a,c=e.style,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,fS),u=gS();return l.createElement(F.A,dS({className:(0,r.A)(u.root,o&&u.inline,u["size-".concat(i)]),component:o?"span":"div",style:mS({backgroundColor:n},c)},s))};bS.propTypes={color:i().string,inline:i().bool,size:i().oneOf(["small","normal","large"]),style:i().object};const vS=bS;var hS=n(75539),AS=n(75595);const SS=(0,Bt.n9)(e=>({group:{display:"inline-flex",flexDirection:"row",transform:"translateY(1px)"},pill:{verticalAlign:"text-top",transform:"translateY(-1px)"},pillMargin:{margin:e.spacing(0,.5)}})),ES=({className:e,rssi:t})=>{const n=SS();return t.length<2?(0,Rt.jsx)(M.qs,{inline:!0,className:(0,r.A)(e,n.pill,n.pillMargin),status:(0,zl.S2)(t[0]),children:(0,io.XT)(t[0])}):(0,Rt.jsxs)("div",{className:(0,r.A)(e,n.group,n.pillMargin),children:[(0,Rt.jsx)(M.qs,{className:n.pill,position:"left",status:(0,zl.S2)(t[0]),children:(0,io.XT)(t[0])}),(0,Rt.jsx)(M.qs,{className:n.pill,position:"right",status:(0,zl.S2)(t[1]),children:(0,io.XT)(t[1])})]})};var OS=n(35546);function wS(e){return wS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wS(e)}function TS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function CS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=wS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wS(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IS(){return IS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IS.apply(null,arguments)}var xS=io.Vs,jS=(0,Bt.n9)(function(e){return{root:{flexGrow:1,fontFamily:Bt.to,fontSize:"small",fontVariantNumeric:"lining-nums tabular-nums",userSelect:"none",whiteSpace:"pre"},gone:{opacity:.7},muted:{color:e.palette.text.disabled},pill:{margin:e.spacing(0,.5),verticalAlign:"text-top",transform:"translateY(-1px)"},statusPill:{width:80},modePill:{width:48},gpsPill:{width:40,outline:"none !important"},rssiPills:{width:72,paddingLeft:2},batteryIndicator:{display:"inline-block",fontFamily:e.typography.fontFamily,textAlign:"left",padding:e.spacing(0,.5),margin:e.spacing(0,.5),width:"56px !important"}}}),PS=function(e){var t,n,o=e.age,a=e.batteryFormatter,i=e.batteryStatus,c=e.color,s=e.coordinateFormatter,u=e.debugString,f=e.details,d=e.heading,p=e.headingDeviation,m=e.gone,y=e.gpsFixType,g=e.label,b=e.localPosition,v=e.missing,h=e.mode,A=e.position,S=e.rssi,E=e.secondaryLabel,O=e.text,w=e.textSemantics,T=void 0===w?"info":w,C=jS(),I=A||{},x=I.amsl,j=I.ahl,P=I.agl;return l.createElement("div",{className:(0,r.A)(C.root,m&&C.gone)},(0,sS.A)(g,5),l.createElement("span",{className:C.muted},(0,sS.A)(E,5)),(f||O)&&l.createElement(M.qs,{inline:!0,className:(0,r.A)(C.pill,C.statusPill),status:T,hollow:o===hS.O.GONE},f||O),!v&&l.createElement(l.Fragment,null,l.createElement(OS.A,{mode:h,className:(0,r.A)(C.pill,C.modePill)}),l.createElement(yA.A,IS({className:C.batteryIndicator,formatter:a},i)),l.createElement(vS,{inline:!0,color:c}),l.createElement(ES,{className:C.rssiPills,rssi:S}),l.createElement(AS.A,{className:(0,r.A)(C.pill,C.gpsPill),fixType:y}),b?(0,cS.A)(xS(b),25):A?(0,cS.A)(s([A.lon,A.lat]),25):l.createElement("span",{className:C.muted},(0,cS.A)("no position",25)),(0,nt.default)(x)?l.createElement("span",{className:C.muted},"    \u2014\u2014\u2014"):(0,sS.A)(A.amsl.toFixed(1),6)+"m",(0,nt.default)(j)?l.createElement("span",{className:C.muted},"    \u2014\u2014\u2014"):(0,sS.A)(A.ahl.toFixed(1),6)+"m",(0,nt.default)(P)?l.createElement("span",{className:C.muted},"   \u2014\u2014\u2014"):(0,sS.A)(A.agl.toFixed(1),5)+"m",l.createElement(M.E3,{status:(t=p,n=t?Math.abs(t):0,n>=20?"error":n>=10?"warning":void 0)},(0,sS.A)((0,nt.default)(d)?"":Math.round(d)+"\xb0",5)),l.createElement("span",{className:C.debugString},u?" "+u:"")))};PS.propTypes={age:i().oneOf(Object.values(hS.O)),batteryFormatter:i().instanceOf(mA.K),batteryStatus:i().shape({cellCount:i().number,charging:i().bool,voltage:i().number,percentage:i().number}),color:i().string,coordinateFormatter:i().func,debugString:i().string,details:i().string,editing:i().bool,gone:i().bool,gpsFixType:i().number,heading:i().number,headingDeviation:i().number,id:i().string,label:i().string,localPosition:i().arrayOf(i().number),missing:i().bool,mode:i().string,position:i().shape({lat:i().number,lon:i().number,amsl:i().number,ahl:i().number,agl:i().number}),rssi:i().arrayOf(i().number),secondaryLabel:i().string,text:i().string,textSemantics:i().oneOf(["off","info","success","warning","rth","error","critical","missing"])};const kS=(0,u.Ng)(function(){var e=(0,wo.q5)();return function(t,n){var r=n.id,o=(0,wo.Pz)(t,r),a=o?(0,wo.u$)(t,r):0,i=o?(0,wo.OJ)(t,r):"black";return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TS(Object(n),!0).forEach(function(t){CS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({batteryFormatter:(0,un.sk)(t),color:i,coordinateFormatter:(0,To.MH)(t),debugString:o?o.debugString:void 0,gpsFixType:o?o.gpsFix.type:void 0,heading:o?o.heading:void 0,headingDeviation:a,localPosition:o?o.localPosition:void 0,missing:!o,mode:o?o.mode:void 0,position:o?o.position:void 0,rssi:o?o.rssi:void 0},e(t,n.id))}})(PS);var _S=n(63410),NS=n(35309),RS=n(28691),DS=n(49680);const MS=e=>{const{t}=(0,D.Bd)();return(0,Rt.jsx)(M.MW,{status:Bt.nW.NEXT,...e,children:t("mappingEditorToolbar.calculatingMapping")})},LS={overflow:"ellipsis",userSelect:"none",whiteSpace:"nowrap"},FS=()=>{const{t:e}=(0,D.Bd)();return(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(ce.A,{disabled:!0,size:"large",children:(0,Rt.jsx)(NS.A,{})}),(0,Rt.jsx)(F.A,{style:LS,children:e("mappingEditorToolbar.clickToEdit")}),(0,Rt.jsx)(ce.A,{disabled:!0,size:"large",children:(0,Rt.jsx)(RS.A,{})}),(0,Rt.jsx)(F.A,{style:LS,children:e("mappingEditorToolbar.dragNodes")})]})},US=l.forwardRef(({augmentMapping:e,calculating:t,canAugmentMapping:n,clearMapping:r,devMode:o,exportMapping:a,finishMappingEditorSession:i,generateRandomMapping:l,importMapping:c,removeMissingUAVsFromMapping:s,...u},f)=>{const[d,p,m,y]=hc(),{t:g}=(0,D.Bd)();return(0,Rt.jsxs)(kc.A,{ref:f,disableGutters:!0,variant:"dense",...u,children:[t?(0,Rt.jsx)(F.A,{pl:2,children:(0,Rt.jsx)(MS,{size:"small"})}):(0,Rt.jsx)(FS,{}),(0,Rt.jsx)(F.A,{sx:{flex:1}}),(0,Rt.jsx)(ce.A,{size:"large",onClick:i,children:(0,Rt.jsx)(_S.A,{htmlColor:uo.Ay.success})}),(0,Rt.jsx)(ce.A,{size:"large",onClick:p,children:(0,Rt.jsx)(pc.A,{})}),(0,Rt.jsxs)(gc.A,{anchorEl:d,open:null!==d,variant:"menu",onClose:m,children:[(0,Rt.jsx)(ae.A,{disabled:!n,onClick:n?y(e):void 0,children:g("mappingEditorToolbar.assignSpares")}),(0,Rt.jsx)(Xs.A,{}),(0,Rt.jsx)(ae.A,{onClick:y(c),children:g("mappingEditorToolbar.importMapping")}),(0,Rt.jsx)(ae.A,{onClick:y(a),children:g("mappingEditorToolbar.exportMapping")}),(0,Rt.jsx)(Xs.A,{}),o&&(0,Rt.jsx)(ae.A,{onClick:y(l),children:g("mappingEditorToolbar.generateRandomMapping")}),o&&(0,Rt.jsx)(Xs.A,{}),(0,Rt.jsx)(ae.A,{onClick:y(r),children:g("general.action.clear")}),(0,Rt.jsx)(ae.A,{onClick:y(s),children:g("mappingEditorToolbar.clearMissing")})]})]})}),GS=(0,u.Ng)(e=>({canAugmentMapping:(0,Un.xg)(e),calculating:(0,Un.MB)(e),devMode:(0,DS.r2)(e)}),{augmentMapping:Id.Dn,clearMapping:Gn.MH,exportMapping:Id.h9,generateRandomMapping:Id.lY,importMapping:Id.Kt,finishMappingEditorSession:Gn.hH,removeMissingUAVsFromMapping:Id.a6},null,{forwardRef:!0})(US);var VS=n(79844),BS=(0,Bt.n9)(function(e){return{root:{position:"absolute",width:48,height:48,top:e.spacing(.5),zIndex:1e3},input:{position:"absolute",top:"50%",transform:"translateY(-50%)",fontSize:"1.25rem","& input":{textAlign:"center"},"& input::selection":{backgroundColor:new so.A(uo.Ay.info).darken(.2).string()}}}}),zS=function(e){var t=e.cancelMappingEditorSessionAtCurrentSlot,n=e.defaultValue,r=e.commitMappingEditorSessionAtCurrentSlot,o=e.optimizeUIForTouch,a=BS();return l.createElement(F.A,{className:a.root},l.createElement(VS.Ay,{fullWidth:!0,autoFocus:!o,className:a.input,defaultValue:n,onBlur:function(e){r({value:e.target.value})},onFocus:function(e){return e.target.select()},onKeyDown:function(e){return"Enter"===e.key?(r({continuation:e.shiftKey?"prev":"next",value:e.target.value}),e.preventDefault(),!1):"Tab"===e.key?(r({continuation:e.shiftKey?"prevEmpty":"nextEmpty",value:e.target.value}),e.preventDefault(),!1):void("Escape"===e.key&&t())}}))};zS.propTypes={cancelMappingEditorSessionAtCurrentSlot:i().func,defaultValue:i().string,commitMappingEditorSessionAtCurrentSlot:i().func,optimizeUIForTouch:i().bool};const HS=(0,u.Ng)(function(e){return{defaultValue:(0,Un.nU)(e),optimizeUIForTouch:(0,un.jz)(e)}},{cancelMappingEditorSessionAtCurrentSlot:Gn.Wy,commitMappingEditorSessionAtCurrentSlot:Gn.XF})(zS);var WS=(0,Bt.n9)(function(e){return{root:{position:"absolute",boxSizing:"border-box",width:80,left:e.spacing(1),top:-5,bottom:-6,zIndex:1e3,backgroundColor:"rgba(0, 0, 0, 0.16)",border:"1px solid rgba(0, 0, 0, 0.5)",borderRadius:e.spacing(.5),boxShadow:"0 0 4px 2px rgba(0, 0, 0, 0.3)",padding:e.spacing(0,.5)},input:{fontFamily:Bt.to,fontSize:"small",padding:e.spacing(0,.5),position:"absolute",top:"50%",left:0,right:0,transform:"translateY(-50%)","& input":{textAlign:"right"},"& input::selection":{backgroundColor:new so.A(uo.Ay.info).darken(.2).string()}}}}),qS=function(e){var t=e.cancelMappingEditorSessionAtCurrentSlot,n=e.defaultValue,r=e.commitMappingEditorSessionAtCurrentSlot,o=e.optimizeUIForTouch,a=WS();return l.createElement(F.A,{className:a.root},l.createElement(VS.Ay,{fullWidth:!0,autoFocus:!o,className:a.input,defaultValue:n,onBlur:function(e){r({value:e.target.value})},onFocus:function(e){return e.target.select()},onKeyDown:function(e){return"Enter"===e.key?(r({continuation:e.shiftKey?"prev":"next",value:e.target.value}),e.preventDefault(),!1):"Tab"===e.key?(r({continuation:e.shiftKey?"prevEmpty":"nextEmpty",value:e.target.value}),e.preventDefault(),!1):void("Escape"===e.key&&t())}}))};qS.propTypes={cancelMappingEditorSessionAtCurrentSlot:i().func,defaultValue:i().string,commitMappingEditorSessionAtCurrentSlot:i().func,optimizeUIForTouch:i().bool};const KS=(0,u.Ng)(function(e){return{defaultValue:(0,Un.nU)(e),optimizeUIForTouch:(0,un.jz)(e)}},{cancelMappingEditorSessionAtCurrentSlot:Gn.Wy,commitMappingEditorSessionAtCurrentSlot:Gn.XF})(qS);var YS=n(63518),$S=n(43273);const ZS=(0,Bt.n9)(e=>({box:{userSelect:"none",whiteSpace:"nowrap"},divider:{alignSelf:"stretch",height:"auto",margin:e.spacing(1,1)}})),JS=l.forwardRef(({cancelMappingEditorSessionAtCurrentSlot:e,...t},n)=>{const r=ZS();return(0,Rt.jsx)(D.wD,{children:o=>(0,Rt.jsxs)(kc.A,{ref:n,disableGutters:!0,variant:"dense",...t,children:[(0,Rt.jsx)(ce.A,{disabled:!0,size:"large",children:(0,Rt.jsx)($S.A,{})}),(0,Rt.jsxs)(F.A,{className:r.box,children:[(0,Rt.jsx)("kbd",{children:"Enter"})," ",o("general.action.save")]}),(0,Rt.jsx)(Xs.A,{orientation:"vertical",className:r.divider}),(0,Rt.jsxs)(F.A,{className:r.box,children:[(0,Rt.jsx)("kbd",{children:"Tab"})," ",o("mappingSlotEditorToolbar.selectNextEmptySlot")]}),(0,Rt.jsx)(Xs.A,{orientation:"vertical",className:r.divider}),(0,Rt.jsx)(F.A,{className:r.box,children:(0,Rt.jsx)(D.x6,{i18nKey:"mappingSlotEditorToolbar.reverseDirection",components:{kbd:(0,Rt.jsx)("kbd",{})}})}),(0,Rt.jsx)(F.A,{sx:{flex:1}}),(0,Rt.jsx)(ce.A,{size:"large",onClick:e,children:(0,Rt.jsx)(YS.A,{})})]})})}),XS=(0,u.Ng)(null,{cancelMappingEditorSessionAtCurrentSlot:Gn.Wy},null,{forwardRef:!0})(JS);var QS=n(72084),eE=n(89198),tE=n(70385),nE=n(17065),rE=n(85683);const oE=(e,t)=>{const n={cursor:"hand","& .MuiChip-deleteIcon":{color:"inherit"}};if(e){const r=(0,so.A)(e).hsl().lighten(.08).string();n.color=t.palette.getContrastText(e),n.backgroundColor=e,n.boxShadow=`0 0 4px 2px ${e}`,n["&:focus"]={color:t.palette.getContrastText(e),backgroundColor:`${r} !important`},n["&:hover"]={color:t.palette.getContrastText(e),backgroundColor:`${r} !important`},n["& svg"]={color:`${t.palette.getContrastText(e)} '!important'`}}return n},aE=(0,Bt.n9)(e=>({root:{backdropFilter:"blur(5px)",background:(0,Bt.Mw)(e)?"rgba(36, 36, 36, 0.54)":"rgba(255, 255, 255, 0.8)",borderBottom:`1px solid ${e.palette.divider}`,minWidth:800,overflow:"hidden",zIndex:10,minHeight:39},floating:{position:"absolute",top:0,left:0,right:0},widgets:{display:"flex",position:"absolute",right:e.spacing(.5),top:e.spacing(1),margin:"auto",zIndex:20,"& div":{margin:e.spacing(0,0,0,.5)}},headerLine:{alignItems:"stretch",cursor:"default",display:"flex",flexWrap:"nowrap",fontFamily:Bt.to,fontSize:"small",height:38,overflow:"hidden",userSelect:"none",whiteSpace:"pre",width:"100%",zIndex:10},headerLineItem:{lineHeight:"38px",padding:e.spacing(0,.5),flexShrink:0,"&:last-child":{flex:1}},sortable:{cursor:"pointer","&:hover":{backgroundColor:e.palette.action.hover},transition:e.transitions.create(["background-color"],{duration:e.transitions.duration.short})},sortActive:{textDecoration:"underline",textUnderlineOffset:"4px"},success:oE(uo.Ay.success,e),warning:oE(uo.Ay.warning,e),error:oE(uo.Ay.error,e),chip:oE(null,e),chipActive:oE(uo.Ay.info,e)})),iE=Object.freeze([{label:"Status",sortKey:rE.ur.STATUS,style:{textAlign:"center",width:78}},{label:"Mode",sortKey:rE.ur.FLIGHT_MODE,style:{textAlign:"center",width:62}},{label:"Battery",sortKey:rE.ur.BATTERY,style:{textAlign:"right",width:62}},{label:"",style:{textAlign:"center",width:12}},{label:"RSSI",sortKey:rE.ur.RSSI,style:{textAlign:"center",width:82}},{label:"GPS",sortKey:rE.ur.GPS_FIX,style:{textAlign:"center",width:44}},{label:"Position",style:{textAlign:"left",width:200}},{label:"AMSL",sortKey:rE.ur.ALTITUDE_MSL,style:{textAlign:"right",width:58}},{label:"AHL",sortKey:rE.ur.ALTITUDE_HOME,style:{textAlign:"right",width:56}},{label:"AGL",sortKey:rE.ur.ALTITUDE_GROUND,style:{textAlign:"right",width:48}},{label:"Hdg",sortKey:rE.ur.HEADING,style:{textAlign:"center",width:40}},{label:"Details",style:{textAlign:"left"}}]),lE={missionIds:[{label:"sID",sortKey:rE.ur.DEFAULT,style:{textAlign:"right",width:48}},{label:"ID",sortKey:rE.ur.DEFAULT,style:{textAlign:"right",width:40}},...iE],droneIds:[{label:"ID",sortKey:rE.ur.DEFAULT,style:{textAlign:"right",width:48}},{label:"sID",sortKey:rE.ur.DEFAULT,style:{textAlign:"right",width:40}},...iE]},cE=(0,Rt.jsx)(_S.A,{style:{fontSize:"inherit",marginLeft:8}}),sE=(e,t)=>{if(!(Array.isArray(e)&&e.length>0))return t.chip;switch(e[0]){case nE.FA.WITH_WARNINGS:case nE.FA.INACTIVE_ONLY:return t.warning;case nE.FA.WITH_ERRORS:return t.error;default:return t.chipActive}},uE=l.forwardRef(({label:e,selected:t,...n},r)=>(0,Rt.jsx)(ae.A,{ref:r,dense:!0,...n,children:e}));function fE({state:e,ref:t,action:n,popupTrigger:r="chip"}){const o=(0,tE.cO)(e),a=n=>{e.open(t??n)};return o.onContextMenu=o.onClick,"icon"===r?(o.onDelete=a,n&&(o.onClick=n)):o.onDelete=n??a,o}function dE(e,t,n,o){return"string"==typeof e?e:Array.isArray(e)?e.map(({label:e,sortKey:a,style:i})=>(0,Rt.jsx)("div",{className:(0,r.A)(n.headerLineItem,a&&n.sortable,t.key===a&&a!==rE.ur.DEFAULT&&n.sortActive),style:i,onClick:a?()=>{o(a)}:void 0,children:e},e)):""}const pE=(0,u.Ng)(e=>({filters:(0,un.Ap)(e),layout:(0,un.HI)(e),showMissionIds:(0,un.W_)(e),sortBy:(0,un.S6)(e)}),{onSetFilter:L.V$,onSetSortBy:L.aU,onToggleSortDirection:L.W8})((0,D.CI)()(({filters:e,floating:t,layout:n,onSetFilter:o,onSetSortBy:a,onToggleSortDirection:i,showMissionIds:c,sortBy:s,t:u})=>{const f=aE(),d=(0,l.useRef)(),p=(0,tE.T6)({variant:"popover",popupId:"uav-list-sort-options"}),m=(0,l.useRef)(),y=(0,tE.T6)({variant:"popover",popupId:"uav-list-filter-options"}),g=(0,l.useCallback)(e=>{o&&o(e),y.close()},[o,y]),b=(0,l.useCallback)(e=>{a&&a({key:e}),p.close()},[a,p]),v=(0,l.useCallback)(e=>{a&&a({reverse:Boolean(e)}),p.close()},[a,p]),h=(0,l.useCallback)(e=>{s.key===e?i&&i():a&&a({key:e})},[a,i,s]),A=s.key!==rE.ur.DEFAULT,S=Array.isArray(e)&&e.length>0;return(0,Rt.jsxs)("div",{className:(0,r.A)(f.root,t&&f.floating),children:[(0,Rt.jsxs)("div",{className:f.widgets,children:[(0,Rt.jsx)(dp.A,{ref:d,className:A?f.chipActive:f.chip,variant:"outlined",label:rE.WL[s.key](u),size:"small",deleteIcon:s?.reverse?(0,Rt.jsx)(QS.A,{}):(0,Rt.jsx)(Wu.A,{}),...fE({state:p,ref:d.current,action:i})}),(0,Rt.jsxs)(gc.A,{...(0,tE.NA)(p),children:[(0,Rt.jsx)(ae.A,{dense:!0,disabled:!0,children:u("sorting.sortBy")}),rE.T0.map(e=>(0,Rt.jsx)(uE,{label:rE.CR[e](u),selected:s.key===e,onClick:()=>{b(e)}},e)),(0,Rt.jsx)(Xs.A,{style:{margin:"4px 0"}}),(0,Rt.jsxs)(ae.A,{dense:!0,onClick:()=>{v(!1)},children:[u("sorting.ascending"),!s?.reverse&&cE]}),(0,Rt.jsxs)(ae.A,{dense:!0,onClick:()=>{v(!0)},children:[u("sorting.descending"),s?.reverse&&cE]})]}),(0,Rt.jsx)(dp.A,{ref:m,className:sE(e,f),variant:"outlined",label:S?e.length>1?u("filtering.composite"):nE.fp[e[0]](u):u("filtering.filter"),size:"small",deleteIcon:S?void 0:(0,Rt.jsx)(eE.A,{}),...fE({state:y,ref:m.current,action:S?()=>{g(null)}:void 0})}),(0,Rt.jsxs)(gc.A,{...(0,tE.NA)(y),children:[(0,Rt.jsx)(ae.A,{dense:!0,disabled:!0,children:u("filtering.filterBy")}),nE.i7.map(t=>(0,Rt.jsx)(uE,{label:nE.$F[t](u),selected:1===e.length&&e[0]===t||t===nE.FA.DEFAULT&&0===e.length,onClick:()=>{g(t)}},t))]})]}),(0,Rt.jsx)(lf,{in:n===YA.vl.LIST,children:(0,Rt.jsx)("div",{className:f.headerLine,children:dE(c?lE.missionIds:lE.droneIds,s,f,h)})})]})}));var mE=n(56036),yE=n(49264),gE=n(17737),bE=n(98261),vE=n(54192),hE=n(35246),AE=n(2442),SE=n(39206),EE=n(1229),OE=n(80415);function wE(e){return wE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wE(e)}function TE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function CE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TE(Object(n),!0).forEach(function(t){IE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function IE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=wE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wE(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jE(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jE(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var PE=function(e){var t=e.broadcast,n=e.dispatch,r=e.hideSeparators,o=e.openUAVDetailsDialog,a=e.requestRemovalOfUAVsByIds,i=e.requestRemovalOfUAVsMarkedAsGone,c=e.selectedUAVIds,s=e.size,u=e.startSeparator,f=e.t,d=(0,jd.A)(c)&&!t,p=1===c.length&&!t,m=(0,bc.zH)((0,hg.xM)({getTargetedUAVIds:function(e){return t?(0,wo.Ev)(e):c},getTransportOptions:function(e){var n={channel:(0,Un.$D)(e)};return t&&(n.broadcast=!0,n.ignoreIds=!0),n}}),n),y=m.calibrateCompass,g=m.flashLight,b=m.holdPosition,v=m.land,h=m.reset,A=m.returnToHome,S=m.shutdown,E=m.sleep,O=m.takeOff,w=m.turnMotorsOff,T=m.turnMotorsOn,C=m.wakeUp,I=xE((0,l.useState)(!1),2),x=I[0],j=I[1],P=(0,l.useCallback)(function(e){x?j(!1):e.shiftKey?(j(!0),g()):g()},[g,x,j]);(0,Xb.A)(g,x?1e3*SE.l:null);var k="small"===s?"small":"medium",_=s,N="small"===s?l.createElement(B.A,{startIcon:l.createElement(AE.A,{color:x?"primary":void 0}),disabled:d,size:_,onClick:P},f("UAVOpButtonGrp.flashLights")):l.createElement(vc.W1,{content:f("UAVOpButtonGrp.flashLights")},l.createElement(ce.A,{disabled:d,size:_,onClick:P},l.createElement(AE.A,{fontSize:k,color:x?"primary":void 0})));return l.createElement(l.Fragment,null,!r&&u&&l.createElement(Wd.A,{orientation:"vertical"}),l.createElement(vc.W1,{content:f("general.commands.takeoff")},l.createElement(ce.A,{disabled:d,size:_,onClick:O},l.createElement(vE.A,{fontSize:k}))),l.createElement(vc.W1,{content:f("general.commands.positionHold")},l.createElement(ce.A,{disabled:d,size:_,onClick:b},l.createElement(yg.A,{fontSize:k}))),l.createElement(vc.W1,{content:f("general.commands.returnToHome")},l.createElement(ce.A,{disabled:d,size:_,onClick:A},l.createElement(bg.A,{fontSize:k}))),l.createElement(vc.W1,{content:f("general.commands.land")},l.createElement(ce.A,{disabled:d,size:_,onClick:v},l.createElement(gg.A,{fontSize:k}))),!r&&l.createElement(Wd.A,{orientation:"vertical"}),"small"!==s&&l.createElement(l.Fragment,null,l.createElement(vc.W1,{content:f("UAVOpButtonGrp.details")},l.createElement(ce.A,{disabled:!p,size:_,onClick:function(){return o(c[0])}},l.createElement(gE.A,null))),N,l.createElement(vc.W1,{content:f("general.commands.calibrateCompass")},l.createElement(ce.A,{size:_,disabled:0===c.length||c.length>zh.sH,onClick:function(){return y()}},l.createElement(bE.A,null)))),!r&&l.createElement(Wd.A,{orientation:"vertical"}),l.createElement(vc.W1,{content:f("UAVOpButtonGrp.armMotors")},l.createElement(ce.A,{disabled:d,size:_,onClick:T},l.createElement(wl.A,{fontSize:k,htmlColor:d?void 0:uo.Ay.warning}))),l.createElement(vc.W1,{content:f("UAVOpButtonGrp.disarmMotors")},l.createElement(ce.A,{disabled:d,size:_,onClick:w},l.createElement(le.A,{fontSize:k,htmlColor:d?void 0:uo.Ay.warning}))),"small"===s&&N,!r&&l.createElement(Wd.A,{orientation:"vertical"}),l.createElement(vc.W1,{content:f("general.commands.powerOn")},l.createElement(ce.A,{disabled:d,size:_,onClick:C},l.createElement(OE.A,{htmlColor:d?void 0:uo.Ay.success,fontSize:k}))),l.createElement(vc.W1,{content:f("general.commands.sleep")},l.createElement(ce.A,{disabled:d,size:_,onClick:E},l.createElement(hE.A,{htmlColor:d?void 0:uo.Ay.warning,fontSize:k}))),l.createElement(vc.W1,{content:f("general.commands.reboot")},l.createElement(ce.A,{disabled:d,size:_,onClick:h},l.createElement(Mg.A,{htmlColor:d?void 0:uo.Ay.error,fontSize:k}))),l.createElement(vc.W1,{content:f("general.commands.powerOff")},l.createElement(ce.A,{disabled:d,size:_,onClick:S},l.createElement(vg.A,{htmlColor:d?void 0:uo.Ay.error,fontSize:k}))),"small"!==s&&l.createElement(l.Fragment,null,!r&&l.createElement(Wd.A,{orientation:"vertical"}),l.createElement(vc.W1,{content:f(d?"UAVOpButtonGrp.removeItemsMarkedGone":"UAVOpButtonGrp.removeSelectedItems")},l.createElement(ce.A,{size:_,onClick:function(){return d?i():a(c)}},l.createElement(fc.A,null)))))};PE.propTypes={broadcast:i().bool,dispatch:i().func,openUAVDetailsDialog:i().func,requestRemovalOfUAVsByIds:i().func,requestRemovalOfUAVsMarkedAsGone:i().func,selectedUAVIds:i().arrayOf(i().string),hideSeparators:i().bool,size:i().oneOf(["small","medium"]),startSeparator:i().bool,t:i().func};const kE=(0,u.Ng)(function(){return{}},function(e){return CE(CE({},(0,bc.zH)({openUAVDetailsDialog:EE.Te,requestRemovalOfUAVsMarkedAsGone:uv.Ph,requestRemovalOfUAVsByIds:uv.Bt},e)),{},{dispatch:e})})((0,D.CI)()(PE));var _E=n(86689),NE=n(62369),RE=n(78377);const DE=(0,Xn.A)((0,Rt.jsx)("path",{d:"m15.1 19.37 1 1.74c-.96.44-2.01.73-3.1.84v-2.02c.74-.09 1.44-.28 2.1-.56zM4.07 13H2.05c.11 1.1.4 2.14.84 3.1l1.74-1c-.28-.66-.47-1.36-.56-2.1zM15.1 4.63l1-1.74c-.96-.44-2-.73-3.1-.84v2.02c.74.09 1.44.28 2.1.56zM19.93 11h2.02c-.11-1.1-.4-2.14-.84-3.1l-1.74 1c.28.66.47 1.36.56 2.1zM8.9 19.37l-1 1.74c.96.44 2.01.73 3.1.84v-2.02c-.74-.09-1.44-.28-2.1-.56zM11 4.07V2.05c-1.1.11-2.14.4-3.1.84l1 1.74c.66-.28 1.36-.47 2.1-.56zm7.36 3.1 1.74-1.01c-.63-.87-1.4-1.64-2.27-2.27l-1.01 1.74c.59.45 1.1.96 1.54 1.54zM4.63 8.9l-1.74-1c-.44.96-.73 2-.84 3.1h2.02c.09-.74.28-1.44.56-2.1zm15.3 4.1c-.09.74-.28 1.44-.56 2.1l1.74 1c.44-.96.73-2.01.84-3.1h-2.02zm-3.1 5.36 1.01 1.74c.87-.63 1.64-1.4 2.27-2.27l-1.74-1.01c-.45.59-.96 1.1-1.54 1.54zM7.17 5.64l-1-1.75c-.88.64-1.64 1.4-2.27 2.28l1.74 1.01c.44-.59.95-1.1 1.53-1.54zM5.64 16.83l-1.74 1c.63.87 1.4 1.64 2.27 2.27l1.01-1.74c-.59-.44-1.1-.95-1.54-1.53z"}),"MissingSlot");var ME=function(e){var t=e.layout,n=e.mappingEditable,r=e.onToggleShowingEmptyMissionSlots,o=e.setUAVListLayout,a=e.showEmptyMissionSlots,i=e.showMissionIds,c=e.startMappingEditorSession,s=e.t;return l.createElement(l.Fragment,null,i&&l.createElement(vc.W1,{content:s("mappingButtonGroup.editMapping")},l.createElement(ce.A,{disabled:n||!i,size:"large",onClick:c},l.createElement(pa.A,null))),l.createElement(My,null),l.createElement(vc.W1,{content:s(a?"mappingButtonGroup.hideEmptyMissionSlots":"mappingButtonGroup.showEmptyMissionSlots")},l.createElement(yp,{value:"showMissing",disabled:!i,selected:a,onClick:r},l.createElement(DE,null))),l.createElement(Wd.A,{orientation:"vertical"}),l.createElement(RE.A,{exclusive:!0,value:t,onChange:o},l.createElement(yp,{size:"small",value:"grid"},l.createElement(NE.A,null)),l.createElement(yp,{size:"small",value:"list"},l.createElement(_E.A,null))))};ME.propTypes={layout:i().oneOf(["grid","list"]),mappingEditable:i().bool,onToggleShowingEmptyMissionSlots:i().func,setUAVListLayout:i().func,showEmptyMissionSlots:i().bool,showMissionIds:i().bool,startMappingEditorSession:i().func,t:i().func};const LE=(0,u.Ng)(function(e){return{layout:(0,un.HI)(e),mappingEditable:(0,Un.Dj)(e),showEmptyMissionSlots:(0,un.Mq)(e),showMissionIds:(0,un.W_)(e)}},{clearMapping:Gn.MH,onToggleShowingEmptyMissionSlots:function(){return function(e,t){var n=(0,un.Mq)(t());e((0,K.uV)("display",{hideEmptyMissionSlots:n}))}},startMappingEditorSession:Gn.OX,setUAVListLayout:function(e,t){return function(e){t&&e((0,K.uV)("display",{uavListLayout:t}))}}})((0,D.CI)()(ME)),FE=l.forwardRef(({fitSelectedUAVs:e,isBroadcast:t,selectedUAVIds:n,...r},o)=>{const a=(0,jd.A)(n),{t:i}=(0,D.Bd)();return(0,Rt.jsxs)(kc.A,{ref:o,disableGutters:!0,variant:"dense",...r,children:[(0,Rt.jsx)(F.A,{sx:{width:"4px"}}),(0,Rt.jsx)(kE,{broadcast:t,selectedUAVIds:n}),(0,Rt.jsx)(F.A,{sx:{flex:1}}),e&&(0,Rt.jsx)(vc.W1,{content:i(a?"uavToolbar.fitAllFeaturesIntoView":"uavToolbar.fitSelectionIntoView"),children:(0,Rt.jsx)(ce.A,{style:{float:"right"},size:"large",onClick:e,children:a?(0,Rt.jsx)(yE.A,{}):(0,Rt.jsx)(mE.A,{})})}),(0,Rt.jsx)(LE,{})]})}),UE=(0,u.Ng)(e=>({isBroadcast:(0,DS.Si)(e),selectedUAVIds:(0,wo.YZ)(e)}),{})(FE);var GE=n(63614),VE=n.n(GE);function BE(){return!0}const zE=VE()(e=>{const t=(0,nE.wA)(e);return t?e=>n=>t(e[n[0]]):()=>BE}),HE=VE()(e=>{const t=(0,rE.az)(e);return t?e=>n=>t(e[n[0]]):()=>wi.default});var WE=n(34098);const qE=e=>{const{key:t}=(0,un.S6)(e),n=(0,un.Ap)(e);return t===rE.ur.DEFAULT&&0===n.length?null:(0,wo.gd)(e)},KE=(0,rt.Mz)(Un.VZ,Un.Dj,wo.Ev,un.Mq,(e,t,n,r)=>{const o=[],a=new Set;for(const[n,i]of e.entries())(0,nt.default)(i)?(r||t)&&o.push([void 0,n]):(o.push([i,n]),a.add(i));for(const e of n)a.has(e)||o.push([e,void 0]);return o}),YE=(0,rt.Mz)(wo.Ev,Un.Ps,(e,t)=>e.map(e=>[e,t[e]])),$E=(0,rt.Mz)(un.Ap,un.S6,e=>(0,un.W_)(e)?KE(e):YE(e),qE,function(e,t,n,r){const o=function(e,t,n){if(0===e.length)return t;for(const r of e){const e=zE(r)(n);t=t.filter(e)}return t}(e,n,r);return function(e,t,n){const{key:r,reverse:o}=e||{};if(n){const e=HE(r);return(0,ao.M)(t,[e(n)],[o?"desc":"asc"])}return o?t.concat().reverse():t}(t,o,r)}),ZE=(0,rt.Mz)($E,e=>e.map(ZA).filter(Boolean)),JE=(0,rt.Mz)(Un.VZ,Un.Dj,wo.Ev,un.Mq,(e,t,n,r)=>{const o=[],a=[],i=[],l=new Set;for(const[n,a]of e.entries())(0,nt.default)(a)?(r||t)&&o.push([void 0,n]):(o.push([a,n]),l.add(a));for(const e of n)l.has(e)||a.push([e,void 0]);return i.push({id:"assigned",type:KA.ASSIGNED,items:o}),(a.length>0||t)&&i.push({id:"spare",type:KA.SPARE,items:a}),i}),XE=(0,rt.Mz)(YE,e=>[{id:"all",type:KA.ALL,items:e}]),QE=(0,rt.Mz)(un.Ap,un.S6,e=>(0,un.W_)(e)?JE(e):XE(e),qE,function(e,t,n,r){const o=function(e,t,n){if(0===e.length)return t;for(const r of e){const e=zE(r)(n);t=t.map(t=>({...t,items:t.items.filter(e)}))}return t}(e,n,r);return function(e,t,n){const{key:r,reverse:o}=e||{};if(n){const e=HE(r);return t.map(t=>({...t,items:(0,ao.M)(t.items,[e(n)],[o?"desc":"asc"])}))}return o?t.map(e=>({...e,items:e.items.concat().reverse()})):t}(t,o,r)}),eO=((0,rt.Mz)(QE,e=>e.map(e=>e.items.map(e=>ZA(e)).filter(Boolean))),(0,rt.Mz)(QE,e=>e.map(e=>{const t=[];for(const[n]of e.items)(0,nt.default)(n)||t.push(n);return t}))),tO=((0,rt.Mz)(eO,WE.A),(0,rt.Mz)(eO,wo.YZ,(e,t)=>e.map(e=>{const n=e=>t.includes(e);if(e.length>0){if(n(e[0])){const t=e.every(n);return{checked:t,indeterminate:!t,disabled:!1}}return{checked:!1,indeterminate:e.some(n),disabled:!1}}return{checked:!1,indeterminate:!1,disabled:!0}})),(0,Bt.n9)({grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 80px)",gridTemplateRows:100,gridAutoRows:100},gridItem:{},list:{alignItems:"stretch",fontSize:"12px"}})),nO=()=>(0,Rt.jsx)(F.A,{sx:{height:38}}),rO=l.forwardRef((e,t)=>{const{items:n,itemRenderer:r,layout:o,...a}=e,i=tO();return o===YA.vl.GRID?(0,Rt.jsx)(Ku.sN,{ref:t,components:{Header:nO},itemClassName:i.gridItem,itemContent:e=>r(n[e]),listClassName:i.grid,totalCount:n.length,...a}):(0,Rt.jsx)(Ku.aY,{ref:t,className:i.list,components:{Header:nO},itemContent:e=>r(n[e]),totalCount:n.length,...a})}),oO=(0,u.Ng)(e=>({items:$E(e)}),{},null,{forwardRef:!0})(rO);var aO;!function(e){e.UP="up",e.DOWN="down",e.LEFT="left",e.RIGHT="right",e.PREVIOUS_PAGE="previousPage",e.NEXT_PAGE="nextPage"}(aO||(aO={}));const iO=e=>{const t=document.querySelector(`#${e}`),{width:n}=t?.getBoundingClientRect()??{};return"number"==typeof n&&n>0?Math.max(1,Math.floor(n/80)):1},lO=e=>(t,n)=>{if((0,un.bR)(t)===YA.Lk.VERTICAL)switch(n){case aO.DOWN:return 1;case aO.UP:return-1;case aO.NEXT_PAGE:return 10;case aO.PREVIOUS_PAGE:return-10;default:return 0}else switch(n){case aO.LEFT:return-1;case aO.RIGHT:return 1;case aO.UP:case aO.PREVIOUS_PAGE:return-iO(e);case aO.DOWN:case aO.NEXT_PAGE:return iO(e);default:return 0}};function cO(e){const t=(0,gl.Xc)(e);if(t)return(0,EE.Te)(t)}function sO(e,t,n){return function({dispatch:e,activateId:t,activateIds:n,getNavigationDeltaInDirection:r,getVisibleIds:o,getSelectedIds:a,onItemFocused:i,setSelectedIds:l}){const c=(e,t,n,r)=>{const c=r(),s=o(c);if(0===s.length)return;const u=a(c);let f=-1,d=0;if(u.length>0){const e=u.map(e=>s.indexOf(e)).filter(e=>e>=0);f=t<0?Math.min(s.length-1,...e):Math.max(0,...e)}d=Number.isFinite(t)?f+t:t<0?0:s.length-1,d=Math.max(0,Math.min(s.length-1,d));const p=(e,t)=>s.slice(Math.min(Math.max(0,e),t),Math.max(e,t+1)).filter(e=>void 0!==e),m=s[d],y=(0,nt.default)(m)?u:e.shiftKey?u.includes(m)?u.length>0?null:p(f,d):Array.from(new Set([...u,...p(f,d)])):[m];if(i&&!(0,nt.default)(m)){const e=i(m,d);"string"==typeof e&&XA(e)}null!==y&&n(l(y))},s=e=>t=>(n,r)=>{c(t,e,n,r)},u=e=>t=>(n,o)=>{t.preventDefault();const a=o(),i=r(a,e);0!==i&&c(t,i,n,o)};return(0,bc.zH)({ACTIVATE_SELECTION:()=>(e,r)=>{if(!t&&!n)return;const o=r(),i=a(o);if(i&&i.length>0){const r=n?n(i):t(i.at(-1));r&&e(r)}},PAGE_DOWN:u(aO.NEXT_PAGE),PAGE_UP:u(aO.PREVIOUS_PAGE),SELECT_FIRST:s(Number.NEGATIVE_INFINITY),SELECT_LAST:s(Number.POSITIVE_INFINITY),SELECT_DOWN:u(aO.DOWN),SELECT_UP:u(aO.UP),SELECT_LEFT:u(aO.LEFT),SELECT_RIGHT:u(aO.RIGHT)},e)}({dispatch:e,activateId:cO,getNavigationDeltaInDirection:lO(t),getVisibleIds:ZE,getSelectedIds:JA,onItemFocused(e,t){n(t)},setSelectedIds:yl.td})}const uO=(0,Bt.n9)(e=>({appBar:{backgroundColor:(0,Bt.Mw)(e)?"#424242":e.palette.background.paper,height:48},toolbar:{position:"absolute",gap:e.spacing(.75),left:0,right:0,top:0},gridItem:{padding:e.spacing(1),height:"100%"},listItem:{borderBottom:`1px solid ${e.palette.divider}`}})),fO=[void 0,void 0,(0,Rt.jsx)(fc.A,{},"__delete")],dO=(0,u.Ng)(e=>({editingMapping:(0,Un.Dj)(e),mappingSlotBeingEdited:(0,Un.Gw)(e),layout:(0,un.HI)(e),selection:(0,Rp.Lo)(e),showMissionIds:(0,un.W_)(e)}),()=>{const e=`__keyboardNav-${(0,VA.Ak)()}`;return t=>({containerDOMNodeId:e,dispatch:t,...(0,bc.zH)({onEditMappingSlot:Gn.re,onMappingAdjusted:Gn.su,onSelectItem:(0,ml.p_)({activateItem:cO,getSelection:JA,setSelection:yl.td,getListItems:ZE})},t)})})(({containerDOMNodeId:e,dispatch:t,editingMapping:n,layout:r,mappingSlotBeingEdited:o,onEditMappingSlot:a,onMappingAdjusted:i,onSelectItem:c,selection:s,showMissionIds:f})=>{const d=uO(),p=(0,u.Pj)(),m=(0,l.useCallback)(e=>{const t=$E(p.getState());for(const[n,r]of t.entries())if(r[0]===e)return n;return-1},[p]),y=(0,l.useRef)(()=>!1),g=(0,l.useMemo)(()=>({id:eS.UAV_LIST,getIndexOfItem:m,scrollToIndex:e=>y.current(e)}),[m]);(0,l.useEffect)(()=>{return QA[(e=g).id],QA[e.id]=e,()=>{delete QA[e.id]};var e},[g]);!function(e){const t=(0,l.useCallback)((t,n)=>{const r=e[t];r&&r(n)},[e]);Bh(qA,t)}((0,l.useMemo)(()=>sO(t,e,e=>{y.current(e)}),[t,e]));const b=(0,l.useCallback)(e=>t=>{i({uavId:t,to:(0,nt.default)(e)?null:e})},[i]),v={className:r===YA.vl.GRID?d.gridItem:d.listItem,draggable:n,isInEditMode:n,mappingSlotBeingEdited:o,onDropped:n?b:void 0,onSelectedItem:c,onStartEditing:a,selection:s,showMissionIds:f},h=r===YA.vl.GRID?(({className:e,draggable:t,isInEditMode:n,mappingSlotBeingEdited:r,onDropped:o,onSelectedItem:a,onStartEditing:i,selection:l,showMissionIds:c})=>s=>{const[u,f,d]=s,p=ZA(s),m=void 0!==r&&f===r,y=l.includes(p),g={onClick:n?i.bind(null,f):p?a.bind(null,p):void 0,onDrop:o?o(f):void 0,fill:s===fO,selected:y},b=d??(c?void 0===f||n&&void 0!==u?u:(0,io.J8)(f):u),v=u??`placeholder-${String(b)||"null"}`;return void 0===u?(0,Rt.jsxs)(lS,{className:e,onDrop:o?o(f):void 0,...g,children:[m&&(0,Rt.jsx)(HS,{}),(0,Rt.jsx)(yo,{editing:m,label:m?"":b,status:void 0===f?"error":"off"})]},v):(0,Rt.jsxs)(lS,{className:e,draggable:t,uavId:u,...g,children:[m&&(0,Rt.jsx)(HS,{}),(0,Rt.jsx)(xA,{id:u,editing:m,label:m?"":b,selected:y})]},v)})(v):(({className:e,isInEditMode:t,mappingSlotBeingEdited:n,onDropped:r,onSelectedItem:o,onStartEditing:a,selection:i,showMissionIds:l})=>c=>{if(c===fO)return null;const[s,u,f]=c,d=ZA(c),p=t&&u===n,m=i.includes(d),y={className:e,onClick:t?a.bind(null,u):d?o.bind(null,d):void 0,onDrop:r?r(u):void 0,selected:t?p:m},g=void 0!==u?(0,io.J8)(u):"",b=f??(l?g:s),v=p?"":l?s:g,h=s??`placeholder-${String(b)||"null"}`;return(0,Rt.jsxs)(lS,{stretch:!0,uavId:s,...y,children:[p&&(0,Rt.jsx)(KS,{}),(0,Rt.jsx)(kS,{id:s,label:String(b),secondaryLabel:v})]},h)})(v);return(0,Rt.jsx)(BA.Q,{backend:zA.t2,children:(0,Rt.jsxs)(F.A,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,Rt.jsxs)(aA.A,{color:"default",position:"static",className:d.appBar,children:[(0,Rt.jsx)(lf,{mountOnEnter:!0,unmountOnExit:!0,in:!n,children:(0,Rt.jsx)(UE,{className:d.toolbar})}),(0,Rt.jsx)(lf,{mountOnEnter:!0,unmountOnExit:!0,in:n&&o<0,children:(0,Rt.jsx)(GS,{className:d.toolbar})}),(0,Rt.jsx)(lf,{mountOnEnter:!0,unmountOnExit:!0,in:n&&o>=0,children:(0,Rt.jsx)(XS,{className:d.toolbar})})]}),(0,Rt.jsxs)(F.A,{sx:{flex:1,position:"relative"},children:[(0,Rt.jsx)(pE,{floating:!0}),(0,Rt.jsx)(oO,{ref:e=>{y.current=(({functions:e,headerHeight:t=0})=>{const n=(({headerHeight:e=0})=>(e<0&&(e=0),({itemBottom:t,itemTop:n,viewportBottom:r,viewportTop:o,locationParams:a})=>{if(n<o+e){const{align:t,...n}=a;return{...n,align:t??"start",offset:t?0:-e}}if(t>r){const{align:e,...t}=a;return{...t,align:e??"end"}}return null}))({headerHeight:t});return t=>!(!e||(e.scrollIntoView?(e.scrollIntoView({index:t,calculateViewLocation:n}),0):!e.scrollToIndex||(e.scrollToIndex({index:t,align:"center"}),0)))})({functions:e,headerHeight:38})},id:e,itemRenderer:h,layout:r})]}),n&&r===YA.vl.GRID?(0,Rt.jsx)(F.A,{className:"bottom-bar",children:(0,Rt.jsx)(F.A,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:h(fO)})}):null]})})}),pO=dO;var mO=n(92454),yO=n(65666),gO=n(40936),bO=n(12551),vO=["onChange","value"];var hO=function(e){var t=e.onChange,n=e.value;!function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}(e,vO);return l.createElement(yp,{value:"dark",selected:n,onChange:t},l.createElement(bO.A,null))};hO.propTypes={onChange:i().func,value:i().bool};const AO=hO;var SO=n(36345),EO=(n(41795),n(27232)),OO=l.createRef();function wO(){for(var e=OO.current;e&&e.nodeName&&"a-scene"!==e.nodeName.toLowerCase();)e=e.parentNode;if(e&&e.nodeName&&"a-scene"===e.nodeName.toLowerCase())return e}var TO=n(30439);function CO(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return IO(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?IO(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function IO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var xO=EO.Ay.THREE,jO=n(96458),PO=n(60011),kO=function(e){var t=e.mode,n=e.onChange,r=e.onResetZoom,o=e.onRotateCameraTowardsDrones,a=e.t;return l.createElement(l.Fragment,null,l.createElement(RE.A,{size:"small"},l.createElement(yp,{selected:"walk"===t,value:"walk",onClick:function(){return n("walk")}},a("navigationButtonGroup.walk")),l.createElement(yp,{selected:"fly"===t,value:"fly",onClick:function(){return n("fly")}},a("navigationButtonGroup.fly"))),l.createElement(Wd.A,{orientation:"vertical"}),l.createElement(M.m_,{content:a("navigationButtonGroup.resetZoom")},l.createElement(ce.A,{disableRipple:!0,disabled:!r,size:"large",onClick:r},l.createElement(PO.A,null))),l.createElement(M.m_,{content:a("navigationButtonGroup.rotateCamera")},l.createElement(ce.A,{disableRipple:!0,disabled:!o,size:"large",onClick:o},l.createElement(jO.A,null))))};kO.propTypes={mode:i().oneOf(["walk","fly"]),onChange:i().func,onResetZoom:i().func,onRotateCameraTowardsDrones:i().func,t:i().func};const _O=(0,D.CI)()(kO);var NO=n(22618);function RO(e){return RO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RO(e)}function DO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function MO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DO(Object(n),!0).forEach(function(t){LO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function LO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=RO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=RO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var FO={display:"inline-block",transform:"translateY(1px)"},UO={whiteSpace:"nowrap"},GO={walk:l.createElement(D.wD,null,function(e){return l.createElement("div",{style:UO},l.createElement("div",{style:FO},l.createElement("kbd",null,e("navigationInstructions.arrows")),l.createElement("span",null," ",e("navigationInstructions.walkAround")," "),l.createElement("kbd",null,"E"),l.createElement("kbd",null,"C"),l.createElement("span",null," ",e("navigationInstructions.altitude")," "),l.createElement("kbd",null,"Shift"),l.createElement("span",null," ",e("navigationInstructions.run")," ")),l.createElement(ce.A,{disabled:!0,size:"large"},l.createElement(NS.A,null)),l.createElement("div",{style:MO(MO({},FO),{},{marginLeft:-8})},e("navigationInstructions.lookAround")))}),fly:l.createElement(D.wD,null,function(e){return l.createElement("div",{style:UO},l.createElement("div",{style:FO},l.createElement("kbd",null,"\u2191"),l.createElement("kbd",null,"\u2193"),l.createElement("span",null," ",e("navigationInstructions.flyForwardBackward")," "),l.createElement("kbd",null,"\u2190"),l.createElement("kbd",null,"\u2192"),l.createElement("span",null," ",e("navigationInstructions.moveSideways")," "),l.createElement("kbd",null,"E"),l.createElement("kbd",null,"C"),l.createElement("span",null," ",e("navigationInstructions.altitude")," ")),l.createElement(ce.A,{disabled:!0,size:"large"},l.createElement(NS.A,null)),l.createElement("div",{style:MO(MO({},FO),{},{marginLeft:-8})},e("navigationInstructions.lookAround")))})},VO=function(e){var t=e.mode,n=e.t;return l.createElement(F.A,{sx:{mx:1,flex:1,alignSelf:"stretch",position:"relative"}},l.createElement(NO.A,null,l.createElement(lf,{key:t},l.createElement(F.A,{sx:{position:"absolute",left:0,top:0,bottom:0,display:"flex",flexDirection:"column",justifyContent:"center"}},GO[t]||n("navigationInstructions.noInstruction")))))};VO.propTypes={mode:i().oneOf(["walk","fly"]),t:i().func};const BO=(0,D.CI)()(VO);var zO=["children"];function HO(){return HO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HO.apply(null,arguments)}function WO(e){return function(e){if(Array.isArray(e))return qO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return qO(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qO(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var KO=function(e){var t=e.children,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,zO);return l.createElement(F.A,HO({},n,{sx:[{position:"absolute",zIndex:1}].concat(WO(Array.isArray(n.sx)?n.sx:[n.sx]))}),t)};KO.propTypes={children:i().oneOfType([i().node,i().arrayOf(i().node)])};const YO=KO;function $O(e){return $O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$O(e)}function ZO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function JO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZO(Object(n),!0).forEach(function(t){XO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function XO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=$O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var QO=(0,ji.Ay)(function(){return Promise.all([n.e(336),n.e(70)]).then(n.bind(n,29632))}),ew=(0,Bt.n9)(function(e){return{appBar:{backgroundColor:(0,Bt.Mw)(e)?"#424242":e.palette.background.paper,height:48},toolbar:{position:"absolute",left:e.spacing(1),right:e.spacing(1),top:0}}}),tw=function(e){var t=e.hasMapCoordinateSystem,n=e.lighting,r=e.navigation,o=e.onResetZoom,a=e.onRotateCameraTowardsDrones,i=e.onSetNavigationMode,c=e.onShowSettings,s=e.onToggleLightingConditions,u=ew(),f=(0,l.useRef)(null),d=(0,gO.A)({onResize:function(){f.current&&f.current.resize()}}).ref;return l.createElement(yO.IgnoreKeys,{style:{height:"100%"}},l.createElement(F.A,{sx:{display:"flex",flexDirection:"column",height:"100%"}},l.createElement(aA.A,{color:"default",position:"static",className:u.appBar},l.createElement(kc.A,{disableGutters:!0,variant:"dense",className:u.toolbar},l.createElement(_O,{mode:r.mode,parameters:r.parameters,onChange:i,onResetZoom:o,onRotateCameraTowardsDrones:a}),l.createElement(Wd.A,{orientation:"vertical"}),l.createElement(BO,{mode:r.mode}),l.createElement(AO,{value:"dark"===n,onChange:s}))),l.createElement(F.A,{ref:d,sx:{position:"relative",flex:1}},l.createElement(SO.A,null,l.createElement(QO,{ref:f,cameraRef:OO})),!t&&l.createElement(YO,{left:8,right:8,top:8},l.createElement(qb.A,{severity:"warning",action:l.createElement(ce.A,{color:"inherit",size:"small",onClick:c},l.createElement(Ul.A,null))},l.createElement(mO.A,null,"No map coordinate system specified"),l.createElement("div",null,"Drones will become visible when a coordinate system is specified in the ",l.createElement("strong",null,"Settings")," dialog."))))))};tw.propTypes={hasMapCoordinateSystem:i().bool,lighting:i().string,navigation:i().shape({mode:i().string,parameters:i().object}),onResetZoom:i().func,onRotateCameraTowardsDrones:i().func,onSetNavigationMode:i().func,onShowSettings:i().func,onToggleLightingConditions:i().func};const nw={BeaconList:Ol,ClockDisplayList:Ll,ConnectionList:Ql,DatasetList:rc,DockList:uc,FeaturePanel:Jc,LayerList:rs,LCDClockPanel:Js,LightControlPanel:hu,LogPanel:Of,MessagesPanelView:Cd,MissionOverviewPanel:Op,SavedLocationList:Bu,ShowControlPanel:Iv,UAVDetailsPanel:GA,UAVList:pO,ThreeDTopLevelView:(0,u.Ng)(function(e){return JO(JO({hasMapCoordinateSystem:(0,He.Qr)(e)},e.threeD),{},{lighting:(0,un.bV)(e)})},{onResetZoom:TO.hp,onRotateCameraTowardsDrones:function(){return function(e,t){var n=t(),r=(0,wo.T4)(n);if(0!==r.length){var o,a=(o=wO())?o.querySelector("a-drone-flock"):void 0,i=null==a?void 0:a.components["drone-flock"];if(i){var l,c=new xO.Vector3,s=0,u=CO(r);try{for(u.s();!(l=u.n()).done;){var f=l.value,d=i.getEntityForUAVById(f),p=null==d?void 0:d.getAttribute("position");p&&(c.add(p),s+=1)}}catch(e){u.e(e)}finally{u.f()}s>0&&(c.divideScalar(s),e((0,TO.vb)(c.toArray())))}}else e((0,Ci.Qg)("No active UAVs to focus the view on."))}},onSetNavigationMode:TO.Em,onShowSettings:function(){return function(e){e((0,L.sO)("display")),e((0,L.iD)())}},onToggleLightingConditions:K.DB})(tw)};function rw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ow(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ow(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ow(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var aw=(0,ji.Ay)(function(){return Promise.all([n.e(788),n.e(497)]).then(n.bind(n,89455))}),iw=(0,ji.Ay)(function(){return n.e(163).then(n.bind(n,91027))});n(20987);var lw=function(){return l.createElement(M.qq,{text:"This component is not available in this version"})},cw={"beacon-list":{component:nw.BeaconList,label:"Beacons",detachable:!0,feature:"beacons"},"connection-list":{component:nw.ConnectionList,label:"Connections"},"dataset-list":{component:nw.DatasetList,label:"Datasets",detachable:!0},"dock-list":{component:nw.DockList,label:"Docks",detachable:!0,feature:"docks"},"feature-list":{component:nw.FeaturePanel,label:"Features",detachable:!0,feature:"features"},"field-notes":{component:aw,label:"Field notes"},"ground-control-view":{component:(0,sl.SM)(nw.GroundControlView),label:"Ground control"},"layer-list":{component:nw.LayerList,label:"Layers",detachable:!0},"light-control":{component:nw.LightControlPanel,label:"Light control",detachable:!0,feature:"showControl"},"lcd-clock-panel":{component:nw.LCDClockPanel,label:"Clocks",detachable:!0},"log-panel":{component:nw.LogPanel,label:"Event log",detachable:!0},map:{component:iw,label:"Map",detachable:!0},messages:{component:nw.MessagesPanelView,label:"Messages"},"mission-editor":{component:nw.MissionOverviewPanel,label:"Mission editor",detachable:!0,feature:"missionEditor"},placeholder:{component:function(){return null},label:"Placeholder"},"saved-location-list":{component:nw.SavedLocationList,label:"Locations",detachable:!0},"show-control":{component:nw.ShowControlPanel,label:"Show control",detachable:!0,feature:"showControl"},"three-d-view":{component:nw.ThreeDTopLevelView,label:"3D View",feature:"threeDView"},"uav-details":{component:nw.UAVDetailsPanel,label:"UAV",detachable:!0},"uav-list":{component:(0,sl.SM)(nw.UAVList),label:"UAVs",detachable:!0}};var sw=function(e){for(var t=new s.Xt,n=function(){var e,n=rw(o[r],2),a=n[0],i=n[1];t.registerComponent(a,function(e){return i.feature?(t=i.feature,n=e,(0,fl.jI)(t)?n:lw):e;var t,n}((e=i.component,i.detachable?Xi(a,i.label,e):e)))},r=0,o=Object.entries(cw);r<o.length;r++)n();var a=t.build(),i=ll(cw,a)((0,fl.ax)()),l=i.isFixed,c=i.state;return a.restoreState(c),e.dispatch((0,cl.O7)(c.settings.hasHeaders)),e.dispatch((0,cl.eH)(l)),a.fallback=lw,a.on("stateChanged",(0,Pi.A)(function(){e.dispatch((0,cl.Q2)(a))},1e3)),a}(ul.Ay);Be.A.on("languageChanged",function(){sw.forEach(function(e){e.isComponent&&e.setTitle(Be.A.t("view.".concat(e.config.component)))})});var uw=l.createContext(sw);const fw=sw;var dw=n(18803),pw=function(e){var t=e.id,n=e.gone,r=e.label,o=e.onClick,a=e.pillWidth,i=void 0===a?80:a,c=e.status,s=e.uavIds;return l.createElement(Et.A,{key:t,disableGutters:!0,onClick:o},l.createElement(F.A,{sx:{width:i}},l.createElement(M.qs,{hollow:n,status:c},r)),l.createElement(F.A,{sx:{width:36,mx:1}},l.createElement(M.qs,{status:Ti.n.OFF},s.length)),(0,io.zL)(s,{maxCount:5}))};pw.propTypes={id:i().string,gone:i().bool,label:i().string,onClick:i().func,pillWidth:i().number,status:i().oneOf(Object.values(Ti.n)),uavIds:i().arrayOf(i().string)};const mw=pw;function yw(){return yw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yw.apply(null,arguments)}function gw(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return bw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bw(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function bw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var vw=(0,rt.Mz)(wo.gd,wo.Ev,wo.y_,wo.I6,function(e,t,n,r){var o,a={},i=gw(t);try{for(i.s();!(o=i.n()).done;){var l=o.value,c=e[l];if(c){var s=(0,wo.fR)(c),u=s.text,f=s.textSemantics,d="".concat(f,":").concat(u);void 0===a[d]?a[d]={id:d,label:u,priority:-(0,Ti.M)(f),status:f,uavIds:[l]}:a[d].uavIds.push(l)}}}catch(e){i.e(e)}finally{i.f()}if(r.length>0){var p="gone",m=Ti.n.OFF,y="".concat(m,":").concat(p);a[y]={id:y,label:p,gone:!0,priority:-(0,Ti.M)(m),status:m,uavIds:r}}if(n.length>0){var g="no telem",b=Ti.n.MISSING,v="".concat(b,":").concat(g);a[v]={id:v,label:g,priority:-(0,Ti.M)(b),status:b,uavIds:n}}for(var h=0,A=Object.values(a);h<A.length;h++){var S=A[h];S.uavIds=(0,ao.M)(S.uavIds)}return(0,dr.A)(a,["priority","label"])}),hw=(0,ml.c3)(function(e,t){return l.createElement(mw,yw({key:e.id},e,{onClick:t.onClick?function(n){n.preventDefault(),n.stopPropagation(),t.onClick(null==e?void 0:e.uavIds,n)}:null}))},{dataProvider:"items",backgroundHint:l.createElement(D.wD,null,function(e){return l.createElement(M.qq,{text:e("UAVStatus.noConnected")})}),listFactory:(0,ga.A)(l.createElement,M.G7)});const Aw=(0,u.Ng)(function(e){return{items:vw(e)}},{onClick:(0,dw.A)(uv.KY)})(hw);var Sw=["counts"];function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ew.apply(null,arguments)}function Ow(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ww(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ww(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function ww(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Tw=(0,rt.Mz)(wo.gd,wo.Ev,function(e,t){var n,r=[0,0,0,0,0,0],o=Ow(t);try{for(o.s();!(n=o.n()).done;){var a=e[n.value];if(a)switch((0,wo.zG)(a)){case Ti.n.CRITICAL:case Ti.n.ERROR:r[4]+=1;break;case Ti.n.GONE:case Ti.n.OFF:break;case Ti.n.SUCCESS:r[0]+=1;break;case Ti.n.INFO:r[1]+=1;break;case Ti.n.MISSING:r[3]+=1;break;default:r[2]+=1}}}catch(e){o.e(e)}finally{o.f()}return r[5]=r[0]+r[1]+r[2]+r[3]+r[4],r}),Cw=(0,xi.y)(Tw,wi.default),Iw=(0,Bt.n9)(function(e){return{root:{fontSize:"1rem"},inner:{alignItems:"center",display:"flex",height:"100%",marginRight:e.spacing(-1.5),padding:e.spacing(1)},counter:{padding:e.spacing(0,1.5,0,.5),userSelect:"none",fontVariantNumeric:"tabular-nums"},off:{opacity:.5}}}),xw=[Ti.n.SUCCESS,Ti.n.INFO,Ti.n.WARNING,Ti.n.MISSING,Ti.n.ERROR,null],jw=function(e){var t=e.counts,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Sw),o=Iw();return l.createElement(M.Qi,{interactive:!0,content:l.createElement(Aw,null)},l.createElement(F.A,Ew({className:(0,r.A)(o.root,"wb-module")},n),l.createElement("div",{className:o.inner},xw.map(function(e,n){return l.createElement(l.Fragment,{key:e},e?l.createElement(M.BG,{inline:!0,status:t[n]>0?e:Ti.n.OFF}):l.createElement(Oi.A,null),l.createElement("div",{className:(0,r.A)(o.counter,t[n]<=0&&o.off)},t[n]))}))))};jw.propTypes={counts:i().arrayOf(i().number)};var Pw=function(e,t){return function(){e&&(e.bringToFront("uavList")||t((0,Ci.Ds)({message:"UAVs panel is not added to the workbench yet",semantics:Ii.N.WARNING})))}},kw=(0,u.Ng)(function(e){return{counts:Cw(e)}},function(e,t){return{onClick:Pw(t.workbench,e)}})(jw);var _w=ll(cw,fw),Nw=s.gI.fromArray((0,fl.jI)("perspectives")?o.A.perspectives.map(_w):[]);Nw.isModified=function(){return!1};const Rw=Nw;function Dw(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return Mw(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Mw(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Mw(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,Mw(f,"constructor",s),Mw(s,"constructor",c),c.displayName="GeneratorFunction",Mw(s,o,"GeneratorFunction"),Mw(f),Mw(f,o,"Generator"),Mw(f,r,function(){return this}),Mw(f,"toString",function(){return"[object Generator]"}),(Dw=function(){return{w:a,m:d}})()}function Mw(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Mw=function(e,t,n,r){function a(t,n){Mw(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},Mw(e,t,n,r)}function Lw(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var Fw={color:uo.Ay.info,offset:[3,3]},Uw=function(e){var t=e.switchToPerspective;return l.createElement(s.md,{badgeProps:Fw,editable:!1,storage:Rw,workbench:fw,onChange:function(e){return t(e),!1}})};Uw.propTypes={switchToPerspective:i().func.isRequired};const Gw=(0,u.Ng)(function(){return{}},{switchToPerspective:function(e){return function(){var t,n=(t=Dw().m(function t(n){var r;return Dw().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Rw.get(e);case 1:r=t.v,n((0,cl.O7)(r.state.settings.hasHeaders)),n((0,cl.eH)(r.isFixed));case 2:return t.a(2)}},t)}),function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){Lw(a,r,o,i,l,"next",e)}function l(e){Lw(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}()}})(Uw),Vw=(0,Xn.A)((0,Rt.jsxs)("g",{transform:"scale(0.11790425)",children:[(0,Rt.jsx)("path",{d:"M 201.359,137.3 157.528,93.469 168.981,82.017 c 1.407,-1.407 2.197,-3.314 2.197,-5.304 0,-1.989 -0.79,-3.896 -2.197,-5.304 L 132.146,34.575 c -2.929,-2.928 -7.677,-2.928 -10.606,0 L 110.088,46.027 66.253,2.196 c -2.93,-2.928 -7.678,-2.928 -10.606,0 L 18.813,39.03 c -2.929,2.93 -2.929,7.678 0,10.607 L 62.644,93.468 51.191,104.92 c -1.407,1.407 -2.197,3.314 -2.197,5.304 0,1.99 0.79,3.896 2.197,5.304 l 36.837,36.836 c 1.464,1.464 3.384,2.196 5.303,2.196 1.919,0 3.839,-0.732 5.303,-2.196 l 11.453,-11.453 43.83,43.83 c 1.465,1.464 3.384,2.196 5.303,2.196 1.919,0 3.839,-0.732 5.303,-2.196 l 36.835,-36.834 c 1.407,-1.407 2.197,-3.314 2.197,-5.304 0.001,-1.989 -0.789,-3.896 -2.196,-5.303 z M 34.723,44.334 60.95,18.107 99.48,56.633 82.314,73.799 73.251,82.862 Z m 58.608,92.12 -26.23,-26.229 11.448,-11.447 c 0.002,-0.002 0.003,-0.003 0.005,-0.005 L 90.997,86.33 126.842,50.486 153.071,76.714 141.625,88.16 c -0.003,0.003 -0.005,0.005 -0.007,0.007 l -18.417,18.418 z m 65.89,32.377 -38.527,-38.526 26.229,-26.229 38.527,38.527 z"}),(0,Rt.jsx)("path",{d:"M 72.344,188.555 C 57.027,188.556 42.627,182.591 31.796,171.76 20.965,160.929 15,146.528 15,131.211 c 0,-4.143 -3.358,-7.5 -7.5,-7.5 -4.143,0 -7.5,3.358 -7.5,7.5 0,19.324 7.526,37.491 21.189,51.155 13.663,13.664 31.829,21.189 51.152,21.189 0.001,0 0.002,0 0.004,0 4.142,0 7.499,-3.358 7.499,-7.5 0.001,-4.143 -3.358,-7.5 -7.5,-7.5 z"}),(0,Rt.jsx)("path",{d:"m 69.346,174.133 c 4.142,0 7.5,-3.357 7.5,-7.5 0,-4.143 -3.358,-7.5 -7.5,-7.5 -6.658,0 -12.916,-2.593 -17.624,-7.3 -4.707,-4.707 -7.299,-10.965 -7.299,-17.622 0,-4.142 -3.357,-7.5 -7.5,-7.5 v 0 c -4.142,0 -7.5,3.358 -7.5,7.5 -10e-4,10.663 4.152,20.688 11.693,28.229 7.54,7.541 17.566,11.693 28.23,11.693 z"})]}),"Satellite");function Bw(){return Bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bw.apply(null,arguments)}function zw(e){return function(e){if(Array.isArray(e))return Ww(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Hw(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hw(e,t){if(e){if("string"==typeof e)return Ww(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ww(e,t):void 0}}function Ww(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var qw=(0,rt.Mz)(wo.gd,wo.Ev,function(e,t){var n,r={},o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Hw(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,i=e[a];if(i&&i.gpsFix){var l=i.gpsFix.type,c=String(l);if(void 0===r[c]){var s=(0,zl.Jq)(l);r[c]={id:c,label:(0,zl.Jj)(l)||"\u2014",priority:-(0,Ti.M)(s),status:s,uavIds:[a]}}else r[c].uavIds.push(a)}}}catch(e){o.e(e)}finally{o.f()}for(var u=0,f=Object.values(r);u<f.length;u++){var d=f[u];d.uavIds=(0,ao.M)(d.uavIds)}return(0,jd.A)(r)?[]:[null].concat(zw((0,dr.A)(r,["priority","label"])))}),Kw=(0,ml.c3)(function(e,t){return e?l.createElement(mw,Bw({key:e.id},e,{pillWidth:48,onClick:t.onClick?function(n){n.preventDefault(),n.stopPropagation(),t.onClick(null==e?void 0:e.uavIds,n)}:null})):l.createElement(M.Vx,{key:"__divider"})},{dataProvider:"items",listFactory:(0,ga.A)(l.createElement,M.G7)});const Yw=(0,u.Ng)(function(e){return{items:qw(e)}},{onClick:(0,dw.A)(uv.KY)})(Kw);var $w=n(16248);const Zw=e=>e.rtk.dialog.antennaPositionFormat===$w.p.ECEF,Jw=(0,rt.Mz)(e=>e.rtk.stats.antenna,To.MH,Zw,(e,t,n)=>{if(n){const{positionECEF:t}=e||{};return t&&Array.isArray(t)?`[${(t[0]/1e3).toFixed(3)}, ${(t[1]/1e3).toFixed(3)}, ${(t[2]/1e3).toFixed(3)}]`:void 0}{const{position:n}=e||{};return n?t(n):void 0}}),Xw=(0,rt.Mz)(e=>e.rtk.stats.antenna,Jw,(e,t)=>{if(!e)return{position:void 0,description:void 0};const n={position:t,description:""},r=String(e.serialNumber??"");return r&&r.length>0?n.description=`${e.descriptor??""} / SN: ${r}`:n.description=String(e.descriptor??""),n}),Qw=(0,rt.Mz)(e=>e.rtk.stats.messages,e=>(0,dr.A)(Object.entries(e||{}).map(([e,t])=>({id:e,...t})),"id")),eT=(0,rt.Mz)(e=>e.rtk.stats.satellites,e=>(0,dr.A)(Object.entries(e||{}).map(([e,t])=>({id:e,...t})),"id")),tT=(0,rt.Mz)(e=>e.rtk.stats.satellites,e=>Object.keys(e||{})),nT=e=>tT(e).length,rT=(0,rt.Mz)(e=>e.rtk.stats.satellites,e=>{let t=0;for(const{cnr:n}of Object.values(e||{}))n>=40&&t++;return t}),oT=(0,rt.Mz)(e=>e.rtk.stats.survey,({accuracy:e,flags:t=0})=>({accuracy:e,supported:Boolean(1&t),active:Boolean(2&t),valid:Boolean(4&t)})),aT=e=>e.rtk.dialog.surveySettingsEditorVisible,iT={"rtcm2/1":"Differential GPS Corrections","rtcm2/2":"Delta Differential GPS Corrections","rtcm2/3":"GNSS Reference Station Parameters","rtcm2/4":"Reference Station Datum","rtcm2/5":"GPS Constellation Health","rtcm2/6":"GPS Null Frame","rtcm2/7":"DGPS Radiobeacon Almanac","rtcm2/8":"Pseudolite Almanac","rtcm2/9":"GPS Partial Correction Set","rtcm2/14":"GPS Time of Week","rtcm2/15":"Ionospheric Delay Message","rtcm2/16":"GPS Special Message","rtcm2/18":"RTK Uncorrected Carrier Phases","rtcm2/19":"RTK Uncorrected Pseudoranges","rtcm2/22":"Extended Reference Station Parameters","rtcm2/23":"Antenna Type Definition Record","rtcm2/24":"Antenna Reference Point (ARP)","rtcm2/36":"GLONASS Special Message","rtcm3/1001":"L1-only GPS RTK","rtcm3/1002":"Extended L1-only GPS RTK","rtcm3/1003":"L1 & L2 GPS RTK","rtcm3/1004":"Extended L1 & L2 GPS RTK","rtcm3/1005":"RTK antenna position","rtcm3/1006":"RTK antenna pos with height","rtcm3/1007":"Antenna descriptor","rtcm3/1008":"Antenna descriptor & serial","rtcm3/1009":"L1-only GLONASS RTK","rtcm3/1010":"Extended L1-only GLONASS RTK","rtcm3/1011":"L1 & L2 GLONASS RTK","rtcm3/1012":"Extended L1 & L2 GLONASS RTK","rtcm3/1013":"System parameters","rtcm3/1014":"Network aux station data","rtcm3/1015":"GPS ionospheric correction","rtcm3/1016":"GPS geometric correction","rtcm3/1017":"GPS ionospheric & geometric correction","rtcm3/1019":"GPS ephemerides","rtcm3/1020":"GLONASS ephemerides","rtcm3/1029":"Unicode text string","rtcm3/1030":"GPS network RTK residual","rtcm3/1031":"GLONASS network RTK residual","rtcm3/1032":"Physical reference station position","rtcm3/1033":"Receiver and antenna descriptors","rtcm3/1034":"GPS FKP gradient","rtcm3/1035":"GLONASS FKP gradient","rtcm3/1037":"GLONASS ionospheric correction","rtcm3/1038":"GLONASS geometric correction","rtcm3/1039":"GLONASS ionospheric & geometric correction","rtcm3/1042":"BDS (BeiDou) ephemerides","rtcm3/1044":"QZSS ephemerides","rtcm3/1045":"GALILEO F/NAV ephemerides","rtcm3/1046":"GALILEO I/NAV ephemerides","rtcm3/1071":"GPS MSM1 (DGNSS pseudorange)","rtcm3/1072":"GPS MSM2 (RTK pseudorange)","rtcm3/1073":"GPS MSM3 (code, carrier)","rtcm3/1074":"GPS MSM4 (code, carrier, CNR)","rtcm3/1075":"GPS MSM5 (code, carrier, doppler, CNR)","rtcm3/1076":"GPS MSM6 (hi-res code, carrier, doppler)","rtcm3/1077":"GPS MSM7 (hi-res code, carrier, doppler, CNR)","rtcm3/1081":"GLONASS MSM1 (DGNSS pseudorange)","rtcm3/1082":"GLONASS MSM2 (RTK pseudorange)","rtcm3/1083":"GLONASS MSM3 (code, carrier)","rtcm3/1084":"GLONASS MSM4 (code, carrier, CNR)","rtcm3/1085":"GLONASS MSM5 (code, carrier, doppler, CNR)","rtcm3/1086":"GLONASS MSM6 (hi-res code, carrier, doppler)","rtcm3/1087":"GLONASS MSM7 (hi-res code, carrier, doppler, CNR)","rtcm3/1091":"Galileo MSM1 (DGNSS pseudorange)","rtcm3/1092":"Galileo MSM2 (RTK pseudorange)","rtcm3/1093":"Galileo MSM3 (code, carrier)","rtcm3/1094":"Galileo MSM4 (code, carrier, CNR)","rtcm3/1095":"Galileo MSM5 (code, carrier, doppler, CNR)","rtcm3/1096":"Galileo MSM6 (hi-res code, carrier, doppler)","rtcm3/1097":"Galileo MSM7 (hi-res code, carrier, doppler, CNR)","rtcm3/1101":"SBAS MSM1 (DGNSS pseudorange)","rtcm3/1102":"SBAS MSM2 (RTK pseudorange)","rtcm3/1103":"SBAS MSM3 (code, carrier)","rtcm3/1104":"SBAS MSM4 (code, carrier, CNR)","rtcm3/1105":"SBAS MSM5 (code, carrier, doppler, CNR)","rtcm3/1106":"SBAS MSM6 (hi-res code, carrier, doppler)","rtcm3/1107":"SBAS MSM7 (hi-res code, carrier, doppler, CNR)","rtcm3/1111":"QZSS MSM1 (DGNSS pseudorange)","rtcm3/1112":"QZSS MSM2 (RTK pseudorange)","rtcm3/1113":"QZSS MSM3 (code, carrier)","rtcm3/1114":"QZSS MSM4 (code, carrier, CNR)","rtcm3/1115":"QZSS MSM5 (code, carrier, doppler, CNR)","rtcm3/1116":"QZSS MSM6 (hi-res code, carrier, doppler)","rtcm3/1117":"QZSS MSM7 (hi-res code, carrier, doppler, CNR)","rtcm3/1121":"BeiDou MSM1 (DGNSS pseudorange)","rtcm3/1122":"BeiDou MSM2 (RTK pseudorange)","rtcm3/1123":"BeiDou MSM3 (code, carrier)","rtcm3/1124":"BeiDou MSM4 (code, carrier, CNR)","rtcm3/1125":"BeiDou MSM5 (code, carrier, doppler, CNR)","rtcm3/1126":"BeiDou MSM6 (hi-res code, carrier, doppler)","rtcm3/1127":"BeiDou MSM7 (hi-res code, carrier, doppler, CNR)","rtcm3/1230":"GLONASS L1 and L2 code-phase biases"};function lT(e,{max:t=20,short:n=!1}={}){return e>t?`> ${t}m`:e>=1?e.toFixed(2)+"m":e>=.1?(100*e).toFixed(n?0:1)+"cm":(100*e).toFixed(1)+"cm"}function cT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return sT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sT(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function sT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var uT={minWidth:150},fT={C:{name:"BeiDou",flag:"\u{1f1e8}\u{1f1f3}"},E:{name:"Galileo",flag:"\u{1f1ea}\u{1f1fa}"},G:{name:"GPS",flag:"\u{1f1fa}\u{1f1f8}"},R:{name:"GLONASS",flag:"\u{1f1f7}\u{1f1fa}"},other:{name:"Other",flag:"\u{1f3f3}"}},dT=["G","R","E","C","other"],pT=function(e){var t=e.satelliteIds,n=e.surveyStatus,r=e.t,o=function(e){var t,n={},r=cT(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,a=o.length>0?o.charAt(0):null;a&&fT[a]||(a="other"),n[a]?n[a]++:n[a]=1}}catch(e){r.e(e)}finally{r.f()}return n}(t);return l.createElement(M.G7,{style:uT},n.supported&&l.createElement(M.RU,{primaryText:n.valid?r("RTKStatusMiniList.surveySuccesful"):n.active?r("RTKStatusMiniList.surveyInProgress"):r("RTKStatusMiniList.surveyNo"),secondaryText:"number"==typeof n.accuracy?lT(n.accuracy):null,iconPreset:n.valid?"success":n.active?"connecting":"disconnected"}),l.createElement(M.RU,{primaryText:"\xa0\u{1f30d}\xa0\xa0\xa0"+r("RTKStatusMiniList.satelliteCount"),secondaryText:String(t.length)}),t.length>0&&l.createElement(M.Vx,null),dT.map(function(e){return o[e]&&l.createElement(M.RU,{key:e,primaryText:"\xa0".concat(fT[e].flag,"\xa0\xa0\xa0").concat(fT[e].name),secondaryText:o[e]})}),l.createElement(Yw,null))};pT.propTypes={satelliteIds:i().arrayOf(i().string),surveyStatus:i().shape({accuracy:i().number,active:i().bool,supported:i().bool,valid:i().bool}),t:i().func};const mT=(0,u.Ng)(function(e){return{satelliteIds:tT(e),surveyStatus:oT(e)}},{})((0,D.CI)()(pT));var yT=n(59116);function gT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bT(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function vT(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return hT(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(hT(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,hT(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,hT(f,"constructor",s),hT(s,"constructor",c),c.displayName="GeneratorFunction",hT(s,o,"GeneratorFunction"),hT(f),hT(f,o,"Generator"),hT(f,r,function(){return this}),hT(f,"toString",function(){return"[object Generator]"}),(vT=function(){return{w:a,m:d}})()}function hT(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}hT=function(e,t,n,r){function a(t,n){hT(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},hT(e,t,n,r)}function AT(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var ST=function(e){var t=e.onStatusChanged,n=e.period,r=void 0===n?1e3:n,o=Nv();return(0,l.useEffect)(function(){var e={finished:!1,promise:null},n=function(){var n,a=(n=vT().m(function n(){var a,i;return vT().w(function(n){for(;;)switch(n.p=n.n){case 0:if(e.finished){n.n=6;break}return n.p=1,n.n=2,o.query.getRTKStatus();case 2:a=n.v,t(a),n.n=4;break;case 3:n.p=3,i=n.v,(0,ur.Ay)(i,"RTK status query");case 4:return n.n=5,(0,fr.Ay)(r);case 5:n.n=0;break;case 6:return n.a(2)}},n,null,[[1,3]])}),function(){var e=this,t=arguments;return new Promise(function(r,o){var a=n.apply(e,t);function i(e){AT(a,r,o,i,l,"next",e)}function l(e){AT(a,r,o,i,l,"throw",e)}i(void 0)})});return function(){return a.apply(this,arguments)}}();return e.promise=n(),function(){e.finished=!0,e.promise=null}},[o,t,r]),null};ST.propTypes={onStatusChanged:i().func,period:i().number};const ET=(0,u.Ng)(null,function(e){return{onStatusChanged:function(t){var n,r,o,a=t.antenna,i=void 0===a?{}:a,l=t.messages,c=void 0===l?{}:l,s=t.messagesTx,u=t.cnr,f=void 0===u?{}:u,d=t.survey,p=void 0===d?{}:d,m=Date.now(),y={},g=void 0!==s;i.position&&(n=[i.position[1]/1e7,i.position[0]/1e7],o=void 0===i.position[2]?void 0:i.position[2]/1e3),i.positionECEF&&(r=Array.isArray(i.positionECEF)?i.positionECEF.slice(0,3).map(function(e){return Math.round(e)}):void 0);for(var b=0,v=Object.entries(c);b<v.length;b++){var h=gT(v[b],2),A=h[0],S=gT(h[1],2),E=S[0],O=S[1],w=m-E;y[A]={lastUpdatedAt:w,bitsPerSecondReceived:O,bitsPerSecondTransferred:g?0:void 0}}for(var T=0,C=Object.entries(s||{});T<C.length;T++){var I=gT(C[T],2),x=I[0],j=gT(I[1],2),P=j[0],k=j[1],_=m-P,N=y[x];N||(N={lastUpdatedAt:m-P,bitsPerSecondReceived:0,bitsPerSecondTransferred:0},y[x]=N),N.lastUpdatedAt=Math.min(N.lastUpdatedAt,_),N.bitsPerSecondTransferred=k}e((0,Lm.W4)({antenna:{descriptor:String(i.descriptor||""),serialNumber:String(i.serialNumber||""),stationId:(0,nt.default)(i.stationId)?void 0:Number(i.stationId),position:n,positionECEF:r,height:o},messages:y,satellites:(0,yT.A)(f,function(e){return{lastUpdatedAt:m,cnr:e}}),survey:p,lastUpdatedAt:m}))}}})(ST);var OT=[24,8],wT={justifyContent:"space-between",textAlign:"right",width:80},TT=function(e){var t=e.isConnected,n=e.numGoodSatellites,r=e.numSatellites,o=e.showRTKSetupDialog,a=e.surveyStatus,i=null;return t&&(i=a.supported?a.valid?Bt.nW.SUCCESS:a.active?Bt.nW.NEXT:Bt.nW.ERROR:r>1?Bt.nW.SUCCESS:null)===Bt.nW.SUCCESS&&n<7&&(i=Bt.nW.WARNING),l.createElement(M.Qi,{interactive:!0,content:l.createElement(mT,null)},l.createElement(M.Ft,{disabled:!t,label:t&&r>0?String(r):"\u2014",secondaryLabel:a.supported&&"number"==typeof a.accuracy?lT(a.accuracy,{max:9,short:!0}):null,style:wT,onClick:o},l.createElement(Vw,null),l.createElement(M.MA,{anchor:"topLeft",color:i?(0,Bt.VM)(i):null,offset:OT,visible:Boolean(i)}),t&&l.createElement(ET,null)))};TT.propTypes={isConnected:i().bool,numGoodSatellites:i().number,numSatellites:i().number,showRTKSetupDialog:i().func,surveyStatus:i().shape({accuracy:i().number,active:i().bool,supported:i().bool,valid:i().bool})};const CT=(0,u.Ng)(function(e){return{isConnected:(0,Ar.UJ)(e),numGoodSatellites:rT(e),numSatellites:nT(e),surveyStatus:oT(e)}},{showRTKSetupDialog:Lm.YN})(TT);function IT(e){return e.sidebar.open}var xT=n(85188);var jT=n(44863);function PT(e){return PT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PT(e)}function kT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_T(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function _T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function NT(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=PT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=PT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PT(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RT={justifyContent:"space-between",textAlign:"right",width:95},DT={width:24,marginTop:-10,display:"flex",flexDirection:"column",alignItems:"center",gap:4},MT={fontSize:11,fontWeight:"bold",textTransform:"uppercase",textAlign:"center",userSelect:"none"},LT=NT(NT(NT(NT(NT({},ze.Vk.AMSL,function(e){var t;return null==e||null===(t=e.position)||void 0===t?void 0:t.amsl}),ze.Vk.AHL,function(e){var t;return null==e||null===(t=e.position)||void 0===t?void 0:t.ahl}),ze.Vk.AGL,function(e){var t;return null==e||null===(t=e.position)||void 0===t?void 0:t.agl}),ze.Vk.XYZ,function(e){var t=null==e?void 0:e.localPosition;return Array.isArray(t)?t[2]:null}),"dummy",function(){return null}),FT=function(e){switch(e){case ze.Vk.AMSL:return ze.Vk.AHL;case ze.Vk.AHL:return ze.Vk.AGL;case ze.Vk.AGL:return ze.Vk.XYZ;case ze.Vk.XYZ:default:return ze.Vk.AMSL}},UT=function(e){return l.createElement(D.wD,null,function(t){return l.createElement("div",null,t("altitudeSummaryButton.showingCurrent",{altitudeType:(0,ze.Wf)(e,{short:!0})}),l.createElement("br",null),t("altitudeSummaryButton.clickToChange",{altitudeType:(0,ze.Wf)(FT(e),{short:!0})}))})},GT=function(e){var t=e.isConnected,n=e.onRequestTypeChange,r=e.type,o=(0,l.useMemo)(function(){return function(e){return function(t){var n,r=LT[e]||LT.dummy,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,i=kT((0,wo.dR)(t));try{for(i.s();!(n=i.n()).done;){var l=n.value,c=r((0,wo.Pz)(t,l));(0,nt.default)(c)||(o=Math.min(o,c),a=Math.max(a,c))}}catch(e){i.e(e)}finally{i.f()}return Number.isFinite(o)?{min:o,max:a}:{min:null,max:null}}}(r)},[r]),a=Vh(o,t?1e3:null),i=a.min,c=a.max;return l.createElement(M.Ft,{disabled:!t,label:t&&"number"==typeof c?"".concat(c.toFixed(1),"\xa0m"):"\u2014",secondaryLabel:t&&"number"==typeof i?"".concat(i.toFixed(1),"\xa0m"):"\u2014",style:RT,tooltip:UT(r),onClick:function(){return n(FT(r))}},l.createElement("div",{style:DT},l.createElement(jT.A,null),l.createElement("div",{style:MT},r)))};GT.propTypes={isConnected:i().bool,onRequestTypeChange:i().func,type:i().oneOf(Object.values(ze.Vk))};const VT=(0,u.Ng)(function(e){return{isConnected:(0,Ar.UJ)(e),type:(0,un.fe)(e)}},{onRequestTypeChange:function(e){return(0,K.uV)("display",{altitudeSummaryType:e})}})(GT);var BT=n(96545),zT=n(86452);function HT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||WT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WT(e,t){if(e){if("string"==typeof e)return qT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qT(e,t):void 0}}function qT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var KT=function(e){var t=e.onSetStatus,n=(0,u.Pj)();return(0,Xb.A)(function(){if(t){var e,r=n.getState(),o=(0,un.Xt)(r),a=(0,un.Yw)(r),i=[],l=[],c=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=WT(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}((0,wo.dR)(r));try{for(c.s();!(e=c.n()).done;){var s,u=e.value,f=null===(s=(0,wo.Pz)(r,u))||void 0===s?void 0:s.battery;if(f){var d=!(0,nt.default)(f.voltage)&&f.voltage>0;d&&i.push(f.voltage),(0,nt.default)(f.percentage)?d&&a===ze.Ji.FORCED_PERCENTAGE&&l.push(o.estimatePercentageFromVoltage(f.voltage)):l.push(f.percentage)}}}catch(e){c.e(e)}finally{c.f()}var p=function(e){return e.length>0?[(0,kp.A)(e),(0,zT.A)(e)]:[null,null]},m=HT(p(i),2),y=m[0],g=m[1],b=HT(p(l),2),v=b[0],h=b[1],A=function(e,t){return null!==e||null!==t?{voltage:e,percentage:t}:null};t({avg:A(y,v),min:A(g,h)})}},1e3),null};KT.propTypes={onSetStatus:i().func};const YT=KT;function $T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ZT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ZT(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var JT=[24,8],XT={justifyContent:"space-between",textAlign:"right",width:80},QT={avg:null,min:null},eC=function(e){var t=e.formatter,n=e.isConnected,r=e.t,o=$T((0,l.useState)(QT),2),a=o[0],i=a.avg,c=a.min,s=o[1],u=i?t.getBatteryStatus(i.voltage,i.percentage):null,f=i?t.getSemanticBatteryStatus(i.voltage,i.percentage):null,d=f&&f!==Bt.nW.OFF;return l.createElement(M.m_,{content:r("batteryStatusHeaderButton")},l.createElement(M.Ft,{disabled:!n,label:n&&i?t.getBatteryLabel(i.voltage,i.percentage):"\u2014",secondaryLabel:n&&c?t.getBatteryLabel(c.voltage,c.percentage):null,style:XT},u?t.getLargeBatteryIcon(i.percentage,u):l.createElement(BT.A,null),l.createElement(M.MA,{anchor:"topLeft",color:d?(0,Bt.VM)(f):null,offset:JT,visible:d}),n&&l.createElement(YT,{onSetStatus:s})))};eC.propTypes={formatter:i().instanceOf(mA.K).isRequired,isConnected:i().bool,t:i().func};const tC=(0,u.Ng)(function(e){return{formatter:(0,un.sk)(e),isConnected:(0,Ar.UJ)(e)}},{})((0,D.CI)()(eC));var nC=n(72493),rC=n(545);function oC(e){return function(e){if(Array.isArray(e))return aC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return aC(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aC(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var iC=function(e){var t=(0,rC.default)(Object.values((0,wo.O9)(e)),nt.default);return{min:Math.min.apply(Math,oC(t)),max:Math.max.apply(Math,oC(t))}},lC=function(e){var t=e.isConnected,n=Vh(iC,t?1e3:null),r=n.max,o=n.min,a=(0,D.Bd)().t;return l.createElement(M.Ft,{disabled:!t,label:t&&Number.isFinite(r)?(0,io.BO)(r,1):"\u2014",secondaryLabel:t&&Number.isFinite(o)?(0,io.BO)(o,1):"\u2014",style:RT,tooltip:a("header.distanceSummary")},l.createElement("div",{style:DT},l.createElement(nC.A,null),l.createElement("div",{style:MT},"home")))};lC.propTypes={isConnected:i().bool};const cC=(0,u.Ng)(function(e){return{isConnected:(0,Ar.UJ)(e)}})(lC);n(39469);var sC=n(29301),uC=n(98047);function fC(e){return fC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fC(e)}function dC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dC(Object(n),!0).forEach(function(t){mC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=fC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fC(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yC(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gC(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gC(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function gC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var bC=function(e){var t,n=0,r=0,o=yC((0,wo.dR)(e));try{for(o.s();!(t=o.n()).done;){var a,i=t.value,l=(0,wo.Pz)(e,i),c=null!==(a=l.velocity)&&void 0!==a?a:l.velocityXYZ;if(!(0,nt.default)(c)){var s=Math.hypot(c[0],c[1]),u=l.velocity?-c[2]:c[2];n=Math.max(n,s),r=(0,uC.A)([r,u],Math.abs)}}}catch(e){o.e(e)}finally{o.f()}return{maxHorizontal:n,maxVertical:r}},vC=function(e){var t=e.isConnected,n=Vh(bC,t?1e3:null),r=n.maxHorizontal,o=n.maxVertical,a=(0,D.Bd)().t;return l.createElement(M.Ft,{disabled:!t,label:t&&Number.isFinite(r)?(0,io.DB)(r,1):"\u2014",secondaryLabel:t&&Number.isFinite(o)?(0,io.DB)(o,1):"\u2014",style:pC(pC({},RT),{},{width:105}),tooltip:a("header.velocitySummary")},l.createElement(sC.A,null))};vC.propTypes={isConnected:i().bool};const hC=(0,u.Ng)(function(e){return{isConnected:(0,Ar.UJ)(e)}})(vC);var AC=n(81936),SC=n(42941);const EC=(0,Xn.A)((0,Rt.jsx)("path",{d:"M3 12h4a5 5 0 0 1 5-5a5 5 0 0 1 5 5h4a1 1 0 0 1 1 1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1a1 1 0 0 1 1-1m12 0a3 3 0 0 0-3-3a3 3 0 0 0-3 3h6M12 2l2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m17.31 0l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-7.94 9.3l3.11 3.11a.996.996 0 1 1-1.41 1.41L12 18.41l-2.41 2.41a.996.996 0 1 1-1.41-1.41l3.11-3.11c.21-.2.45-.3.71-.3c.26 0 .5.1.71.3z"}),"Sunrise"),OC=(0,Xn.A)((0,Rt.jsx)("path",{d:"M3 12h4a5 5 0 0 1 5-5a5 5 0 0 1 5 5h4a1 1 0 0 1 1 1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1a1 1 0 0 1 1-1m12 0a3 3 0 0 0-3-3a3 3 0 0 0-3 3h6M12 2l2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m17.31 0l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-7.94 13.71l3.11-3.11c.39-.39.39-1.03 0-1.42a.996.996 0 0 0-1.41 0L12 18.59l-2.41-2.41a.996.996 0 0 0-1.41 0c-.39.39-.39 1.03 0 1.42l3.11 3.11c.21.19.45.29.71.29c.26 0 .5-.1.71-.29z"}),"Sunset");var wC=n(92998),TC=n(57291),CC=n(3279),IC=n.n(CC);function xC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jC(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jC(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var PC=(0,rt.Mz)(He.Gk,function(e){return Array.isArray(e)&&e.length>=2?[Number(e[0].toFixed(2)),Number(e[1].toFixed(2))]:null}),kC=(0,xi.y)(PC,function(e){for(var t=new Date,n=e?IC().getTimes(t,e[1],e[0]):{},r=0,o=Object.entries(n);r<o.length;r++){var a=xC(o[r],2),i=a[0],l=a[1];l instanceof Date&&Number.isNaN(l.valueOf())&&(n[i]=void 0)}if(e&&n.sunriseEnd&&(0,TC.A)(t,n.sunriseEnd)){var c=IC().getTimes((0,wC.A)(t,1),e[1],e[0]);n.sunrise=c.sunrise,n.sunriseEnd=c.sunriseEnd}return n});function _C(e){if("number"==typeof e)return e>=5?Bt.nW.ERROR:e>=4?Bt.nW.WARNING:null}function NC(e){return e.weather.lastUpdatedAt}function RC(e){var t;return _C(null===(t=e.weather.data)||void 0===t?void 0:t.kpIndex)}n(54554),n(68156);function DC(e){return DC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DC(e)}function MC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function LC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MC(Object(n),!0).forEach(function(t){FC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function FC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=DC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=DC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==DC(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UC(e,t){try{return(0,si.A)(e,t)}catch(e){return""}}function GC(e,t){return(e=e?UC(e,"H:mm"):"")===(t=t?UC(t,"H:mm"):"")||e&&!t?e:e&&t?"".concat(e," \u2013 ").concat(t):t}var VC={minWidth:150},BC=function(e){var t,n=e.data,r=e.error,o=e.lastUpdatedAt,a=e.loading,i=e.sunrise,c=e.sunriseEnd,s=e.sunset,u=e.sunsetStart,f=e.t,d=e.timezone,p=e.utcOffset,m=[];if(d&&m.push(l.createElement(M.RU,{key:"timezone",primaryText:f("weatherMiniList.timezone"),secondaryText:d})),p){var y=String(Math.abs(p)%60),g=(p<0?"+":p>0?"-":"")+String((Math.abs(p)-y)/60).padStart(2,"0")+":"+y.padStart(2,"0");m.push(l.createElement(M.RU,{key:"utcOffset",primaryText:f("weatherMiniList.utcOffset"),secondaryText:g}))}if(m.length>0&&m.push(l.createElement(M.Vx,{key:"sep1"})),t=!1,(s||u)&&(m.push(l.createElement(M.RU,{key:"sunset",primaryText:f("weatherMiniList.sunset"),secondaryText:GC(u,s)})),t=!0),i||c){var b=l.createElement(M.RU,{key:"sunrise",primaryText:f("weatherMiniList.sunrise"),secondaryText:GC(i,c)});s&&(0,TC.A)(s,i)?m.splice(m.length-1,0,b):m.push(b),t=!0}t&&m.push(l.createElement(M.Vx,{key:"sep2"}));var v=n||{},h=v.kpIndex,A=function(e){return Array.isArray(e)&&3===e.length?(0,db.xW)(Math.atan2(e[1],e[0])):null}(v.magneticVector);return(0,nt.default)(h)||m.push(l.createElement(M.RU,{key:"kpIndex",primaryText:f("weatherMiniList.kpIndex"),secondaryText:l.createElement(M.E3,{status:_C(h)},(0,io.d)(h,1))})),(0,nt.default)(A)||m.push(l.createElement(M.RU,{key:"declination",primaryText:f("weatherMiniList.compassDeclination"),secondaryText:(0,nt.default)(A)?(0,io.d)(A):(0,io.d)(Math.abs(A),2,"\xb0")+" "+(A>=0?"E":"W")})),a?m.push(l.createElement(M.e0,{key:"loadingIndicator",label:f("weatherMiniList.refreshing"),padding:.5})):m.push(l.createElement(M.RU,{key:"lastUpdatedAt",primaryText:f("weatherMiniList.lastUpdate"),secondaryText:r?l.createElement("span",{style:{color:(0,uo.M7)(zl.AI.ERROR),fontWeight:"bold"}},"failed"):o?l.createElement(Bl.A,{formatter:io.wu,date:o}):"\u2014"})),m.length>0?l.createElement(M.G7,{style:VC},m):f("weatherMiniList.noWeatherInfo")};BC.propTypes={error:i().any,sunrise:i().instanceOf(Date),sunriseEnd:i().instanceOf(Date),sunsetStart:i().instanceOf(Date),sunset:i().instanceOf(Date),t:i().func,timezone:i().string,utcOffset:i().number};const zC=(0,u.Ng)(function(e){return LC(LC({},kC(e)),{},{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,utcOffset:(new Date).getTimezoneOffset()},e.weather)},{})((0,D.CI)()(BC));function HC(e){return HC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HC(e)}function WC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WC(Object(n),!0).forEach(function(t){KC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function KC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=HC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=HC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==HC(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $C(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$C(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ZC=[24,8],JC={justifyContent:"space-between",textAlign:"right",width:90},XC=function(e){var t=e.badgeStatus,n=e.sunrise,r=e.sunset,o=new Date,a=YC((0,SC.A)(),2),i=a[0],c=a[1],s=!n||r&&Math.abs((0,AC.A)(n,o))>Math.abs((0,AC.A)(r,o));i&&(s=!s);var u=s?r:n;return Qb(3e4),l.createElement(M.Qi,{content:l.createElement(zC,null)},l.createElement(M.Ft,{label:u?(0,si.A)(u,"H:mm"):"\u2014",secondaryLabel:u?l.createElement(Bl.A,{formatter:io.wu,date:u}):null,style:JC,onClick:function(){return c()}},s?l.createElement(OC,null):l.createElement(EC,null),l.createElement(M.MA,{anchor:"topLeft",color:t?(0,Bt.VM)(t):null,offset:ZC,visible:Boolean(t)})))};XC.propTypes={badgeStatus:i().oneOf(Object.values(Bt.nW)),sunrise:i().instanceOf(Date),sunset:i().instanceOf(Date)};const QC=(0,u.Ng)(function(e){return qC(qC({},kC(e)),{},{badgeStatus:RC(e)})},{})(XC);var eI=function(e){return Boolean(e.workbench.isFixed)},tI=(0,rt.Mz)(function(e){return Boolean(e.workbench.hideHeaders)},eI,function(e,t){return!e&&!t}),nI=n(2058),rI=n(55249),oI=n(53050),aI=n(4392),iI=n(24426);const lI=n.p+"b9fe6803b785d337ce8e.mp3";var cI=["count","muted"];function sI(){return sI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sI.apply(null,arguments)}function uI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fI(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fI(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var dI=(0,co.i7)({"0%":{transform:"rotate(0)"},"2%":{transform:"rotate(30deg)"},"5%":{transform:"rotate(-28deg)"},"8%":{transform:"rotate(34deg)"},"11%":{transform:"rotate(-32deg)"},"14%":{transform:"rotate(30deg)"},"17%":{transform:"rotate(-28deg)"},"20%":{transform:"rotate(26deg)"},"23%":{transform:"rotate(-24deg)"},"26%":{transform:"rotate(22deg)"},"29%":{transform:"rotate(-20deg)"},"32%":{transform:"rotate(18deg)"},"35%":{transform:"rotate(-16deg)"},"38%":{transform:"rotate(14deg)"},"41%":{transform:"rotate(-12deg)"},"44%":{transform:"rotate(10deg)"},"47%":{transform:"rotate(-8deg)"},"50%":{transform:"rotate(6deg)"},"53%":{transform:"rotate(-4deg)"},"56%":{transform:"rotate(2deg)"},"59%":{transform:"rotate(-1deg)"},"62%":{transform:"rotate(1deg)"},"65%":{transform:"rotate(0)"},"100%":{transform:"rotate(0)"}}),pI=(0,Bt.n9)({bell:{animation:"".concat(dI," ").concat(5,"s ease-in-out infinite"),transformOrigin:"50% 4px"}}),mI=function(){var e=uI((0,oI.A)(l.createElement("audio",{src:lI})),3),t=e[0],n=e[1],r=e[2];return(0,aI.A)(function(){return r.play()}),(0,Xb.A)(function(){n.playing||r.play()},5e3),t},yI=function(e){var t=e.count,n=e.muted,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,cI),o=pI(),a=t>0,i=(0,D.Bd)().t;return l.createElement(M.Ft,sI({},r,{tooltip:i(n?"alerts.muted":a?"alerts.acknowledgeAlerts":"alerts.clickToMute")}),n?l.createElement(rI.A,{className:a?o.bell:""}):l.createElement(nI.A,{className:a?o.bell:""}),l.createElement(M.MA,{visible:a,color:uo.Ay.error},t>1&&(t>=10?"9+":String(t))),!n&&a&&l.createElement(mI,null))};yI.propTypes={count:i().number,muted:i().bool};const gI=(0,u.Ng)(function(e){return e.alert},{onClick:function(){return function(e,t){var n=t().alert;n.count>0?e((0,iI.cB)()):e((0,iI.y5)(!n.muted))}}})(yI);function bI(e){return bI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bI(e)}function vI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hI(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=bI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=bI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bI(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AI(){return AI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AI.apply(null,arguments)}var SI=function(e){return l.createElement(D.wD,null,function(t){return l.createElement(M.Ft,AI({},e,{tooltip:t("preferences")}),l.createElement(Ul.A,null))})};SI.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vI(Object(n),!0).forEach(function(t){hI(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},M.Ft.propTypes);const EI=(0,u.Ng)(null,{onClick:L.xC})(SI);var OI=n(79061),wI={authenticated:uo.Ay.success,authenticating:uo.Ay.warning,notAuthenticated:uo.Ay.error,authenticationNotRequired:void 0};const TI=(0,u.Ng)(function(e){var t=(0,Ar.wR)(e)?"authenticated":(0,Ar.nG)(e)?"authenticating":(0,Ar.f1)(e)?"notAuthenticated":"authenticationNotRequired",n=wI[t];return{color:n,visible:void 0!==n}},{})(M.MA);var CI=function(e){var t=e.isAuthenticated,n=e.isDisabled,r=e.onAuthenticate,o=e.onDeauthenticate,a=e.t;return l.createElement(M.Ft,{tooltip:a("authentication"),disabled:n,onClick:n?null:t?o:r},l.createElement(TI,null),l.createElement(OI.A,null))};CI.propTypes={isAuthenticated:i().bool,isDisabled:i().bool,onAuthenticate:i().func,onDeauthenticate:i().func,t:i().func};const II=(0,u.Ng)(function(e){return{isAuthenticated:(0,Ar.wR)(e),isAuthRequired:(0,Ar.f1)(e),isDisabled:!(0,Ar.JU)(e)}},function(e){return{onAuthenticate:function(){return e(Pr())},onDeauthenticate:function(){return e(_r())}}})((0,D.CI)()(CI));var xI=n(34808);const jI=(0,Xn.A)((0,Rt.jsx)("path",{d:"M18 11v2h4v-2h-4zm-2 6.61c.96.71 2.21 1.65 3.2 2.39.4-.53.8-1.07 1.2-1.6-.99-.74-2.24-1.68-3.2-2.4-.4.54-.8 1.08-1.2 1.61zM20.4 5.6c-.4-.53-.8-1.07-1.2-1.6-.99.74-2.24 1.68-3.2 2.4.4.53.8 1.07 1.2 1.6.96-.72 2.21-1.65 3.2-2.4zM4 9c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h1v4h2v-4h1l5 3V6L8 9H4zm11.5 3c0-1.33-.58-2.53-1.5-3.35v6.69c.92-.81 1.5-2.01 1.5-3.34z"}),"Campaign");var PI=function(e){return"number"==typeof e&&e>0},kI=(0,co.i7)({from:{height:"100%"},to:{height:"0%"}}),_I=(0,pp.Ay)("div")(function(e){var t=e.active,n=e.timeoutLength;return{position:"absolute",right:"0px",bottom:"0px",left:"0px",height:"0%",backgroundColor:uo.Ay.warning,opacity:.5,animationName:t?kI:null,animationDuration:PI(n)&&Number.isFinite(n)?"".concat(n,"s"):"100000s",animationTimingFunction:"linear",animationIterationCount:"1"}}),NI=function(e){var t=e.isBroadcast,n=e.setBroadcast,r=e.t,o=e.timeoutLength,a=(0,l.useRef)(void 0);return(0,l.useEffect)(function(){t&&PI(o)?a.current=setTimeout(function(){n(!1)},1e3*o):!t&&a.current&&(clearTimeout(a.current),a.current=void 0)},[t,n,o]),l.createElement(M.m_,{content:t?r("broadcastButton.disable"):r("broadcastButton.enable",{time:o})},l.createElement(M.Ft,{onClick:function(){return n(!t)}},l.createElement(_I,{active:t,timeoutLength:o}),l.createElement(M.MA,{color:uo.Ay.warning,visible:t}),l.createElement("div",{style:{position:"relative"}},l.createElement(jI,null))))};NI.propTypes={isBroadcast:i().bool,setBroadcast:i().func,t:i().func,timeoutLength:i().number};const RI=(0,u.Ng)(function(e){return{isBroadcast:(0,DS.Si)(e)}},{setBroadcast:xI.gW})((0,D.CI)()(NI));function DI(){return DI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DI.apply(null,arguments)}var MI=function(e){var t=e.id,n=e.name,r=e.state,o=e.stateChangedAt;return l.createElement(M.RU,{key:t,iconPreset:r,primaryText:n,secondaryText:l.createElement(Bl.A,{formatter:io.ts,date:o})})};MI.propTypes={id:i().string,name:i().string,state:i().string,stateChangedAt:i().number};var LI=function(e){var t=e.connections,n=e.onSwitchSecondaryChannel,r=e.t,o=e.useSecondaryChannel;return l.createElement(M.G7,null,t.map(function(e){return l.createElement(MI,DI({key:e.id},e))}),0===t.length&&l.createElement(M.RU,{primaryText:r("ConnectionStatusMiniList.noConnections")}),l.createElement(M.Vx,null),l.createElement(ne.A,{control:l.createElement(F.A,{sx:{pl:1}},l.createElement(Tt.A,{size:"small",checked:o,onChange:n})),label:l.createElement(U.A,{variant:"body2"},r("ConnectionStatusMiniList.useSecondaryChannel"))}))};LI.propTypes={connections:i().arrayOf(i().any),onSwitchSecondaryChannel:i().func,t:i().func,useSecondaryChannel:i().bool};const FI=(0,u.Ng)(function(e){return{connections:(0,Hl.Rk)(e),useSecondaryChannel:0!==(0,Un.$D)(e)}},{onSwitchSecondaryChannel:function(){return(0,Gn.FQ)()}})((0,D.CI)()(LI));var UI=["error","warning","ok"],GI={ok:uo.Ay.success,warning:uo.Ay.warning,error:uo.Ay.error};function VI(e){switch(e.state){case zl.KN.CONNECTED:return"ok";case zl.KN.CONNECTING:case zl.KN.DISCONNECTING:return"warning";default:return"error"}}var BI=(0,rt.Mz)(Hl.Rk,function(e){for(var t=(0,os.A)(e,VI),n=0,r=UI;n<r.length;n++){var o=r[n];if(t[o])return{level:o,count:t[o]}}return{level:"ok",count:e.length}});const zI=(0,u.Ng)(function(e,t){var n=BI(e),r=n.count,o=n.level;return{color:GI[o],visible:t.isAlwaysVisible?r>0:"ok"!==o}},{})(M.MA);var HI=(0,Bt.n9)(function(){return{root:{position:"absolute",bottom:5,right:5,color:"white",width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center",fontSize:11}}}),WI=function(e){var t=e.channel,n=HI();return l.createElement("div",{className:n.root},t)};WI.propTypes={channel:i().number.isRequired};const qI=(0,u.Ng)(function(e){return{channel:(0,Un.$D)(e)+1}})(WI);function KI(e){return KI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KI(e)}function YI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=KI(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=KI(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==KI(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ZI=function(e){return l.createElement(M.Qi,{interactive:!0,content:l.createElement(FI,null),disabled:e.disabled},l.createElement(M.Ft,e,l.createElement(zI,null),l.createElement(Gl.A,null),l.createElement(qI,null)))};ZI.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YI(Object(n),!0).forEach(function(t){$I(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},M.Ft.propTypes);const JI=(0,u.Ng)(function(e){return{disabled:!(0,Ar.UJ)(e)}},function(){return{onClick:function(){}}})(ZI);var XI=n(28849),QI=n(67241),ex=n(60377),tx=n(51916),nx=n.n(tx),rx=["isFullscreen"];function ox(){return ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ox.apply(null,arguments)}var ax=function(e){var t=e.isFullscreen,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,rx);return l.createElement(D.wD,null,function(e){return l.createElement(M.Ft,ox({},n,{tooltip:e(t?"fullScreen.exit":"fullScreen.on")}),t?l.createElement(QI.A,null):l.createElement(XI.A,null))})};ax.propTypes={disabled:i().bool.isRequired,isFullscreen:i().bool.isRequired,label:i().string,onClick:i().func};const ix=function(){var e=(0,l.useCallback)(function(){return nx().toggle()},[]),t=(0,ui.A)();return(0,ex.A)("change",t,nx()),(0,ex.A)("error",t,nx()),l.createElement(ax,{isFullscreen:nx().isFullscreen,disabled:!nx().isEnabled,onClick:e})};var lx=function(){o.A.urls.help&&window.open(o.A.urls.help,"_blank")};const cx=function(){return l.createElement(D.wD,null,function(e){return l.createElement(M.Ft,{tooltip:e("help"),onClick:lx},l.createElement(Fl.A,null))})};var sx=n(63666);const ux=(0,u.Ng)(function(e){var t=Pp(e);return{color:(0,uo.VM)(t),visible:t!==Ti.n.OFF}},{})(M.MA);function fx(){return fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fx.apply(null,arguments)}var dx=function(e){return l.createElement(D.wD,null,function(t){return l.createElement(M.Ft,fx({},e,{tooltip:t("safetyDialog.title")}),l.createElement(ux,null),l.createElement(sx.A,null))})};dx.propTypes={onClick:i().func};const px=(0,u.Ng)(null,{onClick:_d.$0})(dx);var mx=n(91463);function yx(e){return yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yx(e)}function gx(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=yx(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yx(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bx=gx(gx(gx(gx({},zl.KN.CONNECTED,(0,Be.tt)("serverConnectionStatus.connected")),zl.KN.CONNECTING,(0,Be.tt)("serverConnectionStatus.connecting")),zl.KN.DISCONNECTED,(0,Be.tt)("serverConnectionStatus.disconnected")),zl.KN.DISCONNECTING,(0,Be.tt)("serverConnectionStatus.disconnecting")),vx=(0,Be.tt)("serverConnectionStatus.unknownState"),hx=function(e){return(0,nt.default)(e)?"unknown":Number.isFinite(e)?Math.abs(e)<1e3?"".concat(e.toFixed(0),"ms"):Math.abs(e)<=3e4?"".concat((e/1e3).toFixed(1),"s"):">30s":e<0?"-\u221e":"\u221e"},Ax=function(e){var t=e.clockSkew,n=e.connectionState,r=e.roundTripTime,o=e.serverHostname,a=e.serverVersion,i=e.t;return l.createElement(M.G7,null,l.createElement(M.RU,{iconPreset:n,primaryText:(bx[n]||vx)(i),secondaryText:n===zl.KN.CONNECTED?o:null}),n===zl.KN.CONNECTED?l.createElement(l.Fragment,null,l.createElement(M.RU,{iconPreset:"empty",primaryText:i("serverConnectionStatus.version"),secondaryText:a}),l.createElement(M.Vx,null),0===t?l.createElement(M.RU,{iconPreset:"success",primaryText:i("serverConnectionStatus.clocksSync")}):l.createElement(M.RU,{iconPreset:Math.abs(t)>r/2?"warning":"empty",primaryText:i("serverConnectionStatus.clockSkew"),secondaryText:hx(t)}),l.createElement(M.RU,{iconPreset:r>mr.f?"warning":"empty",primaryText:i("serverConnectionStatus.roundTripTime"),secondaryText:hx(r)})):null)};Ax.propTypes={clockSkew:i().number,connectionState:i().string,roundTripTime:i().number,serverHostname:i().string,serverVersion:i().string,t:i().func};const Sx=(0,u.Ng)(function(e){return{connectionState:(0,Ar.IN)(e).state,clockSkew:(0,Ar.li)(e),roundTripTime:(0,Ar.Ye)(e),serverHostname:(0,Ar.XP)(e),serverVersion:(0,Ar.Sw)(e)}},{})((0,D.CI)()(Ax));function Ex(e){return Ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ex(e)}function Ox(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ex(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ex(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ex(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wx=Ox(Ox(Ox(Ox({},zl.KN.CONNECTED,uo.Ay.success),zl.KN.CONNECTING,uo.Ay.warning),zl.KN.DISCONNECTING,uo.Ay.warning),zl.KN.DISCONNECTED,uo.Ay.error);const Tx=(0,u.Ng)(function(e){return{color:wx[(0,Ar.IN)(e).state],visible:e.dialogs.serverSettings.active}},{})(M.MA);var Cx=["hideTooltip"];var Ix=function(e){var t=e.hideTooltip,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Cx),r=l.createElement(M.Ft,n,l.createElement(Tx,null),l.createElement(mx.A,null));return t?r:l.createElement(M.Qi,{content:l.createElement(Sx,null)},r)};Ix.propTypes={hideTooltip:i().bool,onClick:i().func};const xx=(0,u.Ng)(null,{onClick:Ir})(Ix);var jx=function(e,t,n){return"ago"===n?"Session expired":"Session expires"},Px=function(e){var t=e.expiresAt;return t?l.createElement(F.A,{style:{color:"white",fontSize:"0.875rem",textAlign:"right"},sx:{alignSelf:"center",px:1}},l.createElement("div",{style:{color:"rgba(255, 255, 255, 0.54)"}},l.createElement(Bl.A,{date:t,formatter:jx})),l.createElement("div",null,l.createElement("b",null,l.createElement(Bl.A,{date:t})))):null};Px.propTypes={expiresAt:i().number};const kx=(0,u.Ng)(function(e){return{expiresAt:e.session.expiresAt}})(Px);var _x=n(66375),Nx=n(50791);function Rx(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Dx(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dx(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function Dx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Mx=(0,rt.Mz)(function(e){return e.measurement.averagingResults},function(e){var t,n=e.byId,r=[],o=Rx(e.order);try{for(o.s();!(t=o.n()).done;){var a=t.value;n[a]&&n[a].sampling&&r.push(a)}}catch(e){o.e(e)}finally{o.f()}return r}),Lx=function(e){return e.measurement.averagingResults.order},Fx=(0,rt.Mz)(function(e){return e.measurement.averagingResults},Xe.Im),Ux=function(e){return e.measurement.averagingResults.byId},Gx=function(e,t){var n,r=Ux(e),o=[],a=[],i=Rx(t);try{for(i.s();!(n=i.n()).done;){var l=r[n.value];!l||(0,nt.default)(l.mean.lat)||(0,nt.default)(l.mean.lon)||(o.push(l.mean.lat),a.push(l.mean.lon))}}catch(e){i.e(e)}finally{i.f()}if(o.length>0)return[(0,Nx.A)(a)/a.length,(0,Nx.A)(o)/o.length]},Vx=function(e){return e.measurement.averagingDialog.selectedUAVIds},Bx=(0,rt.Mz)(Lx,function(e){return e&&e.length>0}),zx=(0,rt.Mz)(Lx,Ux,function(e,t){var n,r=Rx(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(t&&t[o]&&t[o].sampling)return!0}}catch(e){r.e(e)}finally{r.f()}return!1}),Hx=(0,rt.Mz)(Vx,function(e){return e&&e.length>0}),Wx=n(93454),qx=n(91018),Kx=n(31883),Yx=n(80109);function $x(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return Zx(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Zx(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Zx(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,Zx(f,"constructor",s),Zx(s,"constructor",c),c.displayName="GeneratorFunction",Zx(s,o,"GeneratorFunction"),Zx(f),Zx(f,o,"Generator"),Zx(f,r,function(){return this}),Zx(f,"toString",function(){return"[object Generator]"}),($x=function(){return{w:a,m:d}})()}function Zx(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Zx=function(e,t,n,r){function a(t,n){Zx(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},Zx(e,t,n,r)}function Jx(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var Xx=n(86150),Qx=n(34566),ej=n(51012);const tj="parameterUpload";function nj(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return rj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rj(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function rj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function oj(e){var t,n=[],r=0,o=nj((e||"").split("\n"));try{for(o.s();!(t=o.n()).done;){var a=t.value;if(r++,0!==(a=a.trim()).length&&!a.startsWith("#")&&!a.startsWith("//")){var i=a.replace(",","=").indexOf("=");if(i<0)throw new Error("Line ".concat(r," does not contain an equals sign (=) or a comma."));var l=a.slice(0,i).trim(),c=a.slice(i+1).trim();if(0===l.length)throw new Error("Line ".concat(r," contains no parameter name, only a value"));n.push({name:l,value:c})}}}catch(e){o.e(e)}finally{o.f()}return n}var aj=function(e){return Boolean(e.parameters.rebootAfterUpload)};function ij(e){return 0===e.parameters.manifest.order.length}function lj(e){return e.parameters.dialog.open}var cj=(0,rt.Mz)(function(e){return e.parameters.manifest},Xe.Im),sj=(0,rt.Mz)(cj,aj,function(e,t){return{items:e.map(function(e){return{name:e.name,value:e.value}}).filter(function(e){var t=e.name;return"string"==typeof t&&t.length>0}),meta:{shouldReboot:t}}}),uj=n(6692);function fj(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return dj(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(dj(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,dj(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,dj(f,"constructor",s),dj(s,"constructor",c),c.displayName="GeneratorFunction",dj(s,o,"GeneratorFunction"),dj(f),dj(f,o,"Generator"),dj(f,r,function(){return this}),dj(f,"toString",function(){return"[object Generator]"}),(fj=function(){return{w:a,m:d}})()}function dj(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}dj=function(e,t,n,r){function a(t,n){dj(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},dj(e,t,n,r)}function pj(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function mj(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){pj(a,r,o,i,l,"next",e)}function l(e){pj(a,r,o,i,l,"throw",e)}i(void 0)})}}var yj=n(58917);const gj=(0,Xn.A)((0,Rt.jsxs)("g",{children:[(0,Rt.jsx)("path",{d:"M8.24.71 1.16 3.09a.63.63 0 0 0-.45.6v18.97c0 .35.28.63.63.63l.2-.04 6.7-2.6 7.52 2.64 7.08-2.38a.63.63 0 0 0 .45-.6V1.33a.62.62 0 0 0-.63-.63l-.2.04-6.7 2.6zm-.02 2.16 7.59 2.65 5.47-1.92v15.85l-5.5 1.68L8.2 18.5l-5.5 1.93V4.55Z"}),(0,Rt.jsx)("path",{d:"M17 10.25a5.1 5.1 0 0 0-7.73-3.32l1 1a3.74 3.74 0 0 1 5.48 3.32v.33h1.01a2.04 2.04 0 0 1 .99 3.83l.98.98A3.39 3.39 0 0 0 17 10.24zM5.87 7l1.88 1.86a4.09 4.09 0 0 0 .17 8.17h7.98l1.36 1.36.87-.87L6.73 6.14Zm3.22 3.22 5.45 5.44H7.92a2.72 2.72 0 1 1 0-5.44z"})]}),"MapCloudOff");var bj=n(68396);const vj=(e=3)=>{const t=performance.now()+1e3*e;for(;performance.now()<t;);},hj=({createClickListener:e})=>(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(Xs.A,{}),(0,Rt.jsxs)(ae.A,{onClick:e(vj),children:[(0,Rt.jsx)(Ot.A,{children:(0,Rt.jsx)(bj.A,{})}),(0,Rt.jsx)(wt.A,{primary:"Freeze UI for 3 seconds"})]})]}),Aj=(0,u.Ng)(e=>({devMode:(0,DS.r2)(e),isConnected:(0,Ar.UJ)(e),numberOfAveragingInProgress:Mx(e).length,runningUploadJobType:Fp(e)}),{showAveragingDialog:ej.Q3,showFirmwareUpdateDialog:function(){return function(e,t){return e(Fp(t())===_p?(0,tb.dH)({backAction:(0,Yx.xu)()}):e((0,Yx.xu)()))}},showLicenseInfoDialog:Xx.$u,showMapCachingDialog:Qx.ne,showParameterUploadDialog:function(){return function(e,t){e(Fp(t())===tj?(0,tb.dH)({backAction:(0,uj.h5)()}):(0,uj.h5)())}},showVersionCheckDialog:yj._U})(({devMode:e,isConnected:t,numberOfAveragingInProgress:n,runningUploadJobType:r,showAveragingDialog:o,showFirmwareUpdateDialog:a,showLicenseInfoDialog:i,showMapCachingDialog:l,showParameterUploadDialog:c,showVersionCheckDialog:s,requestClose:u,...f})=>{const{t:d}=(0,D.Bd)(),p=e=>()=>{u(),e()};return(0,Rt.jsxs)(gc.A,{...f,children:[(0,Rt.jsxs)(ae.A,{onClick:p(o),children:[(0,Rt.jsx)(Ot.A,{children:(0,Rt.jsx)(Oi.A,{})}),(0,Rt.jsx)(wt.A,{primary:d("toolbox.coordinateAveraging"),secondary:n>0?d("toolbox.averagingInProgress",{number:n}):void 0})]}),(0,Rt.jsxs)(ae.A,{onClick:p(a),children:[(0,Rt.jsx)(Ot.A,{children:(0,Rt.jsx)(Wx.A,{})}),(0,Rt.jsx)(wt.A,{primary:(0,Rt.jsxs)(Rt.Fragment,{children:[d("toolbox.firmwareUpdate"),(0,Rt.jsx)(Ab,{style:{verticalAlign:"middle",marginLeft:8}})]}),secondary:r===_p&&d("toolbox.uploadInProgress")})]}),(0,Rt.jsxs)(ae.A,{onClick:p(l),children:[(0,Rt.jsx)(Ot.A,{children:(0,Rt.jsx)(gj,{})}),(0,Rt.jsx)(wt.A,{primary:(0,Rt.jsxs)(Rt.Fragment,{children:[d("toolbox.offlineMaps"),(0,Rt.jsx)(Ab,{style:{verticalAlign:"middle",marginLeft:8}})]})})]}),(0,Rt.jsxs)(ae.A,{onClick:p(c),children:[(0,Rt.jsx)(Ot.A,{children:(0,Rt.jsx)(qx.A,{})}),(0,Rt.jsx)(wt.A,{primary:d("toolbox.paramUpload"),secondary:r===tj&&d("toolbox.uploadInProgress")})]}),(0,Rt.jsx)(Xs.A,{}),(0,Rt.jsxs)(ae.A,{disabled:!t,onClick:p(i),children:[(0,Rt.jsx)(Ot.A,{children:(0,Rt.jsx)(Kx.A,{})}),(0,Rt.jsx)(wt.A,{primary:d("toolbox.licenseInfo")})]}),e&&(0,Rt.jsx)(hj,{createClickListener:p})]})});function Sj(e){return Sj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sj(e)}function Ej(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Oj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ej(Object(n),!0).forEach(function(t){wj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ej(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wj(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Sj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sj(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Cj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cj(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ij=function(e){var t=e.numberOfAveragingInProgress,n=Tj((0,l.useState)(null),2),r=n[0],o=n[1],a=(0,D.Bd)().t,i=function(){o(null)},c=t>0;return l.createElement(l.Fragment,null,l.createElement(M.Ft,{"aria-controls":"toolbox-menu","aria-haspopup":"true",tooltip:a("toolbox.tooltip"),onClick:function(e){o(e.currentTarget)}},l.createElement(M.MA,{color:uo.Ay.warning,visible:c}),l.createElement(_x.A,null)),l.createElement(Aj,{id:"toolbox-menu",anchorEl:r,open:Boolean(r),requestClose:i,onClose:i}))};Ij.propTypes=Oj(Oj({},M.Ft.propTypes),{},{numberOfAveragingInProgress:i().number});const xj=(0,u.Ng)(function(e){return{numberOfAveragingInProgress:Mx(e).length}},null)(Ij);function jj(e){return jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jj(e)}function Pj(e){return function(e){if(Array.isArray(e))return kj(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return kj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kj(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_j(Object(n),!0).forEach(function(t){Rj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Rj(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=jj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jj(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dj={backgroundColor:"#333",flexGrow:0,minHeight:48},Mj={display:"flex",flexFlow:"row nowrap"},Lj={"alert-button":gI,"altitude-summary-header-button":VT,"app-settings-button":EI,"authentication-button":II,"battery-status-header-button":tC,"broadcast-button":function(){return l.createElement(RI,{timeoutLength:SE.Z})},"connection-status-button":JI,"distance-summary-header-button":cC,"full-screen-button":ix,"help-button":function(){return o.A.urls.help?l.createElement(cx,null):null},"rtk-status-header-button":function(){return(0,fl.jI)("toolboxMenu")&&l.createElement(CT,null)},"safety-button":px,"server-connection-settings-button":function(){return l.createElement(xx,{hideTooltip:o.A.optimizeUIForTouch.default})},"session-expiry-box":kx,"toolbox-button":function(){return(0,fl.jI)("toolboxMenu")&&l.createElement(xj,null)},"uav-status-summary":function(){return l.createElement(uw.Consumer,null,function(e){return l.createElement(kw,{workbench:e})})},"velocity-summary-header-button":hC,"weather-header-button":QC},Fj=function(e){var t=e.isSidebarOpen,n=e.showSidebar,r=e.toggleSidebar;return l.createElement("div",{id:"header",style:Nj(Nj({},Dj),{},{overflow:"hidden"})},l.createElement("div",{id:"header-inner",style:Mj},n&&l.createElement(Ei.Ay,{color:"#999",style:{cursor:"pointer"},shape:t?"close":"menu",onClick:r}),l.createElement(Gw,null),l.createElement(F.A,{sx:{pr:.5}}),o.A.headerComponents.flatMap(function(e){return[l.createElement("hr",{key:"header-group:".concat(e.join(","))})].concat(Pj(e.map(function(e){var t=Lj[e];return l.createElement(t,{key:e})})))}).slice(1)))};Fj.propTypes={isSidebarOpen:i().bool.isRequired,showSidebar:i().bool,toggleSidebar:i().func.isRequired};const Uj=(0,u.Ng)(function(e){return{sessionExpiresAt:e.session.expiresAt,isSidebarOpen:IT(e),showSidebar:tI(e)}},{toggleSidebar:function(){return function(e,t){var n=IT(t());e((0,xT.p)(!n))}}})(Fj);n(71761),n(73772);var Gj=n(45192),Vj=n(48499),Bj=n(99387),zj=n(61587),Hj=n(49327),Wj=n(1488),qj=n(65756),Kj=n(94153),Yj=n(38365),$j=n(34809),Zj=n(84664);function Jj(e){return Jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jj(e)}function Xj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xj(Object(n),!0).forEach(function(t){gP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eP(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return tP(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(tP(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,tP(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,tP(f,"constructor",s),tP(s,"constructor",c),c.displayName="GeneratorFunction",tP(s,o,"GeneratorFunction"),tP(f),tP(f,o,"Generator"),tP(f,r,function(){return this}),tP(f,"toString",function(){return"[object Generator]"}),(eP=function(){return{w:a,m:d}})()}function tP(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}tP=function(e,t,n,r){function a(t,n){tP(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},tP(e,t,n,r)}function nP(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function rP(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){nP(a,r,o,i,l,"next",e)}function l(e){nP(a,r,o,i,l,"throw",e)}i(void 0)})}}function oP(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function aP(e,t){return e.get(lP(e,t))}function iP(e,t,n){return e.set(lP(e,t),n),n}function lP(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function cP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bP(r.key),r)}}function uP(e,t,n){return t&&sP(e.prototype,t),n&&sP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fP(e,t,n){return t=pP(t),function(e,t){if(t&&("object"==Jj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,dP()?Reflect.construct(t,n||[],pP(e).constructor):t.apply(e,n))}function dP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(dP=function(){return!!e})()}function pP(e){return pP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pP(e)}function mP(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yP(e,t)}function yP(e,t){return yP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yP(e,t)}function gP(e,t,n){return(t=bP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bP(e){var t=function(e,t){if("object"!=Jj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Jj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jj(t)?t:t+""}var vP=function(e){return(0,nt.default)(e)?"an unknown amount":Math.abs(e)<1e3?"".concat(e.toFixed(0),"ms"):Math.abs(e)<=3e4?"".concat((e/1e3).toFixed(1),"s"):"more than 30s"},hP=function(e){function t(){var e;return cP(this,t),(e=fP(this,t))._disposer=void 0,e._processIsRunning=!1,e._onLogMessageReceived=e._onLogMessageReceived.bind(e),e._onProcessExited=e._onProcessExited.bind(e),e._onProcessStartFailed=e._onProcessStartFailed.bind(e),e}return mP(t,e),uP(t,[{key:"componentDidMount",value:function(){var e=this;window.bridge.localServer.ensureRunning({args:(0,Gj.parse)(this.props.args),port:this.props.port,callbacks:{error:this._onProcessStartFailed,exit:this._onProcessExited,log:this._onLogMessageReceived}}).then(function(t){e._processIsRunning=!0,e._setDisposer(t),e.props.onStarted&&e.props.onStarted()},this._onProcessStartFailed)}},{key:"componentDidUpdate",value:function(e){this.props.port!==e.port||(this.props.args,e.args)}},{key:"componentWillUnmount",value:function(){this._setDisposer(null),this._processIsRunning=!1,window.bridge.localServer.terminate()}},{key:"render",value:function(){return null}},{key:"_setDisposer",value:function(e){this._disposer!==e&&(this._disposer&&this._disposer(),this._disposer=e)}},{key:"_onLogMessageReceived",value:function(e){var t=this.props.onLogMessage;t&&t(e)}},{key:"_onProcessExited",value:function(e,t){this.props.onError&&this.props.onError(t?"exited with ".concat(t):"exited with code ".concat(e),this._processIsRunning),this._setDisposer(null),this._processIsRunning=!1}},{key:"_onProcessStartFailed",value:function(e){this.props.onError&&this.props.onError(e.message,e),this._setDisposer(null),this._processIsRunning=!1}}])}(l.Component);gP(hP,"propTypes",{args:i().string,onError:i().func,onLogMessage:i().func,onStarted:i().func,port:i().number});var AP={bindSocketToHub:i().func,connectTimeout:i().number,onConnected:i().func,onConnecting:i().func,onConnectionError:i().func,onConnectionTimeout:i().func,onDisconnected:i().func,onMessage:i().func,pingInterval:i().number,pingTimeout:i().number,url:i().string},SP={connectTimeout:5e3,pingInterval:5e3,pingTimeout:5e3},EP=function(e){function t(){return cP(this,t),fP(this,t,arguments)}return mP(t,e),uP(t,[{key:"render",value:function(){var e=this.props,t=e.bindSocketToHub,n=e.connectTimeout,r=e.onConnected,o=e.onConnecting,a=e.onConnectionError,i=e.onConnectionTimeout,c=e.onDisconnected,s=e.onMessage,u=e.pingInterval,f=e.pingTimeout,d=e.url;return l.createElement(l.Fragment,null,l.createElement(Vj.A.Socket,{ref:t,name:"serverSocket",url:d,options:{connectTimeout:n,pingInterval:u,pingTimeout:f,transports:["websocket"]}}),l.createElement(Vj.A.Listener,{socket:"serverSocket",event:"connect",callback:function(){return r({url:d})}}),l.createElement(Vj.A.Listener,{socket:"serverSocket",event:"connect_error",callback:function(){return a({url:d,willReconnect:!0})}}),l.createElement(Vj.A.Listener,{socket:"serverSocket",event:"connect_timeout",callback:function(){return i({url:d,willReconnect:!0})}}),l.createElement(Vj.A.Listener,{socket:"serverSocket",event:"disconnect",callback:function(e){c({url:d,reason:e,willReconnect:"ping timeout"===e||"transport close"===e})}}),l.createElement(Vj.A.Listener,{socket:"serverSocket",event:"fw",callback:s}),l.createElement(Vj.A.Listener,{socket:"serverSocket",event:"reconnecting",callback:function(){return o({url:d})}}),l.createElement(Vj.A.Listener,{socket:"serverSocket",event:"reconnect_attempt",callback:function(){return o({url:d})}}))}}])}(l.Component);gP(EP,"propTypes",AP),gP(EP,"defaultProps",SP);var OP=new WeakMap,wP=new WeakMap,TP=function(e){function t(){var e;cP(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return oP(e=fP(this,t,[].concat(r)),OP,void 0),oP(e,wP,void 0),e}return mP(t,e),uP(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.bindSocketToHub,r=t.connectTimeout,o=t.onConnected,a=t.onConnecting,i=t.onConnectionError,l=t.onConnectionTimeout,c=t.onDisconnected,s=t.onMessage,u=t.pingInterval,f=t.pingTimeout,d=t.url;iP(wP,this,window.bridge.createTCPSocket(this.props.url.match(".*://(?<address>.*):(?<port>.*)").groups,{connectTimeout:r,reconnecting:!0,url:d},{onConnected:o,onConnecting:a,onConnectionError:i,onConnectionTimeout:l,onDisconnected:c,onMessage:s})),n({socket:aP(wP,this)});var p=function(){var t=rP(eP().m(function t(){var n;return eP().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=!0,t.p=1,t.n=2,(0,sr.A)(Fr.A.sendMessage("SYS-PING"),{milliseconds:f});case 2:t.n=4;break;case 3:t.p=3,t.v,n=!1;case 4:aP(wP,e)&&aP(wP,e).notifyPing(n);case 5:return t.a(2)}},t,null,[[1,3]])}));return function(){return t.apply(this,arguments)}}();p(),iP(OP,this,setInterval(p,u))}},{key:"componentWillUnmount",value:function(){aP(wP,this)&&aP(wP,this).end(),aP(OP,this)&&clearInterval(aP(OP,this))}},{key:"render",value:function(){return null}}])}(l.Component);gP(TP,"propTypes",AP),gP(TP,"defaultProps",SP);var CP=function(e){function t(){var e;cP(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return gP(e=fP(this,t,[].concat(r)),"_bindSocketToHub",function(t){var n=t?t.socket:null;Fr.A.emitter=n?n.emit.bind(n):void 0,e.props.onConnecting&&t&&e.props.onConnecting(e.props.url)}),e}return mP(t,e),uP(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.active,r=t.onDisconnected;e.active&&!n&&r&&r(e.url,{reason:"io client disconnect"})}},{key:"render",value:function(){var e=this.props,t=e.active,n=e.cliArguments,r=e.needsLocalServer,o=e.port,a=e.protocol,i=e.onConnected,c=e.onConnecting,s=e.onConnectionError,u=e.onConnectionTimeout,f=e.onDisconnected,d=e.onLocalServerError,p=e.onLocalServerStarted,m=e.onLogMessageReceivedFromLocalServer,y=e.onMessage,g=e.url,b=gP(gP({},ka.Z.TCP,TP),ka.Z.WS,EP)[a];return g&&t?l.createElement("div",{key:g},r?l.createElement(hP,{args:n,port:o,onError:d,onLogMessage:m,onStarted:p}):null,l.createElement(b,{bindSocketToHub:this._bindSocketToHub,url:g,onConnected:i,onConnecting:c,onConnectionError:s,onConnectionTimeout:u,onDisconnected:f,onMessage:y})):l.createElement("div",null)}}])}(l.Component);function IP(e,t){return xP.apply(this,arguments)}function xP(){return xP=rP(eP().m(function e(t,n){var r,a,i,l,c,s,u,f,d,p,m,y,g,b,v,h;return eP().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Fr.A.sendMessage("SYS-VER");case 1:return a=e.v,i=a.body.version,t((0,Xr.wT)(i)),e.n=2,Fr.A.sendMessage("CONN-LIST");case 2:return r=e.v,l=r.body.ids||[],e.n=3,Fr.A.sendMessage({type:"CONN-INF",ids:l});case 3:return r=e.v,(0,$j.q)(r.body,t),e.n=4,Fr.A.sendMessage("CLK-LIST");case 4:return r=e.v,c=r.body.ids||[],e.n=5,Fr.A.sendMessage({type:"CLK-INF",ids:c});case 5:return r=e.v,(0,Yj.i)(r.body,t),e.n=6,Fr.A.sendMessage({type:"OBJ-LIST",filter:["dock"]});case 6:if(r=e.v,!((s=r.body.ids||[]).length>0)){e.n=8;break}return e.n=7,Fr.A.sendMessage({type:"DOCK-INF",ids:s});case 7:r=e.v,(0,Zj.$)(r.body,t);case 8:return e.n=9,Fr.A.sendMessage({type:"OBJ-LIST",filter:["beacon"]});case 9:if(r=e.v,!((u=r.body.ids||[]).length>0)){e.n=12;break}return e.n=10,Fr.A.sendMessage({type:"BCN-INF",ids:u});case 10:return r=e.v,(0,Kj.o0)(r.body,t),e.n=11,Fr.A.sendMessage({type:"BCN-PROPS",ids:u});case 11:r=e.v,(0,Kj.d2)(r.body,t);case 12:return f=["virtual_uavs","map_cache","studio"],y=t,g=Xr.S6,e.n=13,Promise.all(f.map(function(){var e=rP(eP().m(function e(t){var n,r;return eP().w(function(e){for(;;)switch(e.n){case 0:return n=t,e.n=1,Fr.A.query.isExtensionLoaded(t);case 1:return r=e.v,e.a(2,{name:n,data:r})}},e)}));return function(t){return e.apply(this,arguments)}}()));case 13:return y(g(e.v)),e.p=14,e.n=15,Fr.A.query.getServerPortMapping();case 15:d=e.v,t((0,Xr.Z$)(null!=d?d:{})),e.n=17;break;case 16:e.p=16,e.v;case 17:return b=t,v=Xr.DY,e.n=18,Fr.A.query.getLicenseInformation();case 18:return b(v(e.v)),e.n=19,Fr.A.query.isExtensionLoaded("show");case 19:return e.v&&t((0,Tp.L5)("fromServer")),Fr.A._deviceTreeSubscriptionManager.requestSubscriptionUpdates(),e.n=20,t(Dr(Fr.A,{method:"threshold"}));case 20:o.A.server.warnClockSkew&&(0,Ar._r)(n())&&!(0,Ar.$9)(n())&&(p=(0,Ar.my)(n()),m=vP(Math.abs(p)),t((0,Ci.Ds)({message:"Server clock is ".concat(p>0?"ahead":"behind"," by ").concat(m),buttons:[{label:"Details",action:(0,Xr.d)()}],semantics:Ii.N.WARNING,permanent:!0}))),e.n=22;break;case 21:e.p=21,h=e.v,(0,ur.Ay)(h);case 22:return e.a(2)}},e,null,[[14,16],[0,21]])})),xP.apply(this,arguments)}function jP(e){return PP.apply(this,arguments)}function PP(){return(PP=rP(eP().m(function e(t){return eP().w(function(e){for(;;)switch(e.n){case 0:t((0,Bj.IE)()),t((0,zj.At)()),t((0,Hj.mN)()),t((0,Wj.v1)()),t((0,Xr.e3)()),t((0,Xr.W6)()),t((0,Xr.yy)()),t((0,Tp.b1)()),t((0,Xr.nm)()),t((0,qj.mh)());case 1:return e.a(2)}},e)}))).apply(this,arguments)}gP(CP,"propTypes",{active:i().bool,cliArguments:i().string,needsLocalServer:i().bool,port:i().number,protocol:i().oneOf(Object.values(ka.Z)),onConnected:i().func,onConnecting:i().func,onConnectionError:i().func,onConnectionTimeout:i().func,onDisconnected:i().func,onLocalServerError:i().func,onLocalServerStarted:i().func,onLogMessageReceivedFromLocalServer:i().func,onMessage:i().func,url:i().string});var kP=function(e){return function(t,n){var r=e.url,o=e.reason,a=e.wasConnected,i=e.willReconnect;switch(t((0,Xr.am)(zl.KN.DISCONNECTED)),o){case"connection error":i||t((0,Ci.Qg)("Error while connecting to Skybrush server"));break;case"connection timeout":i||t((0,Ci.Qg)("Timeout while connecting to Skybrush server"));break;case"io client disconnect":t((0,Ci.Ds)("Disconnected from Skybrush server"));break;case"io server disconnect":default:break;case"transport close":t((0,Ci.Qg)("Skybrush server closed connection unexpectedly"));break;case"ping timeout":t((0,Ci.Qg)("Connection to Skybrush server lost"))}i||(r!==(0,Ar.Tt)(n())||t(Tr()));a&&t(jP)}},_P=(0,u.Ng)(function(e){return{active:e.dialogs.serverSettings.active&&!e.session.isExpired,cliArguments:e.settings.localServer.cliArguments,needsLocalServer:Nt(e),port:(0,Ar.D0)(e),protocol:(0,Ar.nm)(e),url:(0,Ar.Tt)(e)}},function(e){return{onConnecting:function(){e((0,Xr.am)(zl.KN.CONNECTING))},onConnected:function(){e((0,Ci.Ds)({message:Be.A.t("notifications.connectedToSkybrushServer"),semantics:"info"})),e((0,Xr.am)(zl.KN.CONNECTED)),e(IP)},onConnectionError:function(t){e(kP(Qj(Qj({},t),{},{reason:"connection error"})))},onConnectionTimeout:function(t){e(kP(Qj(Qj({},t),{},{reason:"connection timeout"})))},onDisconnected:function(t){e(kP(Qj(Qj({},t),{},{wasConnected:!0})))},onLocalServerError:function(t,n){var r=n?"Skybrush server died unexpectedly":"Failed to launch local Skybrush server";e((0,Xr.am)(zl.KN.DISCONNECTED)),e((0,Ci.Qg)(t?"".concat(r,": ").concat(t):r))},onLocalServerStarted:function(){e((0,Xr.am)(zl.KN.CONNECTING))},onLogMessageReceivedFromLocalServer:function(t){var n=t.id,r=t.levelname,o=t.name,a=t.message,i=(o="string"==typeof o?o:"").lastIndexOf("."),l=i>=0?o.slice(i+1):o,c={level:(0,cf.LW)(r),module:l,message:a};(0,nt.default)(n)||(c.auxiliaryId=n),e((0,Hu.fp)(c))},onMessage:function(e){Fr.A.processIncomingMessage(e)}}})(CP);const NP=_P;n(36033);function RP(e){return RP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RP(e)}function DP(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return MP(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?MP(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function MP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function LP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zP(r.key),r)}}function FP(e,t,n){return t=GP(t),function(e,t){if(t&&("object"==RP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,UP()?Reflect.construct(t,n||[],GP(e).constructor):t.apply(e,n))}function UP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(UP=function(){return!!e})()}function GP(e){return GP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},GP(e)}function VP(e,t){return VP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},VP(e,t)}function BP(e,t,n){return(t=zP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zP(e){var t=function(e,t){if("object"!=RP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=RP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RP(t)?t:t+""}var HP=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=FP(this,t))._container=document.createElement("div"),e._externalWindow=null,e._mutationObserver=null,e._styleRegistry=new Map,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VP(e,t)}(t,e),function(e,t,n){return t&&LP(e.prototype,t),n&&LP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.height,n=e.left,r=e.top,o=e.width;this._externalWindow=window.open("about:blank#".concat(this.props.title),"","width=".concat(o,",height=").concat(t,",left=").concat(n,",top=").concat(r)),this._externalWindow.document.title=this.props.title,this._copyAndFollowStyles(),this._externalWindow.document.body.append(this._container),this._externalWindow.addEventListener("unload",this.props.onClose),window.addEventListener("unload",this.componentWillUnmount.bind(this))}},{key:"componentWillUnmount",value:function(){this._externalWindow.closed||this._externalWindow.close(),this._mutationObserver.disconnect()}},{key:"render",value:function(){return ki.createPortal(l.createElement(vc.Bz.Provider,{value:this._container},this.props.children),this._container)}},{key:"_copyAndFollowStyles",value:function(){var e,t=this,n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return t._externalWindow.document.head.append(e)},r=t._externalWindow.document.importNode(e,!0);n(r);var o,a=DP(e.sheet.cssRules);try{for(a.s();!(o=a.n()).done;){var i=o.value;r.sheet.insertRule(i.cssText)}}catch(e){a.e(e)}finally{a.f()}return r},r=function(e){if(null!==e)return t._styleRegistry.has(e)?function(n){return t._styleRegistry.get(e).before(n)}:r(e.nextElementSibling)},o=DP(document.styleSheets);try{for(o.s();!(e=o.n()).done;){var a=e.value;this._styleRegistry.set(a.ownerNode,n(a.ownerNode))}}catch(e){o.e(e)}finally{o.f()}this._mutationObserver=new MutationObserver(function(e,o){var a,i=DP(e);try{for(i.s();!(a=i.n()).done;){var l,c=a.value,s=DP(c.removedNodes);try{for(s.s();!(l=s.n()).done;){var u=l.value;t._styleRegistry.has(u)&&(t._styleRegistry.get(u).remove(),t._styleRegistry.delete(u))}}catch(e){s.e(e)}finally{s.f()}var f,d=r(c.nextSibling),p=DP(c.addedNodes);try{for(p.s();!(f=p.n()).done;){var m=f.value;m instanceof HTMLStyleElement&&m.sheet&&t._styleRegistry.set(m,n(m,d))}}catch(e){p.e(e)}finally{p.f()}}}catch(e){i.e(e)}finally{i.f()}}),this._mutationObserver.observe(document.head,{childList:!0})}}])}(l.Component);BP(HP,"propTypes",{children:i().node.isRequired,height:i().number,left:i().number,onClose:i().func,title:i().string,top:i().number,width:i().number}),BP(HP,"defaultProps",{height:400,left:100,title:"Untitled",top:100,width:600});var WP=function(e){var t=e.attachPanel;return e.detachedPanels.map(function(e){var n=cw[e],r=n.component,o=n.label;return l.createElement(HP,{key:e,title:o,onClose:function(){return t(e)}},l.createElement(r,null))})};WP.propTypes={attachPanel:i().func.isRequired,detachedPanels:i().arrayOf(i().string)};const qP=(0,u.Ng)(function(e){return{detachedPanels:Ni(e)}},{attachPanel:Di.yv})(WP);var KP=n(17095),YP=function(e){e.dockId;switch(e.selectedTab){case"status":return l.createElement(St.A,null,l.createElement(Et.A,null,l.createElement(M.BG,{status:"success"}),l.createElement(wt.A,{primary:"Door closed"})),l.createElement(Et.A,null,l.createElement(M.BG,{status:"success"}),l.createElement(wt.A,{primary:"Tilt angle: 0.7\xb0"})),l.createElement(by.A,null,"Landing pad 1"),l.createElement(Et.A,null,l.createElement(M.BG,{status:"success"}),l.createElement(wt.A,{primary:"Landing pad is at the bottom"})),l.createElement(Et.A,null,l.createElement(M.BG,{status:"success"}),l.createElement(wt.A,{primary:"Tweezers touching drone leg (left, right)"})),l.createElement(Et.A,null,l.createElement(M.BG,{status:"info"}),l.createElement(wt.A,{primary:"Drone is charging",secondary:"11.6V \u2022 Time until full: 17m 12s"})));case"schedule":return l.createElement(St.A,{dense:!0},l.createElement(by.A,null,"Upcoming missions"),l.createElement(ListItem,null,l.createElement(M.BG,{status:"next",size:"small"}),l.createElement(wt.A,{primary:"Takeoff + landing test",secondary:"Scheduled: 2021-07-26 18:10 UTC"})),l.createElement(ListItem,null,l.createElement(M.BG,{status:"off",size:"small"}),l.createElement(wt.A,{primary:"Takeoff + landing test",secondary:"Scheduled: 2021-07-26 19:10 UTC"})),l.createElement(by.A,null,"Past missions"),l.createElement(ListItem,null,l.createElement(M.BG,{status:"success",size:"small"}),l.createElement(wt.A,{primary:"Takeoff + landing test",secondary:"2021-07-26 17:10 UTC \u2022 0m 57s"})),l.createElement(ListItem,null,l.createElement(M.BG,{status:"success",size:"small"}),l.createElement(wt.A,{primary:"Takeoff + landing test",secondary:"2021-07-26 16:10 UTC \u2022 0m 57s"})),l.createElement(ListItem,null,l.createElement(M.BG,{status:"error",size:"small"}),l.createElement(wt.A,{primary:"Takeoff + landing test",secondary:"2021-07-26 15:10 UTC \u2022 Prearm checks failed"})));case"storage":return l.createElement(l.Fragment,null,l.createElement(St.A,null,l.createElement(ListItem,null,l.createElement(M.BG,{status:"success"}),l.createElement(wt.A,{primary:"/dev/mmcblk0p1 \u2022 System",secondary:"4.0 GB used \u2022 9.8 GB free \u2022 29%"})),l.createElement(ListItem,null,l.createElement(M.BG,{status:"success"}),l.createElement(wt.A,{primary:"/dev/mmcblk0p5 \u2022 Data storage",secondary:"0.5 GB used \u2022 63.1 GB free \u2022 0.8%"}),l.createElement(pl.A,null,l.createElement(ce.A,{size:"large"},l.createElement(KP.A,null)))),l.createElement(Xs.A,null)),l.createElement(St.A,null,l.createElement(by.A,null,"Synchronization log"),l.createElement(ListItem,null,l.createElement(M.BG,{status:"info"}),l.createElement(wt.A,{primary:"Click on a sync button to start"}))));case"liveCam":return l.createElement("video",{autoPlay:!0,loop:!0,muted:!0,poster:"//cam.idokep.hu/cam/schonherz1/thumbnail.jpg",width:"380",height:"284"},l.createElement("source",{src:"//cam.idokep.hu/cam/schonherz1/animation.webm"}),l.createElement("source",{src:"//cam.idokep.hu/cam/schonherz1/animation.mp4"}),l.createElement("img",{src:"//cam.idokep.hu/cam/schonherz1/thumbnail.jpg",width:"380",height:"284",id:"schonherz1"}));default:return null}};YP.propTypes={dockId:i().string,selectedTab:i().oneOf(["status","schedule","storage","liveCam"])};const $P=(0,u.Ng)(function(e){return{dockId:(0,oc.eR)(e),selectedTab:(0,oc.RA)(e)}})(YP);var ZP=n(71880),JP=n(94077),XP=(0,Bt.n9)(function(e){return{root:{lineHeight:"normal",fontSize:"small",width:"100%","& .muted":{color:e.palette.text.disabled}},header:{textTransform:"uppercase",color:e.palette.text.secondary},value:{textAlign:"right"},separator:{}}}),QP=l.createElement("span",{className:"muted"},"\u2014"),ek=function(e){var t=e.items,n=XP();return l.createElement("table",{className:n.root},l.createElement("tbody",null,t.map(function(e){return Array.isArray(e)?l.createElement("tr",{key:e[0]},l.createElement("td",{className:n.header},e[0]),l.createElement("td",{className:n.value},(0,nt.default)(e[1])?QP:e[1])):l.createElement("tr",{key:e},l.createElement("td",{className:n.separator,colSpan:2}))})))};ek.propTypes={items:i().arrayOf(i().oneOfType([i().string,i().arrayOf(i().node)]))};const tk=ek;function nk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rk(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rk(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ok=(0,Bt.n9)(function(e){return{root:{padding:e.spacing(2),minWidth:185,flex:1,display:"flex",flexDirection:"column"},avatar:{display:"flex",flexDirection:"column"},summary:{paddingLeft:e.spacing(2)},toolbar:{justifyContent:"center",padding:e.spacing(1,0)},toolbarInner:{display:"flex",flexDirection:"row",flexWrap:"wrap",maxWidth:144,"& > button":{padding:8}}}}),ak=function(e){var t=e.dockId,n=nk((0,SC.A)(!1),2),r=n[0],o=n[1],a=ok();return l.createElement(F.A,{className:a.root},l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center"}},l.createElement(F.A,{className:a.avatar},l.createElement(OA,{label:"OK",status:"success"})),l.createElement(F.A,{className:a.summary},l.createElement(U.A,{variant:"body1"},t),r?l.createElement(M.E3,{key:"status",status:"success"},"Automatic mode"):l.createElement(M.E3,{key:"status",status:"warning"},"Manual mode"))),l.createElement(kc.A,{disableGutters:!0,variant:"dense",className:a.toolbar},l.createElement(F.A,{className:a.toolbarInner},l.createElement(M.m_,{content:"Open door"},l.createElement(ce.A,{size:"small"},l.createElement(ZP.A,{fontSize:"small"}))),l.createElement(M.m_,{content:"Close door"},l.createElement(ce.A,{size:"small"},l.createElement(JP.A,{fontSize:"small"}))),l.createElement(M.m_,{content:"Reboot"},l.createElement(ce.A,{size:"small"},l.createElement(Mg.A,{htmlColor:uo.Ay.error,fontSize:"small"}))),l.createElement(M.m_,{content:"Power off"},l.createElement(ce.A,{size:"small"},l.createElement(vg.A,{htmlColor:uo.Ay.error,fontSize:"small"}))))),l.createElement(tk,{items:[["Location","ELTE kert"],"sep1",["Latitude",47.474223],["Longitude",19.06188],"sep2",["Door",l.createElement(M.E3,{status:"success"},"closed")],["Temperature","31.3 \xb0C"],"sep3",["Landing pad 1",l.createElement(M.E3,{status:"next"},"charging")]]}),l.createElement(F.A,{sx:{flex:1}}),l.createElement(ne.A,{control:l.createElement(Tt.A,null),label:"Automatic mode",style:{margin:"0 !important"},checked:r,onChange:function(){return o()}}))};ak.propTypes={dockId:i().string};const ik=(0,u.Ng)(function(e){return{dockId:(0,oc.eR)(e)}},{})(ak);var lk=["dragHandleId","value"];function ck(){return ck=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ck.apply(null,arguments)}var sk=function(e){var t=e.dragHandleId,n=e.value,r=void 0===n?"status":n,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,lk);return l.createElement(M.nv,ck({alignment:"left",dragHandle:t,value:r},o),l.createElement(R.A,{label:"Status",value:"status"}),l.createElement(R.A,{label:"Schedule",value:"schedule"}),l.createElement(R.A,{label:"Storage",value:"storage"}),l.createElement(R.A,{label:"Live cam",value:"liveCam"}))};sk.propTypes={dragHandleId:i().string,value:i().string};const uk=(0,u.Ng)(function(e){return{value:(0,oc.RA)(e)}},{onChange:function(e,t){return(0,oc.vz)(t)}})(sk);var fk=function(e){var t=e.onClose,n=e.open;return l.createElement(M.aQ,{fullWidth:!0,open:n,maxWidth:"sm",sidebarComponents:l.createElement(ik,null),toolbarComponent:function(e){return l.createElement(uk,{dragHandle:e})},onClose:t},l.createElement(F.A,{sx:{position:"relative",height:448,overflow:"auto"}},l.createElement($P,null)))};fk.propTypes={open:i().bool,onClose:i().func};const dk=(0,u.Ng)(function(e){return{open:e.dialogs.dockDetails.open,selectedTab:(0,oc.RA)(e)}},{onClose:oc.Gj})(fk);var pk=n(62964),mk=n(44926),yk=n(93874),gk=n(42030),bk=function(e){var t=e.children,n=e.func,r=e.errorMessage,o=e.loadingMessage,a=e.style,i=(0,kv.A)(function(){return n?n():void 0},[n]);return i.error&&!i.loading?l.createElement(M.qq,{icon:l.createElement(cp.A,null),text:r||"An unexpected error happened",button:l.createElement(B.A,{onClick:i.retry},"Try again"),style:a}):i.loading?l.createElement(M.U5,{fullHeight:!0,label:o||"Please wait, loading...",style:a}):t?t(i.value):null};bk.propTypes={children:i().func,func:i().func,errorMessage:i().string,loadingMessage:i().string,style:i().object};const vk=bk;var hk=["getTargets"];function Ak(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return Sk(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Sk(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Sk(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,Sk(f,"constructor",s),Sk(s,"constructor",c),c.displayName="GeneratorFunction",Sk(s,o,"GeneratorFunction"),Sk(f),Sk(f,o,"Generator"),Sk(f,r,function(){return this}),Sk(f,"toString",function(){return"[object Generator]"}),(Ak=function(){return{w:a,m:d}})()}function Sk(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Sk=function(e,t,n,r){function a(t,n){Sk(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},Sk(e,t,n,r)}function Ek(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Ok(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wk(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wk(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Tk(){return Tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tk.apply(null,arguments)}var Ck=(0,ml.k3)(function(e,t){var n=e.name,r=e.id,o=t.onItemSelected;return l.createElement(Et.A,{key:r,onClick:o},l.createElement(wt.A,{primary:n,secondary:r}))},{dataProvider:"items",displayName:"FirmwareUpdateTargetSelectorPresentation",backgroundHint:l.createElement(M.qq,{header:"No firmware update targets",text:"Enable firmware update support in the server first",style:{minHeight:200}})}),Ik=function(e){var t=e.getTargets,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,hk);return l.createElement(vk,{func:t,errorMessage:"Error while loading firmware update targets from server",loadingMessage:"Retrieving firmware update targets..."},function(e){return l.createElement(Ck,Tk({items:e},n))})};Ik.propTypes={getTargets:i().func,onChange:i().func};var xk=function(e){var t,n=e.onClose,r=e.onNext,o=e.open,a=Ok((0,l.useState)(),2),i=a[0],c=a[1],s=Ok((0,l.useState)(),2),u=s[0],f=s[1],d=Nv(),p=(0,l.useMemo)(function(){return VE()(function(){return d.query.getFirmwareUpdateTargets()},{maxAge:1e4,promise:!0})},[d]),m=(0,l.useCallback)(function(){c(),f()},[f,c]);return l.createElement(M.aQ,{fullWidth:!0,open:o,maxWidth:"sm",title:"Update ".concat(null!==(t=null==i?void 0:i.name)&&void 0!==t?t:"firmware"),onClose:n},l.createElement(N.A,null,l.createElement(F.A,null,l.createElement(gk.A,{in:void 0===i},l.createElement(Ik,{getTargets:p,onChange:function(e,t){return c(t)}})),l.createElement(gk.A,{in:void 0!==i},l.createElement(Rc.A,{style:{width:"100%"},onSelected:f},l.createElement(F.A,{sx:{textAlign:"center"}},l.createElement(yk.A,{style:{fontSize:128}}),l.createElement("br",null),void 0===u?"Click or drag & drop to select file":"".concat(u.name," (").concat((0,io.Yw)(u.size),")"))))),l.createElement(gk.A,{in:void 0!==i},l.createElement(Nn.A,null,l.createElement(B.A,{startIcon:l.createElement(pk.A,null),onClick:m},"Back"),l.createElement(F.A,{sx:{flex:1}}),l.createElement(B.A,{disabled:void 0===u,endIcon:l.createElement(mk.A,null),onClick:function(){return r(i,u)}},"Next")))))};xk.propTypes={onClose:i().func,onNext:i().func,open:i().bool};const jk=(0,u.Ng)(function(e){return{open:Np(e)}},{onClose:Yx.en,onNext:function(e,t){return function(){var n,r=(n=Ak().m(function n(r){var o,a,i,l,c,s,u,f;return Ak().w(function(n){for(;;)switch(n.n){case 0:return r((0,Yx.en)()),o=r,a=tb.mP,i=_p,l=e.id,c=cr.o4,n.n=1,(0,Mc.g6)(t);case 1:s=c.fromUint8Array.call(c,n.v),u={type:i,payload:{target:l,blob:s}},f={backAction:(0,Yx.xu)()},o(a({job:u,options:f}));case 2:return n.a(2)}},n)}),function(){var e=this,t=arguments;return new Promise(function(r,o){var a=n.apply(e,t);function i(e){Ek(a,r,o,i,l,"next",e)}function l(e){Ek(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e){return r.apply(this,arguments)}}()}})(xk);n(18107),n(53921),n(67357);const Pk=()=>(e,t)=>{const n=t();e((0,xI.gW)(!(0,DS.Si)(n)))},kk=()=>(e,t)=>{e((0,xI.Eb)(!(0,DS.r2)(t()))),(0,DS.r2)(t())?e((0,Ci.Ds)("Developer mode is enabled")):e((0,Ci.Ds)("Developer mode is disabled"))};var _k,Nk;!function(e){e.GLOBAL="global",e.SHOW_CONFIGURATOR="showConfigurator"}(_k||(_k={})),function(e){e.HIDDEN="hidden"}(Nk||(Nk={}));const Rk={SHOW_CONFIGURATOR_SELECT_ALL:{name:"Select all modifiable items",sequence:"mod+a",scopes:[_k.SHOW_CONFIGURATOR]},SHOW_CONFIGURATOR_SELECT_NONE:{name:"Clear selection",sequence:"Esc",scopes:[_k.SHOW_CONFIGURATOR]},SHOW_CONFIGURATOR_UNDO:{name:"Undo the last modification of the show arrangement",sequence:"mod+z",scopes:[_k.SHOW_CONFIGURATOR]},SHOW_CONFIGURATOR_REDO:{name:"Redo the last undone modification of the show arrangement",sequence:"mod+y",scopes:[_k.SHOW_CONFIGURATOR]}},Dk={SHOW_CONFIGURATOR_SELECT_ALL:()=>(e,t)=>{const n=t(),r=(0,yb.QN)(n)??[];e((0,gb.c6)("set",[...r.map((e,t)=>(0,gl.VV)(String(t))),(0,gl.cE)(gl.H4),(0,gl.cE)(gl.kt)]))},SHOW_CONFIGURATOR_SELECT_NONE:()=>e=>e((0,gb.c6)("clear",[])),SHOW_CONFIGURATOR_UNDO:gb.ZC,SHOW_CONFIGURATOR_REDO:gb.tD};n(90744);var Mk=n(17965),Lk=n.n(Mk);const Fk=(0,rt.Mz)(yb.dw,e=>!0===e?_k.SHOW_CONFIGURATOR:_k.GLOBAL),Uk=e=>e.hotkeys.pendingUAVId,Gk=e=>e.hotkeys.dialogVisible,Vk=e=>e.hotkeys.pendingUAVId.length>0;var Bk=n(56311);function zk(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Kk(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function Hk(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return Wk(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Wk(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Wk(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,Wk(f,"constructor",s),Wk(s,"constructor",c),c.displayName="GeneratorFunction",Wk(s,o,"GeneratorFunction"),Wk(f),Wk(f,o,"Generator"),Wk(f,r,function(){return this}),Wk(f,"toString",function(){return"[object Generator]"}),(Hk=function(){return{w:a,m:d}})()}function Wk(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Wk=function(e,t,n,r){function a(t,n){Wk(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},Wk(e,t,n,r)}function qk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||Kk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kk(e,t){if(e){if("string"==typeof e)return Yk(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yk(e,t):void 0}}function Yk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $k=["","0","00","000","0000"];function Zk(e,t){var n=Number.parseInt(e);if(Number.isFinite(n)){var r=t[n-1];return(0,nt.default)(r)?void 0:r}}function Jk(e,t,n){var r,o=zk(/^\d+$/.test(e)?$k:[""]);try{for(o.s();!(r=o.n()).done;){var a=r.value+e;if((0,wo.Pz)(n,a)||t.includes(a))return a}}catch(e){o.e(e)}finally{o.f()}}function Xk(e,t){var n=t(),r=Uk(n);if(r&&"string"==typeof r&&r.length>0){var o,a=[],i=(0,Un.VZ)(n);"s"===r.charAt(0)?(o=Zk,r=r.slice(1)):o=Jk;var l,c=zk(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return Hk().m(function n(){var r,o,a,i,l,c,s,u;return Hk().w(function(n){for(;;)switch(n.n){case 0:if(!((r=e.split(t)).length>2)){n.n=1;break}return n.a(2,[]);case 1:if(o=2==r.length?r:[r[0],r[0]],a=qk(o,2),i=a[0],l=a[1],c=Number.parseInt(i),s=Number.parseInt(l),Number.isFinite(c)&&Number.isFinite(s)&&c<=s){n.n=2;break}return n.a(2,[]);case 2:u=c;case 3:if(!(u<=s)){n.n=5;break}return n.n=4,u.toString();case 4:u++,n.n=3;break;case 5:return n.a(2)}},n)})()}(r,"-"));try{for(c.s();!(l=c.n()).done;){var s=o(l.value,i,n);void 0!==s&&a.push(s)}}catch(e){c.e(e)}finally{c.f()}return e((0,uv.KY)(a)),e(t_()),a.length>0&&function(e){const t=$A(e);if(!t)return!1;if(XA(`#${t}`))return!0;const n=QA[eS.UAV_LIST];if(!n)return!1;const r=n.getIndexOfItem(e);r>=0&&n.scrollToIndex(r)}(a[0]),!0}return!1}function Qk(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).executeOnlyWithoutPendingUAVId;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(n,o){if(!Xk(n,o)||!t)return n(e.apply(void 0,r))}}}function e_(e){return function(t,n){if("s"===e)return t((0,Bk.Xe)("s")),void t((0,Bk.ul)());if("number"==typeof e&&(e=String(e)),"string"==typeof e&&1===e.length){var r=Uk(n()),o=r.split(":").pop(),a=!1;if(e>="0"&&e<="9")a=!0,o.length<10&&t((0,Bk.Xe)(r+e));else if("-"===e&&(a=!0,r.length>0&&!r.includes("-"))){var i=r.slice(-1);i>="0"&&i<="9"&&t((0,Bk.Xe)(r+e))}a&&t((0,Bk.ul)())}}}function t_(){return(0,Bk.Xe)("")}function n_(){return function(e,t){var n=t();Vk(n)?e(t_()):!function(e){return!e.alert.muted&&e.alert.count>0}(n)?(0,Un.Dj)(n)?e((0,Gn.hH)()):e((0,yl.wr)()):e((0,iI.cB)())}}var r_=function(){return function(e){!function(){const e=document.querySelector(".ol-mouse-position"),t=e?[...e.childNodes].filter(e=>e.nodeType===Node.TEXT_NODE):[],n=t[0]?.textContent;return!!n&&(Mk(n),!0)}()?e((0,Ci.Ds)({message:"Failed to copy coordinates; are you hovering over the map?",semantics:"error"})):e((0,Ci.Ds)("Coordinates copied to clipboard."))}};function o_(){return function(e,t){var n=Uk(t());n.length>0&&(e((0,Bk.Xe)(n.slice(0,-1))),e((0,Bk.ul)()))}}var a_=n(36348);const i_={...{ACTIVATE_SELECTION:{name:"Show properties dialog for selection",sequence:"enter",scopes:[_k.GLOBAL]},CLEAR_SELECTION:{name:"Clear selection",sequence:"esc",scopes:[_k.GLOBAL]},REMOVE_SELECTION:{name:"Remove selection",sequence:"del",scopes:[_k.GLOBAL]},SELECT_ALL_DRONES:{name:"Select all drones",sequence:"mod+a",scopes:[_k.GLOBAL]},SELECT_DOWN:{name:"Select next drone (vertically)",sequence:"down",group:Nk.HIDDEN,scopes:[_k.GLOBAL]},SELECT_UP:{name:"Select previous drone (vertically)",sequence:"up",group:Nk.HIDDEN,scopes:[_k.GLOBAL]},SELECT_LEFT:{name:"Select previous drone (horizontally)",sequence:"left",group:Nk.HIDDEN,scopes:[_k.GLOBAL]},SELECT_RIGHT:{name:"Select next drone (horizontally)",sequence:"right",group:Nk.HIDDEN,scopes:[_k.GLOBAL]},SELECT_FIRST:{name:"Select first drone",sequence:"home",group:Nk.HIDDEN,scopes:[_k.GLOBAL]},SELECT_LAST:{name:"Select last drone",sequence:"end",group:Nk.HIDDEN,scopes:[_k.GLOBAL]},PAGE_UP:{name:"Page up",sequence:"pageup",group:Nk.HIDDEN,scopes:[_k.GLOBAL]},PAGE_DOWN:{name:"Page down",sequence:"pagedown",group:Nk.HIDDEN,scopes:[_k.GLOBAL]}},...{TOGGLE_BROADCAST_MODE_LEGACY:{name:"Toggle the broadcast mode switch (legacy version)",sequence:"mod+b",group:Nk.HIDDEN,scopes:[_k.GLOBAL]},TOGGLE_BROADCAST_MODE:{name:"Toggle the broadcast mode switch",sequence:"b",scopes:[_k.GLOBAL]},TOGGLE_PREFERRED_CHANNEL:{name:"Toggle the preferred channel switch",sequence:"c",scopes:[_k.GLOBAL]},TOGGLE_DEVELOPER_MODE:{name:"Toggle the developer mode switch",sequence:"mod+shift+d",group:Nk.HIDDEN,scopes:[_k.GLOBAL]},TOGGLE_SORT_BY_MISSION_ID:{name:"Toggle sorting UAVs by mission IDs",sequence:"mod+s",scopes:[_k.GLOBAL]}},...{SEND_FLASH_LIGHTS_COMMAND:{name:"Flash lights on selected UAVs",sequence:"w",scopes:[_k.GLOBAL]},SEND_TAKEOFF_COMMAND:{name:"Send takeoff command to selection",sequence:"mod+alt+t",scopes:[_k.GLOBAL]},SEND_LANDING_COMMAND:{name:"Send landing command to selection",sequence:"mod+alt+l",scopes:[_k.GLOBAL]},SEND_POSITION_HOLD_COMMAND:{name:"Send position hold command to selection",sequence:"mod+alt+p",scopes:[_k.GLOBAL]},SEND_RTH_COMMAND:{name:"Send return to home command to selection",sequence:"mod+alt+r",scopes:[_k.GLOBAL]}},...{TYPE_S:{name:"Prepend S to the pending UAV ID",sequence:"s",group:Nk.HIDDEN,scopes:[_k.GLOBAL]},TYPE_MINUS:{name:"Define a range of pending UAV IDs",sequence:"-",group:Nk.HIDDEN,scopes:[_k.GLOBAL]},DELETE_LAST_CHARACTER:{name:"Delete last character of pending UAV ID",sequence:"backspace",group:Nk.HIDDEN,scopes:[_k.GLOBAL]},...Object.fromEntries([0,1,2,3,4,5,6,7,8,9].map(e=>[`TYPE_${e}`,{name:`Append ${e} to the pending UAV ID`,sequence:String(e),group:Nk.HIDDEN,scopes:[_k.GLOBAL]}]))},...Rk,CLEAR_STORED_SETTINGS:{name:"Clear stored settings and reload",sequence:"mod+alt+c",scopes:[_k.GLOBAL]},COPY_COORDINATES:{name:"Copy coordinates to clipboard",sequence:"mod+shift+c",scopes:[_k.GLOBAL]},SHOW_HOTKEY_DIALOG:{name:"Show hotkeys",sequence:"?",group:Nk.HIDDEN,scopes:[_k.GLOBAL,_k.SHOW_CONFIGURATOR]}},l_=a_.wl?"meta+":"ctrl+",c_=e=>e.replace("mod+",l_);(e=>{for(const t of Object.values(e))"sequence"in t?t.sequence=c_(t.sequence):Array.isArray(t.sequences)&&(t.sequences=t.sequences.map(c_))})(i_);const s_=i_;function u_(e){return u_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u_(e)}function f_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f_(Object(n),!0).forEach(function(t){p_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p_(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}(0,yO.configure)({allowCombinationSubmatches:!0,ignoreRepeatedEventsWhenKeyHeldDown:!1});var g_=function(e){var t=e.activeHotkeyScope,n=e.handlers,r=Object.fromEntries(Object.entries(s_).filter(function(e){return m_(e,2)[1].scopes.includes(t)}));return l.createElement(yO.GlobalHotKeys,{allowChanges:!0,keyMap:r,handlers:n})},b_=function(e,t,n){return d_(d_({},t),(0,yT.A)(e,function(e){return function(t){t.defaultPrevented||(t.preventDefault(),n(e()))}}))};g_.propTypes={activeHotkeyScope:i().oneOf(Object.values(_k)),handlers:i().object};var v_=(0,hg.xM)({getTargetedUAVIds:function(e){return(0,DS.Si)(e)?(0,wo.Ev)(e):(0,wo.YZ)(e)},getTransportOptions:function(e){return{broadcast:(0,DS.Si)(e),channel:(0,Un.$D)(e)||0}}}),h_=function(e){return function(){var t=v_[e];return t&&"function"==typeof t?t():function(){}}};const A_=(0,u.Ng)(function(e){return{activeHotkeyScope:Fk(e)}},function(e){return{handlers:b_(d_({ACTIVATE_SELECTION:Qk(function(){return function(e,t){if(HA.hasListeners())WA("ACTIVATE_SELECTION")();else{var n=(0,wo.YZ)(t());n&&n.length>0&&e((0,EE.Te)(n.at(-1)))}}},{executeOnlyWithoutPendingUAVId:!0}),CLEAR_SELECTION:n_,COPY_COORDINATES:r_,DELETE_LAST_CHARACTER:o_,REMOVE_SELECTION:Qk(function(){return function(e){e((0,uv.VD)()),e((0,Rn.tD)()),e((0,Id._L)())}}),SELECT_ALL_DRONES:yl.lC,SEND_FLASH_LIGHTS_COMMAND:Qk(h_("flashLight")),SEND_TAKEOFF_COMMAND:h_("takeOff"),SEND_LANDING_COMMAND:h_("land"),SEND_POSITION_HOLD_COMMAND:h_("holdPosition"),SEND_RTH_COMMAND:h_("returnToHome"),SHOW_HOTKEY_DIALOG:Bk.il,TOGGLE_BROADCAST_MODE:Pk,TOGGLE_BROADCAST_MODE_LEGACY:Pk,TOGGLE_PREFERRED_CHANNEL:Gn.FQ,TOGGLE_DEVELOPER_MODE:kk,TOGGLE_SORT_BY_MISSION_ID:K.vZ,TYPE_0:function(){return e_(0)},TYPE_1:function(){return e_(1)},TYPE_2:function(){return e_(2)},TYPE_3:function(){return e_(3)},TYPE_4:function(){return e_(4)},TYPE_5:function(){return e_(5)},TYPE_6:function(){return e_(6)},TYPE_7:function(){return e_(7)},TYPE_8:function(){return e_(8)},TYPE_9:function(){return e_(9)},TYPE_S:function(){return e_("s")},TYPE_MINUS:function(){return e_("-")}},Dk),{CLEAR_STORED_SETTINGS:ul.si,PAGE_DOWN:WA("PAGE_DOWN"),PAGE_UP:WA("PAGE_UP"),SELECT_FIRST:WA("SELECT_FIRST"),SELECT_LAST:WA("SELECT_LAST"),SELECT_DOWN:WA("SELECT_DOWN"),SELECT_UP:WA("SELECT_UP"),SELECT_LEFT:WA("SELECT_LEFT"),SELECT_RIGHT:WA("SELECT_RIGHT")},e)}})(g_);var S_=n(54026),E_=n(51361),O_=n(94963),w_=n(78828);function T_(){return T_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T_.apply(null,arguments)}function C_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var x_={width:120},j_={maxWidth:"99%"},P_=function(e){var t=e.name,n=e.sequences;return l.createElement(w_.A,null,l.createElement(O_.A,{style:x_,padding:"none"},n.map(function(e){var t,n=e.sequence;return"string"!=typeof(t=n)?null:t.split("+").map(function(e){var t=e.trim().toLowerCase().replace(/^mod$/,a_.GB).replace(/^cmd$/,"\u2318").replace(/^meta$/,"\u2318").replace(/^alt$/,a_.wl?"\u2325":"Alt").replace(/^shift/,"\u21e7").replace(/^del$/,a_.wl?"\u2326":"Delete");return l.createElement("kbd",{key:e},t.charAt(0).toUpperCase()+t.slice(1))})})),l.createElement(O_.A,{style:j_},t))};P_.propTypes={name:i().string,sequences:i().arrayOf(i().shape({sequence:i().string}))};var k_=function(e){var t=e.onClose,n=e.open,r=C_((0,l.useState)(function(){return(0,yO.getApplicationKeyMap)()}),2),o=r[0],a=r[1];return(0,l.useEffect)(function(){a((0,yO.getApplicationKeyMap)())},[n]),l.createElement(M.aQ,{title:"Hotkeys",open:n,onClose:t},l.createElement(N.A,null,l.createElement(S_.A,{size:"small"},l.createElement(E_.A,null,Object.keys(o||{}).map(function(e){return o[e].group!==Nk.HIDDEN&&l.createElement(P_,T_({key:e},o[e]))})))),l.createElement(Nn.A,null,l.createElement(B.A,{color:"primary",onClick:t},"Close")))};k_.propTypes={onClose:i().func,open:i().bool};const __=(0,u.Ng)(function(e){return{open:Gk(e)}},{onClose:Bk.p})(k_),N_=(0,u.Ng)(function(e){var t=Uk(e);return{text:t,open:t.length>0}},{})(M.in);var R_=n(50174),D_=n(10038),M_=n(93855);function L_(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function F_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var U_=function(e){var t=e.expiryDate,n=e.features,r=e.id,o=e.licensee,a=e.restrictions,i=[],c=[];if(Array.isArray(n)){var s,u=L_(n);try{for(u.s();!(s=u.n()).done;){var f=s.value;i.push(l.createElement(Ft.Ay,{key:"".concat(f.type,"_").concat(f.label),disableGutters:!0},l.createElement(Ot.A,null,l.createElement(R_.A,null)),l.createElement(wt.A,{primary:f.label,secondary:f.secondaryLabel})))}}catch(e){u.e(e)}finally{u.f()}}if(Array.isArray(a)){var d,p=L_(a);try{for(p.s();!(d=p.n()).done;){var m=d.value;c.push(l.createElement(Ft.Ay,{key:"".concat(m.type,"_").concat(m.label),disableGutters:!0},l.createElement(Ot.A,null,l.createElement(M_.A,null)),l.createElement(wt.A,{primary:m.label,secondary:m.secondaryLabel})))}}catch(e){p.e(e)}finally{p.f()}}return l.createElement(St.A,{dense:!0,disablePadding:!0},l.createElement(Ft.Ay,{disableGutters:!0},l.createElement(Ot.A,null,l.createElement(Kx.A,null)),l.createElement(wt.A,{primary:"License ID",secondary:r||"No license activated"})),o&&l.createElement(Ft.Ay,{disableGutters:!0},l.createElement(Ot.A,null,l.createElement(OI.A,null)),l.createElement(wt.A,{primary:"Name of license holder",secondary:o})),r&&l.createElement(Ft.Ay,{disableGutters:!0},l.createElement(Ot.A,null,l.createElement(D_.A,null)),l.createElement(wt.A,{primary:"Expiry date",secondary:t||"This license never expires"})),i.length>0&&l.createElement(Xs.A,null),i,c.length>0&&l.createElement(Xs.A,null),c)};U_.propTypes={id:i().string,licensee:i().string,expiryDate:i().string,features:i().arrayOf(i().shape({type:i().string,label:i().string,secondaryLabel:i().string})),restrictions:i().arrayOf(i().shape({type:i().string,label:i().string,secondaryLabel:i().string}))};const G_=function(){var e=Nv(),t=(0,kv.A)(e.query.getLicenseInformation,[e]);return t.error&&!t.loading?l.createElement(M.qq,{icon:l.createElement(cp.A,null),text:"Error while loading license information",button:l.createElement(B.A,{onClick:t.retry},"Try again")}):t.value?l.createElement(U_,t.value):l.createElement(M.U5,{fullHeight:!0,label:"Retrieving license information..."})};var V_=function(e){var t=e.onClose,n=e.open;return l.createElement(M.aQ,{fullWidth:!0,open:n,maxWidth:"xs",title:"License information",onClose:t},l.createElement(N.A,null,l.createElement(G_,null)),l.createElement(Nn.A,null,l.createElement(B.A,{onClick:t},"Close")))};V_.propTypes={open:i().bool,onClose:i().func};const B_=(0,u.Ng)(function(e){return{open:e.licenseInfo.dialog.open}},{onClose:Xx.Kx})(V_);var z_=n(42095),H_=function(e){var t=e.onClearCache,n=e.onClose,r=e.isConnected,o=e.isMapCachingEnabled,a=e.isMapCachingSupported,i=e.setMapCachingEnabled,c=e.t;return l.createElement(l.Fragment,null,l.createElement(Wt,null,a?Ht.success:Ht.warning,l.createElement(wt.A,{primary:c(a?"mapCachingPanel.serverSupport":r?"mapCachingPanel.serverNotSupport":"mapCachingPanel.connectToServer")})),l.createElement(Et.A,{disableRipple:!0,onClick:function(){return i(!o)}},l.createElement(Ot.A,{style:{margin:"0 17px 0 2px"}},l.createElement(Tt.A,{checked:o})),l.createElement(wt.A,{primary:c("mapCachingPanel.useCachedMapTiles")})),l.createElement(Nn.A,null,l.createElement(B.A,{disabled:!a||!t,onClick:t},c("mapCachingPanel.clearChache")),l.createElement(F.A,{sx:{flex:1}}),l.createElement(B.A,{onClick:n},c("general.action.close"))))};H_.propTypes={isConnected:i().bool,isMapCachingEnabled:i().bool,isMapCachingSupported:i().bool,setMapCachingEnabled:i().func,onClearCache:i().func,onClose:i().func,t:i().func};const W_=(0,u.Ng)(function(e){return{isConnected:(0,Ar.UJ)(e),isMapCachingEnabled:(0,z_.j)(e),isMapCachingSupported:(0,Ar.KL)(e)}},{setMapCachingEnabled:Qx.n5})((0,D.CI)()(H_));var q_={padding:0},K_=function(e){var t=e.onClose,n=e.open,r=e.t;return l.createElement(M.aQ,{fullWidth:!0,open:n,maxWidth:"xs",title:r("mapCachingDialog.offlineMaps"),onClose:t},l.createElement(N.A,{sx:q_},l.createElement(W_,{onClose:t})))};K_.propTypes={open:i().bool,onClose:i().func,t:i().func};const Y_=(0,u.Ng)(function(e){return{open:e.mapCaching.dialog.open}},{onClose:Qx._k})((0,D.CI)()(K_));var $_=(0,rt.Mz)(Vx,Ux,function(e,t){if(2===e.length){var n=t[e[0]],r=t[e[1]];if(n&&r)return e}}),Z_=(0,rt.Mz)($_,Ux,function(e,t){if(e&&2===e.length){var n=t[e[0]],r=t[e[1]];return[[n.mean.lon,n.mean.lat],[r.mean.lon,r.mean.lat]]}}),J_=function(e){var t=e.coordinates,n=e.hasEnoughMeasurements,r=e.selectedUAVIdPair,o=e.t;if(r){var a=(0,de.dc)(t[0],t[1]).toFixed(1),i=(0,de.h7)(t[0],t[1]).toFixed(1);return l.createElement(l.Fragment,null,l.createElement(U.A,{color:"textSecondary",variant:"body2",component:"span"},r[0]," \u2192 ",r[1],":"," "),l.createElement(U.A,{variant:"body2",component:"span"},(0,io.BO)((0,sb.Yf)(t[0],t[1]))),a===i?l.createElement(l.Fragment,null,l.createElement(U.A,{color:"textSecondary",variant:"body2",component:"span"},o("bearingCalculator.bearing")),l.createElement(U.A,{variant:"body2",component:"span"},a,"\xb0")):l.createElement(l.Fragment,null,l.createElement(U.A,{color:"textSecondary",variant:"body2",component:"span"},o("bearingCalculator.initialBearing")),l.createElement(U.A,{variant:"body2",component:"span"},a,"\xb0"),l.createElement(U.A,{color:"textSecondary",variant:"body2",component:"span"},o("bearingCalculator.finalBearing")),l.createElement(U.A,{variant:"body2",component:"span"},i,"\xb0")))}return l.createElement(U.A,{color:"textSecondary",variant:"body2",align:"center"},o(n?"bearingCalculator.selectTwoItems":"bearingCalculator.addAtLeastTwoItems"))};J_.propTypes={coordinates:i().arrayOf(i().arrayOf(i().number)),hasEnoughMeasurements:i().bool,selectedUAVIdPair:i().arrayOf(i().string),t:i().func};const X_=(0,u.Ng)(function(e){return{coordinates:Z_(e),selectedUAVIdPair:$_(e),hasEnoughMeasurements:Lx(e).length>=2}})((0,D.CI)()(J_));var Q_=n(87945),eN=n(88824),tN=n(24751);function nN(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=oN(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function rN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||oN(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oN(e,t){if(e){if("string"==typeof e)return aN(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aN(e,t):void 0}}function aN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var iN=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).whenEmpty,n=void 0===t?"nop":t;return function(){return function(t,r){var o=r(),a=Vx(o);a&&0!==a.length||"useAll"!==n||(a=Lx(o)),a&&a.length>0&&t(e(a))}}},lN=iN(ej.Pl,{whenEmpty:"useAll"}),cN=iN(ej.GY),sN=iN(ej.eV,{whenEmpty:"useAll"}),uN=iN(ej.po),fN=function(e){return function(t,n){for(var r=n(),o=["lat","lon","amsl","ahl"],a={},i=0,l=Object.entries(e);i<l.length;i++){var c=rN(l[i],2),s=c[0],u=c[1],f=r.measurement.averagingResults.byId[s],d=f.numSamples+1;if(f){a[s]={lastSampleAt:Date.now(),numSamples:d,mean:{},sqDiff:{}};var p,m=nN(o);try{for(m.s();!(p=m.n()).done;){var y=p.value;if(!(0,nt.default)(u[y])){var g=u[y]-f.mean[y],b=f.mean[y]+g/d,v=(u[y]-b)*g,h=f.sqDiff[y]+v;a[s].mean[y]=b,a[s].sqDiff[y]=h}}}catch(e){m.e(e)}finally{m.f()}}}t((0,ej.jr)(a))}},dN=function(e){return function(t,n){var r=n(),o=Gx(r,e);if(o){var a=(0,To.MH)(r)(o);Lk()(a),1===e.length?t((0,Ci.Ds)("Coordinates copied to clipboard.")):t((0,Ci.Ds)("Coordinates of centroid copied to clipboard."))}}},pN=iN(dN,{whenEmpty:"useAll"}),mN=iN(function(e){return function(t,n){var r=Gx(n(),e);r&&(t((0,Ve.dK)(r)),1===e.length?t((0,Ci.Ds)("Map origin set to the coordinates of the selected UAV.")):t((0,Ci.Ds)("Map origin set to centroid of selection.")))}},{whenEmpty:"useAll"});const yN=(0,Xn.A)((0,Rt.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy");var gN=function(e){var t=e.hasMeasurements,n=e.hasSelection,r=e.onCopyCentroidOfSelection,o=e.onPauseSelected,a=e.onRemoveSelected,i=e.onRestartSelected,c=e.onResumeSelected,s=e.onSetCentroidOfSelectionAsMapOrigin,u=e.onUAVIdAdded,f=e.t;return l.createElement(M.gH,{disableGutters:!0},l.createElement(F.A,{sx:{position:"absolute",display:"flex"}},l.createElement(DA,{filterable:!0,onSelect:u},function(e){return l.createElement(M.m_,{content:f("coordinateAveragingDialogToolbar.addNewDrone")},l.createElement(ce.A,{color:"inherit",size:"large",onClick:e},l.createElement(Au.A,null)))}),l.createElement(M.m_,{content:f("coordinateAveragingDialogToolbar.removeSelected")},l.createElement(ce.A,{disabled:!n,color:"inherit",size:"large",onClick:a},l.createElement(eN.A,null))),l.createElement(Wd.A,{orientation:"vertical"}),l.createElement(M.m_,{content:f("coordinateAveragingDialogToolbar.pauseMeasurement")},l.createElement(ce.A,{disabled:!t,color:"inherit",size:"large",onClick:o},l.createElement(bj.A,null))),l.createElement(M.m_,{content:f("coordinateAveragingDialogToolbar.resumeMeasurement")},l.createElement(ce.A,{disabled:!t,color:"inherit",size:"large",onClick:c},l.createElement(wl.A,null))),l.createElement(M.m_,{content:f("coordinateAveragingDialogToolbar.resetMeasurement")},l.createElement(ce.A,{disabled:!t||!n,color:"inherit",size:"large",onClick:i},l.createElement(tN.A,null))),l.createElement(Wd.A,{orientation:"vertical"}),l.createElement(M.m_,{content:f("coordinateAveragingDialogToolbar.copyCentroid")},l.createElement(ce.A,{disabled:!t,color:"inherit",size:"large",onClick:r},l.createElement(yN,null))),l.createElement(M.m_,{content:f("coordinateAveragingDialogToolbar.setCentroidAsMapOrigin")},l.createElement(ce.A,{disabled:!t,color:"inherit",size:"large",onClick:s},l.createElement(Q_.A,null)))))};gN.propTypes={hasMeasurements:i().bool,hasSelection:i().bool,onCopyCentroidOfSelection:i().func,onPauseSelected:i().func,onRemoveSelected:i().func,onResumeSelected:i().func,onRestartSelected:i().func,onSetCentroidOfSelectionAsMapOrigin:i().func,onUAVIdAdded:i().func,t:i().func};const bN=(0,u.Ng)(function(e){return{hasMeasurements:Bx(e),hasSelection:Hx(e)}},{onCopyCentroidOfSelection:pN,onPauseSelected:lN,onRemoveSelected:uN,onResumeSelected:sN,onRestartSelected:cN,onSetCentroidOfSelectionAsMapOrigin:mN,onUAVIdAdded:ej.RQ})((0,D.CI)()(gN));var vN=["coordinateFormatter","measurement","onCopy"];function hN(){return hN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hN.apply(null,arguments)}var AN=function(e,t,n){return t>0&&n>1?"".concat(e.toFixed(1)," \xb1 ").concat(Math.sqrt(t/(n-1)).toFixed(1)):e.toFixed(1)},SN=(0,Bt.n9)(function(e){return{root:{fontVariantNumeric:"lining-nums tabular-nums","&>div:first-child>div:first-child":{maxWidth:44}},dim:{color:e.palette.text.secondary},avatar:{transition:e.transitions.create(["background-color","color"],{duration:e.transitions.duration.short})},sampling:{backgroundColor:uo.Ay.success,color:e.palette.getContrastText(uo.Ay.success),position:"relative"},primaryContainer:{display:"flex"},secondaryContainer:{display:"flex"},latLonCoordinatesColumn:{minWidth:180},amslColumn:{minWidth:140},ahlColumn:{minWidth:80,flex:1}}}),EN=function(e){var t,n,o=e.coordinateFormatter,a=e.measurement,i=e.onCopy,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,vN),s=SN(),u=(0,D.Bd)().t,f=a||{},d=f.extraSamplingTime,p=f.id,m=f.lastSampleAt,y=f.startedAt,g=f.mean,b=f.numSamples,v=f.sampling,h=f.sqDiff,A=o||wi.default,S=[g.lon,g.lat];return b<=0?(t=u("measurementList.waitingForSamples"),n=l.createElement("div",{className:(0,r.A)(s.dim,s.secondaryContainer)},u("measurementList.noSamplesYet"))):(t=l.createElement("div",{className:s.primaryContainer},l.createElement("div",{className:s.latLonCoordinatesColumn},A(S)),l.createElement("div",{className:s.amslColumn},AN(g.amsl,h.amsl,b),"m ",l.createElement("span",{className:s.dim},"AMSL")),l.createElement("div",{className:s.ahlColumn},AN(g.ahl,h.ahl,b),"m ",l.createElement("span",{className:s.dim},"AHL"))),n=l.createElement("div",{className:s.secondaryContainer},l.createElement("div",{className:s.latLonCoordinatesColumn},function(e,t,n){if(n<2)return"0";var r=Math.sqrt(t.lat/(n-1)),o=Math.sqrt(t.lon/(n-1)),a=(0,sb.Yf)([e.lon-o,e.lat-r],[e.lon+o,e.lat+r])/2;return(0,io.BO)(a,1)}(g,h,b)," ",l.createElement("span",{className:s.dim},u("measurementList.stdDevInXY"))),l.createElement("div",{className:(0,r.A)(s.dim,s.amslColumn)},b," ",u("measurementList.samples")),l.createElement("div",{className:(0,r.A)(s.dim,s.ahlColumn)},"".concat(u("measurementList.duration"),": "),function(e,t,n){return(0,io.a3)((((0,nt.default)(t)||(0,nt.default)(e)?0:t-e)+(n||0))/1e3)}(y,m,d)))),l.createElement(Et.A,hN({},c,{className:s.root}),l.createElement(xd.A,null,l.createElement(xA,{id:p,variant:"minimal",crossed:!v})),l.createElement(wt.A,{disableTypography:!0,primary:t,secondary:n}),b>0&&l.createElement(pl.A,null,l.createElement(M.m_,{content:u("measurementList.copyToClipboard")},l.createElement(ce.A,{edge:"end","aria-label":"copy",size:"large",onClick:function(){return i(p)}},l.createElement(yN,null)))))};EN.propTypes={coordinateFormatter:i().func,measurement:i().shape({id:i().string,numSamples:i().number,sampling:i().bool}).isRequired,onCopy:i().func};var ON=(0,ml.T_)(function(e,t,n){return l.createElement(EN,{key:e.id,coordinateFormatter:t.coordinateFormatter,measurement:e,selected:n,onClick:t.onItemSelected,onCopy:t.onCopy})},{dataProvider:"measurements",backgroundHint:l.createElement(D.wD,null,function(e){return l.createElement(M.qq,{style:{padding:16},text:e("measurementList.addDrone")})})});const wN=(0,u.Ng)(function(e){return{coordinateFormatter:(0,To.MH)(e),dense:!0,fullWidth:!0,measurements:Fx(e),value:Vx(e)}},{onChange:ej.Xu,onCopy:function(e){return function(t){return t(dN([e]))}}})(ON);var TN=function(e){var t=e.onClose,n=e.open;return l.createElement(_.A,{fullWidth:!0,open:n,maxWidth:"sm",onClose:t},l.createElement(bN,null),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",alignItems:"stretch",minHeight:240}},l.createElement(F.A,{sx:{flex:1}},l.createElement(wN,null))),l.createElement(F.A,{className:"bottom-bar",sx:{textAlign:"center",py:1}},l.createElement(X_,null)))};TN.propTypes={open:i().bool,onClose:i().func};const CN=(0,u.Ng)(function(e){return{open:e.measurement.averagingDialog.open}},{onClose:ej.np})(TN);n(50113),n(72577);var IN=n(79618),xN=n(58962),jN=n(80853),PN=n(44030),kN=n(96034),_N=n(41343),NN=(n(31415),n(46972));function RN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||DN(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DN(e,t){if(e){if("string"==typeof e)return MN(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?MN(e,t):void 0}}function MN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function LN(e){return LN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LN(e)}var FN=function(e,t,n){t in e||(e[t]=[]),e[t].push(n)};function UN(e){((0,nt.default)(e)||"object"!==LN(e)||"object"!==e.type)&&(e={}),e=structuredClone(e);var t={},n=[],r={schema:e,uiContexts:t};if(e.properties){for(var o=0,a=Object.entries(e.properties);o<a.length;o++){var i=RN(a[o],2),l=i[0],c=i[1];if(c.uiContextHint&&!c["ui:contextHint"]&&(c["ui:contextHint"]=c.uiContextHint,delete c.uiContextHint),c["ui:contextHint"]){var s=c["ui:contextHint"];NN.Qf.includes(s)&&(FN(t,s,l),n.push(l),delete c["ui:contextHint"])}}var u,f=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=DN(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(n);try{for(f.s();!(u=f.n()).done;){var d=u.value;delete e.properties[d]}}catch(e){f.e(e)}finally{f.f()}e.required&&(e.required=e.required.filter(function(e){return!n.includes(e)}))}return r}function GN(e){return GN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GN(e)}function VN(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return BN(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(BN(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,BN(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,BN(f,"constructor",s),BN(s,"constructor",c),c.displayName="GeneratorFunction",BN(s,o,"GeneratorFunction"),BN(f),BN(f,o,"Generator"),BN(f,r,function(){return this}),BN(f,"toString",function(){return"[object Generator]"}),(VN=function(){return{w:a,m:d}})()}function BN(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}BN=function(e,t,n,r){function a(t,n){BN(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},BN(e,t,n,r)}function zN(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function HN(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){zN(a,r,o,i,l,"next",e)}function l(e){zN(a,r,o,i,l,"throw",e)}i(void 0)})}}function WN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WN(Object(n),!0).forEach(function(t){KN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function KN(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=GN(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=GN(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==GN(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $N(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ZN(){return ZN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZN.apply(null,arguments)}var JN=(0,Bt.n9)(function(e){return{tabs:{minHeight:36,position:"sticky",top:0,backgroundColor:e.palette.background.paper,zIndex:1100},tab:{minHeight:36,textTransform:"capitalize"}}}),XN={"ui:options":{submitButtonOptions:{norender:!0}}},QN=function(e,t){return t.startsWith("ui:")},eR=function(e){var t;return null!==(t=e["ui:group"])&&void 0!==t?t:"default"},tR=(0,IN.nC)().widgets.TextWidget,nR=l.forwardRef(function(e,t){return l.createElement(tR,ZN({ref:t},e,{onWheel:function(e){e.target.blur()}}))}),rR=function(e){var t=e.onChange,n=e.parameters,r=e.schema,o=(0,l.useMemo)(function(){return(0,kN.A)(r,QN)},[r]),a=(0,l.useMemo)(function(){return(0,as.A)(r,QN)},[r]),i=(0,l.useMemo)(function(){return UN(o)},[o]),c=i.schema,s=i.uiContexts,u=(0,_N.A)("ui:order"in a?a["ui:order"].map(function(e){return eR(c.properties[e])}):Object.values(c.properties).map(eR).sort()),f=YN((0,l.useState)("default"),2),d=f[0],p=f[1],m=(0,l.useCallback)(function(e,t){return p(t)},[p]),y=(0,l.useMemo)(function(){return qN(qN({},c),{},{properties:(0,as.A)(c.properties,function(e){return eR(e)===d})})},[c,d]);(0,l.useEffect)(function(){t({fromUser:(0,jN.NV)(PN.Ay,c,n)})},[c,t]),(0,l.useEffect)(function(){t({fromContext:s})},[t,s]);var g=(0,l.useCallback)(function(e){var n=e.errors,r=e.formData;0===n.length&&t&&t({fromUser:r})},[t]),b=JN();return l.createElement(l.Fragment,null,u.length>1&&l.createElement(fA.A,{centered:!0,variant:"fullWidth",className:b.tabs,value:d,onChange:m},u.map(function(e){var t,n;return l.createElement(R.A,{key:e,className:b.tab,label:null!==(t=null==a||null===(n=a["ui:groups"])||void 0===n||null===(n=n[e])||void 0===n?void 0:n.title)&&void 0!==t?t:e,value:e})})),l.createElement(xN.lV,{schema:y,widgets:{TextWidget:nR},uiSchema:qN(qN({},XN),a),validator:PN.Ay,formData:n,onChange:g}))};rR.propTypes={onChange:i().func,parameters:i().object,schema:i().object};var oR=function(e){var t=e.getSchema,n=e.onChange,r=e.parameters,o=e.selectedType,a=(0,l.useCallback)(HN(VN().m(function e(){var n,r;return VN().w(function(e){for(;;)switch(e.n){case 0:if(!o){e.n=2;break}return e.n=1,t(o);case 1:return n=e.v,r=n.plan,e.a(2,r);case 2:return e.a(2,void 0);case 3:return e.a(2)}},e)})),[t,o]),i=(0,D.Bd)().t;return o&&l.createElement(vk,{func:a,errorMessage:i("mission.planner.schema.error"),loadingMessage:i("mission.planner.schema.loading")},function(e){return e?l.createElement(rR,{schema:e,parameters:r,onChange:n}):l.createElement(M.qq,{text:i("mission.planner.schema.notFound")})})};oR.propTypes={getSchema:i().func,onChange:i().func,parameters:i().object,selectedType:i().string};const aR=oR;var iR=["getTypes","style"];function lR(){return lR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lR.apply(null,arguments)}var cR=function(e){var t=e.name,n=e.description,r=e.onItemSelected;return l.createElement(Et.A,{onClick:r},l.createElement(wt.A,{primary:t,secondary:n}))};cR.propTypes={name:i().string,description:i().string,onItemSelected:i().func};var sR=(0,ml.k3)(function(e,t){return l.createElement(cR,lR({key:e.id},e,t))},{dataProvider:"items",displayName:"MissionTypeSelectorPresentation",backgroundHint:"No mission types"}),uR=function(e){var t=e.getTypes,n=e.style,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,iR);return l.createElement(vk,{func:t,errorMessage:"Error while loading mission types from server",loadingMessage:"Retrieving mission types...",style:n},function(e){return l.createElement(sR,lR({items:e,style:n},r))})};uR.propTypes={getTypes:i().func,onChange:i().func,style:i().object,value:i().any};const fR=uR;var dR=function(e){var t=e.onMissionTypeChange,n=e.onMissionTypeCleared,r=e.onParametersChange,o=e.parameters,a=e.selectedType,i=e.selectedTypeInfo,c=Nv(),s=(0,l.useMemo)(function(){return{getTypes:VE()(function(){return c.query.getMissionTypes({features:["plan"]})},{promise:!0}),getSchema:VE()(function(e){return c.query.getMissionTypeSchemas(e)},{promise:!0})}},[c]);return(0,l.useEffect)(function(){!c.canSend()||!a||i&&i.id===a||s.getTypes().then(function(e){var r=e.find(function(e){return e.id===a});r?t(r):n()}).catch(function(e){})},[c,s,t,a,i]),l.createElement(og,{height:400,selectedPage:a&&(null==i?void 0:i.id)===a?"parameters":"type"},l.createElement(ng,{scrollable:!0,id:"type"},l.createElement(fR,{getTypes:s.getTypes,value:a,onChange:function(e,n){return t(n)}})),l.createElement(ng,{id:"parameters",display:"flex",flexDirection:"column"},l.createElement(St.A,{disablePadding:!0},l.createElement(Wt,null,l.createElement(wt.A,{primary:(null==i?void 0:i.name)||"No mission type selected",secondary:null==i?void 0:i.description}),i&&l.createElement(pl.A,null,l.createElement(ce.A,{edge:"end","aria-label":"remove",size:"large",onClick:n},l.createElement(le.A,null))))),l.createElement(F.A,{sx:{px:2,position:"relative",flex:1,overflow:"auto"}},l.createElement(aR,{getSchema:s.getSchema,parameters:o,selectedType:a,onChange:r}))))};dR.propTypes={onMissionTypeChange:i().func,onMissionTypeCleared:i().func,onParametersChange:i().func,parameters:i().object,selectedType:i().string,selectedTypeInfo:i().shape({id:i().string,name:i().string,description:i().string})};const pR=dR;function mR(e){return mR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mR(e)}function yR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gR(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var bR=function(e){var t=e.applyGeofence,n=e.isConnectedToServer,r=e.isGeofenceOwnedByUser,o=e.onApplyGeofenceChanged,a=e.onClearMission,i=e.onClose,c=e.onInvokePlanner,s=e.onSaveContextParameters,u=e.onSaveUserParameters,f=e.onSelectedTypeChanged,d=e.open,p=e.parametersFromUser,m=e.selectedType,y=yR((0,l.useState)(null),2),g=y[0],b=y[1],v=yR((0,l.useState)(!1),2),h=v[0],A=v[1],S=(0,l.useCallback)(function(e){var t=e.fromUser,n=e.fromContext,r=!1,o=!1;void 0!==t&&(r=!0,"object"===mR(t)&&null!==t&&(u(t),o=!0)),void 0!==n&&s(n),A(Boolean(g)&&(r?o:h))},[h,s,u,g]),E=(0,l.useCallback)(function(e){f(e.id),b(e),A(Boolean(e))},[f,A,b]),O=(0,l.useCallback)(function(){f(null),S({fromUser:{},fromContext:{}}),A(!1)},[S,f,A]);return l.createElement(M.aQ,{fullWidth:!0,keepMounted:n,open:d,maxWidth:"sm",title:"Plan mission",onClose:i},l.createElement(pR,{parameters:p,selectedType:m,selectedTypeInfo:g,onMissionTypeChange:E,onMissionTypeCleared:O,onParametersChange:S}),l.createElement(Nn.A,null,l.createElement(vc.W1,{content:"Manual geofence in use",disabled:!r},l.createElement(ne.A,{label:"Generate geofence",control:l.createElement(ee.A,{disabled:r,indeterminate:r,checked:t,onChange:o}),style:{marginLeft:0}})),l.createElement(F.A,{sx:{flex:1}}),l.createElement(B.A,{onClick:i},"Close"),l.createElement(B.A,{disabled:!n||!h,color:"primary",onClick:function(){c&&h&&n&&(a(),c())}},"Create plan")))};bR.propTypes={applyGeofence:i().bool,isConnectedToServer:i().bool,isGeofenceOwnedByUser:i().bool,open:i().bool,onApplyGeofenceChanged:i().func,onClearMission:i().func,onClose:i().func,onInvokePlanner:i().func,onSaveContextParameters:i().func,onSaveUserParameters:i().func,onSelectedTypeChanged:i().func,parametersFromUser:i().object,selectedType:i().string};const vR=(0,u.Ng)(function(e){var t;return{applyGeofence:(0,Un.ij)(e),parametersFromUser:(0,Un.ok)(e),open:(0,Un.hT)(e),isConnectedToServer:(0,Ar.UJ)(e),isGeofenceOwnedByUser:"user"===(null===(t=(0,Un.TF)(e))||void 0===t?void 0:t.owner),selectedType:(0,Un.tS)(e)}},{onApplyGeofenceChanged:function(e){return(0,Gn.r1)(e.target.checked)},onClearMission:Id.O_,onClose:Gn.$V,onInvokePlanner:Id.dd,onSaveContextParameters:Gn.Gy,onSaveUserParameters:Gn.gG,onSelectedTypeChanged:Gn.Ky})(bR);var hR=function(e){var t=e.uavId,n=e.onUpdate;return ah("/".concat(t,"/waypoint/status"),n),null};hR.propTypes={uavId:i().string,onUpdate:i().func};var AR=function(e){var t=e.availableUAVIds,n=e.firstMissionUAVId,r=e.storeProgress;return t.includes(n)?l.createElement(hR,{uavId:n,onUpdate:r}):null};AR.propTypes={availableUAVIds:i().arrayOf(i().string),firstMissionUAVId:i().string,storeProgress:i().func};const SR=(0,u.Ng)(function(e){return{availableUAVIds:(0,wo.Ev)(e),firstMissionUAVId:(0,Un.VZ)(e)[0]}},{storeProgress:function(e){return function(t){if(e){var n=e.id,r=e.ratio;t((0,Gn.n2)(n)),t((0,Gn.NO)(r))}}}})(AR);var ER=n(52555);function OR(e){return OR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OR(e)}var wR=["y"];function TR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function CR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TR(Object(n),!0).forEach(function(t){IR(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function IR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=OR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=OR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OR(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xR=(0,Bt.n9)(function(e){return{root:{display:"flex",flexDirection:"column",minWidth:240},header:{display:"flex",minHeight:e.spacing(6),alignItems:"center",padding:e.spacing(0,0,0,2)},title:{textTransform:"uppercase",flex:1},list:{position:"relative",flex:1,overflow:"auto"},footer:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:e.spacing(1),textAlign:"center"}}}),jR=function(e){var t=e.canUpload,n=e.manifest,r=e.onImportItems,o=e.onRemoveItem,a=e.onRemoveAllItems,i=e.onStart,c=e.t,s=xR(),u=(0,ER.pn)(n.map(function(e,t){return CR(CR({},e),{},{y:28*t})}),{from:{position:"absolute",opacity:0},leave:{height:0,opacity:0},enter:function(e){return{y:e.y,opacity:1}},update:function(e){return{y:e.y}},key:function(e){return e.name}});return l.createElement(F.A,{className:s.root},l.createElement(F.A,{className:s.header},l.createElement(F.A,{className:s.title},"Manifest"),l.createElement(M.m_,{content:c("parameterListSidebar.removeAllItems")},l.createElement(ce.A,{disabled:!n||0===n.length,size:"large",onClick:a},l.createElement(fc.A,null)))),l.createElement(M.G7,{className:s.list},u(function(e,t){var n=e.y,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,wR),a=t.name,i=t.value;return l.createElement(ER.CS.div,{style:CR({transform:n.to(function(e){return"translate3d(0,".concat(e,"px,0)")}),width:"100%"},r)},l.createElement(Et.A,{onClick:function(){return o(a)}},l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",flexGrow:1}},l.createElement(F.A,{sx:{flexGrow:1}},a),l.createElement(F.A,{sx:{color:"text.secondary",ml:1}},i))))})),l.createElement(F.A,{className:s.footer},l.createElement(Rc.A,{startIcon:l.createElement(At.A,null),onSelected:r},c("parameterListSidebar.import")),l.createElement(B.A,{disabled:!t,endIcon:l.createElement(mk.A,null),onClick:i},c("parameterListSidebar.nextStep"))))};jR.propTypes={canUpload:i().bool,manifest:i().arrayOf(i().shape({name:i().string,value:i().string})),onImportItems:i().func,onRemoveAllItems:i().func,onRemoveItem:i().func,onStart:i().func,t:i().func};const PR=(0,u.Ng)(function(e){return{canUpload:!ij(e),manifest:cj(e)}},{onImportItems:function(e){return function(){var t=mj(fj().m(function t(n){var r,o,a;return fj().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e){t.n=1;break}return t.a(2);case 1:if(!(e.size>131072)){t.n=2;break}return n((0,Fo.f)("File too large; maximum allowed size is ".concat(128," KB"))),t.a(2);case 2:return t.p=2,t.n=3,e.text();case 3:o=t.v,r=oj(o),t.n=5;break;case 4:t.p=4,a=t.v,n((0,Fo.f)("Error while parsing parameters from file",a));case 5:Array.isArray(r)&&r.length>0&&n((0,uj._l)(r));case 6:return t.a(2)}},t,null,[[2,4]])}));return function(e){return t.apply(this,arguments)}}()},onRemoveAllItems:uj.HC,onRemoveItem:uj.pK,onStart:function(){return function(){var e=mj(fj().m(function e(t,n){var r;return fj().w(function(e){for(;;)switch(e.n){case 0:return r=sj(n()),t((0,uj.eQ)()),e.n=1,(0,fr.Ay)(150);case 1:t((0,tb.mP)({job:{type:tj,payload:r},options:{backAction:(0,uj.h5)()}}));case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()}})((0,D.CI)()(jR));function kR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var NR=function(e){var t=e.onChange,n=e.optimizeUIForTouch,r=kR((0,l.useState)(""),2),o=r[0],a=r[1],i=kR((0,l.useState)(null),2),c=i[0],s=i[1],u=(0,D.Bd)().t,f=function(e){var n,r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{n=oj(e)}catch(e){return s(e.message||String(e)),t&&t({valid:!1}),!1}return s(""),t&&(t({value:n,valid:!0,commit:o}),a((r=n.map(function(e){var t=e.name,n=e.value;return"".concat(t,"=").concat(n)}),r.length>0?r.join("\n")+"\n":""))),!0};return l.createElement(ue.A,{fullWidth:!0,multiline:!0,autoFocus:!n,error:Boolean(c),label:u("parameterUploadMainPanel.parameterNamesValues"),variant:"filled",minRows:7,helperText:c||u("parameterUploadMainPanel.specifyEntries"),value:o,onBlur:function(e){f(e.target.value)},onChange:function(e){a(e.target.value)},onKeyPress:function(e){e.shiftKey&&"Enter"===e.key&&(f(e.target.value,!0)&&a(""),e.preventDefault())}})};NR.propTypes={onChange:i().func,optimizeUIForTouch:i().bool};var RR=(0,u.Ng)(function(e){return{optimizeUIForTouch:(0,un.jz)(e)}})(NR);const DR=function(){var e=(0,u.d4)(aj),t=(0,u.wA)(),n=(0,D.Bd)().t;return l.createElement(F.A,{sx:{pt:1}},l.createElement(RR,{onChange:function(e){var n=e.value,r=e.valid,o=e.commit;r&&o&&n.length>0&&t((0,uj._l)(n))}}),l.createElement(F.A,{sx:{pt:1}},l.createElement(U.A,{variant:"body1"},l.createElement(D.x6,{i18nKey:"parameterUploadMainPanel.parameterUploadHint",components:{kbd:l.createElement("kbd",null)}}))),l.createElement(F.A,{sx:{pt:1}},l.createElement(ne.A,{style:{margin:"0"},control:l.createElement(Tt.A,{checked:e,onChange:function(e){t((0,uj.hO)(e.target.checked))}}),label:n("parameterUploadMainPanel.rebootAfterUpload")})))};var MR=(0,Bt.n9)({root:{"& div.MuiDialog-paper > div > div:first-child":{order:100,boxShadow:"2px 0 6px -2px inset rgba(0, 0, 0, 0.54)"}},dialogContent:{paddingBottom:0}}),LR=function(e){var t=e.onClose,n=e.open,r=e.t,o=MR();return l.createElement(M.aQ,{fullWidth:!0,className:o.root,open:n,maxWidth:"md",sidebarComponents:l.createElement(PR,null),title:r("parameterUploadSetupDialog.uploadParameters"),onClose:t},l.createElement(N.A,{className:o.dialogContent},l.createElement(DR,null),l.createElement(Nn.A,null,l.createElement(B.A,{onClick:t},r("general.action.close")))))};LR.propTypes={open:i().bool,onClose:i().func,t:i().func};const FR=(0,u.Ng)(function(e){return{open:lj(e)}},{onClose:uj.eQ})((0,D.CI)()(LR));var UR=n(77855),GR=n(21417);const VR=({cancelButtonLabel:e,initialValues:t,message:n,onCancel:r,onSubmit:o,schema:a,submitButtonLabel:i,type:l})=>(0,Rt.jsxs)(N.A,{children:[n&&(0,Rt.jsx)(F.A,{sx:{py:1},children:(0,Rt.jsx)(Mo.A,{children:n})}),l===GR.r.GENERIC&&(0,Rt.jsx)(xN.lV,{formData:t,schema:a,validator:PN.Ay,onSubmit:o,children:(0,Rt.jsxs)(Nn.A,{style:{padding:0},children:[(0,Rt.jsx)(B.A,{color:"primary",type:"submit",children:i??"Submit"}),(0,Rt.jsx)(B.A,{onClick:r,children:e??"Cancel"})]})}),l===GR.r.CONFIRMATION&&(0,Rt.jsxs)(Nn.A,{style:{padding:0},children:[(0,Rt.jsx)(B.A,{color:"primary",onClick:()=>{o({formData:{confirmed:!0}})},children:i??"Confirm"}),(0,Rt.jsx)(B.A,{onClick:r,children:e??"Cancel"})]})]}),BR=(0,u.Ng)(e=>e.dialogs.prompt,e=>({onCancel(){e((0,UR.rb)())},onSubmit({formData:t}){e((0,UR.Jt)(t))}}))(({onCancel:e,open:t,title:n,...r})=>(0,Rt.jsx)(M.aQ,{open:t,title:n,onClose:e,children:(0,Rt.jsx)(VR,{...r,onCancel:e})})),zR=(0,ml.c3)(({bitsPerSecondReceived:e,bitsPerSecondTransferred:t,id:n,lastUpdatedAt:r})=>{const o=void 0!==t,a=(t??0)>0,i=e>0,l=a?t:e;return(0,Rt.jsxs)(F.A,{sx:{display:"flex"},children:[(0,Rt.jsx)(F.A,{sx:{width:80,color:"text.secondary"},children:n}),(0,Rt.jsx)(F.A,{sx:{flex:1},children:(c=n,iT[c]??(c?.startsWith("rtcm2/")?`RTCMv2 message, type ${c.slice(6)}`:c?.startsWith("rtcm3/")?`RTCMv3 message, type ${c.slice(6)}`:`Unknown message, type ${c}`))}),(0,Rt.jsxs)(F.A,{sx:{width:112,ml:1,color:"text.secondary",textAlign:"right"},children:[`${l.toFixed(1)} bps `,(0,Rt.jsx)("span",{style:{color:(0,Bt.VM)(i?Bt.nW.INFO:Bt.nW.OFF)},children:"\u2193"}),o&&(0,Rt.jsx)("span",{style:{color:(0,Bt.VM)(a?Bt.nW.SUCCESS:Bt.nW.OFF)},children:"\u2191"})]}),(0,Rt.jsx)(F.A,{sx:{color:"text.secondary",width:32,textAlign:"right"},children:(0,Rt.jsx)(Bl.A,{formatter:io.ts,date:r})})]},n);var c},{dataProvider:"items",backgroundHint:(0,Rt.jsx)(D.wD,{children:e=>(0,Rt.jsx)(M.qq,{text:e("RTKMessage.noRTKMessagesYet")})})}),HR=(0,u.Ng)(e=>({dense:!0,disablePadding:!0,items:Qw(e)}),{})(zR);function WR(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return qR(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(qR(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,qR(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,qR(f,"constructor",s),qR(s,"constructor",c),c.displayName="GeneratorFunction",qR(s,o,"GeneratorFunction"),qR(f),qR(f,o,"Generator"),qR(f,r,function(){return this}),qR(f,"toString",function(){return"[object Generator]"}),(WR=function(){return{w:a,m:d}})()}function qR(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}qR=function(e,t,n,r){function a(t,n){qR(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},qR(e,t,n,r)}function KR(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var YR=function(e){return function(){var t,n=(t=WR().m(function t(n){return WR().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,Fr.A.execute.startRTKSurvey(e);case 1:t.n=3;break;case 2:return t.p=2,t.v,n((0,Ci.Ds)({message:"Failed to start RTK survey on the server.",semantics:Ii.N.ERROR})),t.a(2);case 3:n((0,Lm._N)());case 4:return t.a(2)}},t,null,[[0,2]])}),function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){KR(a,r,o,i,l,"next",e)}function l(e){KR(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}()},$R=function(e){var t=e.onCopyAntennaPositionToClipboard,n=e.onClick,r=e.position,o=e.t,a=Boolean(r);return l.createElement(l.Fragment,null,l.createElement(M.m_,{content:o("antennaPositionIndicator.clickToToggle")},l.createElement(U.A,{variant:"body2",component:"div",color:a?"textPrimary":"textSecondary",style:{cursor:"pointer",textAlign:"right"},onClick:n},r||o("antennaPositionIndicator.antennaPositionNotKnown"))),t&&l.createElement(M.m_,{content:o("antennaPositionIndicator.copyToClipboard")},l.createElement(ce.A,{disabled:!a,size:"large",onClick:t},l.createElement(yN,null))))};$R.propTypes={position:i().string,onClick:i().func,onCopyAntennaPositionToClipboard:i().func,t:i().func};const ZR=(0,u.Ng)(Xw,{onClick:function(){return function(e,t){e((0,Lm.Iy)(Zw(t())?"lonLat":"ecef"))}},onCopyAntennaPositionToClipboard:function(){return function(e,t){Lk()(Jw(t())),e((0,Ci.Ds)("Coordinates copied to clipboard."))}}})((0,D.CI)()($R));n(52811);function JR(e){return JR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JR(e)}function XR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function QR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XR(Object(n),!0).forEach(function(t){eD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=JR(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=JR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==JR(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tD=Object.freeze({datasets:Object.freeze([])});function nD(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alpha,n=void 0===t?.8:t,r=e.color,o=e.canvas,a=e.height,i=void 0===a?170:a,l=e.reverse,c=e.ctx;if(Array.isArray(r))return r.map(function(t){return nD(QR(QR({},e),{},{color:t}))});c||(c=o.getContext("2d"));var s=c.createLinearGradient(0,i,0,50);return s.addColorStop(0,(0,so.A)(r).alpha(l?n:0).string()),s.addColorStop(1,(0,so.A)(r).alpha(l?0:n).string()),s}function rD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oD(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oD(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var aD=(0,ji.Ay)(function(){return Promise.all([n.e(731),n.e(176)]).then(n.bind(n,51815))},{resolveComponent:function(e){return e.default}}),iD=[30,40],lD=["#424242",uo.Ay.error,uo.Ay.warning,uo.Ay.success],cD=(0,rt.Mz)(function(e){return e},function(e){return lD.map(function(t){return nD({ctx:e,color:t})})}),sD=function(e,t){var n=cD(t),r=Date.now(),o=e.map(function(e){var t=r-e.lastUpdatedAt;if(t>=6e4)return null;var o,a=t>=5e3?0:(o=e.cnr)<=0||(0,nt.default)(o)?0:o<iD[0]?1:o<iD[1]?2:3;return{label:e.id,value:e.cnr,backgroundColor:n[a],borderColor:lD[a]}}).filter(Boolean);return{labels:o.map(function(e){return e.label}),datasets:[{backgroundColor:o.map(function(e){return e.backgroundColor}),borderColor:o.map(function(e){return e.borderColor}),borderWidth:2,label:"CNR",data:o.map(function(e){return e.value})}]}},uD=function(e){return{plugins:{legend:{display:!1},tooltip:{titleFont:{family:Bt.ZV},bodyFont:{family:Bt.ZV},footerFont:{family:Bt.ZV},callbacks:{label:function(e){return" ".concat(e.formattedValue," dB-Hz")}}}},scales:{x:{grid:{display:!1},ticks:{font:{color:e?"rgba(255, 255, 255, 0.54)":"rgba(0, 0, 0, 0.54)",family:Bt.ZV,size:14}}},y:{grid:{borderColor:e?function(e){var t=e.index;return"rgba(255, 255, 255, ".concat(t?.17:.34,")")}:function(e){var t=e.index;return"rgba(0, 0, 0, ".concat(t?.17:.34,")")},color:e?function(e){var t=e.index;return"rgba(255, 255, 255, ".concat(t?.17:.34,")")}:function(e){var t=e.index;return"rgba(0, 0, 0, ".concat(t?.17:.34,")")}},suggestedMin:0,suggestedMax:60,ticks:{font:{color:e?"rgba(255, 255, 255, 0.54)":"rgba(0, 0, 0, 0.54)",family:Bt.ZV,size:14},maxTicksLimit:7}}},maintainAspectRatio:!1}},fD={dark:uD(!0),light:uD(!1)},dD=function(e){var t=e.height,n=void 0===t?160:t,r=e.items,o=(0,bs.A)(),a=(0,ui.A)(),i=(0,l.useRef)(null),c=rD((0,l.useState)(tD),2),s=c[0],u=c[1];return(0,fi.A)(a,1e3),(0,l.useEffect)(function(){var e=i.current;e&&u(r?sD(r,e.ctx):tD)},[i.current,r]),l.createElement(F.A,{sx:{height:n}},l.createElement(aD,{ref:i,data:s,options:(0,Bt.Mw)(o)?fD.dark:fD.light}))};dD.propTypes={height:i().number,items:i().arrayOf(i().shape({cnr:i().number,lastUpdatedAt:i().number}))};const pD=(0,u.Ng)(function(e){return{items:eT(e)}},{})(dD);var mD=n(77188),yD=["onClose","onSubmit"];function gD(){return gD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gD.apply(null,arguments)}function bD(e){return function(e){if(Array.isArray(e))return vD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return vD(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vD(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function hD(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return AD(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(AD(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,AD(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,AD(f,"constructor",s),AD(s,"constructor",c),c.displayName="GeneratorFunction",AD(s,o,"GeneratorFunction"),AD(f),AD(f,o,"Generator"),AD(f,r,function(){return this}),AD(f,"toString",function(){return"[object Generator]"}),(hD=function(){return{w:a,m:d}})()}function AD(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}AD=function(e,t,n,r){function a(t,n){AD(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},AD(e,t,n,r)}function SD(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function ED(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){SD(a,r,o,i,l,"next",e)}function l(e){SD(a,r,o,i,l,"throw",e)}i(void 0)})}}var OD=function(e){var t=e.onClose,n=e.onSubmit,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,yD),o=(0,Mm.A)(ED(hD().m(function e(){var t;return hD().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Fr.A.query.getRTKSurveySettings();case 1:return t=e.v,e.a(2,t?{accuracy:t.accuracy,duration:t.duration}:{accuracy:100,duration:60})}},e)})),[]);return l.createElement(F.A,gD({},r,{sx:[{display:"flex",flexDirection:"row",alignItems:"center"}].concat(bD(Array.isArray(r.sx)?r.sx:[r.sx]))}),l.createElement(ce.A,{size:"large",onClick:t},l.createElement(mD.A,null)),o.loading?l.createElement(M.e0,{label:"Loading..."}):o.error?l.createElement("div",null,"Failed to load survey settings from server."):l.createElement(V.lV,{initialValues:o.value,onSubmit:n},function(e){var t=e.handleSubmit;return l.createElement(l.Fragment,null,l.createElement(F.A,{sx:{p:.5}}),l.createElement(vm.Kn,{name:"accuracy",label:"Desired accuracy",min:.01,max:100,step:.01,size:"small",unit:"m",style:{flex:1}}),l.createElement(F.A,{sx:{p:1}}),l.createElement(vm.LK,{name:"duration",label:"Minimum duration",min:1,max:3600,step:1,size:"small",style:{flex:1}}),l.createElement(F.A,{sx:{p:.5}}),l.createElement(B.A,{onClick:t},"Start survey"))}))};OD.propTypes={onClose:i().func,onSubmit:i().func};const wD=(0,u.Ng)(null,{onClose:Lm.IP,onSubmit:function(e){var t=e.accuracy,n=e.duration;return YR({accuracy:Number(t),duration:Number(n)})}})(OD);var TD=n(99798),CD=["accuracy","active","supported","valid"];function ID(){return ID=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ID.apply(null,arguments)}function xD(e){return function(e){if(Array.isArray(e))return jD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return jD(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jD(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function PD(e,t){if("number"!=typeof t||t<=0)return e;var n=lT(t);return e&&0!==e.length?n&&">"===n.charAt(0)?"".concat(e,", accuracy ").concat(n):"".concat(e,", accuracy: ").concat(n):n&&">"===n.charAt(0)?"Accuracy ".concat(n):"Accuracy: ".concat(n)}var kD=function(e){var t=e.accuracy,n=e.active,r=e.supported,o=e.valid,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,CD),i=(0,D.Bd)().t;return l.createElement(TD.A,{in:r||!0},l.createElement(F.A,ID({},a,{sx:[{alignItems:"center",flex:1,display:"flex",flexDirection:"row"}].concat(xD(Array.isArray(a.sx)?a.sx:[a.sx]))}),l.createElement(M.MW,{size:"small",status:o?"success":n?"next":r?"error":"off",color:"textSecondary"},n?PD("Surveying",t):o?PD("",t):r?"Survey not started yet":i("surveyStatusIndicator.noSurveyInformation"))))};kD.propTypes={accuracy:i().number,active:i().bool,supported:i().bool,valid:i().bool};const _D=kD;function ND(e){return ND="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ND(e)}function RD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function DD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RD(Object(n),!0).forEach(function(t){MD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function MD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ND(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ND(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ND(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var LD=(0,Bt.n9)(function(e){return{root:DD(DD({},(0,Bt.LF)(e)),{},{display:"flex",flexDirection:"column"}),inset:{border:"1px solid ".concat((0,Bt.Mw)(e)?"rgba(0, 0, 0, 0.54)":"rgba(255, 255, 255, 0.54)"),boxShadow:"0 0 4px 2px inset rgba(0, 0, 0, 0.54)",padding:e.spacing(1)},nonInset:{borderTop:"1px solid ".concat((0,Bt.Mw)(e)?"rgba(0, 0, 0, 0.54)":"rgba(255, 255, 255, 0.54)"),boxShadow:"0 2px 6px -2px inset rgba(0, 0, 0, 0.54)",padding:e.spacing(2,3)}}}),FD=function(e){var t=e.chartHeight,n=void 0===t?160:t,o=e.inset,a=e.onToggleSurveySettings,i=e.surveySettingsVisible,c=e.surveyStatus,s=LD();return(0,l.useEffect)(function(){!i||null!=c&&c.supported||a()},[a,i,null==c?void 0:c.supported]),l.createElement(F.A,{className:(0,r.A)(s.root,o?s.inset:s.nonInset)},l.createElement(pD,{height:n}),l.createElement(F.A,{sx:{position:"relative",height:48}},l.createElement(lf,{in:!i},l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",left:0,top:0,right:0,bottom:0}},a&&l.createElement(M.m_,{content:"Start new survey"},l.createElement(ce.A,{disabled:!c||!c.supported,size:"large",onClick:a},l.createElement(Q_.A,null))),l.createElement(_D,c),l.createElement(F.A,{sx:{flex:"1"}}),l.createElement(ZR,null))),l.createElement(lf,{in:i},l.createElement(wD,{position:"absolute",left:0,top:0,right:0,bottom:0}))))};FD.propTypes={chartHeight:i().number,inset:i().bool,onToggleSurveySettings:i().func,surveySettingsVisible:i().bool,surveyStatus:i().object};const UD=(0,u.Ng)(function(e){return{surveyStatus:oT(e),surveySettingsVisible:aT(e)}},{onToggleSurveySettings:Lm.IP})(FD);var GD=function(e){var t=e.onClose,n=e.open;return l.createElement(_.A,{fullWidth:!0,open:n,maxWidth:"sm",onClose:t},l.createElement(ET,null),l.createElement(F.A,null,l.createElement(F.A,{sx:{mx:3,mt:3}},l.createElement($m,null),l.createElement(F.A,{sx:{height:100,my:2,boxSizing:"content-box",overflow:"auto"}},l.createElement(HR,null))),l.createElement(UD,null)))};GD.propTypes={open:i().bool,onClose:i().func};const VD=(0,u.Ng)(function(e){return{open:e.rtk.dialog.open}},{onClose:Lm.fU})(GD);n(84864),n(57465),n(87745);var BD=n(80278),zD=n(76996),HD=n(23514),WD=n(26239),qD=n(26625),KD=n(26682),YD=n(46925);function $D(e){return $D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$D(e)}function ZD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function JD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZD(Object(n),!0).forEach(function(t){XD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function XD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=$D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$D(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eM(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eM(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var tM={paddingBottom:0},nM=(0,zn.fH)({horizontalMargin:[zn.mw,zn.E2,(0,zn.jZ)(1)],verticalMargin:[zn.mw,zn.E2,(0,zn.jZ)(1)],maxVertexCount:[zn.mw,zn.nd,(0,zn.jZ)(3),(0,zn.Tu)(50)]}),rM=(0,zD.A)({field:"verticalMargin",updates:{heightLimit:function(e,t){var n=t.maxHeight;return(0,YD.PV)(n,Number.isFinite(e)?e:0)}}},{field:new RegExp(["horizontalMargin","generate","simplify","maxVertexCount"].join("|")),updates:{distanceLimit:function(e,t){var n=t.boundaryPolygonBasedOnMissionItems,r=t.generate,o=t.homePositions,a=t.horizontalMargin,i=t.maxDistance,l=t.maxGeofence,c=t.maxVertexCount,s=t.missionType,u=t.simplify,f=function(){switch(s){case Nd.Pp.SHOW:return{maxValue:i,margin:a};case Nd.Pp.WAYPOINT:var e=r?function(){var e=(0,YD.BJ)({horizontalMargin:a,maxVertexCount:c,simplify:u}),t=n.map(function(e){return e.map((0,dw.A)(de.Ur))}).andThen(e).map(function(e){return e.map((0,dw.A)(de.Al))});if(t.isOk()){var r=(0,Dp.z)(o).map(function(e){var t=e.lon,n=e.lat;return BD.zx([t,n])}),i=t.value.map(function(e){var t=QD(e,2),n=t[0],r=t[1];return BD.zx([n,r])});return(0,HD.A)(r.flatMap(function(e){return i.map(function(t){return(0,de.Q9)(e,t)})}))}}():l;return void 0===e?{maxValue:i,margin:a}:{maxValue:e,margin:0};default:return{maxValue:void 0,margin:void 0}}}(),d=f.maxValue,p=f.margin;return(0,YD.dy)(d,p)}}}),oM=[qD.FU.KEEP_CURRENT,qD.FU.REPORT,qD.FU.RETURN,qD.FU.LAND],aM=function(e){var t=e.onSubmit,n=e.t,r=_a(function(e){return JD(JD({generate:_d.ue.geofence.generate},(0,KD.i_)(e)),{},{action:(0,Un.ng)(e),boundaryPolygonBasedOnMissionItems:(0,KD.J5)(e),homePositions:(0,Un.vT)(e),maxDistance:(0,KD.qd)(e),maxGeofence:(0,KD.ae)(e),maxHeight:(0,KD.m9)(e),missionType:(0,Un.Xk)(e)})});return l.createElement(V.lV,{initialValues:r,validate:nM,decorators:[rM],onSubmit:t},function(e){var t=e.handleSubmit,r=e.values,o=r.generate,a=r.maxDistance,i=r.maxGeofence,c=r.maxHeight,s=r.missionType,u=r.simplify;return l.createElement("form",{id:"geofenceSettings",onSubmit:t},l.createElement(M.Mo,{disablePadding:!0},n("safetyDialog.geofenceTab.fenceAction")),l.createElement(F.A,{sx:{display:"flex",flexDirection:"column"}},l.createElement(G.l6,{name:"action",label:n("safetyDialog.geofenceTab.fenceActionLabel"),variant:"filled"},oM.map(function(e){var t;return l.createElement(ae.A,{key:e,value:e},null===(t=(0,qD.cd)(e))||void 0===t?void 0:t(n))})),l.createElement(Fn.A,null,n("safetyDialog.geofenceTab.fenceActionHelperText"))),l.createElement(M.Mo,null,n("safetyDialog.geofenceTab.safetyMargins")),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row"}},l.createElement(G.A_,{name:"horizontalMargin",label:n("safetyDialog.geofenceTab.horizontal"),type:"number",variant:"filled",fieldProps:{parse:function(e){return e.length>0&&Number(e)}},slotProps:{input:{endAdornment:l.createElement(se.A,{position:"end"},"m")},htmlInput:{min:1}}}),l.createElement(F.A,{sx:{p:1}}),l.createElement(G.A_,{name:"verticalMargin",label:n("safetyDialog.geofenceTab.vertical"),type:"number",variant:"filled",fieldProps:{parse:function(e){return e.length>0&&Number(e)}},slotProps:{input:{endAdornment:l.createElement(se.A,{position:"end"},"m")},htmlInput:{min:1}}})),l.createElement(M.Mo,null,n("safetyDialog.geofenceTab.proposedLimits")),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row"}},l.createElement(G.A_,{disabled:!0,name:"distanceLimit",label:n("safetyDialog.geofenceTab.maxDistance"),error:s===Nd.Pp.SHOW&&void 0===a||s===Nd.Pp.WAYPOINT&&void 0===a&&void 0===i||s===Nd.Pp.UNKNOWN,helperText:(s===Nd.Pp.SHOW&&void 0===a||s===Nd.Pp.WAYPOINT&&void 0===a&&void 0===i||s===Nd.Pp.UNKNOWN)&&n("safetyDialog.geofenceTab.errors.distance"),slotProps:{input:{endAdornment:l.createElement(se.A,{position:"end"},"m")}},variant:"standard"}),l.createElement(F.A,{sx:{p:1}}),l.createElement(G.A_,{disabled:!0,name:"heightLimit",label:n("safetyDialog.geofenceTab.maxAltitude"),error:void 0===c,helperText:void 0===c&&n("safetyDialog.geofenceTab.errors.height"),slotProps:{input:{endAdornment:l.createElement(se.A,{position:"end"},"m")}},variant:"standard"})),l.createElement(M.Mo,null,n("safetyDialog.geofenceTab.geofencePolygon")),l.createElement(F.A,{sx:{display:"flex",flexDirection:"column"}},l.createElement(G.q_,{name:"generate",data:{label:n("safetyDialog.geofenceTab.generateAutomatically")}}),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",alignItems:"baseline"}},l.createElement(G.q_,{name:"simplify",disabled:!o,data:{label:n("safetyDialog.geofenceTab.simplifyGeometry")},formControlProps:{style:{flex:1}}}),l.createElement(F.A,{sx:{p:1}}),l.createElement(G.A_,{size:"small",name:"maxVertexCount",label:n("safetyDialog.geofenceTab.maxVertexCount"),disabled:!o||!u,type:"number",slotProps:{htmlInput:{min:3,max:50}},variant:"filled",fieldProps:{parse:function(e){return e.length>0&&Number(e)}},style:{flex:1}}))))})};aM.propTypes={onSubmit:i().func,t:i().func};var iM=(0,u.Ng)(null,{onSubmit:function(e){return function(t){t((0,Gn.dJ)(e.action)),t((0,_d.L0)({horizontalMargin:e.horizontalMargin,verticalMargin:e.verticalMargin,generate:e.generate,simplify:e.simplify,maxVertexCount:e.maxVertexCount})),e.generate&&t((0,WD.E5)())}}})((0,D.CI)()(aM)),lM=function(e){var t=e.hasFence,n=e.onClose,r=e.onClearGeofence,o=e.t;return l.createElement(l.Fragment,null,l.createElement(N.A,{sx:tM},l.createElement(iM,null)),l.createElement(Nn.A,null,l.createElement(B.A,{color:"secondary",disabled:!t,onClick:r},o("safetyDialog.geofenceTab.clear")),l.createElement(B.A,{form:"geofenceSettings",type:"submit",color:"primary"},o("general.action.apply")),l.createElement(B.A,{onClick:n},o("general.action.close"))))};lM.propTypes={hasFence:i().bool,onClearGeofence:i().func,onClose:i().func,t:i().func};const cM=(0,u.Ng)(function(e){return{hasFence:(0,Un.NF)(e)}},{onClearGeofence:function(){return function(e,t){var n=(0,Un.Md)(t());n&&(e((0,Gn.Xg)()),e((0,Mn.Hk)([n])))}}})((0,D.CI)()(lM));function sM(e){return sM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sM(e)}var uM=["unit"];function fM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fM(Object(n),!0).forEach(function(t){pM(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pM(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=sM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sM(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mM(){return mM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mM.apply(null,arguments)}var yM={paddingBottom:0},gM=function(e){return e&&Number(e)},bM=function(e){var t=e.unit,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,uM);return l.createElement(G.A_,mM({type:"text",slotProps:{input:{endAdornment:l.createElement(se.A,{position:"end"},t),inputMode:"numeric"}},variant:"filled"},n))};bM.propTypes={unit:i().string};var vM=function(e){var t,n,r,o;return{criticalBatteryVoltage:(0,zn.lq)(zn.yj)(e.criticalBatteryVoltage),lowBatteryThreshold:{value:null===(t=(n=pM(pM({},qD.Z.VOLTAGE,zn.yj),qD.Z.PERCENTAGE,(0,zn.fj)([zn.mw,(0,zn.Tq)(1,100)])))[null===(r=e.lowBatteryThreshold)||void 0===r?void 0:r.type])||void 0===t?void 0:t.call(n,null===(o=e.lowBatteryThreshold)||void 0===o?void 0:o.value)},returnToHomeAltitude:(0,zn.lq)(zn.yj)(e.returnToHomeAltitude),returnToHomeSpeed:(0,zn.lq)(zn.yj)(e.returnToHomeSpeed)}},hM=function(e){var t=e.initialValues,n=e.onSubmit,r=e.t;return l.createElement(V.lV,{initialValues:t,validate:vM,onSubmit:n},function(e){var t,n,o=e.handleSubmit,a=e.values;return l.createElement("form",{id:"safetySettings",onSubmit:o},l.createElement(F.A,{style:{display:"flex",flexDirection:"column",gap:"8px",paddingTop:12}},l.createElement(Mo.A,null,r("safetySettingsTab.emptyValues")),l.createElement(F.A,null,l.createElement(bM,{name:"criticalBatteryVoltage",label:r("safetySettingsTab.criticalBatteryVoltageLabel"),unit:"V"}),l.createElement(Fn.A,null,r("safetySettingsTab.criticalBatteryVoltageHelperText"))),l.createElement(F.A,null,l.createElement(F.A,{sx:{display:"flex"}},l.createElement(G.l6,{name:"lowBatteryThreshold.type",label:r("safetySettingsTab.lowBatteryThresholdTypeLabel"),variant:"filled"},l.createElement(ae.A,null,r("safetySettingsTab.lowBatteryThresholdType.noOverride")),l.createElement(ae.A,{value:qD.Z.OFF},r("safetySettingsTab.lowBatteryThresholdType.disabled")),l.createElement(ae.A,{value:qD.Z.VOLTAGE},r("safetySettingsTab.lowBatteryThresholdType.voltageBased")),l.createElement(ae.A,{value:qD.Z.PERCENTAGE},r("safetySettingsTab.lowBatteryThresholdType.percentageBased"))),[qD.Z.VOLTAGE,qD.Z.PERCENTAGE].includes(null===(t=a.lowBatteryThreshold)||void 0===t?void 0:t.type)&&l.createElement(l.Fragment,null,l.createElement(F.A,{sx:{p:1}}),l.createElement(bM,{name:"lowBatteryThreshold.value",label:r("safetySettingsTab.lowBatteryThresholdValueLabel"),unit:qD.mj[null===(n=a.lowBatteryThreshold)||void 0===n?void 0:n.type],style:{flexShrink:1.25}}))),l.createElement(Fn.A,null,r("safetySettingsTab.lowBatteryThresholdHelperText"))),l.createElement(F.A,null,l.createElement(bM,{name:"returnToHomeAltitude",label:r("safetySettingsTab.returnToHomeAltitudeLabel"),unit:"m"}),l.createElement(Fn.A,null,r("safetySettingsTab.returnToHomeAltitudeHelperText"))),l.createElement(F.A,null,l.createElement(bM,{name:"returnToHomeSpeed",label:r("safetySettingsTab.returnToHomeSpeedLabel"),unit:"m/s"}),l.createElement(Fn.A,null,r("safetySettingsTab.returnToHomeSpeedHelperText")))))})};hM.propTypes={initialValues:i().object,onSubmit:i().func,t:i().func};var AM=(0,u.Ng)(function(e){return{initialValues:(0,KD.g9)(e)}},{onSubmit:function(e){return function(t){var n;t((0,_d.fy)({criticalBatteryVoltage:gM(e.criticalBatteryVoltage),lowBatteryThreshold:(null===(n=e.lowBatteryThreshold)||void 0===n?void 0:n.type)&&dM({type:e.lowBatteryThreshold.type},[qD.Z.VOLTAGE,qD.Z.PERCENTAGE].includes(e.lowBatteryThreshold.type)&&{value:Number(e.lowBatteryThreshold.value)}),returnToHomeAltitude:gM(e.returnToHomeAltitude),returnToHomeSpeed:gM(e.returnToHomeSpeed)}))}}})((0,D.CI)()(hM)),SM=function(e){var t=e.onClose,n=e.t;return l.createElement(l.Fragment,null,l.createElement(N.A,{sx:yM},l.createElement(AM,null)),l.createElement(Nn.A,null,l.createElement(B.A,{form:"safetySettings",type:"submit",color:"primary"},n("general.action.save")),l.createElement(B.A,{onClick:t},n("general.action.close"))))};SM.propTypes={onClose:i().func,t:i().func};const EM=(0,D.CI)()(SM);var OM=[(0,fl.jI)("geofence")&&{id:kd.I.GEOFENCE,name:(0,Be.tt)("safetyDialog.geofence"),component:cM},(0,fl.jI)("safetySettings")&&{id:kd.I.SETTINGS,name:(0,Be.tt)("safetyDialog.settings"),component:EM}].filter(Boolean),wM=function(e){var t,n,r=e.onClose,o=e.onTabSelected,a=e.open,i=e.selectedTab,c=e.t,s=null!==(t=null===(n=OM.find(function(e){return e.id===i}))||void 0===n?void 0:n.component)&&void 0!==t?t:function(){return l.createElement(N.A,null,l.createElement(M.qq,{text:"The selected tab is currently not available."}))};return l.createElement(M.aQ,{fullWidth:!0,open:a,maxWidth:"xs",title:c("safetyDialog.title"),toolbarComponent:function(e){return l.createElement(M.nv,{dragHandle:e,value:i,onChange:o},OM.map(function(e){var t=e.id,n=e.name;return l.createElement(R.A,{key:t,label:n(c),value:t})}))},onClose:r},l.createElement(s,{onClose:r}))};wM.propTypes={onClose:i().func,onTabSelected:i().func,open:i().bool.isRequired,selectedTab:i().oneOf(OM.map(function(e){return e.id})),t:i().func};const TM=(0,u.Ng)(function(e){return{open:(0,KD.Lu)(e),selectedTab:(0,KD.aM)(e)}},{onClose:_d.VI,onTabSelected:function(e,t){return(0,_d.cT)(t)}})((0,D.CI)()(wM));function CM(e){return CM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CM(e)}function IM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IM(Object(n),!0).forEach(function(t){jM(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jM(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=CM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=CM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==CM(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var PM=l.forwardRef(function(e,t){var n=e.initialValues,r=e.onSubmit,o=e.optimizeUIForTouch;return l.createElement(D.wD,null,function(e){return l.createElement(V.lV,{initialValues:n,onSubmit:r},function(n){var r=n.form,a=n.handleSubmit;return t.current=r,l.createElement("form",{id:"SavedLocationEditor",style:{display:"flex",flexDirection:"column",gap:8,marginTop:8,marginBottom:0},onSubmit:a},l.createElement(An.A_,{autoFocus:!o,fullWidth:!0,size:"small",name:"name",label:e("savedLocationEditor.name"),fieldProps:{validate:zn.mw}}),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",gap:1}},l.createElement(An.r2,{fullWidth:!0,size:"small",name:"center.lat",label:e("general.geography.latitude")}),l.createElement(An.Ob,{fullWidth:!0,size:"small",name:"center.lon",label:e("general.geography.longitude")})),l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",gap:1}},l.createElement(An.DS,{fullWidth:!0,size:"small",name:"rotation",label:e("general.geometry.rotation")}),l.createElement(An.A_,{fullWidth:!0,type:"number",size:"small",name:"zoom",label:e("savedLocationEditor.zoomLevel"),fieldProps:{validate:(0,zn.fj)([zn.mw,zn.nd,(0,zn.Tq)(1,30)])},slotProps:{htmlInput:{min:1,max:30}}})),l.createElement(An.A_,{fullWidth:!0,multiline:!0,size:"small",name:"notes",label:e("savedLocationEditor.notes"),minRows:3,maxRows:3}),l.createElement("input",{hidden:!0,type:"submit"}))})})});PM.propTypes={initialValues:i().object,onSubmit:i().func,optimizeUIForTouch:i().bool};var kM=(0,u.Ng)(function(e){var t=Ou(e);return{initialValues:t!==Xe.BF&&t in e.savedLocations.byId?e.savedLocations.byId[t]:Eu(e),optimizeUIForTouch:(0,un.jz)(e)}},null,null,{forwardRef:!0})(PM),_M=function(e){var t=e.currentMapViewAsSavedLocation,n=e.editedLocationId,r=e.onClose,o=e.onDelete,a=e.onSubmit,i=e.open,c=e.t,s=(0,l.useRef)(null),u=(0,l.useCallback)(function(){s.current.initialize(xM(xM({},s.current.getState().values),t))},[t]),f=(0,l.useCallback)(function(){s.current.submit()},[]),d=n===Xe.BF,p=c(d?"savedLocationEditor.createNew":"savedLocationEditor.editSaved"),m=[];return d||m.push(l.createElement(B.A,{key:"copy-from-map-view",style:{marginRight:"auto"},onClick:u},c("savedLocationEditor.copyFromMapView"))),m.push(l.createElement(B.A,{key:"save",color:"primary",onClick:f},c("general.action.save"))),d?m.push(l.createElement(B.A,{key:"discard",onClick:o(n)},c("general.action.discard"))):m.push(l.createElement(B.A,{key:"delete",color:"secondary",onClick:o(n)},c("general.action.delete")),l.createElement(B.A,{key:"cancel",onClick:r},c("general.action.cancel"))),l.createElement(M.aQ,{fullWidth:!0,title:p,open:i,maxWidth:"xs",onClose:r},l.createElement(N.A,null,l.createElement(kM,{ref:s,onSubmit:a})),l.createElement(Nn.A,null,m))};_M.propTypes={currentMapViewAsSavedLocation:i().object,editedLocationId:i().string,onClose:i().func.isRequired,onDelete:i().func.isRequired,onSubmit:i().func.isRequired,open:i().bool.isRequired,t:i().func};const NM=(0,u.Ng)(function(e){return{currentMapViewAsSavedLocation:Eu(e),editedLocationId:Ou(e),open:wu(e)}},function(e){return{onClose:function(){e(Mu())},onDelete:function(t){return function(){e(Mu()),e(ku(t))}},onSubmit:function(t){var n=structuredClone(t);n.center.lon=Number(n.center.lon),n.center.lat=Number(n.center.lat),n.rotation=Number(n.rotation),n.zoom=Number(n.zoom),e(_u(n)),e(Mu())}}})((0,D.CI)()(_M));var RM=n(30016),DM=n(72699);const MM=(0,Bt.n9)(e=>({iconContainer:{padding:e.spacing(1)}}));const LM=function(e){const{content:t}=e,n=MM();return(0,Rt.jsx)("div",{className:n.iconContainer,children:(0,Rt.jsx)(M.m_,{content:t,children:(0,Rt.jsx)(DM.A,{})})})};var FM=n(13271);const UM=(0,pp.Ay)(Qs.HC)(({theme:e})=>({background:e.palette.action.hover,border:"none",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,padding:e.spacing(1),textAlign:"center",textTransform:"uppercase","&:focus":{outline:"none"}})),GM=(0,pp.Ay)(Qs.jI)(({theme:e})=>({padding:e.spacing(1,0)})),VM=["off","default","solid","sparks"],BM=({brightness:e,disabled:t,onChange:n})=>{const{t:r}=(0,D.Bd)(void 0,{keyPrefix:"showConfiguratorDialog.lights"});return(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(Fn.A,{children:r("default.brightness")}),(0,Rt.jsx)(FM.Ay,{marks:!0,disabled:t,min:0,max:1,step:.05,value:e,valueLabelDisplay:"auto",onChange:n})]})},zM=({color:e,disabled:t,onChange:n})=>{const{t:r}=(0,D.Bd)(void 0,{keyPrefix:"showConfiguratorDialog.lights"}),o=t?{inert:""}:{};return(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(Fn.A,{children:r("solid.color")}),(0,Rt.jsx)(GM,{color:e,...o,onChange:n}),(0,Rt.jsx)(UM,{color:e,disabled:t,style:{alignSelf:"center"},onChange:n})]})},HM=({disabled:e,offDuration:t,onChange:n})=>{const{t:r}=(0,D.Bd)(void 0,{keyPrefix:"showConfiguratorDialog.lights"});return(0,Rt.jsx)(An.lg,{disabled:e,label:r("sparks.offDuration"),min:0,value:t,onChange:n})},WM="2.40",qM=(0,Ar.c0)(`>=${WM}`),KM=e=>{const{disabled:t,lightEffectType:n,onLightEffectTypeChanged:r}=e,{t:o}=(0,D.Bd)(void 0,{keyPrefix:"showConfiguratorDialog.lights"}),a="light-effect-type-label";return(0,u.d4)(qM)?(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsxs)(te.A,{fullWidth:!0,variant:"filled",children:[(0,Rt.jsx)(oe.A,{id:a,children:o("selectLabel")}),(0,Rt.jsx)(ie.A,{disabled:t,labelId:a,value:n,onChange:r,children:VM.map(e=>(0,Rt.jsx)(ae.A,{value:e,children:o(`type.${e}`)},e))})]}),"default"===n&&(0,Rt.jsx)(BM,{brightness:e.defaultConfigBrightness,disabled:t,onChange:e.onDefaultConfigBrightnessChanged}),"solid"===n&&(0,Rt.jsx)(zM,{color:e.solidConfigColor,disabled:t,onChange:e.onSolidConfigColorChanged}),"sparks"===n&&(0,Rt.jsx)(HM,{disabled:t,offDuration:e.sparksConfigOffDuration,onChange:e.onSparksConfigOffDurationChanged})]}):(0,Rt.jsx)(U.A,{color:"warning",children:o("unsupportedVersion",{minVersion:WM})})};var YM=n(77722),$M=n(59636),ZM=n(37786),JM=n(88629);const XM=2,QM=5,eL=5,tL=1.5,nL=0,rL=(0,Bt.n9)(e=>({accordionDetails:{display:"flex",flexDirection:"column",gap:e.spacing(2),"& .react-colorful":{height:"120px",width:"100%"}}}));function oL(e){return e.minDistance>0&&e.altitude>0&&e.verticalVelocity>0&&e.horizontalVelocity>0&&e.takeoffDuration>=0}function aL(e){return.001*Math.round(1e3*Number.parseFloat(e))}function iL(e){return Number.parseFloat(e)}function lL(e,t){const[n,r]=(0,l.useState)({altitude:e?.altitude??QM,minDistance:e?.minDistance??XM,horizontalVelocity:e?.horizontalVelocity??eL,verticalVelocity:e?.verticalVelocity??tL,takeoffDuration:e?.takeoffDuration??nL}),[o,a]=(0,l.useState)(oL(n)),i=(0,l.useCallback)(e=>{const o=aL(e.target.value),i={...n,minDistance:o};r(i),a(oL(i)),t?.()},[t,n]),c=(0,l.useCallback)(e=>{const o=aL(e.target.value),i={...n,altitude:o};r(i),a(oL(i)),t?.()},[t,n]),s=(0,l.useCallback)(e=>{const o=iL(e.target.value),i={...n,horizontalVelocity:o};r(i),a(oL(i)),t?.()},[t,n]),u=(0,l.useCallback)(e=>{const o=iL(e.target.value),i={...n,verticalVelocity:o};r(i),a(oL(i)),t?.()},[t,n]),f=(0,l.useCallback)(e=>{const o=function(e){return.001*Math.round(1e3*Number.parseFloat(e))}(e.target.value),i={...n,takeoffDuration:o};r(i),a(oL(i)),t?.()},[t,n]);return{parameters:n,isValid:o,onMinDistanceChanged:i,onAltitudeChanged:c,onHorizontalVelocityChanged:s,onVerticalVelocityChanged:u,onTakeoffDurationChanged:f}}const cL=e=>{const{disabled:t,lights:n,parameters:r,onMinDistanceChanged:o,onAltitudeChanged:a,onHorizontalVelocityChanged:i,onVerticalVelocityChanged:c,onTakeoffDurationChanged:s}=e,{t:u}=(0,D.Bd)(void 0,{keyPrefix:"showConfiguratorDialog.adaptParameters"}),f=rL(),[d,p]=(0,l.useState)("parameters");return(0,Rt.jsx)(F.A,{children:(0,Rt.jsxs)(re.A,{children:[(0,Rt.jsxs)(YM.A,{expanded:"parameters"===d,style:{margin:0},onChange:()=>{p("parameters"===d?"none":"parameters")},children:[(0,Rt.jsx)($M.A,{expandIcon:(0,Rt.jsx)(JM.A,{}),children:u("panel.trajectories")}),(0,Rt.jsxs)(ZM.A,{className:f.accordionDetails,children:[(0,Rt.jsx)(vm.C4,{label:u("form.minDistance.label"),min:.1,max:100,value:r.minDistance,disabled:t,helperText:u("form.minDistance.help"),onChange:o}),(0,Rt.jsx)(vm.C4,{label:u("form.altitude.label"),min:1,max:100,value:r.altitude,disabled:t,helperText:u("form.altitude.help"),onChange:a}),(0,Rt.jsx)(vm.as,{label:u("form.horizontalVelocity.label"),min:.1,max:100,value:r.horizontalVelocity,disabled:t,helperText:u("form.horizontalVelocity.help"),onChange:i}),(0,Rt.jsx)(vm.as,{label:u("form.verticalVelocity.label"),min:.1,max:100,value:r.verticalVelocity,disabled:t,helperText:u("form.verticalVelocity.help"),onChange:c}),(0,Rt.jsx)(vm.lg,{label:u("form.takeoffDuration.label"),min:0,max:300,value:r.takeoffDuration,disabled:t,helperText:u("form.takeoffDuration.help"),onChange:s})]})]}),(0,Rt.jsxs)(YM.A,{expanded:"lights"===d,style:{margin:0},onChange:()=>{p("lights"===d?"none":"lights")},children:[(0,Rt.jsx)($M.A,{expandIcon:(0,Rt.jsx)(JM.A,{}),children:u("panel.lights")}),(0,Rt.jsx)(ZM.A,{className:f.accordionDetails,children:(0,Rt.jsx)(KM,{disabled:t,...n})})]})]})})};var sL=n(37272);const uL=(0,Bt.n9)(e=>({centered:{display:"flex",flexDirection:"column",gap:e.spacing(2),alignItems:"center",justifyContent:"center",height:"100%"},reviewGrid:{display:"grid",gridTemplateColumns:"max-content 1fr",gap:e.spacing(1),alignItems:"center","& > p":{fontWeight:e.typography.fontWeightMedium},"& > p:nth-child(odd)":{textAlign:"right"}},changedDuration:{color:e.palette.warning.main}})),fL=(0,u.Ng)(e=>({isShowAdaptInProgress:(0,yb.xq)(e),error:(0,yb.KN)(e),adaptResult:(0,yb.OR)(e)}),{reviewInViewer:()=>async(e,t)=>{const{bridge:n}=window;if(!n)return;const{removeTemporaryFile:r,writeBufferToTemporaryFile:o}=n,a=(0,yb.m_)(t());if(!a)return;let i;try{try{i=await o(await a.arrayBuffer(),{extension:"skyc"})}catch(t){e((0,Ci.Qg)((0,ur.Nw)(t,"Error while saving adapted show to a temporary file")))}if(i)try{await n.openPath(i)}catch(t){e((0,Ci.Qg)((0,ur.Nw)(t,"Error while opening adapted show in Skybrush Viewer")))}await(0,fr.Ay)(6e4)}finally{i&&await r(i)}}})(e=>{const{adaptResult:t,error:n,isShowAdaptInProgress:o,reviewInViewer:a}=e,{t:i}=(0,D.Bd)(void 0,{keyPrefix:"showConfiguratorDialog.adaptReview"}),l=uL();let c;return c=o?(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(U.A,{children:i("showAdaptInProgress")}),(0,Rt.jsx)(Lt.A,{})]}):t?(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsxs)("div",{className:l.reviewGrid,children:[(0,Rt.jsx)(U.A,{children:i("form.takeoff.lengthChange")}),(0,Rt.jsx)(U.A,{className:(0,r.A)(0!==t.takeoffLengthChange&&l.changedDuration),children:i("form.takeoff.lengthChangeValue",{value:t.takeoffLengthChange})}),(0,Rt.jsx)(U.A,{children:i("form.rth.lengthChange")}),(0,Rt.jsx)(U.A,{className:(0,r.A)(0!==t.rthLengthChange&&l.changedDuration),children:i("form.rth.lengthChangeValue",{value:t.rthLengthChange})})]}),window.bridge&&(0,Rt.jsx)(B.A,{variant:"contained",color:"primary",onClick:()=>{a()},children:i("button.reviewInViewer")})]}):(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(sL.A,{color:"error"}),n??i("error.invalidState")]}),(0,Rt.jsx)("div",{className:l.centered,children:c})}),dL=fL,pL=[{title:(0,Be.tt)("show.showConfigurator.interactionHints.category.navigation"),icon:NS.A,hints:[{keys:["Drag"],action:(0,Be.tt)("show.showConfigurator.interactionHints.action.pan")},{keys:["Scroll"],action:(0,Be.tt)("show.showConfigurator.interactionHints.action.zoom")},{keys:["Shift","Alt","Drag"],action:(0,Be.tt)("show.showConfigurator.interactionHints.action.rotate")}]},{title:(0,Be.tt)("show.showConfigurator.interactionHints.category.selection"),icon:cv.A,hints:[{keys:["Click"],action:(0,Be.tt)("show.showConfigurator.interactionHints.action.select")},{keys:["Ctrl","Click"],action:(0,Be.tt)("show.showConfigurator.interactionHints.action.toggleSelect")},{keys:["Shift","Drag"],action:(0,Be.tt)("show.showConfigurator.interactionHints.action.boxSelect")},{keys:["Alt","Drag"],action:(0,Be.tt)("show.showConfigurator.interactionHints.action.boxUnselect")}]},{title:(0,Be.tt)("show.showConfigurator.interactionHints.category.manipulation"),icon:pa.A,hints:[{keys:["Drag"],action:(0,Be.tt)("show.showConfigurator.interactionHints.action.moveSelection")},{keys:["Alt","Drag"],action:(0,Be.tt)("show.showConfigurator.interactionHints.action.rotateSelection")}]}],mL=(0,Bt.n9)(e=>({root:{minHeight:0,color:e.palette.text.primary,marginTop:`-${e.spacing(.25)}`,paddingBottom:e.spacing(.5)},flexContainer:{gap:e.spacing(2)},indicator:{height:0,backgroundColor:"transparent","&::after":{content:'""',display:"block",marginTop:`-${e.spacing(.5)}`,marginLeft:e.spacing(2.5),borderBottom:`2px solid ${e.palette.text.secondary}`}}})),yL=(0,Bt.n9)({root:{minHeight:0,padding:0,opacity:1,display:"flex",flexDirection:"row"},selected:{background:"gradient(linear, 0deg, #0000 0%, #f000 100%)"}}),gL=({keys:e,action:t})=>(0,Rt.jsxs)("span",{children:[e.map(e=>(0,Rt.jsx)("kbd",{children:e},e))," ",(0,Rt.jsx)(U.A,{component:"span",variant:"body2",color:"textSecondary",children:t})]}),bL=()=>{const{t:e}=(0,D.Bd)(),[t,n]=(0,l.useState)(0),r=yL(),o=mL();return(0,Rt.jsxs)(F.A,{sx:{height:"50px"},children:[(0,Rt.jsx)(fA.A,{value:t,classes:o,style:{marginBottom:2},children:pL.map(({icon:t,title:o},a)=>(0,Rt.jsx)(R.A,{icon:(0,Rt.jsx)(t,{fontSize:"small",style:{margin:0}}),label:o(e),classes:r,onMouseOver:()=>{n(a)}},o(e)))}),pL.map((n,r)=>(0,Rt.jsx)(TD.A,{in:t===r,children:(0,Rt.jsx)(F.A,{sx:{position:"absolute",display:"flex",gap:2},children:n.hints.map(t=>(0,Rt.jsx)(gL,{keys:t.keys,action:t.action(e)},t.keys.join("+")))})},n.title(e)))]})};var vL=n(86717),hL=n(82986),AL=n(45856),SL=n(24202);const EL=(0,D.CI)()(({canDiscard:e,canRedo:t,canUndo:n,discard:r,redo:o,t:a,tooltipPlacement:i,undo:l})=>(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(vc.W1,{content:a("general.action.discard"),placement:i,children:(0,Rt.jsx)(ce.A,{disabled:!e,size:"large",onClick:r,children:(0,Rt.jsx)(fc.A,{})})}),(0,Rt.jsx)(vc.W1,{content:a("general.action.undo"),placement:i,children:(0,Rt.jsx)(ce.A,{disabled:!n,size:"large",onClick:l,children:(0,Rt.jsx)(SL.A,{})})}),(0,Rt.jsx)(vc.W1,{content:a("general.action.redo"),placement:i,children:(0,Rt.jsx)(ce.A,{disabled:!t,size:"large",onClick:o,children:(0,Rt.jsx)(AL.A,{})})})]}));var OL=n(53123),wL=n(87392),TL=n(50071),CL=n(81709),IL=n(95025),xL=n(59952),jL=n(84953),PL=n(14648),kL=n(79685);const _L=(0,CL.RM)(e=>{const{children:t,getSelectedTransformableFeatures:n,onSingleFeatureSelected:r,selectedTool:o}=e,{onAddFeaturesToSelection:a,onFeaturesModified:i,onFeaturesTransformed:c,onRemoveFeaturesFromSelection:s,onSetSelectedFeatures:u}=function(e){const{onBoxDragEnded:t,updateModifiedFeatures:n}=e,r=(0,l.useCallback)(e=>{t?.("add",e)},[t]),o=(0,l.useCallback)(e=>{t?.("remove",e)},[t]),a=(0,l.useCallback)(e=>{t?.("set",e)},[t]),i=(0,l.useCallback)(e=>{if(void 0===n)return;const t=e.features.getArray();n(t,{event:e,type:"modify"})},[n]),c=(0,l.useCallback)(e=>{if(!e.hasMoved||void 0===n)return;const t=e.features;n(t,{event:e,type:"transform"})},[n]);return{onAddFeaturesToSelection:r,onFeaturesModified:i,onFeaturesTransformed:c,onRemoveFeaturesFromSelection:o,onSetSelectedFeatures:a}}(e),f=[];f.push((0,Rt.jsx)(CL.vY.DragRotate,{condition:IL.IO},"DragRotate"),(0,Rt.jsx)(CL.vY.DragRotateAndZoom,{condition:IL.IT},"DragRotateAndZoom")),o===xL.NL.PAN&&f.push((0,Rt.jsx)(CL.vY.DragBox,{condition:IL.k5,onBoxEnd:u},"DragBox.setSelection")),o===xL.NL.SELECT&&f.push((0,Rt.jsx)(PL.A,{activateCondition:IL.qG,addCondition:IL.Kg,layers:Wo.T9,removeCondition:IL.Js,toggleCondition:IL.k5,threshold:16,onSelect:r},"SelectNearestFeature"),(0,Rt.jsx)(CL.vY.DragBox,{condition:IL.Kg,onBoxEnd:a},"DragBox.addToSelection"),(0,Rt.jsx)(CL.vY.DragBox,{condition:IL.Js,onBoxEnd:s},"DragBox.removeFromSelection"),(0,Rt.jsx)(kL.Ay,{featureProvider:n,moveCondition:IL.TS,rotateCondition:IL.Js,onTransformEnd:c},"TransformFeatures")),o===xL.NL.ZOOM&&f.push((0,Rt.jsx)(CL.vY.DragZoom,{condition:IL.Gk},"DragZoom.in"),(0,Rt.jsx)(CL.vY.DragZoom,{out:!0,condition:IL.Kg},"DragZoom.out"));const d=new TL.default;for(const t of(0,Wo.fZ)(e.map)){if(!(t instanceof hL.default))continue;const e=t.getSource();if(!e)continue;const n=e.getFeaturesCollection();n&&(0,jL.$)(n,d,Dc.JB)}return o===xL.NL.EDIT_FEATURE&&f.push((0,Rt.jsx)(CL.vY.Modify,{features:d,onModifyEnd:i},"EditFeature")),(0,Rt.jsxs)(Rt.Fragment,{children:[f,t]})}),NL=_L;var RL=n(53453),DL=n(98774),ML=n(15518),LL=n(82023),FL=n(40535),UL=n(92310);const GL=(0,u.Ng)(e=>({approximateConvexHullOfFullShow:(0,yb.GM)(e),convexHull:(0,yb.L_)(e),convexHullMarker:(0,yb.vs)(e),homePositions:(0,yb.QN)(e),selection:(0,yb.Lo)(e)}))(e=>{const{approximateConvexHullOfFullShow:t,convexHull:n,convexHullMarker:r,homePositions:o,landingPositions:a,selection:i,...l}=e;return(0,Rt.jsxs)(DL.Ay,{...l,children:[r&&(0,DL.ph)(r.orientation,r.origin,"show-orientation",uo.Ay.netShowConvexHull),(0,DL.zn)(t,i,DL.E.GROSS),(0,DL.I_)(o,{selection:i},{hideLabels:!0}),(0,DL.cl)(a,{selection:i},{hideLabels:!0}),(0,DL.zn)(n,i,DL.E.NET)]})}),VL={...RL.aH,[Wo.mb.FEATURES]:e=>(0,Rt.jsx)(ML.ZZ,{...e,layerRefHandler:FL.dX}),[Wo.mb.MISSION_INFO]:GL,[Wo.mb.UAVS]:e=>(0,Rt.jsx)(LL.$,{...e,labelHidden:!0,LayerSource:UL.A,selection:gr.Ml})},BL={showAttribution:!1,showMouseCoordinates:!1,showScaleLine:!1},zL=(0,u.Ng)(e=>({defaultPosition:(0,yb.yv)(e),futureHistoryLength:(0,yb.Yp)(e),layers:(0,yb.Mc)(e),pastHistoryLength:(0,yb.FW)(e),selectedTool:xL.NL.SELECT,selection:(0,yb.Lo)(e)}),{historyJump:gb.FZ,historyRedo:gb.tD,historyUndo:gb.ZC,updateModifiedFeatures:(e,t)=>n=>(0,u.vA)(()=>{n((0,gb._c)(void 0));const r={convexHull:!1,homePositionIds:[],allHomePositions:!1};for(const t of e){const e=t.getId();if("string"!=typeof e)continue;const n=(0,gl.Mc)(e);n===gl.kt?r.convexHull=!0:n===gl.H4?(r.convexHull=!0,r.allHomePositions=!0):(0,gl.ag)(e)&&r.homePositionIds.push(e)}r.convexHull&&n((e=>t=>{if(!bb(e))return;const{event:n}=e;if("move"===n.subType&&n.delta){const e=n.delta;t((0,gb.Ck)(e)),t((0,gb.wA)({delta:[-e[0],-e[1]]}))}else"rotate"===n.subType&&n.angleDelta&&n.origin&&(t((0,gb.dx)({rotationOriginInMapCoordinates:n.origin,angle:(0,db.xW)(n.angleDelta)})),t((0,gb.Rr)({rotationOriginInMapCoordinates:n.origin,angle:(0,db.xW)(-n.angleDelta)})))})(t)),r.allHomePositions?n(vb(void 0,t)):r.homePositionIds.length>0&&n(vb(r.homePositionIds,t)),n((0,gb.js)())}),updateSelection:gb.c6})(e=>{const{defaultPosition:t,futureHistoryLength:n,historyJump:r,historyRedo:o,historyUndo:a,layers:i,pastHistoryLength:c,selectedTool:s}=e,{getSelectedTransformableFeatures:u,onBoxDragEnded:f,onFeaturesModified:d,onSingleFeatureSelected:p,updateModifiedFeatures:m}=(e=>{const{selection:t,updateModifiedFeatures:n,updateSelection:r}=e,o=(0,l.useCallback)(e=>(0,de.d4)(e,t).filter(e=>{if(!(e instanceof vL.default))return!1;const t=e.getId();if("string"!=typeof t)return!1;const n=(0,gl.Mc)(t);return n===gl.kt||n===gl.H4||(0,gl.ag)(t)}),[t]),a=(0,l.useCallback)((e,t)=>{if("activate"===e)return;const n=t?t.map(e=>e.getId()?.toString()).filter(e=>void 0!==e):[];("set"===e||n&&n.length>0)&&r(e,n)},[r]),i=(0,l.useCallback)((e,t)=>{const n=t.target.getGeometry();if(void 0===n)return;const r=n.getExtent(),o=[],i=t.mapBrowserEvent.map;for(const e of(0,Wo.FM)(i)){if(!(e instanceof hL.default))continue;const t=e.getSource();t&&t.forEachFeatureIntersectingExtent(r,e=>{const t=e.getGeometry();"Point"===t?.getType()&&n.intersectsCoordinate(t.getCoordinates())&&o.push(e)})}a(e,o)},[a]),c=(0,l.useCallback)((e,t)=>{"activate"!==e&&(void 0===(t?t.getId():void 0)&&"set"!==e&&"clear"!==e||("clear"===e&&(e="set",t=void 0),a(e,t?[t]:[])))},[a]);return{getSelectedTransformableFeatures:o,onBoxDragEnded:i,onFeaturesModified:(0,l.useCallback)(e=>{n(e.features.getArray(),{type:"modify",event:e})},[n]),onSingleFeatureSelected:c,updateModifiedFeatures:n}})(e),y=(0,l.useMemo)(()=>({layers:i,layerComponents:VL}),[i]);return(0,Rt.jsxs)(OL.T5,{id:"adapt-map-view",position:t,selectedTool:s,layers:y,controlSettings:BL,onFeaturesModified:d,children:[(0,Rt.jsx)(OL.hy,{top:(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(wL.A,{resetDuration:500,fieldWidth:"75px"}),(0,Rt.jsx)(Wd.A,{orientation:"vertical"}),(0,Rt.jsx)(EL,{canDiscard:c>0,canUndo:c>0,canRedo:n>0,tooltipPlacement:"bottom",undo:()=>a(),redo:()=>o(),discard:()=>r(-c)})]})}),(0,Rt.jsx)(NL,{selectedTool:s,getSelectedTransformableFeatures:u,updateModifiedFeatures:m,onBoxDragEnded:f,onSingleFeatureSelected:p})]})}),HL=zL,WL=(0,Bt.n9)(e=>({root:{"& div.MuiDialog-paper > div > div:first-child":{order:100,boxShadow:"2px 0 6px -2px inset rgba(0, 0, 0, 0.54)"}},backdrop:{position:"absolute",zIndex:e.zIndex.modal+1,backdropFilter:"blur(4px)",color:"white"},contentRoot:{flex:1,minHeight:"calc(100vh - 256px)",position:"relative"},contentItem:{position:"absolute",top:0,left:0,right:0,bottom:0},mainContent:{padding:e.spacing(1)},sidebarContent:{display:"flex",flexDirection:"column",padding:e.spacing(2),gap:e.spacing(2)},shadowOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,boxShadow:"-1px 0 6px 2px inset rgba(0, 0, 0, 0.54)",pointerEvents:"none",zIndex:10}}));function qL(e){const{adaptShow:t,adaptedBase64Show:n,approveAdaptedShow:r,backDisabled:o,closeDialog:a,coordinateSystem:i,resetAdaptResult:c,validationSettings:s}=e,[u,f]=(0,l.useState)("config"),d=lL(void 0===s?void 0:{minDistance:s.minDistance,horizontalVelocity:s.maxVelocityXY,verticalVelocity:s.maxVelocityZ},c),{configuration:p,...m}=(e=>{const[t,n]=(0,l.useState)("default"),[r,o]=(0,l.useState)(.05),[a,i]=(0,l.useState)("FFF"),[c,s]=(0,l.useState)(3),u=(0,l.useCallback)(t=>{n(t.target.value),e?.()},[e]),f=(0,l.useCallback)((t,n)=>{o(Number.isFinite(n)?n:.05),e?.()},[e]),d=(0,l.useCallback)(t=>{i(t),e?.()},[e]),p=(0,l.useCallback)(t=>{const n=.01*Math.round(100*Number.parseFloat(t.target.value));s(Number.isFinite(n)?n:3),e?.()},[e]),m=(0,l.useMemo)(()=>{switch(t){case"default":return{type:"default",brightness:r};case"solid":return{type:"solid",color:a};case"sparks":return{type:"sparks",off_duration:c};default:return{type:"off"}}},[t,r,a,c]);return{lightEffectType:t,configuration:m,onLightEffectTypeChanged:u,defaultConfigBrightness:r,onDefaultConfigBrightnessChanged:f,solidConfigColor:a,onSolidConfigColorChanged:d,sparksConfigOffDuration:c,onSparksConfigOffDurationChanged:p}})(c),y=(0,l.useCallback)(()=>{o||("config"===u?a():"review"===u&&f("config"))},[o,a,u]),g=!d.isValid||"review"===u&&void 0===n,b=(0,l.useCallback)(()=>{if(!g)if("config"===u){if(!d.isValid)return;f("review"),void 0===n&&t(d.parameters,p)}else if("review"===u){if(void 0===n)return;r(n,i.origin,i.orientation),f("config"),a()}},[d,t,n,r,a,i,p,u,g]);return{adaptedBase64Show:n,adaptParameters:d,adaptShow:t,approveAdaptedShow:r,back:y,coordinateSystem:i,lights:m,stage:u,submit:b,submitDisabled:g}}const KL=e=>{const{adjustHomePositionsToDronePositionsEnabled:t,adjustHomePositionsToDronePositions:n,backDisabled:r,dronesVisible:o,saveAdaptedShow:a,setDronesVisible:i,open:l,t:c}=e,s=WL(),{adaptParameters:u,back:f,lights:d,stage:p,submit:m,submitDisabled:y}=qL(e);return(0,Rt.jsxs)(M.aQ,{fullWidth:!0,disableEscapeKeyDown:!0,className:s.root,maxWidth:"xl",title:c("showConfiguratorDialog.title"),open:l,sidebarComponents:(0,Rt.jsxs)(F.A,{className:s.sidebarContent,children:[(0,Rt.jsx)(cL,{...u,lights:d,disabled:"config"!==p}),(0,Rt.jsx)(ne.A,{control:(0,Rt.jsx)(Tt.A,{checked:o,onChange:e=>{i(e.target.checked)}}),label:c("showConfiguratorDialog.settings.dronesVisible")}),(0,Rt.jsx)(B.A,{color:"primary",disabled:!t||"config"!==p,onClick:()=>{n()},children:c("showConfiguratorDialog.action.adjustHomePositionsToDronePositions")})]}),onClose:e.closeDialog,children:[(0,Rt.jsxs)(F.A,{className:s.contentRoot,children:[(0,Rt.jsx)(F.A,{className:s.contentItem,children:(0,Rt.jsx)(HL,{})}),(0,Rt.jsx)(RM.A,{className:s.backdrop,open:"review"===p,children:(0,Rt.jsx)(dL,{})}),(0,Rt.jsx)(F.A,{className:s.shadowOverlay})]}),(0,Rt.jsxs)(Nn.A,{children:[(0,Rt.jsx)(LM,{content:c(`showConfiguratorDialog.help.${p}`).split("\n").map((e,t)=>(0,Rt.jsx)("p",{children:e},t))}),(0,Rt.jsx)(Wd.A,{orientation:"vertical"}),(0,Rt.jsx)(bL,{}),(0,Rt.jsx)(F.A,{sx:{flex:1}}),(0,Rt.jsx)(B.A,{disabled:r,onClick:f,children:c("review"===p?"general.action.back":"general.action.close")}),"review"===p&&(0,Rt.jsx)(B.A,{color:"primary",disabled:y,onClick:a,children:c("general.action.save")}),(0,Rt.jsx)(B.A,{color:"primary",disabled:y,onClick:m,children:c("review"===p?"general.action.approve":"showConfiguratorDialog.action.adapt")})]})]})},YL=(0,u.Ng)(e=>({adaptedBase64Show:(0,yb.d0)(e),adjustHomePositionsToDronePositionsEnabled:(0,yb.FS)(e),backDisabled:(0,yb.xq)(e),coordinateSystem:(0,yb.k_)(e),dronesVisible:(0,yb.Kc)(e),open:(0,yb.dw)(e),validationSettings:(0,wp.Ef)(e)}),e=>({adaptShow:(t,n)=>{e(((e,t)=>async(n,r)=>{const o=r(),a=(0,wp.iB)(o),i=(0,yb.Y$)(o),l=(0,yb.k_)(o),c={min_distance:e.minDistance,velocity_xy:e.horizontalVelocity,velocity_z:e.verticalVelocity,altitude:e.altitude,replace:!0},s=[{type:"takeoff",parameters:{positions:i,duration:e.takeoffDuration||void 0,lights:t,...c}},{type:"rth",parameters:{lights:t,...c}}];n((0,gb._c)({loading:!0}));try{const{show:e,takeoffLengthChange:t,rthLengthChange:r}=await Fr.A.query.adaptShow(a,s,l);n((0,gb._c)({show:e,takeoffLengthChange:t,rthLengthChange:r}))}catch(e){const t=e instanceof Error?e.message:"string"==typeof e?e:"Unknown error type.";n((0,gb._c)({error:t}))}})(t,n))},adjustHomePositionsToDronePositions:()=>{e(hb())},approveAdaptedShow:(t,n,r)=>{(0,u.vA)(()=>{e((0,Tp.eR)(n)),e((0,Tp.M8)(r)),e((0,wm.rp)(t))})},closeDialog:()=>{e((0,gb.zU)())},resetAdaptResult:()=>{e((0,gb._c)(void 0))},saveAdaptedShow:()=>{e(async(e,t)=>{const n=(0,yb.m_)(t());n&&await(0,mb.sd)(n,"adapted-show.skyc")})},setDronesVisible:t=>{e((0,gb.K9)(t))}}))((0,D.CI)()(e=>{const{open:t,...n}=e;return t?(0,Rt.jsx)(KL,{open:!0,...n}):null})),$L=YL;var ZL=n(4510),JL=n(71146),XL=n(26509),QL=n(35825),eF=n(59194),tF=n(9140),nF=n(76006);const rF=(0,u.Ng)(function(e,t){var n=e.log.highestUnseenMessageLevel;return{color:(0,cf.x1)(n),visible:n>=(t.level||cf.$b.WARNING)}},{})(M.MA);var oF=n(61381);const aF=(0,Xn.A)((0,Rt.jsx)("path",{d:"m15.4 17 1.3 4.4h-1.1L13 17h-3c-.55 0-1-.45-1-1s.45-1 1-1h3l2.6-4.4h1.1L15.4 15h2.85l.75-1h1l-.6 2 .6 2h-1l-.75-1H15.4zM5.75 7 5 6H4l.6 2-.6 2h1l.75-1H8.6l-1.3 4.4h1.1L11 9h3c.55 0 1-.45 1-1s-.45-1-1-1h-3L8.4 2.6H7.3L8.6 7H5.75z"}),"ConnectingAirports"),iF=(0,Xn.A)((0,Rt.jsx)("path",{d:"M19 15.18V7c0-2.21-1.79-4-4-4s-4 1.79-4 4v10c0 1.1-.9 2-2 2s-2-.9-2-2V8.82C8.16 8.4 9 7.3 9 6c0-1.66-1.34-3-3-3S3 4.34 3 6c0 1.3.84 2.4 2 2.82V17c0 2.21 1.79 4 4 4s4-1.79 4-4V7c0-1.1.9-2 2-2s2 .9 2 2v8.18c-1.16.41-2 1.51-2 2.82 0 1.66 1.34 3 3 3s3-1.34 3-3c0-1.3-.84-2.4-2-2.82zM6 7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 12c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"}),"Route"),lF=(0,Xn.A)((0,Rt.jsxs)("g",{children:[(0,Rt.jsx)("path",{d:"M6,11c2.76,0,5-2.24,5-5S8.76,1,6,1S1,3.24,1,6S3.24,11,6,11z M6,3c1.65,0,3,1.35,3,3c0,1.65-1.35,3-3,3S3,7.65,3,6 C3,4.35,4.35,3,6,3z"}),(0,Rt.jsx)("path",{d:"M21,14h-5c-1.1,0-2,0.9-2,2v5c0,1.1,0.9,2,2,2h5c1.1,0,2-0.9,2-2v-5C23,14.9,22.1,14,21,14z M21,21h-5v-5h5V21z"}),(0,Rt.jsx)("path",{d:"M17.71,7.7C18.11,7.89,18.54,8,19,8c1.65,0,3-1.35,3-3s-1.35-3-3-3s-3,1.35-3,3c0,0.46,0.11,0.89,0.3,1.29L6.29,16.3 C5.89,16.11,5.46,16,5,16c-1.65,0-3,1.35-3,3s1.35,3,3,3s3-1.35,3-3c0-0.46-0.11-0.89-0.3-1.29L17.71,7.7z"})]}),"ShapeLine");function cF(e){return cF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cF(e)}function sF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sF(Object(n),!0).forEach(function(t){fF(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fF(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=cF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cF(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dF={backgroundColor:"#333",boxShadow:"rgba(0, 0, 0, 0.3) -9px -3px 6px -6px inset",display:"flex",flexFlow:"column nowrap",height:"calc(100vh - 48px)",overflow:"hidden"},pF={display:"flex",flexFlow:"column nowrap",flexGrow:1,overflow:"auto",width:180},mF=(0,fl.jI)("missionEditor"),yF=(0,fl.jI)("showControl"),gF=function(e){var t=e.experimentalFeaturesEnabled,n=e.isOpen,r=e.missionType,o=e.t,a=e.workbench;return l.createElement("div",{id:"sidebar",style:uF(uF({},dF),{},{width:n?180:48})},l.createElement("div",{style:pF},l.createElement(s.l_,{allowMultipleSelection:!0,vertical:!0,workbench:a},l.createElement(s.nV,{id:"map",icon:l.createElement(tF.A,null),label:o("view.map"),component:"map"}),l.createElement(s.nV,{id:"threeDView",icon:l.createElement(nF.A,null),label:o("view.three-d-view"),component:"three-d-view",reorderEnabled:!1}),l.createElement(s.nV,{id:"layers",icon:l.createElement(eF.A,null),label:o("view.layer-list"),component:"layer-list"}),(0,fl.jI)("mapFeatures")&&l.createElement(s.nV,{id:"features",icon:l.createElement(lF,null),label:o("view.feature-list"),component:"feature-list"}),l.createElement("hr",null),l.createElement(s.nV,{id:"uavDetails",icon:l.createElement(ZL.A,null),label:o("view.uav-details"),component:"uav-details"}),l.createElement(s.nV,{id:"uavList",icon:l.createElement(aF,null),label:o("view.uav-list"),component:"uav-list"}),(0,fl.jI)("beacons")&&l.createElement(s.nV,{id:"beacons",icon:l.createElement(oF.A,null),label:o("view.beacon-list"),component:"beacon-list"}),(0,fl.jI)("docks")&&t&&l.createElement(s.nV,{id:"docks",icon:l.createElement(XL.A,null),label:o("view.dock-list"),component:"dock-list"}),l.createElement("hr",null),yF&&l.createElement(s.nV,{id:"show",icon:l.createElement(QL.A,null),label:o("view.show-control"),component:"show-control"}),yF&&l.createElement(s.nV,{id:"lights",icon:l.createElement(AE.A,null),label:o("view.light-control"),component:"light-control"}),yF&&l.createElement("hr",null),mF&&l.createElement(s.nV,{id:"missionEditor",icon:l.createElement(iF,null),label:o("view.mission-editor"),component:"mission-editor"}),(yF||mF)&&l.createElement("hr",null),l.createElement(s.nV,{id:"clocks",icon:l.createElement(Ag.A,null),label:o("view.lcd-clock-panel"),component:"lcd-clock-panel"}),l.createElement(s.nV,{id:"locations",icon:l.createElement(Q_.A,null),label:o("view.saved-location-list"),component:"saved-location-list"}),l.createElement("hr",null),l.createElement(s.nV,{id:"notes",icon:l.createElement(gE.A,null),label:o("view.field-notes"),component:"field-notes"}),l.createElement(s.nV,{id:"log",badge:l.createElement(rF,null),icon:l.createElement(JL.A,null),label:o("view.log-panel"),component:"log-panel"}))),n&&l.createElement(F.A,{style:{color:"#fff",opacity:.3,width:180},sx:{py:.5,px:1}},r&&l.createElement(U.A,{align:"center",variant:"caption",component:"footer"},o("sidebar.missionType",{missionType:r})),l.createElement(U.A,{align:"center",variant:"caption",component:"footer"},"cb4c1078")))};gF.propTypes={experimentalFeaturesEnabled:i().bool,isOpen:i().bool,missionType:i().oneOf(Object.values(Nd.Pp)),t:i().func,workbench:i().instanceOf(s._H).isRequired};const bF=(0,u.Ng)(function(e,t){var n=t.workbench;return{experimentalFeaturesEnabled:(0,un.x_)(e),isOpen:IT(e),missionType:(0,Un.Xk)(e),workbench:n}})((0,D.CI)()(gF));var vF=n(37177),hF=["action","label"];function AF(e){return AF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AF(e)}function SF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function EF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SF(Object(n),!0).forEach(function(t){wF(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function OF(){return OF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OF.apply(null,arguments)}function wF(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=AF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=AF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==AF(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var TF=wF(wF(wF(wF({},Ii.N.INFO,"info"),Ii.N.SUCCESS,"success"),Ii.N.WARNING,"warning"),Ii.N.ERROR,"error"),CF=(0,pp.Ay)(B.A)({border:"1px solid currentColor",color:"inherit"}),IF=function(e,t){var n=e.buttons,r=e.message,o=e.header,a=r;if(Array.isArray(n)&&n.length>0){var i=n.map(function(e,n){var r=e.action,o=e.label,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,hF);return l.createElement(CF,OF({key:n,size:"small",variant:"outlined",style:{flexShrink:0},onClick:function(){return t(r)}},a),o)});a=l.createElement(F.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},a,i)}return o&&o.length>0&&(a=l.createElement("div",null,l.createElement("div",null,l.createElement("strong",null,o)),a)),a},xF=function(e){var t=e.dispatch,n=(0,f.Yf)(),r=n.addToast,o=n.toastStack,a=n.removeToast;return Bh(vF.A,function(e){var n=e.buttons,i=e.header,l=e.message,c=e.permanent,s=void 0!==c&&c,u=e.semantics,f=void 0===u?Ii.N.DEFAULT:u,d=e.timeout,p=e.topic,m=p&&o.find(function(e){return(null==e?void 0:e.topic)===p}),y=IF({buttons:n,message:l,header:i},t),g=EF(EF({appearance:TF[f]||"info",autoDismiss:!s},d&&{autoDismissTimeout:d}),{},{topic:p});m?(a(m.id),y&&setTimeout(function(){r(y,g)},250)):y&&r(y,g)}),null};xF.propTypes={dispatch:i().func.isRequired};const jF=(0,u.Ng)()(xF);var PF=n(53157),kF=n(66036),_F=["handleAxis"],NF=["boxProps","children","initialSize"];function RF(e){return RF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RF(e)}function DF(e){return function(e){if(Array.isArray(e))return FF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||LF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||LF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LF(e,t){if(e){if("string"==typeof e)return FF(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FF(e,t):void 0}}function FF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function UF(){return UF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UF.apply(null,arguments)}function GF(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function VF(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=RF(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=RF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RF(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var BF=function(e,t,n,r,o,a){return VF(VF(VF(VF(VF(VF({},e,50),t,15),n,5),r,"50%"),"cursor","".concat(o,"-resize")),"&:after",VF(VF(VF({},n,5),r,"-50%"),"border-".concat(n),"5px dotted ".concat(a.palette.action.selected)))},zF=function(e,t,n,r){return VF(VF(VF(VF({width:20,height:20},e,5),t,5),"cursor","".concat(n,"-resize")),"&:after",VF(VF(VF(VF({},e,5),t,5),"border-".concat(e),"5px dotted ".concat(r.palette.action.selected)),"border-".concat(t),"5px dotted ".concat(r.palette.action.selected)))},HF=(0,Bt.n9)(function(e){return{handle:{position:"absolute","&:after":{content:'""',display:"block",width:"100%",height:"100%",position:"relative"}},"handle-n":BF("width","height","top","left","ns",e),"handle-e":BF("height","width","right","top","ew",e),"handle-s":BF("width","height","bottom","left","ns",e),"handle-w":BF("height","width","left","top","ew",e),"handle-ne":zF("top","right","nesw",e),"handle-se":zF("bottom","right","nwse",e),"handle-sw":zF("bottom","left","nesw",e),"handle-nw":zF("top","left","nwse",e)}}),WF=l.forwardRef(function(e,t){var n=e.handleAxis,o=GF(e,_F),a=HF();return l.createElement(F.A,UF({ref:t,className:(0,r.A)(a.handle,a["handle-".concat(n)])},o))});WF.propTypes={handleAxis:i().string};var qF=function(e){var t=e.boxProps,n=e.children,r=e.initialSize,o=GF(e,NF),a=MF((0,l.useState)(r),2),i=a[0],c=a[1],s=(0,l.useCallback)(function(e,t){var n=t.size;c(n)},[]);return l.createElement(kF.Resizable,UF({width:i.width,height:i.height,handle:l.createElement(WF,null),onResize:s},o),l.createElement(F.A,UF({},t,{sx:[{width:i.width,height:i.height,position:"relative"}].concat(DF(Array.isArray(t.sx)?t.sx:[t.sx]))}),n))};qF.propTypes={boxProps:i().object,children:i().oneOfType([i().node,i().arrayOf(i().node)]),initialSize:i().object};const KF=qF;var YF=function(e){var t=e.selectedTab,n=e.uavId;switch(t){case"messages":return l.createElement(Td,{uavId:n});case"preflight":return l.createElement(eh,{uavId:n});case"tests":return l.createElement(tA,{uavId:n});case"logs":return l.createElement(Yv,{uavId:n});default:return null}};YF.propTypes={selectedTab:i().oneOf(["messages","preflight","tests","logs"]),uavId:i().string};const $F=(0,u.Ng)(function(e){return{selectedTab:(0,EE.kP)(e),uavId:(0,EE.Aq)(e)}})(YF);function ZF(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return JF(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?JF(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function JF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var XF=function(e){var t=e.gpsFix,n=e.heading,r=e.lastUpdated,o=e.localPosition,a=e.mode,i=e.position,c=e.rssi,s=i||{},u=s.lat,f=s.lon,d=s.amsl,p=s.ahl,m=s.agl,y=o&&Array.isArray(o),g=a?l.createElement(M.E3,{status:(0,zl.ke)(a)},(0,zl.aO)(a)):QP,b=null==t?void 0:t.type,v=[["Mode",g],"sep0"];if(!y||b){var h=b?l.createElement(l.Fragment,null,l.createElement(M.E3,{status:(0,zl.Jq)(b)},(0,zl.Jj)(b)),(null==t?void 0:t.numSatellites)&&" (".concat(null==t?void 0:t.numSatellites," sats)")):QP,A=t||{},S=A.horizontalAccuracy,E=A.verticalAccuracy;S="number"==typeof S&&S>50?"50+":(0,io.d)(S,2,"",QP),E="number"==typeof E&&E>50?"50+":(0,io.d)(E,2,"",QP);var O=l.createElement(l.Fragment,null,S," / ",E," m");v.push(["GPS fix",h],["GPS acc",O],"sep1",["Lat",(0,io.d)(u,7,"\xb0",QP)],["Lon",(0,io.d)(f,7,"\xb0",QP)],["AMSL",(0,io.d)(d,2," m",QP)],["AHL",(0,io.d)(p,2," m",QP)],["AGL",(0,io.d)(m,2," m",QP)],"sep2")}y&&v.push(["X",(0,io.d)(o[0],2," m",QP)],["Y",(0,io.d)(o[1],2," m",QP)],["Z",(0,io.d)(o[2],2," m",QP)]);var w=[];if(c&&Array.isArray(c)&&c.length>0){var T,C=ZF(c);try{for(C.s();!(T=C.n()).done;){var I=T.value;w.push(l.createElement(M.E3,{status:(0,zl.S2)(I)},(0,io.XT)(I))," / ")}}catch(e){C.e(e)}finally{C.f()}w.pop()}else w.push(QP);return v.push(["Heading",(0,io.d)(n,1,"\xb0",QP)],"sep3",["RSSI",w],"sep4",["Last seen",r?l.createElement(Bl.A,{formatter:io.ts,date:r}):QP]),l.createElement(tk,{items:v})};XF.propTypes={gpsFix:i().shape({type:i().number,numSatellites:i().number,horizontalAccuracy:i().number,verticalAccuracy:i().number}),heading:i().number,lastUpdated:i().number,localPosition:i().arrayOf(i().number),mode:i().string,position:i().shape({lat:i().number,lon:i().number,amsl:i().number,ahl:i().number,agl:i().number}),rssi:i().arrayOf(i().number)};const QF=(0,u.Ng)(function(e,t){return(0,wo.Pz)(e,t.uavId)},{})(XF);var eU=(0,Bt.n9)(function(e){return{root:{padding:e.spacing(2),minWidth:zh.VV},toolbar:{justifyContent:"center",padding:e.spacing(1,0)},toolbarInner:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",maxWidth:144,"& > button":{padding:8}}}}),tU=function(e){var t=e.uavId,n=e.setUAVId,r=eU();return l.createElement(F.A,{className:r.root},l.createElement(DA,{sortedByError:!0,onSelect:n},function(e){return l.createElement(xA,{id:t,AvatarProps:{onClick:e,style:{cursor:"pointer"}}})}),l.createElement(kc.A,{disableGutters:!0,variant:"dense",className:r.toolbar},l.createElement(F.A,{className:r.toolbarInner},l.createElement(kE,{hideSeparators:!0,selectedUAVIds:[t],size:"small"}))),l.createElement(QF,{uavId:t}))};tU.propTypes={setUAVId:i().func,uavId:i().string};const nU=(0,u.Ng)(function(e){return{uavId:(0,EE.Aq)(e)}},{setUAVId:EE.qz})(tU);var rU=["dragHandleId","value"];function oU(){return oU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oU.apply(null,arguments)}var aU=function(e){var t=e.dragHandleId,n=e.value,r=void 0===n?"preflight":n,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,rU);return l.createElement(M.nv,oU({alignment:"left",dragHandle:t,value:r},o),l.createElement(R.A,{label:"Preflight",value:"preflight"}),l.createElement(R.A,{label:"Tests",value:"tests"}),l.createElement(R.A,{label:"Messages",value:"messages"}),l.createElement(R.A,{label:"Logs",value:"logs"}))};aU.propTypes={dragHandleId:i().string,value:i().string};const iU=(0,u.Ng)(function(e){return{value:(0,EE.kP)(e)}},{onChange:function(e,t){return(0,EE.I3)(t)}})(aU);var lU=function(e){var t=e.initialPosition,n=e.initialWidth,r=e.onClose,o=e.onDragStop,a=e.onResizeStop,i=e.open,c=(window.innerWidth-n)/2,s=(window.innerHeight-zh.dP)/2,u={x:(0,PF.A)(t.x,-c,c),y:(0,PF.A)(t.y,-s,s)};return l.createElement(M.aQ,{DraggableProps:{bounds:"parent",defaultPosition:u,onStop:o},open:i,maxWidth:!1,sidebarComponents:l.createElement(nU,null),toolbarComponent:function(e){return l.createElement(iU,{dragHandle:e})},onClose:r},l.createElement(KF,{axis:"x",resizeHandles:["e"],initialSize:{width:n-zh.VV,height:zh.uv},minConstraints:[zh.Ex,zh.uv],boxProps:{maxWidth:"100%"},onResizeStop:a},l.createElement(F.A,{sx:{height:"100%",overflow:"auto"}},l.createElement($F,null))))};lU.propTypes={initialPosition:i().shape({x:i().number,y:i().number}),initialWidth:i().number,onClose:i().func,onDragStop:i().func,onResizeStop:i().func,open:i().bool};const cU=(0,u.Ng)(function(e){return{initialPosition:(0,EE.ge)(e),initialWidth:(0,EE.fm)(e),open:(0,EE.V1)(e)}},{onClose:function(){return function(e,t){Vk(t())?e(t_()):e((0,EE.Tz)())}},onDragStop:function(e,t){var n=t.x,r=t.y;return function(e){e((0,EE.E_)({x:n,y:r}))}},onResizeStop:function(e,t){var n=t.size;return function(e){e((0,EE.fc)(n.width+zh.VV))}}})(lU);var sU=function(e){var t=e.fetchSupportingObjectIdsForTargetIdOfSelectedUploadJob;return(0,l.useEffect)(t),(0,Xb.A)(t,5e3),null};sU.propTypes={fetchSupportingObjectIdsForTargetIdOfSelectedUploadJob:i().func};const uU=(0,u.Ng)(function(e){return{selectedUploadJob:Yp(e)}},{fetchSupportingObjectIdsForTargetId:function(e){return function(){var t,n=(t=$x().m(function t(n){var r,o,a;return $x().w(function(t){for(;;)switch(t.n){case 0:return r=n,o=Yx.H8,a=e,t.n=1,Fr.A.query.getFirmwareUpdateObjects({supports:[e]});case 1:return t.a(2,r(o(a,t.v)))}},t)}),function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){Jx(a,r,o,i,l,"next",e)}function l(e){Jx(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}()}},function(e,t){var n=e.selectedUploadJob,r=t.fetchSupportingObjectIdsForTargetId;return{fetchSupportingObjectIdsForTargetIdOfSelectedUploadJob:function(){var e;r(null==n||null===(e=n.payload)||void 0===e?void 0:e.target)}}})(sU);function fU(){return(e,t)=>{const n=function(e){const t=e.upload.timing?.startedAt;if(!t)return;const n=Object.values(e.upload.progresses).reduce((e,t)=>e+t,0),r=Object.values(e.upload.queues).reduce((e,t)=>e+t.length,0),o=r>0?n/r:0,a=Date.now()-t;return o>0?t+a/o:void 0}(t());return e((0,tb.VZ)(n))}}function dU(e){return(t,n)=>{const r=n(),o=[],a=[];for(const t of e)(0,nt.default)(t)||(Bp(r,t)?o.push(t):a.push(t));a.length>0?t((0,tb.SX)(a)):o.length>0&&t((0,tb.i5)(o))}}var pU=n(17803);const mU=e=>{const t=(0,u.wA)(),n=(0,u.d4)(Lp),r=(0,u.d4)(Yp);return(0,Rt.jsx)(M.qq,{icon:(0,Rt.jsx)(pU.A,{}),header:"Another task is in progress",text:"Wait for the other task to finish or cancel it to start a new upload",button:(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)(B.A,{startIcon:(0,Rt.jsx)(le.A,{}),onClick:()=>{t((0,tb.wM)())},children:"Cancel upload"}),(0,Rt.jsx)(F.A,{sx:{display:"inline-block",mx:1}}),(0,Rt.jsx)(B.A,{startIcon:(0,Rt.jsx)(mc.A,{}),onClick:()=>{t((0,tb.mP)({job:n,options:{backAction:(0,tb.mP)({job:r})}}))},children:"View progress"})]})})},yU=({hasQueuedItems:e,...t})=>(0,Rt.jsx)(D.wD,{children:n=>(0,Rt.jsx)(vc.W1,{content:n("startUploadButton.tooltip"),children:(0,Rt.jsx)(B.A,{startIcon:(0,Rt.jsx)(wl.A,{}),...t,children:n(e?"startUploadButton.startSelected":"general.action.start")})})}),gU=(0,Bt.n9)(e=>({root:{display:"flex",alignItems:"center",padding:e.spacing(1),fontFamily:e.typography.fontFamily,fontSize:e.typography.fontSize,"& span.counter":{margin:e.spacing(0,.5,0,1)},"& span.label":{opacity:.5}},selectable:{"&:hover":{backgroundColor:e.palette.action.hover,borderRadius:e.spacing(.5)}}})),bU=({counter:e,label:t,onClick:n,status:o,tooltip:a,...i})=>{const l=gU(),c=n&&e>0,s=(0,Rt.jsxs)(eu.A,{className:(0,r.A)(l.root,c&&l.selectable),disabled:!c,onClick:n,...i,children:[(0,Rt.jsx)(M.BG,{inline:!0,status:o}),(0,Rt.jsx)("span",{className:"counter",children:e}),(0,Rt.jsx)("span",{className:"label",children:t})]});return a?(0,Rt.jsx)(M.m_,{content:a,children:s}):s},vU=(0,u.Ng)(em,{onClearUploadQueue:tb.wo,onRestartSuccessfulUploads:function(){return(e,t)=>{const n=t().upload.queues.itemsFinished;e((0,tb.uw)(n)),am(t())||e((0,tb.aH)())}},onRetryFailedUploads:function(){return(e,t)=>{const n=t().upload.queues.failedItems;e((0,tb.FK)(n)),am(t())||e((0,tb.aH)())}}})((0,D.CI)()(({failed:e,finished:t,inProgress:n,onClearUploadQueue:r,onRestartSuccessfulUploads:o,onRetryFailedUploads:a,t:i,waiting:l})=>(0,Rt.jsxs)(F.A,{sx:{display:"flex",justifyContent:"space-around"},children:[(0,Rt.jsx)(bU,{counter:l,label:i("general.status.waiting"),status:Ti.n.INFO,tooltip:i("uploadStatusLegend.clearUploadQueue"),onClick:r}),(0,Rt.jsx)(bU,{counter:n,label:i("general.status.inProgress"),status:Ti.n.WARNING}),(0,Rt.jsx)(bU,{counter:t,label:i("general.status.successful"),tooltip:i("uploadStatusLegend.restartSuccessfulItems"),status:Ti.n.SUCCESS,onClick:o}),(0,Rt.jsx)(bU,{counter:e,label:i("general.status.failed"),status:Ti.n.ERROR,tooltip:i("uploadStatusLegend.retryFailedItems"),onClick:a})]})));var hU=["children","message","onClick","uavId"];var AU=(0,Bt.n9)(function(e){return{root:{padding:e.spacing(.5)},hover:{backgroundColor:e.palette.action.hover},selectable:{cursor:"pointer","&:hover":{backgroundColor:e.palette.action.hover}}}}),SU=function(){return{hollow:!0,status:Ti.n.OFF}},EU=function(e){var t=e.children,n=e.message,o=e.onClick,a=e.uavId,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,hU),c=AU(),s=o&&a?function(){return o(a)}:null,u=l.createElement(F.A,{className:(0,r.A)(c.root,s&&c.selectable),onClick:s},l.createElement(M.qs,i,t));return n?l.createElement(M.m_,{content:n},u):u};EU.propTypes={children:i().node,message:i().string,onClick:i().func,uavId:i().string};const OU=(0,u.Ng)(function(e,t){return function(e){return(0,nt.default)(e)?SU:function(t){return{status:tm(t)[e]||Ti.n.OFF,message:Qp(t)[e]||""}}}(t.uavId)},{onClick:function(e){return dU([e])}})(EU);var wU=["label","onClick","uavIds"];function TU(){return TU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TU.apply(null,arguments)}var CU=(0,Bt.n9)(function(e){return{root:{textAlign:"right",padding:e.spacing(.5),color:e.palette.text.secondary},hover:{backgroundColor:e.palette.action.hover},selectable:{cursor:"pointer","&:hover":{backgroundColor:e.palette.action.hover}}}}),IU=function(e){var t=e.label,n=e.onClick,o=e.uavIds,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,wU),i=CU(),c=n&&o?function(){return n(o)}:null;return l.createElement(F.A,TU({className:(0,r.A)(i.root,c&&i.selectable),onClick:c},a),t)};IU.propTypes={label:i().node,onClick:i().func,uavIds:i().arrayOf(i().string)};const xU=IU;var jU=(0,Bt.n9)(function(e){return{root:{display:"grid",gridTemplateColumns:"".concat(92,"px repeat(").concat(20,", 1fr)"),margin:e.spacing(1,0),"& div":{whiteSpace:"nowrap",overflow:"hidden"},overflowY:"auto",maxHeight:"calc(100vh - 320px)"},empty:{margin:e.spacing(1,0),height:64}}}),PU=function(e){var t=e.columnCount,n=void 0===t?20:t,r=e.idFormatter,o=e.ids,a=e.itemFormatter,i=void 0===a?wi.default:a,c=e.onHeaderClick,s=e.t,u=jU(),f=(0,l.useMemo)(function(){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.columnCount,r=t.itemFormatter,o=t.idFormatter,a=[],i=e.length,l=0;l<i;l+=n){var c=e.slice(l,l+n),s=c.map(r),u="".concat((0,io.MH)(c,o)," \u25b8");a.push({header:u,items:c,labels:s})}return a}(o,{columnCount:n,itemFormatter:i,idFormatter:r})},[o,n,i,r]);return 0===f.length?l.createElement(F.A,{className:u.empty},l.createElement(M.qq,{text:s("uploadStatusLights.noAvailableUAVs")})):l.createElement(F.A,{className:u.root},f.map(function(e){var t=e.header,n=e.items,r=e.labels;return l.createElement(l.Fragment,{key:t},l.createElement(xU,{label:t,uavIds:n,onClick:c}),n.map(function(e,t){return(0,nt.default)(e)?l.createElement(OU,{key:"__cell".concat(t)},"\u2014"):l.createElement(OU,{key:e,uavId:e},r[t])}))}))};PU.propTypes={columnCount:i().number,itemFormatter:i().func,idFormatter:i().func,ids:i().arrayOf(i().string),onHeaderClick:i().func,t:i().func};const kU=(0,u.Ng)(function(e){var t=$p(e),n=Zp(e),r=t===Mp.uw.MISSION;return{ids:cm(e),idFormatter:r?n:String}},{onHeaderClick:dU})((0,D.CI)()(PU)),_U=({completionTime:e,result:t,running:n,...r})=>{const{t:o}=(0,D.Bd)();let a,i;const l=Date.now(),c=e&&e>l?(e-l)/1e3:void 0;switch(Qb(c?500:null),t){case"success":a=Ti.n.SUCCESS,i=o("uploadPanel.uploadFinishedSuccessfully");break;case"cancelled":a=Ti.n.WARNING,i=o("uploadPanel.uploadCancelled");break;case"error":a=Ti.n.ERROR,i=o("uploadPanel.uploadAttemptFailed");break;default:a=Ti.n.INFO,i=o("uploadPanel.uploadNotFinishedYet")}return n&&(a=Ti.n.NEXT,i="number"==typeof c&&c>0?o("uploadPanel.uploadInProgressWithEstimate",{time:(0,io.Tr)(c,o)}):o("uploadPanel.uploadInProgress")),(0,Rt.jsx)(M.MW,{color:"textSecondary",status:a,size:"small",...r,children:i})},NU=(0,Bt.n9)(e=>({actions:{padding:e.spacing(1,3,1,3)},uploadResultIndicator:{flex:1,cursor:"pointer"},warningText:{color:Bt.Jy.warning}})),RU=(0,u.Ng)((e,t)=>({...Hp(e),autoRetry:Wp(e),completionTime:fm(e),flashFailed:qp(e),hasHiddenTargets:um(e),hasQueuedItems:om(e),lastUploadResult:Up(e,t.jobType),running:am(e)}),{onCancelUpload:tb.wM,onClose:tb.yx,onDismissLastUploadResult:tb.nW,onToggleAutoRetry:()=>(e,t)=>{const n=t(),r=Wp(n);e((0,tb.tY)(!r))},onToggleFlashFailed:()=>(e,t)=>{const n=t(),r=qp(n);e((0,tb.ci)(!r))}})(({autoRetry:e,completionTime:t,flashFailed:n,hasHiddenTargets:r,hasQueuedItems:o,lastUploadResult:a,onCancelUpload:i,onDismissLastUploadResult:l,onStartUpload:c,onStepBack:s,onToggleAutoRetry:u,onToggleFlashFailed:f,running:d=!1,showLastUploadResult:p=!1})=>{const m=NU(),{t:y}=(0,D.Bd)();return(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsxs)(N.A,{children:[(0,Rt.jsx)(kU,{}),(0,Rt.jsx)(vU,{}),(0,Rt.jsx)(F.A,{sx:{mt:1},children:(0,Rt.jsx)(rb,{})}),(0,Rt.jsxs)(F.A,{sx:{mt:1},children:[(0,Rt.jsx)(ne.A,{control:(0,Rt.jsx)(ee.A,{checked:e,onChange:u}),label:y("uploadPanel.retryFailedAttempts")}),(0,Rt.jsx)(ne.A,{control:(0,Rt.jsx)(ee.A,{checked:n,onChange:f}),label:y("uploadPanel.flashLightsWhereFailed")})]}),r&&(0,Rt.jsx)(qb.A,{severity:"warning",variant:"filled",children:(0,Rt.jsx)(F.A,{children:y("uploadPanel.hasHiddenTargets")})})]}),(0,Rt.jsxs)(Nn.A,{className:m.actions,children:[s&&(0,Rt.jsx)(ce.A,{size:"small",edge:"start",onClick:s,children:(0,Rt.jsx)(pk.A,{})}),(0,Rt.jsx)(TD.A,{in:a&&p||d,children:(0,Rt.jsx)(F.A,{className:m.uploadResultIndicator,onClick:l,children:(0,Rt.jsx)(_U,{completionTime:t,result:a,running:d})})}),d?(0,Rt.jsx)(B.A,{color:"secondary",startIcon:(0,Rt.jsx)(le.A,{}),onClick:i,children:y("uploadPanel.cancelUpload")}):(0,Rt.jsx)(yU,{className:r?m.warningText:void 0,disabled:!c,hasQueuedItems:o,onClick:c})]})]})}),DU=(0,u.Ng)(e=>{const{open:t,backAction:n}=Hp(e);return{open:t,canGoBack:!(0,nt.default)(n),canStartUpload:!0,restrictToGlobalSelection:Kp(e),runningJobType:Fp(e),selectedJobType:Yp(e)?.type}},{onClose:tb.yx,onStartUpload:function(){return(e,t)=>{const n=t(),{type:r,payload:o}=Yp(n),a=sm(n);a&&a.length>0&&r&&(e((0,tb.lm)({targets:a,type:r,payload:o})),e((0,tb.aH)()))}},onStepBack:function(){return async(e,t)=>{const{backAction:n}=Hp(t());e((0,tb.yx)()),await(0,fr.Ay)(150),n&&e(n)}},toggleRestrictToGlobalSelection:tb.tp})(({canGoBack:e,canStartUpload:t,restrictToGlobalSelection:n,onClose:r,onStartUpload:o,onStepBack:a,open:i,runningJobType:l,selectedJobType:c,toggleRestrictToGlobalSelection:s})=>{const{t:u}=(0,D.Bd)(),f=!l||l===c;return(0,Rt.jsxs)(M.aQ,{fullWidth:!0,open:Boolean(i),maxWidth:"md",title:(0,Mp.po)(c??""),titleComponents:(0,Rt.jsxs)(Rt.Fragment,{children:[u("uploadDialog.restrictToGlobalSelection"),(0,Rt.jsx)(Tt.A,{checked:n,onChange:e=>{s(),e.target.blur()}})]}),onClose:r,children:[c===_p&&(0,Rt.jsx)(uU,{}),f?(0,Rt.jsx)(RU,{jobType:c??"",onStepBack:e?a:void 0,onStartUpload:t?o:void 0}):(0,Rt.jsx)(F.A,{sx:{height:"240px"},children:(0,Rt.jsx)(mU,{type:l})})]})});var MU=function(e){e.components,e.height,e.width,(0,l.useCallback)(function(e){return 0===e?64:192},[]);return null};MU.propTypes={components:i().arrayOf(i().string),height:i().number,width:i().number};const LU=(0,u.Ng)(function(){return{components:["Autopilot","Companion computer","Hardware"]}},{})(MU);var FU=function(e){var t=e.onClose,n=e.open;return l.createElement(_.A,{fullWidth:!0,open:n,maxWidth:"sm",onClose:t},l.createElement(LU,{height:160,width:400}))};FU.propTypes={open:i().bool,onClose:i().func};const UU=(0,u.Ng)(function(e){return{open:e.versionCheck.dialog.open}},{onClose:yj.xx})(FU);const GU=function(e){var t=e.filename,n=e.onChanged,r=e.onRemoved,o=(0,l.useCallback)(function(e,t){"update"===e?n&&n():"remove"===e&&r&&r()},[n,r]);return(0,l.useEffect)(function(){if(window.bridge&&t)return window.bridge.watchFile(t,o)},[t,o]),null};var VU=function(e){var t=e.filename,n=e.onShowFileChangedExternally;return l.createElement(GU,{filename:t,onChanged:n})};VU.propTypes={filename:i().string,onShowFileChangedExternally:i().func};const BU=(0,u.Ng)(function(e){return{filename:(0,wp.b8)(e)}},{onShowFileChangedExternally:Tp.iI})(VU);var zU=function(e){var t=e.language,n=(0,D.Bd)().i18n;return(0,l.useEffect)(function(){n.changeLanguage(t)},[n,t]),null};zU.propTypes={language:i().string};const HU=(0,u.Ng)(function(e){return{language:e.settings.display.language}})(zU);var WU=n(69917),qU=n(70915);function KU(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return YU(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(YU(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,YU(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,YU(f,"constructor",s),YU(s,"constructor",c),c.displayName="GeneratorFunction",YU(s,o,"GeneratorFunction"),YU(f),YU(f,o,"Generator"),YU(f,r,function(){return this}),YU(f,"toString",function(){return"[object Generator]"}),(KU=function(){return{w:a,m:d}})()}function YU(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}YU=function(e,t,n,r){function a(t,n){YU(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},YU(e,t,n,r)}var $U=KU().m(ZU);function ZU(){var e,t,n;return KU().w(function(r){for(;;)switch(r.p=r.n){case 0:return r.n=1,(0,WU.cb)(1e3);case 1:return r.n=2,(0,WU.Lt)(bl.ZO);case 2:if(!((e=r.v).length>0)){r.n=7;break}return t=null,r.p=3,r.n=4,(0,WU.T1)(Fr.A.query.getBasicBeaconProperties,e);case 4:t=r.v,r.n=6;break;case 5:r.p=5,n=r.v,(0,ur.H4)(n,"Fetching beacon properties");case 6:if(!t||(0,qU.Im)(t)){r.n=7;break}return r.n=7,(0,WU.yJ)((0,Bj.EX)(t));case 7:return r.n=8,(0,WU.cb)(3e3);case 8:r.n=1;break;case 9:return r.a(2)}},$U,null,[[3,5]])}function JU(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return XU(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(XU(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,XU(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,XU(f,"constructor",s),XU(s,"constructor",c),c.displayName="GeneratorFunction",XU(s,o,"GeneratorFunction"),XU(f),XU(f,o,"Generator"),XU(f,r,function(){return this}),XU(f,"toString",function(){return"[object Generator]"}),(JU=function(){return{w:a,m:d}})()}function XU(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}XU=function(e,t,n,r){function a(t,n){XU(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},XU(e,t,n,r)}var QU=JU().m(tG),eG=JU().m(nG);function tG(){return JU().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,WU.cb)(5e3);case 1:return e.n=2,(0,WU.yJ)(t_());case 2:return e.a(2)}},QU)}function nG(){return JU().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,WU.p8)(Bk.ul.type,tG);case 1:return e.a(2)}},eG)}const rG=nG;function oG(e){return oG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oG(e)}function aG(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(oG(e)+" is not iterable")}var iG=uG().m(mG),lG=uG().m(yG);function cG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sG(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sG(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function uG(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return fG(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(fG(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,fG(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,fG(f,"constructor",s),fG(s,"constructor",c),c.displayName="GeneratorFunction",fG(s,o,"GeneratorFunction"),fG(f),fG(f,o,"Generator"),fG(f,r,function(){return this}),fG(f,"toString",function(){return"[object Generator]"}),(uG=function(){return{w:a,m:d}})()}function fG(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}fG=function(e,t,n,r){function a(t,n){fG(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},fG(e,t,n,r)}function dG(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function pG(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){dG(a,r,o,i,l,"next",e)}function l(e){dG(a,r,o,i,l,"throw",e)}i(void 0)})}}function mG(e){var t,n,r;return uG().w(function(o){for(;;)switch(o.n){case 0:n=0,r=uG().m(function r(){var o,a,i,l,c,s;return uG().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,(0,WU.Lt)(Pt);case 1:return o=r.v,r.n=2,(0,WU.Lt)(kt);case 2:if(void 0!==r.v&&o===t){r.n=8;break}return r.n=3,(0,WU.yJ)((0,qt.$F)());case 3:return r.n=4,(0,WU.Q7)([(0,WU.T1)(pG(uG().m(function t(){var n,r,a;return uG().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e(o);case 1:if(n=t.v){t.n=2;break}n="";case 2:return r=n,t.a(2,[r,undefined]);case 3:return t.p=3,a=t.v,t.a(2,[void 0,String(a)])}},t,null,[[0,3]])}))),(0,WU.cb)(n)]);case 4:if(a=r.v,i=cG(a[0],2),l=i[0],!(c=i[1])){r.n=6;break}return r.n=5,(0,WU.yJ)((0,qt.Ld)(c));case 5:r.n=7;break;case 6:return r.n=7,(0,WU.yJ)((0,qt.ON)(l));case 7:t=o;case 8:return r.n=9,(0,WU.s)([K.fw.type,K.uV.type,qt.Rk.type]);case 9:if((s=r.v).type!==K.fw.type&&s.type!==K.uV.type){r.n=10;break}return r.n=10,(0,WU.cb)(1e3);case 10:n=s.type===qt.Rk.type?1e3:0;case 11:return r.a(2)}},r)});case 1:return o.d(aG(r()),2);case 2:o.n=1;break;case 3:return o.a(2)}},iG)}function yG(e){var t;return uG().w(function(n){for(;;)switch(n.n){case 0:return t=[],e&&t.push(mG(e)),n.n=1,(0,WU.Q7)(t);case 1:return n.a(2)}},lG)}var gG=n(62315);function bG(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return vG(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(vG(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,vG(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,vG(f,"constructor",s),vG(s,"constructor",c),c.displayName="GeneratorFunction",vG(s,o,"GeneratorFunction"),vG(f),vG(f,o,"Generator"),vG(f,r,function(){return this}),vG(f,"toString",function(){return"[object Generator]"}),(bG=function(){return{w:a,m:d}})()}function vG(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}vG=function(e,t,n,r){function a(t,n){vG(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},vG(e,t,n,r)}var hG=bG().m(OG),AG=bG().m(wG);function SG(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return EG(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?EG(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function EG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function OG(){var e,t,n,r,o,a,i,l;return bG().w(function(c){for(;;)switch(c.n){case 0:return c.n=1,(0,WU.s)(lA.hE.type);case 1:return e=c.v,t=e.payload,c.n=2,(0,WU.Lt)(Mx);case 2:n=c.v,r={},o=SG(n);try{for(o.s();!(a=o.n()).done;)i=a.value,(l=t[i])&&(r[i]=(0,gG.default)(l.position,["lat","lon","amsl","ahl"]))}catch(e){o.e(e)}finally{o.f()}if((0,jd.A)(r)){c.n=3;break}return c.n=3,(0,WU.yJ)(fN(r));case 3:c.n=0;break;case 4:return c.a(2)}},hG)}function wG(){var e;return bG().w(function(t){for(;;)switch(t.n){case 0:e=null;case 1:return t.n=2,(0,WU.Lt)(zx);case 2:if(!t.v){t.n=5;break}if(e){t.n=4;break}return t.n=3,(0,WU.Zy)(OG);case 3:e=t.v;case 4:t.n=7;break;case 5:if(!e){t.n=7;break}return t.n=6,(0,WU.ZT)(e);case 6:e=null;case 7:return t.n=8,(0,WU.s)([ej.RQ.type,ej.po.type,ej.Pl.type,ej.GY.type,ej.eV.type]);case 8:t.n=1;break;case 9:return t.a(2)}},AG)}const TG=(CG="authentication",e=>e.dialogs[CG]&&e.dialogs[CG].open);var CG;function IG(e){return IG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IG(e)}function xG(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(IG(e)+" is not iterable")}var jG=DG().m(UG),PG=DG().m(GG),kG=DG().m(VG),_G=DG().m(BG),NG=DG().m(zG),RG=DG().m(HG);function DG(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return MG(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(MG(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,MG(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,MG(f,"constructor",s),MG(s,"constructor",c),c.displayName="GeneratorFunction",MG(s,o,"GeneratorFunction"),MG(f),MG(f,o,"Generator"),MG(f,r,function(){return this}),MG(f,"toString",function(){return"[object Generator]"}),(DG=function(){return{w:a,m:d}})()}function MG(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}MG=function(e,t,n,r){function a(t,n){MG(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},MG(e,t,n,r)}function LG(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function FG(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){LG(a,r,o,i,l,"next",e)}function l(e){LG(a,r,o,i,l,"throw",e)}i(void 0)})}}function UG(){var e,t,n,r;return DG().w(function(o){for(;;)switch(o.n){case 0:return o.n=1,(0,WU.Lt)(Ar.UJ);case 1:return e=o.v,o.n=2,(0,WU.Lt)(Ar.zk);case 2:if(t=o.v,!e||t){o.n=5;break}return o.n=3,(0,WU.T1)(FG(DG().m(function e(){var t,n;return DG().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Fr.A.sendMessage("AUTH-INF");case 1:return t=e.v,n=t.body,e.a(2,{methods:n.methods||[],required:n.required||!1});case 2:return e.p=2,e.v,e.a(2,void 0)}},e,null,[[0,2]])})));case 3:return n=o.v,o.n=4,(0,WU.T1)(FG(DG().m(function e(){var t,n;return DG().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Fr.A.sendMessage("AUTH-WHOAMI");case 1:return t=e.v,n=t.body,e.a(2,n.user||"");case 2:return e.p=2,e.v,e.a(2,"")}},e,null,[[0,2]])})));case 4:if(r=o.v,!n){o.n=5;break}return n.user=r,o.n=5,(0,WU.yJ)((0,Xr.z_)(n));case 5:return o.n=6,(0,WU.s)(Xr.am.type);case 6:o.n=0;break;case 7:return o.a(2)}},jG)}function GG(){var e,t,n,r,o;return DG().w(function(a){for(;;)switch(a.n){case 0:return a.n=1,(0,WU.s)(Xr.mZ.type);case 1:if(e=a.v,t=e.payload,n=t.result,r=t.reason,o=t.user,!n){a.n=4;break}return a.n=2,(0,WU.yJ)((0,Xr.tQ)(o));case 2:return a.n=3,(0,WU.yJ)((0,Ci.Ds)({message:o?"You are now authenticated as ".concat(o):"You are now deauthenticated",semantics:"success"}));case 3:a.n=5;break;case 4:return a.n=5,(0,WU.yJ)((0,Ci.Qg)(r||"Authentication failed"));case 5:a.n=0;break;case 6:return a.a(2)}},PG)}function VG(){var e,t,n;return DG().w(function(r){for(;;)switch(r.p=r.n){case 0:return r.n=1,(0,WU.Lt)(Ar.UJ);case 1:if(r.v){r.n=2;break}return r.a(3,14);case 2:return r.n=3,(0,WU.Lt)(Ar.wR);case 3:if(!(n=!r.v)){r.n=5;break}return r.n=4,(0,WU.Lt)(Ar.nG);case 4:n=!r.v;case 5:if(!(t=n)){r.n=7;break}return r.n=6,(0,WU.Lt)(TG);case 6:t=!r.v;case 7:if(!t){r.n=12;break}return e=!1,r.p=8,r.n=9,(0,WU.T1)(zG);case 9:e=r.v,r.n=11;break;case 10:r.p=10,r.v;case 11:if(e){r.n=12;break}return r.n=12,(0,WU.yJ)(Pr());case 12:return r.n=13,(0,WU.cb)(1e3);case 13:r.n=0;break;case 14:return r.a(2)}},kG,null,[[8,10]])}function BG(){var e,t;return DG().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,(0,WU.Lt)(Ar.UJ);case 1:return e=n.v,n.n=2,(0,WU.Lt)(Ar.zk);case 2:if(t=n.v,!e||!t){n.n=4;break}return n.n=3,(0,WU.Lt)(Ar.f1);case 3:if(!n.v){n.n=4;break}return n.d(xG(VG()),4);case 4:return n.n=5,(0,WU.s)([Xr.am.type,Xr.z_.type]);case 5:n.n=0;break;case 6:return n.a(2)}},_G)}function zG(){var e,t,n;return DG().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,(0,WU.Lt)(Ar.Y5);case 1:if(!(e=r.v)){r.n=4;break}return r.n=2,(0,WU.c0)(Nr({method:"jwt",data:e,messageHub:Fr.A}));case 2:if(t=r.v,!(n=t.value)||!n.result){r.n=3;break}return r.a(2,!0);case 3:case 4:return r.a(2,!1)}},NG)}function HG(){var e;return DG().w(function(t){for(;;)switch(t.n){case 0:return e=[UG(),BG(),GG()],t.n=1,(0,WU.Q7)(e);case 1:return t.a(2)}},RG)}function WG(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return qG(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(qG(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,qG(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,qG(f,"constructor",s),qG(s,"constructor",c),c.displayName="GeneratorFunction",qG(s,o,"GeneratorFunction"),qG(f),qG(f,o,"Generator"),qG(f,r,function(){return this}),qG(f,"toString",function(){return"[object Generator]"}),(WG=function(){return{w:a,m:d}})()}function qG(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}qG=function(e,t,n,r){function a(t,n){qG(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},qG(e,t,n,r)}function KG(e){return WG().m(function t(){var n,r,o,a;return WG().w(function(t){for(;;)switch(t.n){case 0:if(1!==(n=Object.keys(e)).length){t.n=2;break}return t.n=1,(0,WU.IJ)(n[0],e[n[0]]);case 1:t.n=9;break;case 2:if(!(n.length>1)){t.n=9;break}r={};case 3:return t.n=4,(0,WU.s)(n);case 4:if(o=t.v,!r[o.type]){t.n=6;break}if(!r[o.type].isRunning()){t.n=5;break}return t.a(3,3);case 5:delete r[o.type];case 6:if(!(a=e[o.type])){t.n=8;break}return t.n=7,(0,WU.Zy)(a,o);case 7:r[o.type]=t.v;case 8:t.n=3;break;case 9:return t.a(2)}},t)})}function YG(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).retryDelay,r=void 0===n?50:n;return WG().m(function n(){return WG().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=1,n.n=2,(0,WU.yJ)(e,t);case 2:return n.a(3,5);case 3:return n.p=3,n.v,n.n=4,(0,WU.cb)(r);case 4:n.n=0;break;case 5:return n.a(2)}},n,null,[[1,3]])})()}function $G(e){return $G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$G(e)}function ZG(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return JG(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(JG(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,JG(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,JG(f,"constructor",s),JG(s,"constructor",c),c.displayName="GeneratorFunction",JG(s,o,"GeneratorFunction"),JG(f),JG(f,o,"Generator"),JG(f,r,function(){return this}),JG(f,"toString",function(){return"[object Generator]"}),(ZG=function(){return{w:a,m:d}})()}function JG(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}JG=function(e,t,n,r){function a(t,n){JG(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},JG(e,t,n,r)}var XG=ZG().m(tV),QG=ZG().m(nV),eV=ZG().m(rV);function tV(){var e,t,n,r,o,a,i;return ZG().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,(0,WU.T1)(Fr.A.query.getShowConfiguration);case 1:if(e=l.v,t=(0,ha.A)(e,"start"),n=t.authorized,r=t.clock,o=t.time,a=t.method,i=t.uavIds,!(0,Pd.A)(o)&&!(0,nt.default)(o)||!(0,xf.A)(a)||!Array.isArray(i)){l.n=6;break}return l.n=2,(0,WU.yJ)((0,Tp.rU)(Boolean(n)));case 2:return l.n=3,(0,WU.yJ)((0,Tp.U9)(a));case 3:return l.n=4,(0,WU.yJ)((0,Tp.Lx)((0,rC.default)(i||[],nt.default)));case 4:return l.n=5,(0,WU.yJ)((0,Tp.gJ)({clock:r,time:o}));case 5:l.n=7;break;case 6:throw new TypeError("Invalid configuration object received from server");case 7:return l.a(2)}},XG)}function nV(){var e,t,n,r,o,a,i;return ZG().w(function(l){for(;;)switch(l.n){case 0:return l.n=1,(0,WU.Lt)(wp.fX);case 1:return e=l.v,l.n=2,(0,WU.Lt)(wp.LP);case 2:return t=l.v,l.n=3,(0,WU.Lt)(Un.VZ);case 3:return n=l.v,l.n=4,(0,WU.Lt)(wp.bY);case 4:return r=l.v,l.n=5,(0,WU.Lt)(wp.pp);case 5:return o=l.v,l.n=6,(0,WU.Lt)(wp.Op);case 6:return a=l.v,i="auto"===r?(0,rC.default)(n||[],nt.default):[],l.n=7,(0,WU.T1)(Fr.A.execute.setShowConfiguration,{start:{authorized:e,clock:t,time:o,method:r,uavIds:i},duration:a});case 7:return l.n=8,(0,WU.yJ)((0,Tp.Lx)(i));case 8:return l.a(2)}},QG)}function rV(e){var t,n;return ZG().w(function(r){for(;;)switch(r.p=r.n){case 0:return t=e.payload,n=!1,r.n=1,(0,WU.yJ)((0,Tp.Vh)("inProgress"));case 1:if(r.p=1,"fromServer"!==t&&"toClient"!==t){r.n=3;break}return r.n=2,tV();case 2:n=!0,r.n=6;break;case 3:if("toServer"!==t&&"fromClient"!==t){r.n=5;break}return r.n=4,nV();case 4:n=!0,r.n=6;break;case 5:return r.n=6,(0,WU.yJ)((0,Tp.Vh)("syncInProgress"));case 6:r.n=8;break;case 7:r.p=7,r.v,n=!1;case 8:return r.n=9,(0,WU.yJ)((0,Tp.Vh)(n?"synced":"error"));case 9:return r.a(2)}},eV,null,[[1,7]])}const oV=KG(function(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=$G(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$G(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},Tp.L5,rV));var aV=n(44040),iV=n(95443);function lV(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return cV(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(cV(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,cV(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,cV(f,"constructor",s),cV(s,"constructor",c),c.displayName="GeneratorFunction",cV(s,o,"GeneratorFunction"),cV(f),cV(f,o,"Generator"),cV(f,r,function(){return this}),cV(f,"toString",function(){return"[object Generator]"}),(lV=function(){return{w:a,m:d}})()}function cV(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}cV=function(e,t,n,r){function a(t,n){cV(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},cV(e,t,n,r)}function sV(e){var t=e.maxLengthInSeconds;return lV().m(function e(){var n,r,o,a;return lV().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!(n=(0,iV.b)())){e.n=4;break}if(e.p=1,!(r=(0,aV.decode)(n))||"number"!=typeof r.exp){e.n=2;break}return e.n=2,(0,WU.yJ)((0,xI.PD)(1e3*r.exp));case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:if(!("number"==typeof t&&t>0)){e.n=5;break}return e.n=5,(0,WU.yJ)((0,xI.CQ)(t));case 5:return e.n=6,(0,WU.Lt)(function(e){return e.session.expiresAt});case 6:if(!((o=e.v)&&"number"==typeof o&&o>=0)){e.n=9;break}if(!((a=o-Date.now())>0)){e.n=7;break}return e.n=7,(0,WU.cb)(a);case 7:return e.n=8,(0,WU.yJ)((0,xI.Wl)());case 8:return e.n=9,(0,WU.yJ)(Tr());case 9:return e.a(2)}},e,null,[[1,3]])})()}var uV=n(6608);function fV(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return dV(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(dV(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,dV(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,dV(f,"constructor",s),dV(s,"constructor",c),c.displayName="GeneratorFunction",dV(s,o,"GeneratorFunction"),dV(f),dV(f,o,"Generator"),dV(f,r,function(){return this}),dV(f,"toString",function(){return"[object Generator]"}),(fV=function(){return{w:a,m:d}})()}function dV(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}dV=function(e,t,n,r){function a(t,n){dV(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},dV(e,t,n,r)}var pV=fV().m(mV);function mV(){var e,t,n,r,o;return fV().w(function(a){for(;;)switch(a.n){case 0:e=TO.hp.toString(),t=TO.vb.toString();case 1:return a.n=2,(0,WU.s)([e,t]);case 2:if(n=a.v,!(r=yV())){a.n=6;break}o=n.type,a.n=o===e?3:o===t?4:5;break;case 3:return r.resetZoom(),bV(),a.a(3,6);case 4:return gV(r,n.payload),bV(),a.a(3,6);case 5:return a.a(3,6);case 6:a.n=1;break;case 7:return a.a(2)}},pV)}function yV(){if(OO.current){var e=OO.current.components;return e?e["advanced-camera-controls"]:null}return null}function gV(e,t){var n={lookAt:(0,uV.nT)(t)};e.startTransitionTo(n)}function bV(){var e=wO();e&&e.focus&&e.focus()}var vV=n(9401),hV=n(90734);function AV(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return SV(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(SV(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,SV(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,SV(f,"constructor",s),SV(s,"constructor",c),c.displayName="GeneratorFunction",SV(s,o,"GeneratorFunction"),SV(f),SV(f,o,"Generator"),SV(f,r,function(){return this}),SV(f,"toString",function(){return"[object Generator]"}),(AV=function(){return{w:a,m:d}})()}function SV(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}SV=function(e,t,n,r){function a(t,n){SV(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},SV(e,t,n,r)}var EV=AV().m(FV),OV=AV().m(UV),wV=AV().m(GV);function TV(e){return function(e){if(Array.isArray(e))return NV(e)}(e)||jV(e)||_V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CV(e,t){return PV(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||_V(e,t)||xV()}function IV(e){return PV(e)||jV(e)||_V(e)||xV()}function xV(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jV(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function PV(e){if(Array.isArray(e))return e}function kV(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_V(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function _V(e,t){if(e){if("string"==typeof e)return NV(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?NV(e,t):void 0}}function NV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var RV=function(e){return e.toJSON()},DV=function(e){return(0,yT.A)(e,RV)};function MV(e,t,n){var r=n.warnThreshold,o=n.goneThreshold,a=e?t-e:6e8;return a>n.forgetThreshold?hS.O.FORGOTTEN:a>o?hS.O.GONE:a>r?hS.O.INACTIVE:hS.O.ACTIVE}function LV(e){return(0,vV.Od)(function(t){var n=null,r={};function o(){(0,jd.A)(r)?n=null:(t(["updated",r]),n=setTimeout(o,500)),r={}}var a={uavsAdded:e.uavsAdded.add(function(e){var n,r={},o=kV(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;void 0!==a.id&&(a.age=hS.O.ACTIVE,r[a.id]=a)}}catch(e){o.e(e)}finally{o.f()}t(["added",r])}),uavsRemoved:e.uavsRemoved.add(function(e){var n,o=[],a=kV(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;void 0!==i.id&&(o.push(i),delete r[i.id])}}catch(e){a.e(e)}finally{a.f()}t(["removed",o])}),uavsUpdated:e.uavsUpdated.add(function(e){var t,a=kV(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;r[i.id]=i}}catch(e){a.e(e)}finally{a.f()}null===n&&(o(),n=setTimeout(o,500))})};return function(){e.uavsAdded.detach(a.uavsAdded),e.uavsRemoved.detach(a.uavsRemoved),e.uavsUpdated.detach(a.uavsUpdated),null!==n&&clearTimeout(n)}})}function FV(e){var t,n,r,o,a,i,l,c,s,u,f,d,p,m,y,g,b,v,h,A,S,E,O,w,T,C,I;return AV().w(function(x){for(;;)switch(x.n){case 0:return t=new Map,n=!1,x.n=1,(0,WU.T1)(LV,e);case 1:i=x.v;case 2:return x.n=3,(0,WU.s)(i);case 3:l=x.v,c=IV(l),s=c[0],u=NV(c).slice(1),o=null,a=null,n=t.size>0,r=!1,I=s,x.n="added"===I?4:"removed"===I?6:"updated"===I?8:10;break;case 4:return o=DV(u[0]),x.n=5,(0,WU.yJ)((0,lA.T1)(o));case 5:return x.a(3,11);case 6:return a=u[0].map(function(e){return e.id}),x.n=7,(0,WU.yJ)((0,lA.aE)(a));case 7:if(n){f=kV(a);try{for(f.s();!(d=f.n()).done;)p=d.value,t.delete(p)}catch(e){f.e(e)}finally{f.f()}}return x.a(3,11);case 8:return o=DV(u[0]),x.n=9,(0,WU.yJ)((0,lA.hE)(o));case 9:return x.a(3,11);case 10:case 11:if(o)if(n)for(A=0,S=Object.entries(o);A<S.length;A++)E=CV(S[A],2),O=E[0],w=E[1],T=w.errors.length>0?Math.max.apply(Math,TV(w.errors)):0,(0,hV.A)(T)?(C=t.get(O),((0,nt.default)(C)||C<T)&&(t.set(O,T),r=!0)):t.has(O)&&t.delete(O);else for(m=0,y=Object.entries(o);m<y.length;m++)g=CV(y[m],2),b=g[0],v=g[1],h=v.errors.length>0?Math.max.apply(Math,TV(v.errors)):0,(0,hV.A)(h)&&(t.set(b,h),r=!0,n=!0);if(!(n&&t.size<=0)){x.n=12;break}return x.n=12,(0,WU.yJ)((0,iI.cB)());case 12:if(!r){x.n=13;break}return x.n=13,(0,WU.yJ)((0,iI.Vj)());case 13:x.n=2;break;case 14:return x.a(2)}},EV)}function UV(e){var t,n,r,o,a,i,l,c,s,u,f,d,p;return AV().w(function(m){for(;;)switch(m.n){case 0:return m.n=1,(0,WU.cb)(1e3);case 1:return m.n=2,(0,WU.Lt)(wo.gd);case 2:return t=m.v,m.n=3,(0,WU.Lt)(wo.Ev);case 3:return n=m.v,m.n=4,(0,WU.Lt)(Ar.li);case 4:if(p=m.v){m.n=5;break}p=0;case 5:return r=p,m.n=6,(0,WU.Lt)(un.xf);case 6:o=m.v,a=Date.now()+r,i={},l=[],c=kV(n);try{for(c.s();!(s=c.n()).done;)u=s.value,(f=t[u])&&((d=MV(f.lastUpdated,a,o))===hS.O.FORGOTTEN?l.push(u):d!==f.age&&(i[u]=d))}catch(e){c.e(e)}finally{c.f()}if((0,jd.A)(i)){m.n=7;break}return m.n=7,(0,WU.yJ)((0,lA.uW)(i));case 7:l.length>0&&e.removeUAVsByIds(l),m.n=0;break;case 8:return m.a(2)}},OV)}function GV(e){return AV().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,(0,WU.Q7)([FV(e),UV(e)]);case 1:return t.a(2)}},wV)}n(94298);function VV(e){return VV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VV(e)}function BV(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return zV(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(zV(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,zV(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,zV(f,"constructor",s),zV(s,"constructor",c),c.displayName="GeneratorFunction",zV(s,o,"GeneratorFunction"),zV(f),zV(f,o,"Generator"),zV(f,r,function(){return this}),zV(f,"toString",function(){return"[object Generator]"}),(BV=function(){return{w:a,m:d}})()}function zV(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}zV=function(e,t,n,r){function a(t,n){zV(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},zV(e,t,n,r)}var HV=BV().m(ZV),WV=BV().m(QV),qV=BV().m(eB),KV=BV().m(tB),YV=BV().m(rB),$V=(0,vV.Ix)(vV.u2.fixed(1));function ZV(){var e,t,n;return BV().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,(0,WU.s)($V);case 1:return e=r.v,t=e.uavId,n=e.progress,r.n=2,(0,WU.yJ)((0,tb.qy)(t,n.percentage/100));case 2:r.n=0;break;case 3:return r.a(2)}},HV)}var JV=function(e,t){var n=t.progress;return $V.put({uavId:e,progress:n})},XV=Symbol("STOP");function QV(e,t){var n,r,o,a,i,l,c,s,u,f,d;return BV().w(function(p){for(;;)switch(p.p=p.n){case 0:return p.n=1,(0,WU.s)(e);case 1:if((o=p.v)!==XV){p.n=2;break}return p.a(3,24);case 2:return a=o.executor,i=o.payload,l=o.selector,c=o.target,n=void 0,r=void 0,p.p=3,p.n=4,(0,WU.yJ)((0,tb.OX)(c));case 4:if(!l){p.n=6;break}return p.n=5,(0,WU.Lt)(l,c);case 5:u=p.v,p.n=7;break;case 6:u=void 0;case 7:return s=u,p.n=8,(0,WU.T1)(a,{uavId:c,payload:i,data:s},{onProgress:JV});case 8:n="success",p.n=10;break;case 9:p.p=9,f=p.v,n="failure",r=f;case 10:return p.p=10,p.n=11,(0,WU.KW)()&&!n;case 11:if(!p.v){p.n=12;break}n="cancelled";case 12:return p.f(10);case 13:d=n,p.n="success"===d?14:"failure"===d?16:"cancelled"===d?19:21;break;case 14:return p.n=15,(0,WU.yJ)((0,tb.gg)(c));case 15:return p.a(3,22);case 16:return t.push(c),p.n=17,(0,WU.yJ)((0,tb.gB)(c));case 17:return p.n=18,(0,WU.yJ)((0,tb.iZ)(c,(0,ur.Nw)(r.message||r)));case 18:return p.a(3,22);case 19:return p.n=20,(0,WU.yJ)((0,tb.yG)(c));case 20:case 21:return p.a(3,22);case 22:return p.n=23,(0,WU.yJ)(fU());case 23:p.n=0;break;case 24:return p.a(2)}},WV,null,[[3,9,10,13]])}function eB(e,t){var n,r,o,a,i,l,c,s,u,f,d,p,m;return BV().w(function(y){for(;;)switch(y.n){case 0:if(n=e.executor,r=e.selector,n){y.n=1;break}return y.a(2);case 1:return y.n=2,(0,WU.T1)(vV.Ix,vV.u2.fixed(1));case 2:return o=y.v,y.n=3,(0,WU.Lt)(un.fB);case 3:a=y.v,i=[],l=[],c=!1,s=!1,u=0;case 4:if(!(u<a)){y.n=7;break}return y.n=5,(0,WU.Zy)(QV,o,i);case 5:f=y.v,l.push(f);case 6:u++,y.n=4;break;case 7:if(c){y.n=20;break}return y.n=8,(0,WU.Lt)(zp);case 8:if(d=y.v,!!(0,nt.default)(d)){y.n=11;break}return y.n=9,(0,WU.yJ)((0,tb.kb)(d));case 9:return y.n=10,YG(o,{executor:n,payload:t.payload,selector:r,target:d});case 10:y.n=19;break;case 11:return y.n=12,(0,WU.Lt)(qp);case 12:return y.v&&i.length>0&&(0,hg.HM)(i),y.n=13,(0,WU.Lt)(Wp);case 13:if(!(y.v&&i.length>0)){y.n=15;break}return p=[].concat(i),i.length=0,y.n=14,(0,WU.yJ)((0,tb.FK)(p));case 14:y.n=19;break;case 15:return y.n=16,(0,WU.Lt)(Gp);case 16:if(!(y.v.length>0)){y.n=18;break}return y.n=17,(0,WU.cb)(500);case 17:y.n=19;break;case 18:c=!0,s=0===i.length;case 19:y.n=7;break;case 20:m=0;case 21:if(!(m<a)){y.n=23;break}return y.n=22,YG(o,XV);case 22:m++,y.n=21;break;case 23:return y.n=24,(0,WU.fj)(l);case 24:return y.a(2,s)}},qV)}function tB(){var e,t,n,r,o,a,i,l;return BV().w(function(c){for(;;)switch(c.p=c.n){case 0:return c.n=1,(0,WU.Lt)(Lp);case 1:if((e=c.v).type){c.n=2;break}return c.a(2);case 2:if(t=(0,Mp.iF)(e.type)){c.n=3;break}return c.a(2);case 3:return c.n=4,(0,WU.yJ)((0,tb.Gf)(Date.now()));case 4:return c.p=4,n=t.workerManager,r=void 0===n?eB:n,c.n=5,(0,WU.O4)({success:(0,WU.T1)(r,t,e),cancelled:(0,WU.s)(tb.wM)});case 5:return o=c.v,a=o.cancelled,i=o.success,c.n=6,(0,WU.yJ)((0,tb.AP)({cancelled:Boolean(a),success:Boolean(i)}));case 6:c.n=8;break;case 7:return c.p=7,l=c.v,(0,ur.H4)(l,"Upload operation"),c.n=8,(0,WU.yJ)((0,tb.AP)({cancelled:!1,success:!1}));case 8:return c.a(2)}},KV,null,[[4,7]])}var nB=KG(function(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=VV(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=VV(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VV(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},tb.aH,tB));function rB(){return BV().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,WU.Q7)([nB(),ZV()]);case 1:return e.a(2)}},YV)}var oB=n(4607),aB=(0,gr.vR)("weather/loading",function(e){return Fr.A.query.getWeatherInformation(e)},{minDelay:500});function iB(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return lB(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(lB(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,lB(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,lB(f,"constructor",s),lB(s,"constructor",c),c.displayName="GeneratorFunction",lB(s,o,"GeneratorFunction"),lB(f),lB(f,o,"Generator"),lB(f,r,function(){return this}),lB(f,"toString",function(){return"[object Generator]"}),(iB=function(){return{w:a,m:d}})()}function lB(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}lB=function(e,t,n,r){function a(t,n){lB(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},lB(e,t,n,r)}var cB=iB().m(uB),sB=6e4;function uB(){var e,t,n,r;return iB().w(function(o){for(;;)switch(o.p=o.n){case 0:return e=void 0,o.n=1,(0,WU.Lt)(Ar.UJ);case 1:if(!o.v){o.n=8;break}return e=!1,o.p=2,o.n=3,(0,WU.yJ)((0,qj.Lt)(Date.now()));case 3:return o.n=4,(0,WU.Lt)(He.Gk);case 4:return t=o.v,o.n=5,(0,WU.c0)(aB(t));case 5:e=!0,o.n=7;break;case 6:o.p=6,o.v;case 7:if(!e){o.n=8;break}return o.n=8,(0,WU.yJ)((0,qj.Ag)(Date.now()));case 8:return o.n=9,(0,WU.Lt)(NC);case 9:return n=o.v,r=n?n+30*sB-Date.now():0,o.n=10,(0,WU.O4)({action:(0,WU.s)([Xr.am.type,oB.c.type]),refresh:(0,WU.cb)(Math.max(r,sB))});case 10:o.n=0;break;case 11:return o.a(2)}},cB,null,[[2,6]])}function fB(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return dB(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(dB(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,dB(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,dB(f,"constructor",s),dB(s,"constructor",c),c.displayName="GeneratorFunction",dB(s,o,"GeneratorFunction"),dB(f),dB(f,o,"Generator"),dB(f,r,function(){return this}),dB(f,"toString",function(){return"[object Generator]"}),(fB=function(){return{w:a,m:d}})()}function dB(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}dB=function(e,t,n,r){function a(t,n){dB(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},dB(e,t,n,r)}var pB=fB().m(bB);function mB(){var e;return Boolean(null===(e=window)||void 0===e||null===(e=e.bridge)||void 0===e?void 0:e.isElectron)}function yB(){return mB()?"localhost":new URL(window.location.href).hostname}function gB(){if(mB())return 5001;var e=new URL(window.location.href);return e.port&&e.port.length>0?e.port:"http:"===e.protocol?80:(e.protocol,443)}function bB(){var e,t,n,r,a,i,l,c,s;return fB().w(function(u){for(;;)switch(u.n){case 0:return u.n=1,(0,WU.Lt)(Ar.XP);case 1:if(e=u.v,!(0,nt.default)(e)){u.n=7;break}if(t=o.A.server,n=t.connectAutomatically,r=t.hostName,a=t.isSecure,i=t.port,l=t.protocol,n&&(r||(r=yB()),!(0,nt.default)(i)&&i||(i=gB())),i=Number.parseInt((0,nt.default)(i)?o.A.server.port:i,10),Number.isNaN(i)&&(i=hr.SD?5001:443),l){u.n=6;break}s=i,u.n=80===s||443===s?2:5e3===s?3:5001===s?4:5;break;case 2:case 3:return l=ka.Z.WS,u.a(3,6);case 4:return l=ka.Z.TCP,u.a(3,6);case 5:l=hr.SD?ka.Z.TCP:ka.Z.WS;case 6:return c={active:n,protocol:l,hostName:r,port:i,isSecure:a||443===i},u.n=7,(0,WU.yJ)(xr(c));case 7:return u.a(2)}},pB)}function vB(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return hB(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(hB(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,hB(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,hB(f,"constructor",s),hB(s,"constructor",c),c.displayName="GeneratorFunction",hB(s,o,"GeneratorFunction"),hB(f),hB(f,o,"Generator"),hB(f,r,function(){return this}),hB(f,"toString",function(){return"[object Generator]"}),(vB=function(){return{w:a,m:d}})()}function hB(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}hB=function(e,t,n,r){function a(t,n){hB(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},hB(e,t,n,r)}var AB=vB().m(SB);function SB(){var e,t,n;return vB().w(function(r){for(;;)switch(r.n){case 0:return e=(window?window.bridge:null)||{},t=e.localServer,n=[rG(),wG(),bB(),HG(),oV(),mV(),GV(sl.Ay),rB(),uB()],t&&t.search&&n.push(yG(t.search)),(0,fl.jI)("beacons")&&n.push(ZU()),fl.Os&&n.push(sV(o.A.session)),r.n=1,(0,WU.Q7)(n);case 1:return r.a(2)}},AB)}var EB=n(99668),OB=n(59956),wB=n(73533);const TB=(0,Bt.HM)({primaryColor:e=>e?EB.A:Kf.A,secondaryColor:e=>e?OB.A:wB.A}),CB=()=>{const e=(0,Bt.Mw)((0,bs.A)());return(0,Bt.VV)('/* dark mode specific stylesheet tweaks */\n\n/* Adjust error panel for dark mode */\n.error-panel {\n  background: #424242 !important;\n  color: white;\n}\n\n/* Change the background color of the workbench and its panels in dark mode */\n.lm_goldenlayout {\n  background: #333;\n}\nbody .lm_content {\n  background-color: #424242;\n  border: 1px solid #777;\n}\n\n/* Fix the background color of the panel bodies and the tabs */\nbody .lm_header .lm_tab {\n  background-color: #3b3b3b;\n  border-color: #777;\n}\nbody .lm_header .lm_tab:hover {\n  color: white;\n}\nbody .lm_header .lm_tab.lm_active {\n  background-color: #424242;\n  color: white;\n}\n\n/* Change the color of splitters */\n.lm_splitter {\n  background: #424242;\n}\n.lm_splitter:hover,\n.lm_splitter.lm_dragging {\n  background: #222;\n}\n\n/* OpenLayers widget customizations */\n.ol-control button,\n.ol-control button:hover,\n.ol-control button:focus {\n  background-color: #424242 !important;\n  color: #fff !important;\n}\n.ol-attribution {\n  background-color: rgba(68, 68, 68, 0.8) !important;\n  color: #fff !important;\n}\n.ol-attribution ul {\n  color: rgba(255, 255, 255, 0.7) !important;\n  text-shadow: none;\n}\n.ol-attribution ul a,\n.ol-attribution ul a:hover,\n.ol-attribution ul a:active,\n.ol-attribution ul a:visited {\n  color: #fff !important;\n  text-decoration: none;\n}\n.ol-mouse-position {\n  background-color: #424242 !important;\n  color: #fff !important;\n}\n.ol-scale-line {\n  background-color: #424242 !important;\n  border-color: #424242 !important;\n}\n.ol-scale-line-inner {\n  border-color: #fff !important;\n  color: #fff !important;\n}\n\n/* Keyboard tag styling */\nkbd {\n  background: #616161 !important;\n  box-shadow: 1px 1px 1px #333;\n  color: #ddd !important;\n}\n\nkbd:hover,\nkbd:hover * {\n  color: white !important;\n}\n\n/* The rest comes directly from the dark mode stylesheet of react-flexible-workbench */\n.lm_dragProxy .lm_content {\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.9);\n}\n.lm_dropTargetIndicator {\n  box-shadow: inset 0 0 30px #000000;\n  outline: 1px dashed #cccccc;\n  transition: all 200ms ease;\n}\n.lm_dropTargetIndicator .lm_inner {\n  background: #000000;\n  opacity: 0.2;\n}\n.lm_header .lm_tab .lm_close_tab {\n  width: 11px;\n  height: 11px;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAATElEQVR4nG3OwQ0DMQwDwZGRBtR/j1YJzMc5+IDoR+yCVO29g+pu981MFgqZmRdAfU7+CYWcbF11LwALjpBL0N0qybNx/RPU+gOeiS/+XCRwDlTgkQAAAABJRU5ErkJggg==);\n  background-position: center center;\n  background-repeat: no-repeat;\n  top: 4px;\n  right: 6px;\n  opacity: 0.4;\n}\n.lm_header .lm_tab .lm_close_tab:hover {\n  opacity: 1;\n}\n.lm_header .lm_controls .lm_tabdropdown:before {\n  color: #ffffff;\n}\n.lm_controls .lm_popout {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAPklEQVR4nI2Q0QoAIAwCNfr/X7aXCpGN8snBdgejJOzckpkxs9jR6K6T5JpU0nWl5pSXTk7qwh8SnNT+CAAWCgkKFpuSWsUAAAAASUVORK5CYII=);\n}\n.lm_controls .lm_maximise {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAKElEQVR4nGP8////fwYCgImQAgYGBgYWKM2IR81/okwajIpgvsMbVgAwgQYRVakEKQAAAABJRU5ErkJggg==);\n}\n.lm_controls .lm_close {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAQUlEQVR4nHXOQQ4AMAgCQeT/f6aXpsGK3jSTuCVJAAr7iBdoAwCKd0nwfaAdHbYERw5b44+E8JoBjEYGMBq5gAYP3usUDu2IvoUAAAAASUVORK5CYII=);\n}\n.lm_maximised .lm_header {\n  background-color: #333;\n}\n.lm_maximised .lm_controls .lm_maximise {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAJ0lEQVR4nGP8//8/AzGAiShVI1YhCwMDA8OsWbPwBmZaWhoj0SYCAN1lBxMAX4n0AAAAAElFTkSuQmCC);\n}\n.lm_transition_indicator {\n  background-color: #333;\n  border: 1px dashed #555;\n}\n.lm_popin .lm_icon {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAJCAYAAADpeqZqAAAAWklEQVR4nJWOyw3AIAxDHcQC7L8jbwT3AlJBfNp3SiI7dtRaLSlKKeoA1oEsKSQZCEluexw8Tm3ohk+E7bnOUHUGcNh+HwbBygw4AZ7FN/Lt84p0l+yTflV8AKQyLdcCRJi/AAAAAElFTkSuQmCC);\n  background-position: center center;\n  background-repeat: no-repeat;\n  border-left: 1px solid #eeeeee;\n  border-top: 1px solid #eeeeee;\n  opacity: 0.7;\n}\n.lm_popin:hover .lm_icon {\n  opacity: 1;\n}\n\n/* Dark mode support for the Markdown editor in the "Field notes" panel */\n.EasyMDEContainer .CodeMirror {\n  color: white !important;\n  background-color: #424242 !important;\n}\n.EasyMDEContainer .CodeMirror-cursor {\n  border-color: #777 !important;\n}\n',e),null},IB=(0,u.Ng)(e=>({type:e.settings.display.theme}))(TB);function xB(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return jB(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(jB(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,jB(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,jB(f,"constructor",s),jB(s,"constructor",c),c.displayName="GeneratorFunction",jB(s,o,"GeneratorFunction"),jB(f),jB(f,o,"Generator"),jB(f,r,function(){return this}),jB(f,"toString",function(){return"[object Generator]"}),(xB=function(){return{w:a,m:d}})()}function jB(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}jB=function(e,t,n,r){function a(t,n){jB(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},jB(e,t,n,r)}var PB={executor:function(e,t){var n=e.uavId,r=e.payload;return xB().m(function e(){var o,a,i;return xB().w(function(e){for(;;)switch(e.n){case 0:return a=(o=null!=r?r:{}).target,i=o.blob,e.n=1,(0,WU.T1)(Fr.A.execute.uploadFirmware,{objectId:n,target:a,blob:i},t);case 1:return e.a(2)}},e)})()},scope:Mp.uw.COMPATIBLE,title:"Update firmware",type:_p};const kB=PB;var _B=n(89536);function NB(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return RB(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(RB(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,RB(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,RB(f,"constructor",s),RB(s,"constructor",c),c.displayName="GeneratorFunction",RB(s,o,"GeneratorFunction"),RB(f),RB(f,o,"Generator"),RB(f,r,function(){return this}),RB(f,"toString",function(){return"[object Generator]"}),(NB=function(){return{w:a,m:d}})()}function RB(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}RB=function(e,t,n,r){function a(t,n){RB(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},RB(e,t,n,r)}function DB(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return MB(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?MB(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function MB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var LB=(0,Ar.c0)(">=2.34.1");var FB={executor:function(e,t){var n=e.uavId,r=e.payload;return NB().m(function e(){var o,a,i,l,c,s,u,f,d,p;return NB().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a=(o=null!=r?r:{}).items,i=o.meta,Array.isArray(a)&&0!==a.length){e.n=1;break}return e.a(2);case 1:return e.n=2,(0,WU.Lt)(LB);case 2:if(!e.v){e.n=4;break}return l=Object.fromEntries(a.map(function(e){return[e.name,e.value]})),e.n=3,(0,WU.T1)(Fr.A.execute.setParameters,{uavId:n,parameters:l},t);case 3:e.n=11;break;case 4:c=DB(a),e.p=5,c.s();case 6:if((s=c.n()).done){e.n=8;break}return u=s.value,f=u.name,d=u.value,e.n=7,(0,WU.T1)(Fr.A.execute.setParameter,{uavId:n,name:f,value:d});case 7:e.n=6;break;case 8:e.n=10;break;case 9:e.p=9,p=e.v,c.e(p);case 10:return e.p=10,c.f(),e.f(10);case 11:if(!(null!=i?i:{}).shouldReboot){e.n=12;break}return e.n=12,(0,WU.T1)(Fr.A.execute.resetUAV,n);case 12:return e.a(2)}},e,null,[[5,9,10,11]])})()},title:"Upload parameters",type:tj};const UB=FB;function GB(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return VB(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(VB(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,VB(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,VB(f,"constructor",s),VB(s,"constructor",c),c.displayName="GeneratorFunction",VB(s,o,"GeneratorFunction"),VB(f),VB(f,o,"Generator"),VB(f,r,function(){return this}),VB(f,"toString",function(){return"[object Generator]"}),(GB=function(){return{w:a,m:d}})()}function VB(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}VB=function(e,t,n,r){function a(t,n){VB(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},VB(e,t,n,r)}function BB(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function zB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function HB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zB(Object(n),!0).forEach(function(t){WB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function WB(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=qB(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qB(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qB(e){return qB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qB(e)}function KB(){var e;return e=GB().m(function e(t){var n,r,o,a;return GB().w(function(e){for(;;)if(0===e.n)return n=t.uavId,r=t.data,o=Fr.A.createCancelToken(),(a=Fr.A.execute.uploadDroneShow({uavId:n,data:r},{cancelToken:o}))[vV.bO]=function(){return o.cancel({allowFailure:!0})},e.a(2,a)},e)}),KB=function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){BB(a,r,o,i,l,"next",e)}function l(e){BB(a,r,o,i,l,"throw",e)}i(void 0)})},KB.apply(this,arguments)}const YB={executor:function(e){return KB.apply(this,arguments)},selector:function(e,t){var n=(0,Un.Ps)(e),r=n?n[t]:void 0;if((0,nt.default)(r))throw new Error("UAV ".concat(t," is not in the current mission"));var o=(0,wp.Jn)(e);if((0,wp.kP)(e)&&("object"!==qB(o)||!Array.isArray(o.origin)))throw new TypeError("Show coordinate system not specified");var a=function(e){var t=(0,Un.GQ)(e),n=(0,wp.SJ)(e),r={version:1,enabled:!0,polygons:n?[{isInclusion:!0,points:n}]:[],rallyPoints:[],maxAltitude:(0,KD.Dp)(e),maxDistance:(0,KD.zr)(e)};return t!==qD.FU.KEEP_CURRENT&&(r.action=t),r}(e),i=(0,wp.Kh)(e);if(!i||!Array.isArray(i))throw new Error("Invalid show configuration in state store");var l=i[r];if(!l||"object"!==qB(l))throw new Error("No specification for UAV ".concat(t," (index ").concat(r,")"));var c=l.settings;if("object"!==qB(c))throw new TypeError("Invalid show configuration for UAV ".concat(t," (index ").concat(r,") in state store"));var s=(0,wp.dp)(e),u=s.id,f=s.title,d=(0,wp.dK)(e);return HB(HB(HB({},(0,wp.AO)(e)),c),{},{amslReference:d,coordinateSystem:o,geofence:a,mission:{id:u,title:f,index:r,displayName:"".concat(u||"drone-show"," / ").concat(r+1),numDrones:i.length}})},scope:Mp.uw.MISSION,title:"Upload show data",type:Cp.jp};function $B(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ZB(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ZB(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function ZB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const JB=function(){var e=[kB,UB,_B.Ay,YB].map(function(e){return(0,Mp.Qb)(e)});return e.reverse(),function(){var t,n=$B(e);try{for(n.s();!(t=n.n()).done;){(0,t.value)()}}catch(e){n.e(e)}finally{n.f()}}};n(46259),n(64240);function XB(e){return XB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XB(e)}function QB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,az(r.key),r)}}function ez(e,t,n){return t=nz(t),function(e,t){if(t&&("object"==XB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tz()?Reflect.construct(t,n||[],nz(e).constructor):t.apply(e,n))}function tz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tz=function(){return!!e})()}function nz(e){return nz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nz(e)}function rz(e,t){return rz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rz(e,t)}function oz(e,t,n){return(t=az(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function az(e){var t=function(e,t){if("object"!=XB(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=XB(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XB(t)?t:t+""}function iz(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return lz(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(lz(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,lz(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,lz(f,"constructor",s),lz(s,"constructor",c),c.displayName="GeneratorFunction",lz(s,o,"GeneratorFunction"),lz(f),lz(f,o,"Generator"),lz(f,r,function(){return this}),lz(f,"toString",function(){return"[object Generator]"}),(iz=function(){return{w:a,m:d}})()}function lz(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}lz=function(e,t,n,r){function a(t,n){lz(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},lz(e,t,n,r)}function cz(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function sz(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){cz(a,r,o,i,l,"next",e)}function l(e){cz(a,r,o,i,l,"throw",e)}i(void 0)})}}n(49721),n(4180),n(12208),n(24504);var uz={display:"flex",flexDirection:"column",width:"100%",height:"100%"},fz={display:"flex",alignItems:"stretch",flexGrow:1,contain:"size"};(0,ul.fq)().then(function(){JB(),ul.de.run(SB)});var dz=function(e){var t=e.isFixed,n=e.showSidebar;return l.createElement("div",{className:(0,r.A)(t&&"workbench-fixed"),style:fz},n?l.createElement(bF,{workbench:fw}):null,l.createElement(s.Ty,{workbench:fw}))};dz.propTypes={isFixed:i().bool,showSidebar:i().bool};var pz=(0,u.Ng)(function(e){return{isFixed:eI(e),showSidebar:tI(e)}},null)(dz),mz=function(e){var t,n,r=e.onFirstRender;return l.createElement(d.Q,{persistor:ul.qj,onBeforeLift:(n=r,sz(iz().m(function e(){var t;return iz().w(function(e){for(;;)switch(e.n){case 0:(t=ul.Ay.getState())&&t.workbench&&t.workbench.state&&fw.restoreState(t.workbench.state),n&&n();case 1:return e.a(2)}},e)})))},l.createElement(l.Fragment,null,l.createElement(m.Ay,null),l.createElement(CB,null),l.createElement(A_,null),l.createElement("div",{style:uz},l.createElement(Uj,{perspectives:Rw,workbench:fw}),l.createElement(pz,null),(null===o.A||void 0===o.A||null===(t=o.A.ribbon)||void 0===t?void 0:t.label)&&l.createElement(k,o.A.ribbon),l.createElement(N_,null)),l.createElement(qP,null),l.createElement(NP,null),l.createElement(HU,null),l.createElement(SR,null),l.createElement(BU,null),l.createElement(Si.AppSettingsDialog,null),l.createElement(Si.AuthenticationDialog,null),l.createElement(Si.DeauthenticationDialog,null),l.createElement(Si.FeatureEditorDialog,null),l.createElement(Si.FlyToTargetDialog,null),l.createElement(Si.GlobalErrorDialog,null),l.createElement(Si.LayerSettingsDialog,null),l.createElement(Si.ServerSettingsDialog,null),fl.Os&&l.createElement(Si.SessionExpiryDialog,null),l.createElement(Si.TimeSyncDialog,null),l.createElement(CN,null),l.createElement(dk,null),l.createElement(jk,null),l.createElement(__,null),l.createElement(B_,null),l.createElement(Y_,null),l.createElement(vR,null),l.createElement(FR,null),l.createElement(BR,null),l.createElement(VD,null),l.createElement(TM,null),l.createElement(NM,null),l.createElement($L,null),l.createElement(cU,null),l.createElement(DU,null),l.createElement(UU,null),l.createElement(f.tE,{placement:o.A.toastPlacement,transitionDuration:250},l.createElement(jF,null))))};mz.propTypes={onFirstRender:i().func};var yz=function(){return l.createElement("div",{className:"drag-proxy"})},gz=function(e){var t;return t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),ez(this,n,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rz(e,t)}(n,t),function(e,t,n){return t&&QB(e.prototype,t),n&&QB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(n,[{key:"render",value:function(){return this.props.glDragging?l.createElement(c.tH,{FallbackComponent:ur.zc,onReset:ul.si},l.createElement(yz,null)):l.createElement(c.tH,{FallbackComponent:ur.zc,onReset:ul.si},l.createElement(u.Kq,{store:ul.Ay},l.createElement(p.A,{injectFirst:!0},l.createElement(IB,null,l.createElement(sl.yN.Provider,{value:sl.Ay},l.createElement(e,this.props))))))}}])}(l.Component),oz(t,"displayName","WorkbenchRoot"),oz(t,"propTypes",{glDragging:i().bool}),t};fw.hoc=gz;const bz=gz(mz)},16349:(e,t,n)=>{"use strict";n.d(t,{Os:()=>i,ax:()=>l,jI:()=>a});var r=n(82041),o=n(97859);const a=e=>r.A?.features?.[e]??!0,i=!(0,o.default)(r.A?.session?.maxLengthInSeconds),l=()=>{const e=r.A?.perspectives;return Array.isArray(e)&&e[0]?e[0]:"default"}},17065:(e,t,n)=>{"use strict";n.d(t,{$F:()=>u,FA:()=>r,fp:()=>f,i7:()=>s,wA:()=>d});var r,o=n(63614),a=n(8244),i=n(90734),l=n(75539),c=n(79891);!function(e){e.DEFAULT="default",e.WITH_WARNINGS="withWarnings",e.WITH_ERRORS="withErrors",e.INACTIVE_ONLY="inactiveOnly",e.SLEEPING="sleeping"}(r||(r={}));const s=[r.DEFAULT,r.WITH_WARNINGS,r.WITH_ERRORS,r.INACTIVE_ONLY,r.SLEEPING],u={[r.DEFAULT]:(0,a.tt)("filtering.label.all"),[r.WITH_WARNINGS]:(0,a.tt)("filtering.label.warningsAndErrors"),[r.WITH_ERRORS]:(0,a.tt)("filtering.label.errors"),[r.INACTIVE_ONLY]:(0,a.tt)("filtering.label.noTelemetry"),[r.SLEEPING]:(0,a.tt)("filtering.label.sleeping")},f={[r.DEFAULT]:(0,a.tt)("filtering.shortLabel.all"),[r.WITH_WARNINGS]:(0,a.tt)("filtering.shortLabel.warningsAndErrors"),[r.WITH_ERRORS]:(0,a.tt)("filtering.shortLabel.errors"),[r.INACTIVE_ONLY]:(0,a.tt)("filtering.shortLabel.noTelemetry"),[r.SLEEPING]:(0,a.tt)("filtering.shortLabel.sleeping")},d=o(e=>{switch(e){case r.WITH_ERRORS:return e=>!!(e&&Array.isArray(e.errors)&&e.errors.length>0)&&(0,i.A)(Math.max(...e.errors));case r.WITH_WARNINGS:return e=>!!(e&&Array.isArray(e.errors)&&e.errors.length>0)&&(0,i.y)(Math.max(...e.errors));case r.INACTIVE_ONLY:return e=>e?.age!==l.O.ACTIVE;case r.SLEEPING:return e=>!(!e||!Array.isArray(e.errors))&&e.errors.includes(c.A.SLEEPING);default:return}})},17591:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAJklEQVR4nGP8//8/AyHARFDFUFbEwsDAwMDIyIgzHP7//89IlEkApSkHEScJTKoAAAAASUVORK5CYII="},18489:()=>{},18728:(e,t,n)=>{"use strict";n.d(t,{UQ:()=>o,WM:()=>m,h$:()=>y,lo:()=>r,rv:()=>d,tX:()=>p,uw:()=>g});var r,o,a=n(75811),i=n(72057),l=n(20224),c=n(40476),s=n(39006),u=n(58852);!function(e){e.CIRCLE="circle",e.LINE_STRING="lineString",e.POINTS="points",e.POLYGON="polygon"}(r||(r={})),function(e){e.HIDDEN="hidden",e.NORMAL="normal",e.THICK_OUTLINE="thickOutline",e.THIN_OUTLINE="thinOutline"}(o||(o={}));const f={[r.CIRCLE]:{name:"Circle",icon:l.A,iconFilled:c.A,canBeMeasured:!1,hasInterior:!0,hasPoints:!1},[r.LINE_STRING]:{name:"Path",icon:i.A,canBeMeasured:!0,hasInterior:!1,hasPoints:!0},[r.POINTS]:{name:"Marker",icon:a.A,canBeMeasured:!1,hasInterior:!1,hasPoints:!1},[r.POLYGON]:{name:"Polygon",icon:s.A,iconFilled:u.A,canBeMeasured:!0,hasInterior:!0,hasPoints:!0}};function d(e){return f[e]?.name??"Feature"}const p=(e,t)=>(t&&f[e]?.iconFilled||f[e]?.icon)??f[r.POINTS].icon,m=e=>f[e]?.canBeMeasured??!1,y=e=>f[e]?.hasInterior??!1,g=e=>f[e]?.hasPoints??!1},18758:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAIklEQVR4nGNkYGD4z0AAMBFSAAOETPpPlEmDUREjAxHhBABPvAQLFv3qngAAAABJRU5ErkJggg=="},19354:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var r=n(31601),o=n.n(r),a=n(76314),i=n.n(a),l=n(18932),c=n(81855),s=n(82030),u=n(4417),f=n.n(u),d=new URL(n(44552),n.b),p=i()(o());p.i(l.A),p.i(c.A),p.i(s.A);var m=f()(d);p.push([e.id,`/* Styling for the global workbench component, currently implemented\n * using golden-layout */\n/* Make the panels scrollable */\nbody .lm_content {\n  overflow-y: auto;\n  background-color: white;\n}\n/* Fix the background color of the panel bodies and the tabs */\nbody .lm_header .lm_tab {\n  background-color: #ddd;\n}\nbody .lm_header .lm_tab.lm_active {\n  background-color: white;\n}\n/* Prevent selection in the panel titles */\n.lm_title {\n  user-select: none;\n}\n/* Settings button */\n.lm_controls .lm_settings {\n  background-image: url(${m});\n}\n/* Icon styling in workbench-related components */\n.wb-icon {\n  display: inline-block;\n  position: relative;\n  vertical-align: middle;\n  width: 48px;\n  height: 48px;\n  padding: 12px;\n  box-sizing: border-box;\n}\n.wb-module {\n  padding: 0 !important;\n  white-space: nowrap;\n}\n.wb-module .wb-module-label {\n  margin-right: 15px;\n  white-space: nowrap;\n}\n/* Horizontal separators in sidebar */\n#sidebar hr {\n  width: 100%;\n  height: 1px;\n  margin: 0.25em 0;\n  border: none;\n  background: #424242;\n  box-shadow: 0 -1px 4px rgba(0, 0, 0, 0.65);\n}\n/* Vertical separators in header */\n#header-inner > hr {\n  align-self: stretch;\n  width: 1px;\n  margin: 0 0.25em;\n  border: none;\n  background: #424242;\n  box-shadow: -1px 0 4px rgba(0, 0, 0, 0.65);\n}\n.wb-modification-indicator {\n  font-size: 10px;\n  text-align: center;\n  user-select: none;\n}\n/* Perspective switching in header */\n.wb-perspective-bar {\n  background: linear-gradient(to right, transparent 0%, rgba(0, 0, 0, 0.25) 80%, rgba(0, 0, 0, 0.4) 100%);\n  flex: 1;\n  justify-content: left;\n  border-right: 1px solid #424242;\n  border-bottom: 1px solid #424242;\n  overflow-x: auto;\n}\n.wb-perspective-bar-item {\n  margin: 0 !important;\n}\n.wb-perspective-bar button {\n  display: none;\n  border-bottom: 3px solid transparent;\n  border-radius: 0;\n  font-size: 14px !important;\n  /* consistent with sidebar */\n  height: 100%;\n  background: unset;\n  box-shadow: unset;\n  padding: 7px 8px 4px 8px;\n  /* padding higher at the top to compensate for border at bottom */\n}\n.wb-perspective-bar .wb-perspective-selected button {\n  background: linear-gradient(to bottom, transparent 0%, rgba(0, 0, 0, 0.25) 100%);\n  border-bottom: 3px solid #03a9f4;\n  /* Material UI lightBlue[500] */\n}\n.wb-perspective-bar button:hover {\n  /* styling same as for GenericHeaderButton */\n  background: linear-gradient(to bottom, #06c 0%, #25a 100%);\n  border-bottom: 3px solid #03a9f4;\n  /* Material UI lightBlue[500] */\n}\n/* Disable draggable splitters for fixed layouts */\n.workbench-fixed .lm_splitter,\n.workbench-fixed .lm_tab {\n  pointer-events: none;\n}\n`,""]);const y=p},19395:(e,t,n)=>{"use strict";n.d(t,{M:()=>a,n:()=>r.nW});var r=n(49591);const o={[r.nW.CRITICAL]:100,[r.nW.ERROR]:90,[r.nW.WARNING]:80,[r.nW.MISSING]:70,[r.nW.RTH]:60,[r.nW.SKIPPED]:50,[r.nW.NEXT]:40,[r.nW.INFO]:30,[r.nW.SUCCESS]:20,[r.nW.WAITING]:10,[r.nW.OFF]:0},a=e=>o[e]},19457:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAJCAYAAADpeqZqAAAAWklEQVR4nJWOyw3AIAxDHcQC7L8jbwT3AlJBfNp3SiI7dtRaLSlKKeoA1oEsKSQZCEluexw8Tm3ohk+E7bnOUHUGcNh+HwbBygw4AZ7FN/Lt84p0l+yTflV8AKQyLdcCRJi/AAAAAElFTkSuQmCC"},19469:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>h,DB:()=>g,fw:()=>y,uV:()=>v,vZ:()=>b});var r=n(82041),o=n(65307),a=n(49591),i=n(74974),l=n(94954),c=n(85683),s=n(36348),u=n(39441),f=n(20222);const d={display:{altitudeSummaryType:l.Vk.AMSL,coordinateFormat:l.Sq.SIGNED_DEGREES,experimentalFeaturesEnabled:!1,hideEmptyMissionSlots:!1,language:"en",optimizeForSingleUAV:r.A.optimizeForSingleUAV.default,optimizeUIForTouch:r.A.optimizeUIForTouch.default??s._w,showMissionIds:!1,showMouseCoordinates:!0,showScaleLine:!0,theme:a.SV.AUTO,hideInactiveSegmentsOnDarkLCD:!1,uavListFilters:[],uavListLayout:f.vl.GRID,uavListSortPreference:{key:c.ur.DEFAULT,reverse:!1}},threeD:{scenery:"auto",lighting:"dark",grid:"none",quality:"medium",showAxes:!0,showHomePositions:!0,showLandingPositions:!1,showStatistics:!1,showTrajectoriesOfSelection:!0},localServer:{cliArguments:"",enabled:!1,searchPath:[]},uavs:{autoRemove:!1,warnThreshold:3,goneThreshold:60,forgetThreshold:600,placementAccuracy:1e3,defaultBatteryCellCount:i.Fu,fullChargeVoltage:i.r0,lowVoltageThreshold:i.X8,criticalVoltageThreshold:i.Wq,preferredBatteryDisplayStyle:l.Ji.VOLTAGE,uavOperationConfirmationStyle:l.eB.NEVER,maxUploadConcurrency:8,minIndoorTakeoffSpacing:200,minOutdoorTakeoffSpacing:400},apiKeys:{}},{actions:p,reducer:m}=(0,o.Z0)({name:"settings",initialState:d,reducers:{replaceAppSettings:{prepare:(e,t)=>({payload:{category:e,updates:t}}),reducer(e,t){const{category:n,updates:r}=t.payload;void 0!==e[n]&&(e[n]=r)}},toggleLightingConditionsInThreeDView:(0,u.kP)(e=>{e.threeD.lighting="dark"===e.threeD.lighting?"light":"dark"}),toggleMissionIds:(0,u.kP)(e=>{e.display.showMissionIds=!e.display.showMissionIds}),updateAppSettings:{prepare:(e,t)=>({payload:{category:e,updates:t}}),reducer(e,t){const{category:n,updates:r}=t.payload;void 0!==e[n]&&(e[n]={...e[n],...r})}}}}),{replaceAppSettings:y,toggleLightingConditionsInThreeDView:g,toggleMissionIds:b,updateAppSettings:v}=p,h=m},19865:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>c,kX:()=>l,yv:()=>i});var r=n(65307);const{actions:o,reducer:a}=(0,r.Z0)({name:"detachable-panels",initialState:{detachedPanels:[]},reducers:{attachPanel(e,{payload:t}){const n=e.detachedPanels.indexOf(t);-1!==n&&e.detachedPanels.splice(n,1)},detachPanel(e,{payload:t}){e.detachedPanels.push(t)}}}),{attachPanel:i,detachPanel:l}=o,c=a},20222:(e,t,n)=>{"use strict";var r,o,a;n.d(t,{Ez:()=>r,Lk:()=>a,vl:()=>o}),function(e){e.API_KEYS="apiKeys",e.DISPLAY="display",e.PREFLIGHT="preflight",e.SERVER="server",e.THREE_D="threeD",e.UAVS="uavs"}(r||(r={})),function(e){e.GRID="grid",e.LIST="list"}(o||(o={})),function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(a||(a={}))},20288:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,_6:()=>c,_y:()=>l});var r=n(65307);const o={selectedTool:n(59952).NL.SELECT},{reducer:a,actions:i}=(0,r.Z0)({name:"map/tools",initialState:o,reducers:{setSelectedTool(e,t){e.selectedTool=t.payload}}}),{setSelectedTool:l}=i,c=e=>e.map.tools.selectedTool,s=a},20330:(e,t,n)=>{"use strict";n.d(t,{MJ:()=>p,TP:()=>d,Vl:()=>u,zj:()=>f});var r=n(25508),o=n(71036),a=n(59952),i=n(20288),l=n(35026),c=n(18728),s=n(71042);const u=(0,r.Mz)(s.je,l.Md,(e,t)=>e?.filled??e?.id!==t),f=(0,r.Mz)(s.je,i._6,(e,t)=>e?.showPoints??t===a.NL.EDIT_FEATURE),d=(0,r.Mz)(s.je,l.Md,(e,t)=>e?.label??(e?.id===t?"Geofence":e?.attributes?.isExclusionZone?"Exclusion zone":e?.type?(0,c.rv)(e?.type):"Feature")),p=(0,r.Mz)(s.je,l.Md,(e,t)=>e?.color??(e?.id===t||e?.attributes?.isExclusionZone?o.Jy.geofence:o.Jy.main))},20391:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(31601),o=n.n(r),a=n(76314),i=n.n(a),l=n(4417),c=n.n(l),s=new URL(n(23201),n.b),u=i()(o()),f=c()(s);u.push([e.id,`.tippy-box[data-theme~='dark-border'] {\n  background-color: #222;\n  background-clip: padding-box;\n  border: 1px solid rgba(128, 124, 120, 0.15);\n  color: white;\n  box-shadow: 0 4px 14px -2px rgba(0, 8, 16, 0.4);\n}\n.tippy-box[data-theme~='dark-border'] > .tippy-backdrop {\n  background-color: #222;\n}\n.tippy-box[data-theme~='dark-border'] > .tippy-arrow:after,\n.tippy-box[data-theme~='dark-border'] > .tippy-svg-arrow:after {\n  content: '';\n  position: absolute;\n  z-index: -1;\n}\n.tippy-box[data-theme~='dark-border'] > .tippy-arrow:after {\n  border-color: transparent;\n  border-style: solid;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='top'] > .tippy-arrow:before {\n  border-top-color: #222;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='top'] > .tippy-arrow:after {\n  border-top-color: rgba(0, 8, 16, 0.2);\n  border-width: 7px 7px 0;\n  top: 17px;\n  left: 1px;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='top'] > .tippy-svg-arrow > svg {\n  top: 16px;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='top'] > .tippy-svg-arrow:after {\n  top: 17px;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='bottom'] > .tippy-arrow:before {\n  border-bottom-color: #222;\n  bottom: 16px;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='bottom'] > .tippy-arrow:after {\n  border-bottom-color: rgba(0, 8, 16, 0.2);\n  border-width: 0 7px 7px;\n  bottom: 17px;\n  left: 1px;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='bottom'] > .tippy-svg-arrow > svg {\n  bottom: 16px;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='bottom'] > .tippy-svg-arrow:after {\n  bottom: 17px;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='left'] > .tippy-arrow:before {\n  border-left-color: #222;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='left'] > .tippy-arrow:after {\n  border-left-color: rgba(0, 8, 16, 0.2);\n  border-width: 7px 0 7px 7px;\n  left: 17px;\n  top: 1px;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='left'] > .tippy-svg-arrow > svg {\n  left: 11px;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='left'] > .tippy-svg-arrow:after {\n  left: 12px;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='right'] > .tippy-arrow:before {\n  border-right-color: #222;\n  right: 16px;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='right'] > .tippy-arrow:after {\n  border-width: 7px 7px 7px 0;\n  right: 17px;\n  top: 1px;\n  border-right-color: rgba(0, 8, 16, 0.2);\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='right'] > .tippy-svg-arrow > svg {\n  right: 11px;\n}\n.tippy-box[data-theme~='dark-border'][data-placement^='right'] > .tippy-svg-arrow:after {\n  right: 12px;\n}\n.tippy-box[data-theme~='dark-border'] > .tippy-svg-arrow {\n  fill: #222;\n}\n.tippy-box[data-theme~='dark-border'] > .tippy-svg-arrow:after {\n  background-image: url(${f});\n  background-size: 16px 6px;\n  width: 16px;\n  height: 6px;\n}\n`,""]);const d=u},20867:(e,t,n)=>{"use strict";n.d(t,{h:()=>s,t:()=>u});n(18107),n(54554),n(67357);var r=n(42531),o=n(92049),a=n(46996),i=n(89610),l=n(24639),c=n(7670);function s(e){return e?(0,i.default)(e)?e:(0,o.default)(e)?function(t){return(0,r.A)(e,t)}:l.A:c.A}var u=function(e){var t=e.target.getCoordinates();(0,a.default)(t.at(0),t.at(-1))||(t.splice(-1,1,t[0]),e.target.setCoordinates(t))}},20987:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(85072),o=n.n(r),a=n(97825),i=n.n(a),l=n(77659),c=n.n(l),s=n(55056),u=n.n(s),f=n(10540),d=n.n(f),p=n(41113),m=n.n(p),y=n(19354),g={};g.styleTagTransform=m(),g.setAttributes=u(),g.insert=c().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=d();o()(y.A,g);const b=y.A&&y.A.locals?y.A.locals:void 0},21417:(e,t,n)=>{"use strict";var r;n.d(t,{r:()=>r}),function(e){e.GENERIC="generic",e.CONFIRMATION="confirmation"}(r||(r={}))},23201:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMCA2czEuNzk2LS4wMTMgNC42Ny0zLjYxNUM1Ljg1MS45IDYuOTMuMDA2IDggMGMxLjA3LS4wMDYgMi4xNDguODg3IDMuMzQzIDIuMzg1QzE0LjIzMyA2LjAwNSAxNiA2IDE2IDZIMHoiIGZpbGw9InJnYmEoMCwgOCwgMTYsIDAuMikiLz48L3N2Zz4="},23380:(e,t,n)=>{"use strict";n.d(t,{D8:()=>i,JU:()=>c,Kt:()=>l,Po:()=>a,j8:()=>o,sG:()=>s});var r=n(52351);function o(e){return{type:"ASYNC-CANCEL",ids:(0,r.A)(e)}}function a(e,t){const n={type:"ASYNC-RESUME",ids:(0,r.A)(e)};if(void 0!==t){n.values={};for(const r of e)void 0!==t[r]&&(n.values[r]=t[r])}return n}function i(e,t,n,r){const o={type:"OBJ-CMD",ids:e,command:t};return void 0!==n&&(o.args=n),void 0!==r&&(o.kwds=r),o}function l(e,t,n){return{type:"FW-UPLOAD",ids:(0,r.A)(e),target:String(t),blob:n}}function c(e,t,n){return{type:"PRM-SET",ids:(0,r.A)(e),name:String(t),value:n}}function s(e,t){return{type:"PRM-SET-MANY",ids:(0,r.A)(e),parameters:t}}},24426:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,Vj:()=>c,cB:()=>i,y5:()=>l});var r=n(65307);const{actions:o,reducer:a}=(0,r.Z0)({name:"alert",initialState:{muted:!1,count:0},reducers:{dismissAlerts(e){e.count=0},setMuted(e,t){e.muted=t.payload},triggerAlert(e){e.count+=1}}}),{dismissAlerts:i,setMuted:l,triggerAlert:c}=o,s=a},24504:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(85072),o=n.n(r),a=n(97825),i=n.n(a),l=n(77659),c=n.n(l),s=n(55056),u=n.n(s),f=n(10540),d=n.n(f),p=n(41113),m=n.n(p),y=n(20391),g={};g.styleTagTransform=m(),g.setAttributes=u(),g.insert=c().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=d();o()(y.A,g);const b=y.A&&y.A.locals?y.A.locals:void 0},26239:(e,t,n)=>{"use strict";n.d(t,{E5:()=>f});var r=n(71042),o=n(15786),a=n(35026),i=n(16054),l=n(58718),c=n(67932),s=n(18728),u=n(26682);const f=()=>(e,t)=>{const n=t(),f=(0,a.Xk)(n);(0,u.A5)(n).match(t=>{var n,u;e((e,t)=>{const n=(0,a.Md)(t());void 0!==n&&e((0,o.Hk)([n]))}),e((n=t,u=f,(e,t)=>{const a=t();if(n.length<3)return void e((0,l.Ds)({message:"Geofence to be added contains less than 3 points",semantics:c.N.ERROR,permanent:!0}));const f={type:s.lo.POLYGON,points:n},d=(0,r.xt)(a,f);e((0,o.sO)({id:d,feature:f,properties:{owner:u}})),e((0,i.kl)(d))}))},t=>{e((0,l.Ds)({message:`Could not update geofence: ${t}`,semantics:c.N.ERROR,permanent:!0}))})}},26625:(e,t,n)=>{"use strict";n.d(t,{FU:()=>r,Z:()=>s,cd:()=>l,mj:()=>u,tw:()=>c});var r,o=n(8244);!function(e){e.KEEP_CURRENT="keepCurrent",e.REPORT="report",e.LAND="land",e.RETURN="return",e.SMART_LAND="smartLand",e.SMART_RETURN="smartReturn",e.STOP="stop",e.SHUT_DOWN="shutDown"}(r||(r={}));const a=Object.values(r),i={[r.KEEP_CURRENT]:(0,o.tt)("geofenceAction.keepCurrent"),[r.REPORT]:(0,o.tt)("geofenceAction.report"),[r.LAND]:(0,o.tt)("general.commands.land"),[r.RETURN]:(0,o.tt)("general.commands.returnToHome"),[r.SMART_LAND]:(0,o.tt)("geofenceAction.smartLand"),[r.SMART_RETURN]:(0,o.tt)("geofenceAction.smartReturn"),[r.STOP]:(0,o.tt)("geofenceAction.stop"),[r.SHUT_DOWN]:(0,o.tt)("geofenceAction.shutDown")},l=e=>i[e]??(0,o.tt)("geofenceAction.unknown",{action:e});function c(e){return a.includes(e)}var s;!function(e){e.OFF="off",e.VOLTAGE="voltage",e.PERCENTAGE="percentage"}(s||(s={}));const u={[s.OFF]:"",[s.VOLTAGE]:"V",[s.PERCENTAGE]:"%"}},26649:(e,t,n)=>{"use strict";n.d(t,{DE:()=>S,Fu:()=>v,GS:()=>s,SC:()=>d,T1:()=>b,TB:()=>u,V1:()=>w,XA:()=>m,YN:()=>y,bp:()=>A,mq:()=>O,nM:()=>h,q:()=>f,uc:()=>g,wt:()=>E});var r=n(44294),o=n(13628),a=n(86936),i=n(953),l=n(29276),c=n(40861);const s=e=>new o.default({color:e}),u=(e,t=1,n=[])=>new i.default({color:e,width:t,lineDash:n}),f=e=>u(e,5),d=e=>u(e,2),p=e=>u(e,1),m=p("black"),y=(d("black"),f("black"),p("rgba(0, 0, 0, 0.6)")),g=d("rgba(0, 0, 0, 0.6)"),b=(f("rgba(0, 0, 0, 0.6)"),p("white")),v=d("white"),h=f("white"),A=e=>u(e,5,[5,10]),S=e=>u(e,2,[5,7.5]),E=e=>u(e,5,[1,10]),O=e=>u(e,2,[1,5]);function w(e,t){return n=>{const o=n.getGeometry(),i=o?.getCoordinates();if(!i||i.length<2)return new l.default;const{displacement:u,position:f,rotation:d}=(()=>{switch(t){case"start":return{displacement:[0,5],position:i.at(0),rotation:(0,c.dc)(i.at(0),i.at(1))};case"end":return{displacement:[0,-10],position:i.at(-1),rotation:(0,c.dc)(i.at(-2),i.at(-1))};default:throw new Error(`Expected 'start' or 'end', received: ${String(t)}`)}})();return new l.default({geometry:new r.default(f),image:new a.A({points:3,fill:s(e),rotateWithView:!0,radius:10,scale:[.75,1],rotation:d,displacement:u})})}}},26682:(e,t,n)=>{"use strict";n.d(t,{A5:()=>E,Dp:()=>I,J5:()=>A,Lu:()=>m,aM:()=>y,ae:()=>T,g9:()=>b,i_:()=>g,m9:()=>w,qd:()=>O,zr:()=>C});var r=n(23514),o=n(18803),a=n(67912),i=n(25508),l=n(80278),c=n(35026),s=n(37813),u=n(62528),f=n(30325),d=n(27989),p=n(46925);const m=e=>e.safety.dialog.open,y=e=>e.safety.dialog.selectedTab,g=e=>e.safety.geofence,b=e=>e.safety.settings,v=(0,i.Mz)(g,p.BJ),h=(0,i.Mz)(s.JL,s.EG,(e,t)=>0===e.length?(0,a._q)("Did you load a show file?"):t?(0,a.ok)(e.map((0,o.A)(t.toLonLat.bind(t)))):(0,a._q)("Outdoor coordinate system not set up yet")),A=(0,i.Mz)(c.xS,e=>0===e.length?(0,a._q)("Are there valid mission items with coordinates?"):(0,a.ok)(e.map((0,o.A)(d.Al)))),S=(0,i.Mz)(c.Xk,h,A,(e,t,n)=>({[u.Pp.SHOW]:t,[u.Pp.WAYPOINT]:n,[u.Pp.UNKNOWN]:(0,a._q)("Unknown mission type")}[e])),E=(0,i.Mz)(S,v,(e,t)=>e.map(e=>e.map((0,o.A)(d.Ur))).andThen(t).map(e=>e.map((0,o.A)(d.Al)))),O=e=>{switch((0,c.Xk)(e)){case u.Pp.SHOW:return(0,s.R6)(e);case u.Pp.WAYPOINT:return(0,c.cI)(e)}},w=e=>{switch((0,c.Xk)(e)){case u.Pp.SHOW:return(0,s.EU)(e);case u.Pp.WAYPOINT:return(0,c.XQ)(e)}},T=(0,i.Mz)(c.vT,c.lI,(e,t)=>{if(!t)return;const n=(0,f.z)(e).map(({lon:e,lat:t})=>l.zx([e,t])),o=t.map(([e,t])=>l.zx([e,t])),a=n.flatMap(e=>o.map(t=>(0,d.Q9)(e,t)));return(0,r.A)(a)}),C=e=>(e=>{const t=g(e).horizontalMargin,n=O(e),r=T(e);switch((0,c.Xk)(e)){case u.Pp.SHOW:return(0,p.dy)(n,t);case u.Pp.WAYPOINT:return void 0===r?(0,p.dy)(n,t):(0,p.dy)(r,0)}})(e),I=e=>(e=>{const t=w(e),n=g(e).verticalMargin;return(0,p.PV)(t,n)})(e)},26693:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(65606);const o={BING:r.env.SKYBRUSH_BING_MAPS_API_KEY,GOOGLE:r.env.SKYBRUSH_GOOGLE_MAPS_API_KEY,MAPBOX:r.env.SKYBRUSH_MAPBOX_API_KEY,MAPTILER:r.env.SKYBRUSH_MAPTILER_API_KEY,NEXTZEN:r.env.SKYBRUSH_NEXTZEN_API_KEY}},26926:(e,t,n)=>{"use strict";n.d(t,{Gk:()=>l,Qr:()=>d,Ts:()=>c,Z9:()=>f,dk:()=>i,lW:()=>s,mB:()=>u});var r=n(25508),o=n(10953),a=n(27989);const i=(0,r.Mz)(e=>e.map.origin,e=>e.position?new a.f9({origin:e.position,orientation:e.angle,type:e.type}):void 0),l=e=>e.map.view.position,c=(0,r.Mz)(e=>e.map.view.angle,Number.parseFloat),s=e=>e.map.view.zoom,u=(0,r.Mz)(e=>e.map.origin.angle,Number.parseFloat),f=e=>e.map.origin.type===o.h.NEU,d=e=>Array.isArray(e.map.origin.position)},27322:(e,t,n)=>{"use strict";n.d(t,{Lo:()=>l,qr:()=>c});var r=n(50071),o=n(25508),a=n(37802),i=n(30325);const l=e=>e.map.selection,c=e=>(0,o.Mz)(l,t=>(0,i.z)(t.map(e))),s=new r.default([],{unique:!0});(0,o.Mz)(l,e=>(s.clear(),s.extend(e),s)),c(a.Xf)},27989:(e,t,n)=>{"use strict";n.d(t,{$S:()=>te,Al:()=>$,EK:()=>q,Ek:()=>ne,Hc:()=>L,OU:()=>D,Pk:()=>_,Q9:()=>oe,SK:()=>U,Sx:()=>ee,TQ:()=>F,Ur:()=>Y,YG:()=>M,Yn:()=>Z,Yo:()=>re,cC:()=>W,d4:()=>R,dK:()=>z,dc:()=>P,f9:()=>J,h3:()=>Q,h7:()=>k,iw:()=>H,n0:()=>G,q8:()=>X,ve:()=>B});var r=n(15814),o=n(27920),a=n(17480),i=n(80278),l=n(1274),c=n(83171),s=n(97859),u=n(88389),f=n(18803),d=n(67912),p=n(6933),m=n(70915),y=n(11217),g=n(96702),b=n(25252),v=n(34142),h=n(34338),A=n(82986),S=n(12060),E=n(54602),O=n(52490),w=n(18728),T=n(86181),C=n(2652),I=n(40861),x=n(36348);Symbol("Longitude"),Symbol("Latitude"),Symbol("Easting"),Symbol("Northing");const j=x.wl?"@":"\u2220";function P(e,t){const n=(0,I.eh)(t[0]-e[0]),r=(0,I.eh)(e[1]),o=(0,I.eh)(t[1]),a=Math.sin(n)*Math.cos(o),i=Math.cos(r)*Math.sin(o)-Math.sin(r)*Math.cos(o)*Math.cos(n);return(180*Math.atan2(a,i)/Math.PI+360)%360}function k(e,t){return(P(t,e)+180)%360}const _=e=>(t,n)=>{if(2!==t.length||!(0,I.fB)(t[0])||!(0,I.fB)(t[1]))throw new TypeError("Must be called with two points only");const r="number"==typeof e?e:e(),[o,a]=t,i=[(o[0]+a[0])/2,(o[1]+a[1])/2],l=p.e$([o[0]-i[0],o[1]-i[1]],r),c=p.e$([a[0]-i[0],a[1]-i[1]],r),s=m.Tr([l,c]),u=[m.R(s),m.k_(s),m.WU(s),m.Py(s),m.R(s)].map(e=>p.WQ(p.e$(e,-r),i));return n?(n.setCoordinates([u]),n):new v.default([u])},N=((0,c.A)((e,t)=>R(e,[t])[0]),e=>e instanceof A.default&&e.getSource()instanceof E.default),R=(0,c.A)((e,t)=>{const n=Array.from({length:t.length});for(const r of e.getLayers().getArray()){if(!N(r)||!r.getVisible())continue;const e=r.getSource();if(e)for(const[r,o]of t.entries())if(!n[r]){const t=e.getFeatureById(o);t&&(n[r]=t)}}return n}),D=(e,t)=>{if(e.intersectsCoordinate(t))return t;let n;if(e instanceof h.A?n=e.getGeometries():e instanceof b.A?n=e.getPolygons():e instanceof g.A&&(n=e.getLineStrings()),void 0!==n){const e=n.map(e=>D(e,t));return(0,u.A)(e,e=>I.CX.bind(t,e))??[Number.NaN,Number.NaN]}return e.getClosestPoint(t)},M=({digits:e,reverse:t=!1,separator:n=", ",unit:r})=>{const o=t?[1,0]:[0,1];return t=>t?(0,C.Sz)(t[o[0]],r,e)+n+(0,C.Sz)(t[o[1]],r,e):""},L=({digits:e,unit:t})=>n=>n?(0,C.Sz)(n[0],t,e)+` ${j} `+(0,C.Sz)(n[1],"\xb0",e):"",F=e=>{switch(e.type){case w.lo.LINE_STRING:{const t=(0,O.R3)(new y.default(e.points.map((0,f.A)(Y))));return(0,C.BO)(t)}case w.lo.POLYGON:{const t=(0,O.UG)(new v.default([e.points,...e.holes??[]].map(e=>e.map((0,f.A)(Y)))));return(0,C.Jd)(t)}default:throw new Error("Unsupported feature type to measure: "+e.type)}};function U(e){const t=m.S5();for(const n of e)m.X$(t,n);return t}const G=e=>((e%360+360)%360).toFixed(1),V=((0,c.A)((e,t)=>{const n=e[0],r=e[1];return 0===n&&0===r?t:t.map(e=>[e[0]+n,e[1]+r])}),e=>(t,n)=>{if((0,s.default)(t))return n;try{return e(t)}catch{return n}}),B=V(e=>{const{reference:t,value:n}=e,r=(0,C.BO)(n);switch(t){case T.Mb.MSL:return r+" AMSL";case T.Mb.HOME:return r+" above home";case T.Mb.GROUND:return r+" above ground";default:return`${r} above unknown reference: ${String(t)}`}}),z=V(e=>{const{mode:t,value:n}=e,r=n.toFixed(1)+"\xb0";return t===T.GH.WAYPOINT?"Always face next waypoint":t===T.GH.ABSOLUTE?r:`${r} @ unknown mode: ${String(t)}`}),H=M({digits:7,reverse:!0,unit:"\xb0"}),W=e=>{if((0,s.default)(e))return"";try{return H(e)}catch{return""}},q=e=>{try{const t=new l(e);return[t.getLongitude(),t.getLatitude()]}catch{return}},K=((e,t)=>{const n=1/t,r=n*(2-n),o=Math.sqrt(r),a=e*(1-n),i=(a+2*e)/3;return Object.freeze({eccentricity:o,eccentricitySquared:r,flattening:n,inverseFlattening:t,meanRadius:i,semiMajorAxis:e,semiMinorAxis:a})})(6378137,298.257223563),Y=S.Rb,$=S.WP,Z=(e,t)=>{const n=Y(e);return $([n[0]+t[0],n[1]+t[1]])};class J{_vec=[0,0,0];_origin;_orientation;_ellipsoid;_type;_piOver180;_r1;_r2OverCosOriginLatInRadians;_yMul;constructor({origin:e,orientation:t=0,type:n="neu",ellipsoid:r=K}){if("neu"!==n&&"nwu"!==n)throw new Error("unknown coordinate system type: "+n);if("number"!=typeof t&&(t=Number.parseFloat(t)),Number.isNaN(t))throw new TypeError("invalid orientation");this._vec=[0,0,0],this._origin=e,this._orientation=(0,I.eh)(t),this._ellipsoid=r,this._type=n,this._precalculate()}fromLonLat(e){const t=[0,0];return this._updateArrayFromLonLat(t,e[0],e[1]),t}fromLonLatAhl(e){const t=[0,0,e[2]];return this._updateArrayFromLonLat(t,e[0],e[1]),t}get type(){return this._type}toLonLat(e){const t=[e[0],e[1]*this._yMul];return p.e$(t,this._orientation),[t[1]/this._r2OverCosOriginLatInRadians/this._piOver180+this._origin[0],t[0]/this._r1/this._piOver180+this._origin[1]]}toLonLatAhl(e){return[...this.toLonLat([e[0],e[1]]),e[2]]}updateVector3FromLonLatAhl(e,t,n,r){this._updateArrayFromLonLat(this._vec,t,n),e.x=this._vec[0],e.y="nwu"===this._type?this._vec[1]:-this._vec[1],e.z=r}_precalculate(){const e=(0,I.eh)(this._origin[1]),t=this._ellipsoid.semiMajorAxis,n=this._ellipsoid.eccentricitySquared,r=1-n*Math.sin(e)**2;this._piOver180=Math.PI/180,this._r1=t*(1-n)/r**1.5,this._r2OverCosOriginLatInRadians=t/Math.sqrt(r)*Math.cos(e),this._yMul="neu"===this._type?1:-1}_updateArrayFromLonLat(e,t,n){e[0]=(n-this._origin[1])*this._piOver180*this._r1,e[1]=(t-this._origin[0])*this._piOver180*this._r2OverCosOriginLatInRadians,p.e$(e,-this._orientation),e[1]*=this._yMul}}function X(e){const t=Math.hypot(e[0],e[1]);if(t>0){const n=(0,I.xW)(Math.atan2(e[1],e[0]));return[t,n<0?n+360:n]}return[0,0]}const Q=(e,t)=>{const n=e.map((0,f.A)($)),o=(0,I.ko)(n);if(o.isErr())return(0,d._q)(o.error);const a=(0,r.A)(o.value,t/1e3);if(!Array.isArray(a?.geometry?.coordinates[0]))return(0,d._q)("a coordinate array is expected as the first linear ring of the polygon");const i=a.geometry.coordinates[0]?.map((0,f.A)(Y));return(0,d.ok)(i)};function ee([e,...t]){const n=i.n1([e]),r=t.length>0?(0,o.A)(i.Lr([n,...t.map(e=>i.n1([e]))])):n;if(!r)return[];const{geometry:a}=r;switch(a.type){case"Polygon":return[a.coordinates];case"MultiPolygon":return a.coordinates;default:throw new Error(`Unexpected geometry type: ${a.type}`)}}const te=e=>[Math.round(1e7*e.lat),Math.round(1e7*e.lon)],ne=e=>[Math.round(1e7*e[1]),Math.round(1e7*e[0])],re=e=>[e[1]/1e7,e[0]/1e7],oe=(e,t)=>1e3*(0,a.A)(e,t)},28625:()=>{},28749:(e,t,n)=>{"use strict";n.d(t,{Bz:()=>l,W1:()=>s,kF:()=>c});var r=n(74848),o=n(96540),a=n(42116),i=n(61919);const l=o.createContext(window.document.body),c=o.forwardRef((e,t)=>(0,r.jsx)(l.Consumer,{children:n=>(0,r.jsx)(a.Ay,{...e,ref:t,container:n})})),s=o.forwardRef((e,t)=>(0,r.jsx)(l.Consumer,{children:n=>(0,r.jsx)(i.m_,{...e,ref:t,appendTo:n})}))},29287:(e,t,n)=>{"use strict";e.exports=n.p+"04ec25f00ae3dd879b4f.woff2"},30263:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(31601),o=n.n(r),a=n(76314),i=n.n(a)()(o());i.push([e.id,'/*!\n * "Fork me on GitHub" CSS ribbon v0.2.3 | MIT License\n * https://github.com/simonwhitaker/corner-ribbon-css\n*/\n.corner-ribbon {\n  width: 12.1em;\n  height: 12.1em;\n  position: absolute;\n  overflow: hidden;\n  top: 0;\n  right: 0;\n  z-index: 9999;\n  pointer-events: none;\n  font-size: 13px;\n  text-decoration: none;\n  text-indent: -999999px;\n}\n.corner-ribbon.fixed {\n  position: fixed;\n}\n.corner-ribbon:hover,\n.corner-ribbon:active {\n  background-color: rgba(0, 0, 0, 0);\n}\n.corner-ribbon:before,\n.corner-ribbon:after {\n  /* The right and left classes determine the side we attach our banner to */\n  position: absolute;\n  display: block;\n  width: 15.38em;\n  height: 1.54em;\n  top: 3.23em;\n  right: -3.23em;\n  -webkit-box-sizing: content-box;\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n  -webkit-transform: rotate(45deg);\n  -moz-transform: rotate(45deg);\n  -ms-transform: rotate(45deg);\n  -o-transform: rotate(45deg);\n  transform: rotate(45deg);\n}\n.corner-ribbon:before {\n  content: \'\';\n  /* Add a bit of padding to give some substance outside the "stitching" */\n  padding: 0.38em 0;\n  /* Set the base colour */\n  background-color: #a00;\n  /* Set a gradient: transparent black at the top to almost-transparent black at the bottom */\n  background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 0, 0, 0)), to(rgba(0, 0, 0, 0.15)));\n  background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));\n  background-image: -moz-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));\n  background-image: -ms-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));\n  background-image: -o-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));\n  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));\n  /* Add a drop shadow */\n  -webkit-box-shadow: 0 0.15em 0.23em 0 rgba(0, 0, 0, 0.5);\n  -moz-box-shadow: 0 0.15em 0.23em 0 rgba(0, 0, 0, 0.5);\n  box-shadow: 0 0.15em 0.23em 0 rgba(0, 0, 0, 0.5);\n  pointer-events: auto;\n}\n.corner-ribbon:after {\n  /* Set the text from the data-ribbon attribute */\n  content: attr(data-ribbon);\n  /* Set the text properties */\n  color: #fff;\n  line-height: 1.54em;\n  text-decoration: none;\n  text-shadow: 0 -0.08em rgba(0, 0, 0, 0.5);\n  text-align: center;\n  text-indent: 0;\n  /* Set the layout properties */\n  padding: 0.15em 0;\n  margin: 0.15em 0;\n  /* Add "stitching" effect */\n  border-width: 0.08em 0;\n  border-style: dotted;\n  border-color: #fff;\n  border-color: rgba(255, 255, 255, 0.7);\n}\n.corner-ribbon.left-top,\n.corner-ribbon.left-bottom {\n  right: auto;\n  left: 0;\n}\n.corner-ribbon.left-bottom,\n.corner-ribbon.right-bottom {\n  top: auto;\n  bottom: 0;\n}\n.corner-ribbon.left-top:before,\n.corner-ribbon.left-top:after,\n.corner-ribbon.left-bottom:before,\n.corner-ribbon.left-bottom:after {\n  right: auto;\n  left: -3.23em;\n}\n.corner-ribbon.left-bottom:before,\n.corner-ribbon.left-bottom:after,\n.corner-ribbon.right-bottom:before,\n.corner-ribbon.right-bottom:after {\n  top: auto;\n  bottom: 3.23em;\n}\n.corner-ribbon.left-top:before,\n.corner-ribbon.left-top:after,\n.corner-ribbon.right-bottom:before,\n.corner-ribbon.right-bottom:after {\n  -webkit-transform: rotate(-45deg);\n  -moz-transform: rotate(-45deg);\n  -ms-transform: rotate(-45deg);\n  -o-transform: rotate(-45deg);\n  transform: rotate(-45deg);\n}\n',""]);const l=i},30325:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});const r=e=>e.filter(e=>null!=e)},30439:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>y,S0:()=>s,hp:()=>u,vb:()=>f,$9:()=>d,Em:()=>p});var r,o=n(65307);!function(e){e.FLY="fly",e.WALK="walk"}(r||(r={}));const a={camera:{position:void 0,rotation:void 0},navigation:{mode:r.WALK,parameters:{}},tooltip:void 0,sceneId:0},{actions:i,reducer:l}=(0,o.Z0)({name:"three-d",initialState:a,reducers:{notifySceneRemoval(e){e.sceneId++},resetZoom(){},rotateViewTowards(){},setCameraPose(e,t){const{position:n,rotation:r}=t.payload;e.camera.position=n,e.camera.rotation=r},setNavigationMode(e,t){const{payload:n}=t;if("string"==typeof n)e.navigation.mode=n,e.navigation.parameters={};else{const{mode:t,parameters:r}=n;"string"==typeof t&&"object"==typeof r&&(e.navigation.mode=t,e.navigation.parameters=r)}},showTooltip(e,t){e.tooltip=t.payload?String(t.payload):void 0},hideTooltip(e){e.tooltip=void 0}}}),{hideTooltip:c,notifySceneRemoval:s,resetZoom:u,rotateViewTowards:f,setCameraPose:d,setNavigationMode:p,showTooltip:m}=i,y=l},30856:(e,t,n)=>{"use strict";n.d(t,{HS:()=>no,zg:()=>oo,Uz:()=>ro});n(52675),n(89463),n(2259),n(2008),n(23792),n(83851),n(81278),n(79432),n(26099),n(47764),n(98992),n(54520),n(3949),n(23500),n(62953),n(45700),n(89572),n(2892);var r=n(96540),o=n(53453),a=n(15518),i=n(98964),l=n(61225),c=n(74848),s=n(29276),u=n(49700),f=n(27733),d=n(81426),p=n(81709);const m=n.p+"c66c82627760fafe63c6.png",y=n.p+"19ad6093d71a16f981a5.png";var g=n(71036),b=n(37849),v=n(37802),h=n(27989),A=n(26649),S=n(40535);const E=new s.default({image:new u.A({src:m})}),O=new s.default({image:new u.A({src:y})}),w=[g.m_.error,g.m_.success].map(e=>new s.default({image:new f.A({displacement:[0,2],fill:(0,A.GS)(e),stroke:A.YN,radius:6})})),T=r.memo(({selected:e,value:t,...n})=>{const{id:r,position:o,active:a}=t;if(!o)return null;const i=((e,t,n)=>{const r=[E];return t&&r.splice(0,0,O),null!=n&&r.push(w[n?1:0]),r.push(new s.default({text:new d.default({font:"12px sans-serif",offsetY:18,placement:"point",text:e,textAlign:"center"})})),r})((0,b.op)(t),e,a);return(0,c.jsx)(p.Xj,{id:(0,v.LM)(r),style:i,...n,children:(0,c.jsx)(p.N4.Point,{coordinates:(0,h.Ur)([o.lon,o.lat])})})}),C=(0,l.Ng)(e=>({beacons:(0,b.le)(e),selectedBeaconIds:(0,b.iE)(e)}),null)(({beacons:e,selectedBeaconIds:t,zIndex:n})=>(0,c.jsx)(p.qd.Vector,{ref:S.Sw,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:n,children:(0,c.jsx)(p.sP.Vector,{children:e.map(e=>(0,c.jsx)(T,{value:e,selected:t.includes(e.id)},e.id))})}));var I=n(86936);const x=r.memo(({selected:e,value:t,...n})=>{const{id:r,position:o}=t;if(!o)return null;const a=((e,t)=>[new s.default({image:new I.A({points:4,fill:(0,A.GS)([255,136,0,t?1:.5]),stroke:t?A.uc:A.YN,radius:10,rotation:Math.PI/4})}),new s.default({text:new d.default({font:"12px sans-serif",offsetY:18,placement:"point",text:e,textAlign:"center"})})])(r,e);return(0,c.jsx)(p.Xj,{id:(0,v.Kg)(r),style:a,...n,children:(0,c.jsx)(p.N4.Point,{coordinates:(0,h.Ur)([o.lon,o.lat])})})});var j=n(37624);const P=(0,l.Ng)(e=>({docks:(0,j.Q)(e),selectedDockIds:(0,j.z)(e)}),null)(({docks:e,selectedDockIds:t,zIndex:n})=>(0,c.jsx)(p.qd.Vector,{ref:S.Sw,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:n,children:(0,c.jsx)(p.sP.Vector,{children:e.map(e=>(0,c.jsx)(x,{value:e,selected:t.includes(e.id)},e.id))})}));n(28706),n(33110),n(40875),n(10287),n(60825);var k=n(34477),_=n(48227),N=n(58132),R=n(44913),D=n(1694),M=n(11365),L=n(44294),F=n(5556),U=n.n(F),G=n(68394);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){$(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z(r.key),r)}}function W(e,t,n){return t=K(t),function(e,t){if(t&&("object"==V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,q()?Reflect.construct(t,n||[],K(e).constructor):t.apply(e,n))}function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(q=function(){return!!e})()}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function $(e,t,n){return(t=Z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}var J=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$(n=W(this,t,[e]),"_registerClickawayHandlerIfNeeded",function(){var e=n._isMounted&&n.state.open;e&&!n._clickawayHandlerRegistered?(document.addEventListener("click",n._handleClickAway,!0),n._clickawayHandlerRegistered=!0):!e&&n._clickawayHandlerRegistered&&(document.removeEventListener("click",n._handleClickAway,!0),n._clickawayHandlerRegistered=!1)}),$(n,"_togglePicker",function(){n.setState(function(e){return{open:!e.open}})}),$(n,"_handleChange",function(e){var t,r={r:(t=e.rgb).r,g:t.g,b:t.b,alpha:t.a};n.setState({color:r}),n.props.onChange&&n.props.onChange(r)}),$(n,"_handleClickAway",function(e){n._pickerContainerRef.current&&!n._pickerContainerRef.current.contains(e.target)&&(n._togglePicker(),e.preventDefault(),e.stopPropagation())}),n._clickawayHandlerRegistered=!1,n._isMounted=!1,n._pickerContainerRef=r.createRef(),n.state={open:!1,color:e.value||e.defaultValue||{r:255,g:255,b:255,alpha:1}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this._isMounted=!0,this._registerClickawayHandlerIfNeeded()}},{key:"componentDidUpdate",value:function(){this._registerClickawayHandlerIfNeeded()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this._registerClickawayHandlerIfNeeded()}},{key:"render",value:function(){var e,t={position:"absolute",overflow:"hidden",zIndex:"2",transition:"height 0.3s",height:this.state.open?298:0},n=this.state.color;return r.createElement("div",{ref:this._pickerContainerRef,className:"popup-color-picker"},r.createElement("div",{className:"popup-color-picker-button",style:z(z({},this.props.style),{},{backgroundColor:(0,R.A)(n).rgb().string()}),onClick:this._togglePicker}),r.createElement("div",{className:"popup-color-picker-dropdown",style:t},r.createElement(G.Xq,{color:(e=n,{r:e.r,g:e.g,b:e.b,a:e.alpha}),onChange:this._handleChange})))}}])&&H(n.prototype,o),a&&H(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);$(J,"propTypes",{defaultValue:U().object,onChange:U().func,style:U().object,value:U().object});var X=n(84692),Q=n(58718),ee=function(e,t){try{return(0,R.A)(e)}catch(e){return(0,R.A)(t)}},te=(n(33771),n(953)),ne=n(13628);function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach(function(t){ie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=re(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le={small:10,medium:15,large:20};function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ve(r.key),r)}}function fe(e,t,n){return t&&ue(e.prototype,t),n&&ue(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function de(e,t,n){return t=me(t),function(e,t){if(t&&("object"==ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pe()?Reflect.construct(t,n||[],me(e).constructor):t.apply(e,n))}function pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(pe=function(){return!!e})()}function me(e){return me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},me(e)}function ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ge(e,t)}function ge(e,t){return ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ge(e,t)}function be(e,t,n){return(t=ve(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e){var t=function(e,t){if("object"!=ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ce(t)?t:t+""}var he=function(e){function t(){var e;se(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return be(e=de(this,t,[].concat(r)),"state",{strokeWidth:e.props.layer.parameters.strokeWidth,data:JSON.stringify(e.props.layer.parameters.data,null,2)}),be(e,"_handleStrokeColorChange",function(t){e.props.setLayerParameters({strokeColor:t})}),be(e,"_handleFillColorChange",function(t){e.props.setLayerParameters({fillColor:t})}),be(e,"_handleStrokeWidthChange",function(t){e.setState({strokeWidth:t.target.value})}),be(e,"_handleDataChange",function(t){e.setState({data:t.target.value})}),be(e,"_handleClick",function(){e.props.setLayerParameters({strokeWidth:(0,D.A)(e.state.strokeWidth)});try{var t=JSON.parse(e.state.data);e.props.setLayerParameters({data:t}),e.props.showMessage({message:"GeoJSON imported successfully.",semantics:"success"})}catch(t){e.props.showMessage({message:"Invalid GeoJSON data.",semantics:"error"})}}),e}return ye(t,e),fe(t,[{key:"render",value:function(){var e=this.props.layer.parameters,t=e.fillColor,n=e.strokeColor;return r.createElement(k.A,null,r.createElement(k.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},r.createElement(k.A,null,r.createElement("span",null,"Stroke color: "),r.createElement(J,{value:n,onChange:this._handleStrokeColorChange})),r.createElement(k.A,null,r.createElement("span",null,"Fill color: "),r.createElement(J,{value:t,onChange:this._handleFillColorChange})),r.createElement(N.A,{style:{marginLeft:2},label:"Stroke width",type:"number",min:"1",max:"100",value:this.state.strokeWidth,variant:"filled",onChange:this._handleStrokeWidthChange})),r.createElement(k.A,{sx:{pt:2}},r.createElement(N.A,{multiline:!0,fullWidth:!0,label:"GeoJSON data",placeholder:"GeoJSON",maxRows:10,value:this.state.data,variant:"filled",onChange:this._handleDataChange})),r.createElement(k.A,{sx:{textAlign:"center",pt:2}},r.createElement(_.A,{variant:"contained",color:"primary",onClick:this._handleClick},"Update layer")))}}])}(r.Component);be(he,"propTypes",{layer:U().object,setLayerParameters:U().func,showMessage:U().func});var Ae=(0,l.Ng)(null,function(e,t){return{setLayerParameters:function(n){e((0,X.K_)(t.layerId,n))},showMessage:function(t){e((0,Q.Ds)(t))}}})(he);Ae.propTypes={layerId:U().string};var Se=function(e){function t(e){var n;return se(this,t),(n=de(this,t,[e]))._assignSourceRef=n._assignSourceRef.bind(n),n._sourceRef=void 0,n.geojsonFormat=new M.A,n._updateFeaturesFromProps(e),n}return ye(t,e),fe(t,[{key:"componentDidUpdate",value:function(){this._updateFeaturesFromProps(this.props)}},{key:"_assignSourceRef",value:function(e){if(this._sourceRef!==e){if(this._sourceRef)this._sourceRef.source.clear();this._sourceRef=e,this._sourceRef&&this._updateFeaturesFromProps(this.props)}}},{key:"_parseFeatures",value:function(e){try{return this.geojsonFormat.readFeatures(e,{featureProjection:"EPSG:3857"})}catch(e){return[]}}},{key:"_updateFeaturesFromProps",value:function(e){var t=this._parseFeatures(e.data);if(this._sourceRef){var n=this._sourceRef.source;n.clear(),n.addFeatures(t)}}},{key:"render",value:function(){return r.createElement(p.sP.Vector,{ref:this._assignSourceRef})}}])}(r.Component),Ee=function(e){var t=e.layer,n=e.zIndex,o=r.useMemo(function(){var e=t.parameters,n=e.strokeWidth,r=ee(e.strokeColor,g.Ay.main),o=ee(e.fillColor,(0,R.A)(g.Ay.main).alpha(.5)),a={stroke:r.rgb().hex(),"stroke-opacity":r.alpha(),"stroke-width":n,fill:o.rgb().hex(),"fill-opacity":o.alpha()};return function(e){var t=e.getProperties();return!t["marker-symbol"]&&e.getGeometry()instanceof L.default&&(t["marker-symbol"]="marker"),function(e,t){var n=ae(ae({"fill-opacity":.6,"stroke-opacity":1,"stroke-width":2},t),e),r=void 0!==n.stroke,o=void 0!==n.fill,a=void 0!==n.title,i=n["marker-size"]||n["marker-symbol"]||n["marker-color"],l=r?(0,R.A)(n.stroke||"#555555").alpha(n["stroke-opacity"]):void 0,c=o?(0,R.A)(n.fill||"#555555").alpha(n["fill-opacity"]):void 0,u=n.title,p={},m=0;if(l&&(p.stroke=new te.default({color:l.array(),width:Number(n["stroke-width"])})),c&&(p.fill=new ne.default({color:c.array()})),i){var y=(0,R.A)(n["marker-color"]||"#7e7e7e"),g=n["marker-size"]||"medium";m=void 0!==le[g]?le[g]:le.medium,p.image=new f.A({fill:new ne.default({color:y.array()}),stroke:new te.default({color:y.blacken(.5)}),radius:m/2})}return a&&(p.text=new d.default({text:u,font:"normal 14px Arial",fill:new ne.default({color:"#ffffff"}),stroke:new te.default({color:"#000000",width:2})})),a&&m>0&&p.text.setOffsetY(m+2),new s.default(p)}(t,a)}},[t]);return r.createElement("div",null,r.createElement(p.qd.Vector,{zIndex:n,style:o},r.createElement(Se,{data:t.parameters.data})))};Ee.propTypes={layer:U().object,zIndex:U().number};n(23418),n(74423),n(62062),n(34782),n(62010),n(69085),n(3362),n(27495),n(90906),n(38781),n(21699),n(81454);var Oe=n(91799),we=n(87788),Te=n(82181),Ce=n(88634),Ie=n(49068),xe=n(37603),je=n(33682),Pe=n(76320),ke=n(83869),_e=n(73333),Ne=n(86717),Re=n(52490),De=n(50256),Me=n(72732);class Le{#e;constructor(e){e instanceof Map?this.#e=new Map([...e.entries()].map(([e,t])=>[JSON.stringify(e),t])):Array.isArray(e)?this.#e=new Map(e):this.#e=new Map}set(e,t){return this.#e.set(JSON.stringify(e),t)}has(e){return this.#e.has(JSON.stringify(e))}get(e){return this.#e.get(JSON.stringify(e))}get data(){return this.#e}get size(){return this.#e.size}*keys(){for(const e of this.#e.keys())yield JSON.parse(e)}*[Symbol.iterator](){for(const[e,t]of this.#e)yield[JSON.parse(e),t]}}function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function Ue(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return Ge(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Ge(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Ge(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,Ge(f,"constructor",s),Ge(s,"constructor",c),c.displayName="GeneratorFunction",Ge(s,o,"GeneratorFunction"),Ge(f),Ge(f,o,"Generator"),Ge(f,r,function(){return this}),Ge(f,"toString",function(){return"[object Generator]"}),(Ue=function(){return{w:a,m:d}})()}function Ge(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Ge=function(e,t,n,r){function a(t,n){Ge(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},Ge(e,t,n,r)}function Ve(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Be(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Ve(a,r,o,i,l,"next",e)}function l(e){Ve(a,r,o,i,l,"throw",e)}i(void 0)})}}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||qe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=qe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function We(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){if(e){if("string"==typeof e)return Ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rt(r.key),r)}}function Ze(e,t,n){return t&&$e(e.prototype,t),n&&$e(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Je(e,t,n){return t=Qe(t),function(e,t){if(t&&("object"==Fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xe()?Reflect.construct(t,n||[],Qe(e).constructor):t.apply(e,n))}function Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Xe=function(){return!!e})()}function Qe(e){return Qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qe(e)}function et(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tt(e,t)}function tt(e,t){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tt(e,t)}function nt(e,t,n){return(t=rt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e){var t=function(e,t){if("object"!=Fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fe(t)?t:t+""}var ot=function(e){return(0,_e.A)(e).format({mantissa:3})},at={linear:{name:"Linear",function:function(e){return e}},logarithmic:{name:"Logarithmic",function:function(e){return Math.log(e)}}},it=function(e){function t(e){var n;return Ye(this,t),nt(n=Je(this,t,[e]),"_showSubscriptionDialog",function(){n._refs.subscriptionDialog.current.showDialog()}),nt(n,"_handleHueChange",function(e){n.setState(nt({},e.target.id,(0,D.A)(e.target.value)))}),nt(n,"_handleColoringFunctionChange",function(e){n.setState({coloringFunction:e.target.value})}),nt(n,"_handleClick",function(){n.props.setLayerParameters({threshold:(0,D.A)(n._refs.threshold.current.value),coloringFunction:n.state.coloringFunction,minValue:(0,D.A)(n._refs.minValue.current.value),maxValue:(0,D.A)(n._refs.maxValue.current.value),minHue:n.state.minHue,maxHue:n.state.maxHue,minDistance:(0,D.A)(n._refs.minDistance.current.value)})}),nt(n,"_clearData",function(){window.localStorage.removeItem("".concat(n.props.layerId,"_data")),n._refs.minValue.current.value=0,n.props.setLayerParameters({minValue:0}),n._refs.maxValue.current.value=0,n.props.setLayerParameters({maxValue:0})}),n.state={coloringFunction:e.layer.parameters.coloringFunction,minHue:e.layer.parameters.minHue,maxHue:e.layer.parameters.maxHue},n._refs=Object.assign.apply(Object,[{}].concat(We(["subscriptionDialog","threshold","minValue","maxValue","minHue","maxHue","minDistance"].map(function(e){return nt({},e,r.createRef())})))),n._setAutoScale=function(e){n.props.setLayerParameters({autoScale:e.target.checked})},n._setSnapToGrid=function(e){n.props.setLayerParameters({snapToGrid:e.target.checked})},n}return et(t,e),Ze(t,[{key:"render",value:function(){var e=this.props.setLayerParameter,t=this.props.layer.parameters,n=this.state,o=n.minHue,a=n.maxHue,i={marginRight:10,width:125};return r.createElement("div",null,r.createElement(De.A,{ref:this._refs.subscriptionDialog,subscriptions:t.subscriptions,setSubscriptions:(0,ke.A)(e,"subscriptions"),unit:t.unit,setUnit:(0,ke.A)(e,"unit")}),r.createElement(_.A,{variant:"contained",style:{marginBottom:"10px"},onClick:this._showSubscriptionDialog},"Edit subscriptions"),r.createElement("br",null),r.createElement(Te.A,{row:!0},r.createElement(N.A,{inputRef:this._refs.threshold,style:i,label:"Threshold",type:"number",defaultValue:ot(t.threshold)}),r.createElement(Oe.A,{style:{width:"125px"}},r.createElement(Ie.A,{htmlFor:"selectedChannel"},"Coloring function"),r.createElement(je.A,{value:this.state.coloringFunction,onChange:this._handleColoringFunctionChange},Object.keys(at).map(function(e){return r.createElement(xe.A,{key:e,value:e},at[e].name)})))),r.createElement(Te.A,{row:!0},r.createElement(N.A,{inputRef:this._refs.minValue,style:i,label:"Minimum value",type:"number",defaultValue:ot(t.minValue)}),r.createElement(N.A,{inputRef:this._refs.maxValue,style:i,label:"Maximum value",type:"number",defaultValue:ot(t.maxValue)}),r.createElement(we.A,{label:"Autoscale",control:r.createElement(Pe.A,{checked:t.autoScale,onChange:this._setAutoScale})})),r.createElement("div",{style:{padding:"24px 0"}},r.createElement("input",{ref:this._refs.minHue,id:"minHue",type:"range",min:"0",max:"360",style:{width:"100px",verticalAlign:"middle"},value:o,onChange:this._handleHueChange}),r.createElement("div",{style:{display:"inline-block",width:"300px",height:"25px",margin:"5px",verticalAlign:"middle",background:"linear-gradient(-90deg,\n              hsla(".concat(a,", 70%, 50%, 0.75),\n              hsla(").concat(o,", 70%, 50%, 0.75)\n            )"),borderRadius:"10px",boxShadow:"0px 0px 3px 0px black"}}),r.createElement("input",{ref:this._refs.maxHue,id:"maxHue",type:"range",min:"0",max:"360",style:{width:"100px",verticalAlign:"middle"},value:a,onChange:this._handleHueChange})),r.createElement(Te.A,{row:!0},r.createElement(N.A,{inputRef:this._refs.minDistance,label:"Min distance",style:i,slotProps:{input:{endAdornment:r.createElement(Ce.A,{position:"end"},"m")}},type:"number",defaultValue:ot(t.minDistance)}),r.createElement(we.A,{label:"Snap to grid",control:r.createElement(Pe.A,{checked:t.snapToGrid,onChange:this._setSnapToGrid})})),r.createElement(Te.A,{row:!0,style:{paddingTop:10}},r.createElement(_.A,{onClick:this._handleClick},"Update parameters"),r.createElement(_.A,{color:"secondary",onClick:this._clearData},"Clear data")))}}])}(r.Component);nt(it,"propTypes",{layer:U().object,layerId:U().string,setLayerParameter:U().func,setLayerParameters:U().func});var lt=(0,l.Ng)(null,function(e,t){return{setLayerParameters:function(n){e((0,X.K_)(t.layerId,n))},setLayerParameter:function(n,r){e((0,X.K_)(t.layerId,nt({},n,r)))}}})(it),ct=function(e,t){return(0,Re.Yf)([e.lon,e.lat],[t.lon,t.lat])},st=function(e){function t(e){var n;return Ye(this,t),nt(n=Je(this,t,[e]),"_assignSourceRef",function(e){n._sourceRef!==e&&(n._sourceRef&&n._sourceRef.source.clear(),n._sourceRef=e,n._sourceRef&&n._drawFromStoredData())}),nt(n,"_getStoredData",function(){return window.localStorage.getItem(n.props.storageKey)||window.localStorage.setItem(n.props.storageKey,"[]"),new Le(JSON.parse(window.localStorage.getItem(n.props.storageKey)))}),nt(n,"_setStoredData",function(e){window.localStorage.setItem(n.props.storageKey,JSON.stringify(We(e.data)))}),nt(n,"_drawFromStoredData",function(){var e=(n._sourceRef||{}).source;if(e){e.clear(),n.features=new Le;var t,r=He(n._getStoredData());try{for(r.s();!(t=r.n()).done;){var o=ze(t.value,2),a=o[0],i=o[1];n.features.set(a,n._drawPointFromData(Object.assign({value:i},a)))}}catch(e){r.e(e)}finally{r.f()}}}),nt(n,"_trySubscribe",function(){var e=Be(Ue().m(function e(t){return Ue().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Me.A.waitUntilReady();case 1:Me.A.sendMessage({type:"DEV-SUB",paths:t});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),nt(n,"_tryUnsubscribe",function(){var e=Be(Ue().m(function e(t){return Ue().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Me.A.waitUntilReady();case 1:Me.A.sendMessage({type:"DEV-UNSUB",paths:t});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),nt(n,"_processData",function(e,t){var r=n.props.parameters.minDistance;if(n.props.parameters.snapToGrid){var o=(0,h.Al)((0,h.Ur)([t.lon,t.lat]).map(function(e){return Math.round(e/r)*r}));t.lon=o[0],t.lat=o[1];var a={lon:t.lon,lat:t.lat};if(e.has(a))return t.value=(e.get(a)+t.value)/2,e.set(a,t.value),void(n.features.get(a).measuredValue=t.value)}else{var i,l=He(e.keys());try{for(l.s();!(i=l.n()).done;){var c=i.value;if(ct(c,t)<r)return t.value=(e.get(c)+t.value)/2,e.set(c,t.value),void(n.features.get(c).measuredValue=t.value)}}catch(e){l.e(e)}finally{l.f()}}var s={lon:t.lon,lat:t.lat};e.set(s,t.value),n.features.set(s,n._drawPointFromData(t))}),nt(n,"_processNotification",function(e){var t=n._getStoredData();for(var r in e.body.values)if(n.props.parameters.subscriptions.includes(r)&&null!==e.body.values[r].value){var o=e.body.values[r];n._processData(t,o),n.props.parameters.autoScale&&(o.value>n.props.parameters.threshold&&(o.value<n.props.parameters.minValue||0===n.props.parameters.minValue&&0===n.props.parameters.maxValue)&&n.props.setLayerParameters({minValue:o.value}),o.value>n.props.parameters.maxValue&&n.props.setLayerParameters({maxValue:o.value}))}n._setStoredData(t),n.features.size!==t.size&&n._drawFromStoredData()}),nt(n,"_makePoint",function(e){return new Ne.default({geometry:new L.default((0,h.Ur)(e))})}),nt(n,"_drawPointFromData",function(e){var t=n._makePoint([e.lon,e.lat]);t.measuredValue=e.value;var r=(n._sourceRef||{}).source;return r&&r.addFeature(t),t}),n._sourceRef=void 0,n.features=new Le,n}return et(t,e),Ze(t,[{key:"componentDidMount",value:function(){this._trySubscribe(this.props.parameters.subscriptions),Me.A.registerNotificationHandler("DEV-INF",this._processNotification)}},{key:"componentDidUpdate",value:function(){this._drawFromStoredData()}},{key:"componentWillUnmount",value:function(){this._tryUnsubscribe(this.props.parameters.subscriptions),Me.A.unregisterNotificationHandler("DEV-INF",this._processNotification)}},{key:"render",value:function(){return r.createElement(p.sP.Vector,{ref:this._assignSourceRef})}}])}(r.Component);nt(st,"propTypes",{storageKey:U().string,parameters:U().object,setLayerParameters:U().func});var ut=function(e){function t(e){var n;return Ye(this,t),(n=Je(this,t,[e]))._colorForValue=n._colorForValue.bind(n),n.styleFunction=n.styleFunction.bind(n),n}return et(t,e),Ze(t,[{key:"_colorForValue",value:function(e){var t=this.props.layer.parameters,n=t.threshold,r=t.coloringFunction,o=t.minValue,a=t.maxValue,i=t.minHue,l=t.maxHue,c=at[r].function,s=c(e),u=c(o),f=c(a);return e<n?"hsla(0, 100%, 100%, 0.5)":"hsla(".concat(i+(f>u?(s-u)/(f-u):0)*(l-i),", 70%, 50%, 0.5)")}},{key:"styleFunction",value:function(e,t){var n=.9/t+1.5;return function(e,t){return new s.default({image:new f.A({fill:new ne.default({color:e}),radius:t})})}(this._colorForValue(e.measuredValue),n)}},{key:"render",value:function(){var e=this.props.layer.parameters,t=e.minValue,n=e.maxValue,o=e.unit||"";return r.createElement("div",null,r.createElement(p.qd.Vector,{zIndex:this.props.zIndex,style:this.styleFunction},r.createElement(st,{storageKey:"".concat(this.props.layerId,"_data"),parameters:this.props.layer.parameters,setLayerParameters:this.props.setLayerParameters})),r.createElement("div",{id:"heatmapScale",style:{background:"linear-gradient(\n              hsla(".concat(this.props.layer.parameters.maxHue,", 70%, 50%, 0.75),\n              hsla(").concat(this.props.layer.parameters.minHue,", 70%, 50%, 0.75)\n            )"),borderRadius:"5px"}},r.createElement("span",null,"".concat(ot(n)," ").concat(o)),r.createElement("span",null,"".concat(ot((n+t)/2)," ").concat(o)),r.createElement("span",null,"".concat(ot(t)," ").concat(o))))}}])}(r.Component);nt(ut,"propTypes",{layer:U().object,layerId:U().string,zIndex:U().number,setLayerParameters:U().func});var ft=(0,l.Ng)(null,function(e,t){return{setLayerParameters:function(n){e((0,X.K_)(t.layer.id,n))}}})(ut),dt=(n(48598),n(50791)),pt=n(92866),mt=n(34142),yt=n(61597);function gt(e){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gt(e)}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ct(r.key),r)}}function ht(e,t,n){return t&&vt(e.prototype,t),n&&vt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function At(e,t,n){return t=Et(t),function(e,t){if(t&&("object"==gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,St()?Reflect.construct(t,n||[],Et(e).constructor):t.apply(e,n))}function St(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(St=function(){return!!e})()}function Et(e){return Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Et(e)}function Ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wt(e,t)}function wt(e,t){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wt(e,t)}function Tt(e,t,n){return(t=Ct(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e){var t=function(e,t){if("object"!=gt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gt(t)?t:t+""}var It=function(e){return new s.default({fill:new ne.default({color:e})})},xt=function(e){function t(e){var n;return bt(this,t),Tt(n=At(this,t,[e]),"_assignCenterField",function(e){n._inputFields.center=e}),Tt(n,"_assignRadiusField",function(e){n._inputFields.radius=e}),Tt(n,"_assignSizeField",function(e){n._inputFields.size=e}),Tt(n,"_handleClick",function(){n.props.setLayerParameters({center:n._inputFields.center.value.split(",").map(D.A),size:(0,D.A)(n._inputFields.size.value),radius:(0,D.A)(n._inputFields.radius.value)})}),n._inputFields={},n}return Ot(t,e),ht(t,[{key:"render",value:function(){var e=this.props.layer.parameters,t=e.center,n=e.size,o=e.radius,a=t?t.join(", "):"";return r.createElement("div",null,r.createElement(N.A,{style:{paddingRight:"1em"},inputRef:this._assignCenterField,label:"Center of the grid",placeholder:"Center (comma separated)",defaultValue:a}),r.createElement(N.A,{style:{paddingRight:"1em"},inputRef:this._assignSizeField,label:"Size of the grid",placeholder:"Size",defaultValue:String(n)}),r.createElement(N.A,{style:{paddingRight:"1em"},inputRef:this._assignRadiusField,label:"Radius of one cell",placeholder:"Radius",defaultValue:String(o)}),r.createElement("br",null),"\xa0",r.createElement("br",null),r.createElement(_.A,{onClick:this._handleClick},"Update hex grid"))}}])}(r.Component);Tt(xt,"propTypes",{layer:U().object,setLayerParameters:U().func});var jt=(0,l.Ng)(null,function(e,t){return{setLayerParameters:function(n){e((0,X.K_)(t.layerId,n))}}})(xt),Pt=function(e){function t(){var e;bt(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Tt(e=At(this,t,[].concat(r)),"_assignSourceRef",function(t){if(e._sourceRef!==t){if(e._sourceRef)e._sourceRef.source.clear();e._sourceRef=t}}),e}return Ot(t,e),ht(t,[{key:"componentDidUpdate",value:function(){if(this._sourceRef){var e=this._sourceRef.source;this._drawHexagonsFromProps(this.props,e)}}},{key:"render",value:function(){return r.createElement(p.sP.Vector,{ref:this._assignSourceRef})}},{key:"_getCorners",value:function(e,t){return[30,90,150,210,270,330,30].map(yt.eh).map(function(n){return(0,h.Ur)([e[0]+t*Math.sin(n),e[1]+t*Math.cos(n)])})}},{key:"_getHexagon",value:function(e,t){return new Ne.default({geometry:new mt.default([this._getCorners(e,t)])})}},{key:"_drawHexagonsFromProps",value:function(e,t){for(var n=e.center,r=e.size,o=e.radius,a={},i=-r;i<=r;i++)for(var l=Math.max(-r,-r-i);l<=Math.min(r,r-i);l++){var c="".concat(i,",").concat(l);a[c]=this._getHexagon([n[0]+1.5*o*i,n[1]-o*Math.sqrt(3)*(.5*i+l)],o),a[c].setId(c)}t.clear(),t.addFeatures((0,pt.A)(a));for(var s=0,u=Object.keys(a);s<u.length;s++){var f=u[s],d=f.split(",").map(D.A),p=(0,dt.A)(d.map(Math.abs))/(2*r+1)*115;a[f].setStyle(It("hsla(".concat(p,", 70%, 50%, 0.5)")))}}}])}(r.PureComponent),kt=function(e){var t=e.layer,n=e.zIndex,o=t.parameters,a=o.center,i=o.size,l=o.radius;return r.createElement("div",null,r.createElement(p.qd.Vector,{zIndex:n},r.createElement(Pt,{center:a,size:i,radius:l})),r.createElement("div",{id:"heatmapScale"},r.createElement("span",null,"100%"),r.createElement("span",null,"50%"),r.createElement("span",null,"0%")))};kt.propTypes={layer:U().object,zIndex:U().number};var _t=kt,Nt=(n(9868),n(59923)),Rt=n(6045),Dt=n(12060),Mt=n(90952),Lt=n(84596),Ft=n(81963),Ut=n(86683),Gt=n(26926),Vt=n(57632),Bt=n(40861),zt=n(66380);function Ht(e){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(e)}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach(function(t){Kt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Kt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ht(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ht(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yt(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return $t(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):($t(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,$t(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,$t(f,"constructor",s),$t(s,"constructor",c),c.displayName="GeneratorFunction",$t(s,o,"GeneratorFunction"),$t(f),$t(f,o,"Generator"),$t(f,r,function(){return this}),$t(f,"toString",function(){return"[object Generator]"}),(Yt=function(){return{w:a,m:d}})()}function $t(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}$t=function(e,t,n,r){function a(t,n){$t(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},$t(e,t,n,r)}function Zt(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Jt(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Zt(a,r,o,i,l,"next",e)}function l(e){Zt(a,r,o,i,l,"throw",e)}i(void 0)})}}var Xt=function(e){var t=e.active,n=e.save,r=(0,Lt.A)(t);return r&&r!==t&&setTimeout(n,0),null};Xt.propTypes={active:U().string,save:U().func};var Qt=function(){var e=Jt(Yt().m(function e(t){return Yt().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e){var n=new window.Image;n.addEventListener("load",function(){e({width:n.naturalWidth,height:n.naturalHeight})}),n.src=t}))},e)}));return function(t){return e.apply(this,arguments)}}(),en=function(e){var t=e.layer.parameters,n=e.mapViewCenterPosition,o=e.selectImage,a=e.updateTransform,i=(0,r.useRef)(),l=(0,r.useCallback)(function(){i.current&&i.current.click()},[]);(0,r.useEffect)(function(){t.transform.position||a(qt(qt({},t.transform),{},{position:{lon:n[0].toFixed(6),lat:n[1].toFixed(6)}}))});var c=(0,r.useCallback)(function(){(0,Ut.Wp)("ImageTransformEditor")},[]);return r.createElement(Mt.lV,{initialValues:qt({},t.transform),onSubmit:a},function(e){var n=e.handleSubmit;return r.createElement("form",{id:"ImageTransformEditor",onSubmit:n},r.createElement(Mt.Pc,{subscription:{active:!0,values:!0},component:Xt,save:c}),r.createElement(k.A,{sx:{display:"flex",flexDirection:"row"}},t.image.name?r.createElement("img",{src:t.image.data,style:{width:"100%",minWidth:"0",height:"10em",objectFit:"contain"}}):r.createElement(Rt.A,{variant:"rectangular",width:"100%",height:"10em",onClick:l}),r.createElement(k.A,{sx:{p:.75}}),r.createElement(k.A,{sx:{textAlign:"center",margin:"auto",width:"100%"}},r.createElement(Ft.A,{ref:i,filter:["image/*"],variant:"contained",startIcon:r.createElement(Nt.A,null),onSelected:o},"Select"),r.createElement(k.A,{sx:{p:.75}}),t.image.name?r.createElement(r.Fragment,null,r.createElement("span",null,t.image.name),r.createElement("br",null),r.createElement("span",{style:{fontStyle:"italic"}},t.image.dimensions.width,"\xa0\xd7\xa0",t.image.dimensions.height,"\xa0px")):"Please select an image!")),r.createElement(k.A,{sx:{display:"flex",flexDirection:"row"}},r.createElement(Ut.r2,{fullWidth:!0,size:"small",name:"position.lat",label:"Latitude of center"}),r.createElement(k.A,{sx:{p:.75}}),r.createElement(Ut.Ob,{fullWidth:!0,size:"small",name:"position.lon",label:"Longitude of center"})),r.createElement(k.A,{sx:{display:"flex",flexDirection:"row"}},r.createElement(Ut.DS,{fullWidth:!0,size:"small",name:"angle",label:"Angle"}),r.createElement(k.A,{sx:{p:.75}}),r.createElement(Ut.A_,{fullWidth:!0,type:"number",fieldProps:{validate:(0,zt.fj)([zt.mw,zt.E2,zt.yj])},slotProps:{htmlInput:{step:.1},input:{endAdornment:r.createElement(Ce.A,{position:"end"},"cm/px")}},size:"small",name:"scale",label:"Scale",variant:"filled"})),r.createElement("input",{hidden:!0,type:"submit"}))})};en.propTypes={layer:U().object,mapViewCenterPosition:U().arrayOf(U().number),selectImage:U().func,updateTransform:U().func};var tn=(0,l.Ng)(function(e){return{mapViewCenterPosition:(0,Gt.Gk)(e)}},function(e,t){return{selectImage:function(n){return Jt(Yt().m(function r(){var o,a,i,l,c,s,u;return Yt().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,(0,Vt.C2)(n);case 1:return o=r.v,a=e,i=X.K_,l=t.layerId,c=o,s=n.name,r.n=2,Qt(o);case 2:u=r.v,a(i(l,{image:{data:c,name:s,dimensions:u}}));case 3:return r.a(2)}},r)}))()},updateTransform:function(n){var r={position:{lon:Number(n.position.lon),lat:Number(n.position.lat)},angle:Number(n.angle),scale:Number(n.scale)};e((0,X.K_)(t.layerId,{transform:r}))}}})(en),nn=function(e){var t=e.layer.parameters,n=t.image,o=t.transform,a=o.position,i=o.angle,l=o.scale,c=e.zIndex;return a?r.createElement(p.qd.GeoImage,{zIndex:c},r.createElement(p.sP.GeoImage,{url:n.data,imageCenter:(0,h.Ur)([a.lon,a.lat]),imageRotate:(0,Bt.eh)(i),imageScale:l/(0,Dt.hO)("EPSG:3857",100,(0,h.Ur)([a.lon,a.lat]))})):null};nn.propTypes={layer:U().object,zIndex:U().number};var rn=nn,on=(n(18107),n(50113),n(78350),n(30237),n(67357),n(95115),n(72577),n(27629)),an=n(55698),ln=n(81368),cn=n(18803),sn=n(63614),un=n.n(sn),fn=n(6933);const dn=n.p+"7f14249f87c6b5995e3f.svg",pn=n.p+"b024253d6f05fb4c5b5b.svg";var mn=n(98774),yn=n(59952),gn=n(35026),bn=n(37813),vn=n(40881),hn=n(62528),An=n(27322),Sn=n(16349),En=n(2652),On=n(34023),wn=n(545),Tn=new s.default({stroke:(0,A.SC)(g.Ay.plannedTrajectory)});function Cn(e){return e?(t=e.map(function(e){return(0,h.Ur)([e.lon,e.lat])}),(0,wn.default)(t,function(e,n){return n>0&&e[0]===t[n-1][0]&&e[1]===t[n-1][1]})):void 0;var t}var In=function(e){return[Tn,(0,A.V1)(g.Ay.plannedTrajectory,"start")(e),(0,A.V1)(g.Ay.plannedTrajectory,"end")(e)]},xn=function(e){var t=e.source,n=e.trajectory,o=e.uavId,a=(0,r.useMemo)(function(){return Cn(n)},[n]);return a?r.createElement(p.Xj,{id:(0,v.O3)(o),source:t,style:In},r.createElement(p.N4.LineString,{coordinates:a})):null};xn.propTypes={source:U().any,trajectory:U().arrayOf(On.A.coordinate),uavId:U().string};const jn=(0,l.Ng)(function(e,t){var n=t.uavId;return{trajectory:(0,vn.TX)(e,n)}},{})(xn);var Pn=function(e){var t=e.source,n=e.trajectory,o=e.missionIndex,a=(0,r.useMemo)(function(){return Cn(n)},[n]);return a?r.createElement(p.Xj,{id:(0,v.O3)(o),source:t,style:In},r.createElement(p.N4.LineString,{coordinates:a})):null};Pn.propTypes={source:U().any,trajectory:U().arrayOf(On.A.coordinate),missionIndex:U().number};const kn=(0,l.Ng)(function(e,t){var n=t.missionIndex;return{trajectory:(0,bn.sc)(e,n)}},{})(Pn);var _n=["layer","zIndex"];function Nn(e){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(e)}function Rn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Mn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function Dn(e){return function(e){if(Array.isArray(e))return Ln(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Mn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mn(e,t){if(e){if("string"==typeof e)return Ln(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(e,t):void 0}}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Fn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Nn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Un=function(e){var t=e.layer,n=e.setLayerParameters,o=t.parameters||{},a=o.showConvexHull,i=o.showOrigin,l=o.showHomePositions,c=o.showLandingPositions,s=o.showMissionItems,u=o.showMissionOrigin,f=o.showTrajectoriesOfSelection,d=function(e){return function(t){return n(Fn({},e,t.target.checked))}};return r.createElement(Te.A,null,r.createElement(we.A,{control:r.createElement(on.A,{checked:Boolean(i),value:"showOrigin",onChange:d("showOrigin")}),label:"Show map origin"}),r.createElement(we.A,{control:r.createElement(on.A,{checked:Boolean(u),value:"showMissionOrigin",onChange:d("showMissionOrigin")}),label:"Show mission origin"}),r.createElement(we.A,{control:r.createElement(on.A,{checked:Boolean(l),value:"showHomePositions",onChange:d("showHomePositions")}),label:"Show home positions"}),r.createElement(we.A,{control:r.createElement(on.A,{checked:Boolean(c),value:"showLandingPositions",onChange:d("showLandingPositions")}),label:"Show landing positions"}),(0,Sn.jI)("showControl")&&r.createElement(r.Fragment,null,r.createElement(we.A,{control:r.createElement(on.A,{checked:Boolean(a),value:"showConvexHull",onChange:d("showConvexHull")}),label:"Show convex hull of trajectories"}),r.createElement(we.A,{control:r.createElement(on.A,{checked:Boolean(f),value:"showTrajectoriesOfSelection",onChange:d("showTrajectoriesOfSelection")}),label:"Show trajectories of selected drones"})),(0,Sn.jI)("missionEditor")&&r.createElement(we.A,{control:r.createElement(on.A,{checked:Boolean(s),value:"showMissionItems",onChange:d("showMissionItems")}),label:"Show mission items"}))};Un.propTypes={layer:U().object,setLayerParameters:U().func};var Gn=(0,l.Ng)(null,function(e,t){return{setLayerParameters:function(n){e((0,X.K_)(t.layerId,n))}}})(Un),Vn=(0,A.TB)(g.Ay.axes.x,2),Bn=(0,A.TB)(g.Ay.axes.y,2),zn=(0,A.GS)(g.Ay.markers.origin),Hn=function(e,t){return[new s.default({geometry:function(e){var t=e.getGeometry().getFirstCoordinate();return new L.default(t)},image:new f.A({fill:zn,radius:8,stroke:e?A.nM:A.Fu})}),new s.default({stroke:"x"===t?Vn:Bn})]},Wn=un()(function(e,t,n){return function(r){var o=r.get("index"),a={image:new u.A({src:pn,anchor:[.5,.95],color:n?g.Ay.selectedMissionItem:t?g.Ay.doneMissionItem:e?g.Ay.currentMissionItem:g.Ay.missionItem,rotateWithView:!1,snapToPixel:!1}),text:new d.default({font:"12px sans-serif",offsetY:-17,text:void 0!==o?String(o+1):"?",textAlign:"center"})};if(n){var i={image:new u.A({src:dn,anchor:[.5,.95],rotateWithView:!1,snapToPixel:!1})};return[new s.default(i),new s.default(a)]}return new s.default(a)}}),qn=new s.default({stroke:(0,A.DE)(g.Ay.flightArea)}),Kn=new s.default({stroke:A.Fu}),Yn=function(e){return(0,a.fm)(e,g.Ay.flightArea)},$n=new s.default({stroke:(0,A.q)(g.Ay.doneMissionItem)}),Zn=new s.default({stroke:(0,A.SC)(g.Ay.missionItem)}),Jn=function(e){return[new s.default({stroke:(0,A.wt)(g.Ay.auxiliaryMissionItem)}),(0,A.V1)(g.Ay.auxiliaryMissionItem,"start")(e),(0,A.V1)(g.Ay.auxiliaryMissionItem,"end")(e)]},Xn=(0,v.Ru)(v.aU),Qn=(0,v.O3)(v.IP),er=(0,v.Ru)(v.Ws),tr=function(e,t,n){if(null!=e&&e[0]&&(null==t?void 0:t.length)>0){var o=function(e,t,n,o){return r.createElement(p.Xj,{key:t,id:e,style:Jn},r.createElement(p.N4.LineString,{coordinates:[(0,h.Ur)([n.lon,n.lat]),(0,h.Ur)([o.lon,o.lat])]}))};return[{id:"start",index:-1}].concat(Dn(n.map(function(e){var t=e.index;return{id:e.item.id,index:t}}))).flatMap(function(n){var r,a=n.id,i=n.index,l=(r=i,{before:t.findLast(function(e){return e.index<r}),after:t.find(function(e){return e.index>r})}),c=l.before,s=l.after;return[].concat(Dn(c?[o("auxiliaryMissionLineString_".concat(a,"_before"),"".concat(Qn,"Aux_").concat(a,"_before"),c.coordinate,e[0])]:[]),Dn(s?[o("auxiliaryMissionLineString_".concat(a,"_after"),"".concat(Qn,"Aux_").concat(a,"_after"),e[0],s.coordinate)]:[]))})}return[]},nr=function(e){var t=e.convexHull,n=e.coordinateSystemType,o=e.currentItemIndex,a=e.currentItemRatio,i=e.homePositions,l=e.landingPositions,c=e.mapOrigin,s=e.minimumDistanceBetweenHomePositions,u=e.minimumDistanceBetweenLandingPositions,f=e.missionItemsWithAreas,d=e.missionItemsWithCoordinates,m=e.missionOrientation,y=e.missionOrigin,b=e.missionIndicesForTrajectories,A=e.orientation,S=void 0===A?0:A,E=e.returnToHomeItems,O=e.selectedTool,w=e.selection,T=e.uavIdsForTrajectories;return r.createElement(p.sP.Vector,null,[].concat((0,mn.I_)(i,{minimumDistanceBetweenPositions:s,estimatedLabelWidth:i?(0,En.J8)(i.length-1).length*mn.AL:0}),(0,mn.cl)(l,{minimumDistanceBetweenPositions:u,estimatedLabelWidth:l?(0,En.J8)(l.length-1).length*mn.AL:0}),function(e,t,n,o){if(t){var a=(0,h.Ur)(t),i=50/(0,Dt.hO)("EPSG:3857",1,a),l=[0,"nwu"===e?i:-i],c=[i,0],s=o.includes(Xn+"$x")||o.includes(Xn+"$y");return fn.e$(c,(0,Bt.eh)(90-n)),fn.e$(l,(0,Bt.eh)(90-n)),fn.WQ(l,a),fn.WQ(c,a),[r.createElement(p.Xj,{key:"mapOrigin.x",id:Xn+"$x",style:Hn(s,"x")},r.createElement(p.N4.LineString,{coordinates:[a,c]})),r.createElement(p.Xj,{key:"mapOrigin.y",id:Xn+"$y",style:Hn(s,"y")},r.createElement(p.N4.LineString,{coordinates:[a,l]}))]}return[]}(n,c,S,w),function(e,t,n){var o;return null!==(o=null==e?void 0:e.map(function(e){var o,a=e.id,i=e.area,l=null==i||null===(o=i.points)||void 0===o?void 0:o.map((0,cn.A)(h.Ur));(0,Bt.hR)(l);var c=(0,v.S2)(a),s=t.includes(c);return r.createElement(p.Xj,{key:"missionFlightArea",id:c,style:[].concat(Dn(s?[Kn]:[]),[qn],Dn(n===yn.NL.EDIT_FEATURE?[Yn(s)]:[]))},r.createElement(p.N4.Polygon,{coordinates:l}))}))&&void 0!==o?o:[]}(f,w,O),function(e,t,n,o){return n?n.map(function(n){var a=n.index,i=n.id,l=n.coordinate,c=a===e,s=a<e||a===e&&1===t,u=(0,v.S2)(i),f=o.includes(u),d=(0,h.Ur)([l.lon,l.lat]);return r.createElement(p.Xj,{key:u,id:u,properties:{index:a},style:Wn(c,s,f)},r.createElement(p.N4.Point,{coordinates:d}))}):[]}(o,a,d,w),function(e,t,n){if(!n)return[];var o=function(t){return t.index<e},a=(0,ln.A)(n,o),i=(0,an.A)(n,o);if(a.length+i.length>1){var l=a.map(function(e){var t=e.coordinate;return(0,h.Ur)([t.lon,t.lat])}),c=i.map(function(e){var t=e.coordinate;return(0,h.Ur)([t.lon,t.lat])});if(a.length>0&&i.length>0){var s,u=null!==(s=i[0].index===e?t:0)&&void 0!==s?s:0,f=l.at(-1),d=c.at(0),m=[f[0]*(1-u)+d[0]*u,f[1]*(1-u)+d[1]*u];l.push(m),c.unshift(m)}return[r.createElement(p.Xj,{key:"doneMissionItemLineString",id:"".concat(Qn,"Done"),style:$n},r.createElement(p.N4.LineString,{coordinates:l})),r.createElement(p.Xj,{key:"todoMissionItemLineString",id:"".concat(Qn,"Todo"),style:Zn},r.createElement(p.N4.LineString,{coordinates:c}))]}}(o,a,d),tr(i,d,E),function(e,t){return t?[(0,mn.ph)(e,t,er,g.Ay.grossShowConvexHull)]:[]}(m,y),(0,mn.zn)(t,w,mn.E.GROSS),function(e,t){var n=[];if(Array.isArray(t)&&t.length>0){var o,a=Rn(t);try{for(a.s();!(o=a.n()).done;){var i=o.value;n.push(r.createElement(jn,{key:"trajectory.".concat(i),uavId:i}))}}catch(e){a.e(e)}finally{a.f()}}if(Array.isArray(e)&&e.length>0){var l,c=Rn(e);try{for(c.s();!(l=c.n()).done;){var s=l.value;n.push(r.createElement(kn,{key:"trajectory.s".concat(s),missionIndex:s}))}}catch(e){c.e(e)}finally{c.f()}}return n}(b,T)))};nr.propTypes={convexHull:U().arrayOf(On.A.coordinate),coordinateSystemType:U().oneOf(["neu","nwu"]),currentItemIndex:U().number,currentItemRatio:U().number,homePositions:U().arrayOf(On.A.coordinate),landingPositions:U().arrayOf(On.A.coordinate),mapOrigin:U().arrayOf(U().number),minimumDistanceBetweenLandingPositions:U().number,minimumDistanceBetweenHomePositions:U().number,missionItemsWithAreas:U().arrayOf(U().object),missionItemsWithCoordinates:U().arrayOf(U().object),missionOrientation:On.A.angle,missionOrigin:U().arrayOf(U().number),missionIndicesForTrajectories:U().arrayOf(U().number),orientation:On.A.angle,returnToHomeItems:U().arrayOf(U().object),selectedTool:U().string,selection:U().arrayOf(U().string),uavIdsForTrajectories:U().arrayOf(U().string)};var rr=function(e){e.layer;var t=e.zIndex,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,_n);return r.createElement(p.qd.Vector,{ref:S.t2,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:t},r.createElement(nr,n))};rr.propTypes={layer:U().object,zIndex:U().number};var or=(0,l.Ng)(function(e,t){var n,r,o,a,i,l,c,s,u,f=t.layer;return{convexHull:null!=f&&null!==(n=f.parameters)&&void 0!==n&&n.showConvexHull?(0,bn.L_)(e):void 0,coordinateSystemType:e.map.origin.type,currentItemIndex:(0,gn.XW)(e),currentItemRatio:(0,gn.WQ)(e),homePositions:null!=f&&null!==(r=f.parameters)&&void 0!==r&&r.showHomePositions?(0,gn.vT)(e):void 0,landingPositions:null!=f&&null!==(o=f.parameters)&&void 0!==o&&o.showLandingPositions?(0,gn.sV)(e):void 0,mapOrigin:(null==f||null===(a=f.parameters)||void 0===a?void 0:a.showOrigin)&&e.map.origin.position,minimumDistanceBetweenLandingPositions:(0,gn.v0)(e),minimumDistanceBetweenHomePositions:(0,gn.$G)(e),missionItemsWithAreas:null!=f&&null!==(i=f.parameters)&&void 0!==i&&i.showMissionItems?(0,gn.Yu)(e):void 0,missionItemsWithCoordinates:null!=f&&null!==(l=f.parameters)&&void 0!==l&&l.showMissionItems?(0,gn.Lv)(e):void 0,missionOrigin:null!=f&&null!==(c=f.parameters)&&void 0!==c&&c.showMissionOrigin?(0,bn.wA)(e):void 0,missionOrientation:(0,bn.gQ)(e),missionIndicesForTrajectories:null!=f&&null!==(s=f.parameters)&&void 0!==s&&s.showTrajectoriesOfSelection?(0,gn.V2)(e):void 0,orientation:(0,Gt.mB)(e),returnToHomeItems:(0,gn.Nw)(e,hn.IU.RETURN_TO_HOME),selection:(0,An.Lo)(e),uavIdsForTrajectories:null!=f&&null!==(u=f.parameters)&&void 0!==u&&u.showTrajectoriesOfSelection?(0,vn.sj)(e):void 0}},{})(rr),ar=n(77552);function ir(e){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(e)}function lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function sr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ir(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ir(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ur=(0,n(63101).Ay)("OwnLocationLayer"),fr=function(e){var t=e.layer.parameters,n=t.showAccuracy,o=t.showOrientation,a=e.setLayerParameters,i=function(e){return function(t){return a(sr({},e,t.target.checked))}};return r.createElement(Te.A,null,r.createElement(we.A,{control:r.createElement(on.A,{checked:n,value:"showAccuracy",onChange:i("showAccuracy")}),label:"Show accuracy"}),r.createElement(we.A,{control:r.createElement(on.A,{checked:o,value:"showOrientation",onChange:i("showOrientation")}),label:"Show orientation"}))};fr.propTypes={layer:U().object,setLayerParameters:U().func};var dr=(0,l.Ng)(null,function(e,t){return{setLayerParameters:function(n){e((0,X.K_)(t.layerId,n))}}})(fr),pr=function(e){var t=e.layer.parameters,n=t.showAccuracy,o=t.showOrientation,a=e.zIndex,i=lr((0,r.useState)(null),2),l=i[0],c=i[1],u=(0,r.useCallback)(function(e){c(e.target.getPosition())},[c]),d=(0,r.useMemo)(function(){return new s.default({image:new f.A({radius:8,fill:new ne.default({color:"#00AEEF"}),stroke:new te.default({color:"#fff",width:2})})})},[]),m=lr((0,r.useState)(null),2),y=m[0],g=m[1],b=(0,r.useCallback)(function(e){g(e.target.getAccuracyGeometry().getLinearRing(0).getCoordinates())},[g]),v=(0,r.useMemo)(function(){return new s.default({fill:new ne.default({color:"rgba(255, 255, 255, 0.35)"}),stroke:new te.default({color:"#00AEEF",width:2})})},[]),h=(0,ar.A)({absolute:!0}),A=(0,r.useMemo)(function(){return new s.default({image:new I.A({points:3,fill:new ne.default({color:"#00AEEF"}),stroke:new te.default({color:"#fff",width:2}),rotateWithView:!0,radius:8,scale:[.75,1],rotation:h?(0,Bt.eh)(-h.alpha):0,displacement:[0,11]})})},[h]),S=(0,r.useCallback)(function(e){ur.warn("Error while getting position: ".concat(e.message))},[]);return r.createElement(p.qd.Vector,{updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:a},r.createElement(p.LT,{changePosition:u,changeAccuracyGeometry:b,projection:"EPSG:3857",error:S}),r.createElement(p.sP.Vector,null,n&&y?r.createElement(p.Xj,{id:"own-location-accuracy",style:v},r.createElement(p.N4.Polygon,{coordinates:y})):null,o&&l?r.createElement(p.Xj,{id:"own-location-orientation",style:A},r.createElement(p.N4.Point,{coordinates:l})):null,l?r.createElement(p.Xj,{id:"own-location-position",style:d},r.createElement(p.N4.Point,{coordinates:l})):null))};pr.propTypes={layer:U().object,zIndex:U().number};var mr=n(82023),yr=n(92310);const gr=(0,l.Ng)(null,(e,t)=>({setLayerParameters(n){e((0,X.K_)(t.layerId,n))}}))(mr.K),br=(0,l.Ng)(e=>({selection:(0,An.Lo)(e)}),{})(e=>(0,c.jsx)(mr.$,{...e,LayerSource:yr.A}));n(25428);var vr=n(11217),hr=n(2645),Ar=n(78641);function Sr(e){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(e)}function Er(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Or(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Or(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rr(r.key),r)}}function Ir(e,t,n){return t&&Cr(e.prototype,t),n&&Cr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xr(e,t,n){return t=Pr(t),function(e,t){if(t&&("object"==Sr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,jr()?Reflect.construct(t,n||[],Pr(e).constructor):t.apply(e,n))}function jr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(jr=function(){return!!e})()}function Pr(e){return Pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pr(e)}function kr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_r(e,t)}function _r(e,t){return _r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_r(e,t)}function Nr(e,t,n){return(t=Rr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rr(e){var t=function(e,t){if("object"!=Sr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sr(t)?t:t+""}var Dr=function(e){function t(){var e;Tr(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Nr(e=xr(this,t,[].concat(r)),"_onColorChanged",function(t){e.props.setLayerParameters({trailColor:t.hex})}),Nr(e,"_onTrailLengthChanged",function(t){var n=(0,D.A)(t.target.value);n>0&&Number.isFinite(n)&&e.props.setLayerParameters({trailLength:n})}),Nr(e,"_onTrailWidthChanged",function(t){var n=(0,D.A)(t.target.value);n>0&&n<20&&e.props.setLayerParameters({trailWidth:n})}),e}return kr(t,e),Ir(t,[{key:"render",value:function(){var e=this.props.layer,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach(function(t){Nr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({trailColor:g.Ay.main,trailLength:10,trailWidth:2},e.parameters),n=t.trailColor,o=t.trailLength,a=t.trailWidth;return r.createElement("div",null,r.createElement(N.A,{style:{paddingRight:"1em",width:150},label:"Trail length",placeholder:"Samples",type:"number",value:o,onChange:this._onTrailLengthChanged}),r.createElement(N.A,{style:{paddingRight:"1em",width:150},label:"Trail width",placeholder:"Pixels",type:"number",value:a,onChange:this._onTrailWidthChanged}),r.createElement("div",{style:{paddingTop:"0.5em"}},r.createElement(hr.A,{color:null!=n?n:g.Ay.main,onChangeComplete:this._onColorChanged})))}}])}(r.Component);Nr(Dr,"propTypes",{layer:U().object,setLayerParameters:U().func});var Mr=(0,l.Ng)(null,function(e,t){return{setLayerParameters:function(n){e((0,X.K_)(t.layerId,n))}}})(Dr),Lr=function(e){function t(e){var n;return Tr(this,t),Nr(n=xr(this,t,[e]),"_assignSourceRef",function(e){e!==n._sourceRef&&(n._sourceRef&&n._sourceRef.source.clear(),n._sourceRef=e,n._sourceRef&&n._sourceRef.source.addFeatures(n.features))}),Nr(n,"_handleUpdate",function(e){var t,r=Er(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;o._id in n.lineStringsById?n.lineStringsById[o._id].appendCoordinate((0,h.Ur)([o.lon,o.lat])):(n.lineStringsById[o._id]=new vr.default([(0,h.Ur)([o.lon,o.lat])]),n._registerNewFeature(new Ne.default(n.lineStringsById[o._id])));for(;n.lineStringsById[o._id].getCoordinates().length>n.props.trailLength;)n.lineStringsById[o._id].setCoordinates(n.lineStringsById[o._id].getCoordinates().slice(1))}}catch(e){r.e(e)}finally{r.f()}}),Nr(n,"_registerNewFeature",function(e){n._updateFeatureStyle(e),n.features.push(e),n._sourceRef&&n._sourceRef.source.addFeature(e)}),Nr(n,"_updateFeatureStyle",function(e){e.setStyle(new s.default({stroke:(0,A.TB)(n.props.trailColor,n.props.trailWidth)}))}),n.features=[],n.lineStringsById={},n._sourceRef=void 0,Ar.Ay.uavsUpdated.add(n._handleUpdate),n}return kr(t,e),Ir(t,[{key:"componentDidUpdate",value:function(){if(this._sourceRef){var e,t=Er(this._sourceRef.source.getFeatures());try{for(t.s();!(e=t.n()).done;){var n=e.value;this._updateFeatureStyle(n)}}catch(e){t.e(e)}finally{t.f()}}}},{key:"render",value:function(){return r.createElement(p.sP.Vector,{ref:this._assignSourceRef})}}])}(r.Component);Nr(Lr,"propTypes",{trailLength:U().number,trailColor:U().string,trailWidth:U().number});var Fr=function(e){var t=e.layer,n=e.zIndex;return r.createElement(p.qd.Vector,{updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:n},r.createElement(Lr,{trailLength:t.parameters.trailLength,trailColor:t.parameters.trailColor,trailWidth:t.parameters.trailWidth}))};Fr.propTypes={layer:U().object,zIndex:U().number};var Ur=Fr,Gr=(n(31415),n(52412)),Vr=n(62208),Br=n(55870),zr=n(35124),Hr=n(48641);function Wr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Kr=function(e){var t,n=[],r=new Set((0,Hr.Xw)(e).map(function(e){return e.type})),o=Wr(i.RJ);try{for(o.s();!(t=o.n()).done;){var a=t.value;!(0,i.Xt)(a)&&r.has(a)||n.push(a)}}catch(e){o.e(e)}finally{o.f()}return n},Yr=function(e){var t=e.enabledLayerTypes,n=e.layerTypes,o=e.onLayerTypeSelected,a=n.map(function(e){var n=t.includes(e);return r.createElement(Br.A,{key:e,item:!0,xs:8,sm:4},r.createElement(Gr.A,{style:{cursor:n?"pointer":"auto",height:"100%",userSelect:"none",opacity:n?1:.54},elevation:n?1:0,variant:n?"outlined":"elevation",onClick:n?function(){return o(e)}:null},r.createElement(Vr.A,{avatar:(0,i.AT)(e),title:(0,i.Pr)(e),style:{paddingLeft:16,paddingRight:16,height:"100%"}})))});return r.createElement(k.A,{sx:{display:"flex",flexDirection:"column"}},r.createElement(zr.A,{gutterBottom:!0,variant:"subtitle1",component:"p"},"Pick a layer type"),r.createElement(Br.A,{container:!0,spacing:2,sx:{flex:1,alignItems:"stretch",justifyContent:"flex-start"}},a))};Yr.propTypes={layer:U().object,layerId:U().string,layerTypes:U().arrayOf(U().string),enabledLayerTypes:U().arrayOf(U().string),onLayerTypeSelected:U().func};var $r,Zr=(0,l.Ng)(function(e){return{layerTypes:i.RJ,enabledLayerTypes:Kr(e)}},function(e,t){return{onLayerTypeSelected:function(n){e((0,X.QG)(t.layerId,n))}}})(Yr),Jr=(0,l.Ng)(null,{})(function(){return null});function Xr(e){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xr(e)}function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(n),!0).forEach(function(t){to(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function to(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Xr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var no=eo(eo({},o.lh),{},to(to(to(to(to(to(to(to(to({},i.mb.GEOJSON,Ae),i.mb.HEATMAP,lt),i.mb.HEXGRID,jt),i.mb.IMAGE,tn),i.mb.MISSION_INFO,Gn),i.mb.OWN_LOCATION,dr),i.mb.UAVS,gr),i.mb.UAV_TRACE,Mr),i.mb.UNTYPED,Zr)),ro=function(e,t){if(!(e.type in no))throw new Error("Cannot render settings for nonexistent layer type (".concat(e.type,")."));var n=no[e.type];return r.createElement(n,{key:"".concat(t,"_settings"),layer:e,layerId:t})},oo=eo(eo({},o.aH),{},(to(to(to(to(to(to(to(to(to(to($r={},i.mb.BEACONS,C),i.mb.DOCKS,P),i.mb.FEATURES,a.ZZ),i.mb.GEOJSON,Ee),i.mb.HEATMAP,ft),i.mb.HEXGRID,_t),i.mb.IMAGE,rn),i.mb.MISSION_INFO,or),i.mb.OWN_LOCATION,pr),i.mb.UAVS,br),to(to($r,i.mb.UAV_TRACE,Ur),i.mb.UNTYPED,Jr)))},31404:(e,t,n)=>{"use strict";n.d(t,{$t:()=>y,Ag:()=>u,KK:()=>m,Px:()=>p,SQ:()=>s,Yc:()=>g,b0:()=>d,bj:()=>f});var r=n(41105),o=n(89610),a=n(2652),i=n(77440);const l={[i.v.SYSTEM]:{label:"Server clock",abbreviation:"SRV",affectedByClockSkew:!0},[i.v.MISSION]:{label:"Mission clock",abbreviation:"MSN",signed:!0,affectedByClockSkew:!0},[i.v.MTC]:{label:"MIDI timecode",abbreviation:"MTC"},[i.v.SHOW]:{label:"Drone show clock",abbreviation:"SHOW",signed:!0,affectedByClockSkew:!0},[i.v.END_OF_SHOW]:{label:"Time until end of show",abbreviation:"END",signed:!0,affectedByClockSkew:!0}},c=e=>Object.values(i.v).includes(e);function s({id:e}){return c(e)?l[e].abbreviation:"CLK"}function u({id:e}){return c(e)?l[e].label:`Clock \u2019${e}\u2019`}function f(e,t,n){const{epoch:l,ticksPerSecond:c}=t,{format:s=t.format}=n;let u=e/c;if(Number.isNaN(l))return t.id===String(i.v.MTC)?(u=Math.floor(u)+e%c/100,(0,a.aD)(u,{padHours:!0,precision:2})):c<=1?(0,a.aD)(u,{padHours:!0}):(0,a.aD)(u,{padHours:!0,precision:1});const f=new Date(1e3*(l+u));return(0,o.default)(s)?s(f):(0,r.A)(f,s??"HH:mm:ss")}function d(e,t){const{referenceTime:n=0,running:r,ticks:o,ticksPerSecond:a}=e;return o+(r?(t-n)/1e3:0)*a}function p(e){return e&&e.ticksPerSecond>1?Math.max(1e3/e.ticksPerSecond,100):1e3}function m(e){return Boolean(c(e?.id)&&l[e.id].affectedByClockSkew)}function y(e){return Boolean(c(e?.id)&&l[e.id].signed)}function g(e,t,n){const r=e.byId[t];r?Object.assign(r,n):(e.byId[t]=Object.assign({id:t,running:!1,ticks:0},n),e.order.push(t))}},31547:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>p,Uq:()=>u,Wl:()=>d});var r=n(65307),o=n(16238);const a={groups:(0,o.q9)([{id:"weather",label:"Weather"},{id:"permissions",label:"Permissions"},{id:"equipment",label:"Equipment"},{id:"environment",label:"Environment"}]),items:(0,o.q9)([{id:"weather-wind-speed",label:"Wind speed is within an acceptable range",groupId:"weather"},{id:"weather-visibility",label:"Visibility sufficient for flight",groupId:"weather"},{id:"weather-precipitation",label:"Precipitation within acceptable range",groupId:"weather"},{id:"planetary-k-index",label:"No geomagnetic storms indicated by Kp-index",groupId:"weather"},{id:"permissions-drone-pilot-license",label:"Drone pilot license is valid",groupId:"permissions"},{id:"permissions-airspace-authorization",label:"Airspace authorization has been obtained",groupId:"permissions"},{id:"equipment-rc-charged",label:"Remote controller batteries are charged",groupId:"equipment"},{id:"equipment-propellers-mounted",label:"Drone propellers are securely mounted",groupId:"equipment"},{id:"equipment-no-visible-damage",label:"No visible damage on drone components",groupId:"equipment"},{id:"environment-no-obstructions",label:"No obstructions in takeoff area",groupId:"environment"},{id:"environment-cordoned-off",label:"Takeoff and landing area cordoned off",groupId:"environment"},{id:"environment-flight-path-clear",label:"No people below flight paths",groupId:"environment"}]),checked:[]},{actions:i,reducer:l}=(0,r.Z0)({name:"preflight",initialState:a,reducers:{clearPreflightCheckGroups(e){(0,o.d5)(e.items),(0,o.d5)(e.groups),e.checked=[]},clearPreflightCheckListItems(e){(0,o.d5)(e.items),e.checked=[]},setPreflightCheckListItems(e,t){const{groups:n,items:r}=t.payload;n.byId&&n.order&&r.byId&&r.order&&(e.items={byId:r.byId,order:r.order},e.groups={byId:n.byId,order:n.order},e.checked=[])},setPreflightCheckStatus(e,t){const{id:n,checked:r}=t.payload,o=e.items.byId[n],a=e.checked.indexOf(n);o&&(r&&a<0?e.checked.push(n):!r&&a>=0&&e.checked.splice(a,1))},togglePreflightCheckStatus(e,t){const n=t.payload,r=e.items.byId[n],o=e.checked.indexOf(n);r&&(o<0?e.checked.push(n):o>=0&&e.checked.splice(o,1))}}}),{clearPreflightCheckGroups:c,clearPreflightCheckListItems:s,setPreflightCheckListItems:u,setPreflightCheckStatus:f,togglePreflightCheckStatus:d}=i,p=l},31746:(e,t,n)=>{"use strict";e.exports=n.p+"188265e96597209b2b7c.woff"},32087:(e,t,n)=>{"use strict";n.d(t,{Lm:()=>d,V$:()=>g,W8:()=>v,aU:()=>b,iD:()=>m,rZ:()=>h,sO:()=>p,xC:()=>y});n(52675),n(89463),n(2259),n(45700),n(2008),n(23792),n(89572),n(2892),n(83851),n(81278),n(79432),n(26099),n(47764),n(98992),n(54520),n(3949),n(23500),n(62953);var r=n(97859),o=n(17065),a=n(47530),i=n(19469),l=n(81607);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=l.o.closeAppSettingsDialog,p=l.o.setAppSettingsDialogTab,m=l.o.showAppSettingsDialog,y=l.o.toggleAppSettingsDialog;function g(e){return function(t){t((0,i.uV)("display",{uavListFilters:(0,r.default)(e)||e===o.FA.DEFAULT?[]:[e]}))}}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,n=e.reverse;return function(e,r){var o=(0,a.S6)(r()),l={},c=!1;t&&"string"==typeof t&&t.length>0&&(l.key=t,c=!0),null!=n&&(l.reverse=Boolean(n),c=!0),c&&e((0,i.uV)("display",{uavListSortPreference:u(u({},o),l)}))}}function v(){return function(e,t){var n=(0,a.S6)(t());e((0,i.uV)("display",{uavListSortPreference:u(u({},n),{},{reverse:!n.reverse})}))}}function h(e,t){return function(n,r){var o=r().settings.uavs,a=o.fullChargeVoltage,l=o.lowVoltageThreshold,c=o.criticalVoltageThreshold;switch(e){case"criticalVoltageThreshold":c=t,l=Math.max(c,l),a=Math.max(l,a);break;case"lowVoltageThreshold":l=t,a=Math.max(l,a),c=Math.min(l,c);break;case"fullChargeVoltage":a=t,l=Math.min(a,l),c=Math.min(l,c)}n((0,i.uV)("uavs",{fullChargeVoltage:a,lowVoltageThreshold:l,criticalVoltageThreshold:c}))}}},32250:(e,t,n)=>{"use strict";n.d(t,{j8:()=>r,m5:()=>a,zM:()=>o});const r=e=>Boolean(e.ctrlKey),o=e=>Boolean(e.metaKey),a=e=>Boolean(e.shiftKey)},32499:(e,t,n)=>{"use strict";n.d(t,{AI:()=>r,O0:()=>c,V:()=>i,W9:()=>s,kx:()=>a});var r,o=n(91949);!function(e){e[e.INFO=0]="INFO",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR",e[e.FATAL=3]="FATAL"}(r||(r={}));const a=e=>(255&e)>>6,i=e=>e&&e.length>0?Math.max(...e.map(a)):r.INFO,l={[r.FATAL]:o.nW.CRITICAL,[r.ERROR]:o.nW.ERROR,[r.WARNING]:o.nW.WARNING,[r.INFO]:o.nW.INFO};function c(e){return l[e]}function s(e){return c(a(e))}},32697:(e,t,n)=>{"use strict";n.d(t,{Qj:()=>u,Sp:()=>d,_I:()=>s,jM:()=>f});var r=n(25508),o=n(27989),a=n(40861),i=n(39441),l=n(45134),c=n(45106);const s=(e,t)=>t?e.map(t):[],u=(e,t)=>{if(!e.includes(void 0))return s(e,t)};function f(e,t){const n=(0,r.Mz)(e,e=>{const t=e?.drones;return Array.isArray(t)?t:i.Ml}),f=(0,r.Mz)(n,e=>e.map(e=>{const t=e.settings?.trajectory;return void 0!==t&&(0,l.U9)(t)?t:void 0})),d=(0,r.Mz)(t,e=>(0,c.m)(e)?new o.f9(e):void 0),p=(0,r.Mz)(d,e=>{if(void 0!==e)return t=>{const[n,r,o]=t,[a,i]=e.toLonLat([n,r]);return{lon:a,lat:i,amsl:void 0,ahl:o}}}),m=(0,r.Mz)(n,e=>e.map(e=>e.settings?.home)),y=(0,r.Mz)(m,p,u),g=(0,r.Mz)(n,e=>e.map(e=>e.settings?.landAt)),b=(0,r.Mz)(g,p,u),v=(0,r.Mz)(f,e=>e.filter(e=>void 0!==e).map(l.R9)),h=(0,r.Mz)(v,e=>(0,a.$0)(e.flat()));return{getDroneSpecifications:n,getHomePositions:m,getHomePositionsInWorldCoordinates:y,getLandingPositionsInWorldCoordinates:b,getConvexHullsOfTrajectories:v,getConvexHullOfShow:h,getConvexHullOfShowInWorldCoordinates:(0,r.Mz)(h,p,(e,t)=>s(e,t)),getOutdoorShowToWorldCoordinateSystemTransformation:p}}function d(e,t,n){const o=(0,r.Mz)(e,e=>{const t=e?.drones;return Array.isArray(t)?t:i.Ml}),c=(0,r.Mz)(o,e=>e.map(e=>{const t=e.settings?.trajectory;return void 0!==t&&(0,l.U9)(t)?t:void 0})),u=e=>(0,r.Mz)(t,t=>{const n=t?.[e];if(void 0!==n)return Array.isArray(n)&&2===n.length?n:void 0}),f=u("show"),d=(p="show",(0,r.Mz)(u(p),e,(e,t)=>{if(void 0===e)return;const n={startTime:e[0],duration:e[1]-e[0]},r=t.drones.map(e=>{const t=e.settings;if(void 0===t)return e;const r=(0,l.kN)(t.trajectory,n);return{...e,settings:{...e.settings,trajectory:r}}});return{...t,drones:r}}));var p;const m=(e=>(0,r.Mz)(u(e),c,(e,t)=>{if(void 0===e)return;const n={startTime:e[0],duration:e[1]-e[0]};return t.map(e=>void 0===e?void 0:(0,l.kN)(e,n))}))("show"),y=(0,r.Mz)(m,e=>(e??[]).filter(e=>void 0!==e).map(l.R9)),g=(0,r.Mz)(y,e=>(0,a.$0)(e.flat()));return{getShowSegment:f,getSwarmSpecificationForShowSegment:d,getShowSegmentTrajectories:m,getConvexHullsOfShowSegmentTrajectories:y,getConvexHullOfShowSegment:g,getConvexHullOfShowSegmentInWorldCoordinates:(0,r.Mz)(g,n,s)}}},33209:(e,t,n)=>{"use strict";n.d(t,{FS:()=>J,FW:()=>b,GM:()=>$,G_:()=>q,KN:()=>k,Kc:()=>E,L_:()=>L,Lo:()=>I,Mc:()=>Z,OR:()=>_,QN:()=>W,Y$:()=>C,Yp:()=>v,aM:()=>j,d0:()=>N,dw:()=>A,k_:()=>w,m_:()=>D,vs:()=>H,xq:()=>P,yv:()=>K});var r=n(13293),o=n(70915),a=n(25508),i=n(37813),l=n(32697),c=n(45106),s=n(40881),u=n(98964),f=n(48641),d=n(27989),p=n(40861),m=n(39441);const y={type:"nwu",origin:[0,0],orientation:"0"},g={settings:{trajectory:{version:1,points:[[0,[0,0,0],[]]]}}},b=e=>e.dialogs.showConfigurator.past.length,v=e=>e.dialogs.showConfigurator.future.length,h=e=>e.dialogs.showConfigurator.present,A=(0,a.Mz)(h,e=>e.open),S=(0,a.Mz)(h,e=>e.settings),E=(0,a.Mz)(S,e=>e.dronesVisible),O=(0,a.Mz)(h,e=>e.showData??{swarm:{drones:[g]},homePositions:m.Ml,coordinateSystem:y}),w=(0,a.Mz)(O,e=>e.coordinateSystem),T=(0,a.Mz)(O,e=>e.swarm),C=(0,a.Mz)(O,e=>e.homePositions),I=(0,a.Mz)(h,e=>e.selection),x=(0,a.Mz)(i.J6,i.Jn,i._,(e,t,n)=>({swarm:e,coordinateSystem:(0,c.m)(t)?t:n?.location?{origin:(0,d.Yo)([n.location.origin[0],n.location.origin[1]]),orientation:String(n.location.orientation),type:t.type}:void 0,homePositions:e?.drones.map(e=>e.settings?.home)})),j=(0,a.Mz)(x,({swarm:e,coordinateSystem:t,homePositions:n})=>{if(void 0!==e&&void 0!==t&&void 0!==n)return{swarm:e,coordinateSystem:t,homePositions:n}}),P=(0,a.Mz)(h,e=>void 0!==e.adaptResult&&"loading"in e.adaptResult&&e.adaptResult.loading),k=(0,a.Mz)(h,e=>void 0!==e.adaptResult&&"error"in e.adaptResult?e.adaptResult.error:void 0),_=(0,a.Mz)(h,e=>void 0!==e.adaptResult&&"show"in e.adaptResult?e.adaptResult:void 0),N=(0,a.Mz)(_,e=>e?.show),R=(0,a.Mz)(N,e=>e?r.o4.toUint8Array(e):void 0),D=(0,a.Mz)(R,e=>e?new Blob([e]):void 0),{getConvexHullOfShow:M,getConvexHullOfShowInWorldCoordinates:L,getConvexHullsOfTrajectories:F,getDroneSpecifications:U,getHomePositions:G,getHomePositionsInWorldCoordinates:V,getLandingPositionsInWorldCoordinates:B,getOutdoorShowToWorldCoordinateSystemTransformation:z}=(0,l.jM)(T,w),H=(0,a.Mz)(w,M,z,(e,t,n)=>{if(void 0===n)return;const r=(0,o.Tr)(t),a=r[0]+(r[2]-r[0])/2,i=r[1]+(r[3]-r[1])/2;if(!Number.isFinite(a)||!Number.isFinite(i))return;const l=n([a,i]);return{orientation:Number.parseFloat(e.orientation),origin:[l.lon,l.lat]}}),W=(0,a.Mz)(C,z,l.Qj),q=(0,a.Mz)(W,e=>{if(e){const[t,n]=(0,p.l7)(e.map(e=>[e.lon,e.lat]));return{lon:t,lat:n}}}),K=(0,a.Mz)(q,e=>void 0===e?void 0:[e.lon,e.lat]),Y=(0,a.Mz)(M,C,(e,t)=>(0,p.$0)([...e,...t.filter(e=>void 0!==e).map(e=>[e[0],e[1]])])),$=(0,a.Mz)(Y,z,l.Qj),Z=(0,a.Mz)(f.Mc,E,(e,t)=>{let n={id:"show-configurator-uavs",type:u.mb.UAVS,label:"UAVs",visible:!0,parameters:{}};const r=e.filter(e=>e.type!==u.mb.UAVS||(n=e,!1));if(!t)return r;const o=new Set([u.mb.BASE,u.mb.GRATICULE,u.mb.TILE_SERVER,u.mb.FEATURES]),a=r.findLastIndex(e=>o.has(e.type));return r.splice(a+1,0,n),r}),J=(0,a.Mz)(W,s.yS,(e,t)=>void 0!==e&&t.length>0)},34023:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(16034);var r=n(5556),o=n.n(r),a=n(91949);const i={angle:o().number,coordinate:o().shape({lat:o().number.isRequired,lon:o().number.isRequired}),preflightCheckResult:o().oneOf(Object.values(a.DR)),severity:o().oneOf(Object.values(a.AI))}},34261:(e,t,n)=>{"use strict";n.d(t,{$F:()=>c,Ay:()=>d,Ld:()=>u,ON:()=>s,Rk:()=>f});var r=n(65307),o=n(39441);const a={pathScan:{scanning:!1,result:void 0,error:void 0},running:!1},{actions:i,reducer:l}=(0,r.Z0)({name:"local-server",initialState:a,reducers:{notifyLocalServerExecutableSearchStarted(e){e.pathScan.scanning=!0,e.pathScan.result=void 0,e.pathScan.error=void 0},notifyLocalServerExecutableSearchFinished(e,t){e.pathScan.scanning=!1,e.pathScan.result=t.payload,e.pathScan.error=void 0},notifyLocalServerExecutableSearchFailed(e,t){e.pathScan.scanning=!1,e.pathScan.result=void 0,e.pathScan.error=t.payload},startLocalServerExecutableSearch:(0,o.kP)(e=>{e.pathScan.result=void 0,e.pathScan.error=void 0})}}),{notifyLocalServerExecutableSearchStarted:c,notifyLocalServerExecutableSearchFinished:s,notifyLocalServerExecutableSearchFailed:u,startLocalServerExecutableSearch:f}=i,d=l},34566:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>u,_k:()=>l,n5:()=>s,ne:()=>c});var r=n(65307),o=n(39441);const{actions:a,reducer:i}=(0,r.Z0)({name:"map-caching",initialState:{dialog:{open:!1},enabled:!1},reducers:{closeMapCachingDialog:(0,o.kP)(e=>{e.dialog.open=!1}),showMapCachingDialog:(0,o.kP)(e=>{e.dialog.open=!0}),setMapCachingEnabled(e,t){e.enabled=Boolean(t.payload)}}}),{closeMapCachingDialog:l,showMapCachingDialog:c,setMapCachingEnabled:s}=a,u=i},34808:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>m,PD:()=>u,CQ:()=>f,Wl:()=>d,gW:()=>c,Eb:()=>s,yo:()=>p});var r=n(65307);const o=(e,t)=>{e.expiresAt=((e,t)=>"number"==typeof t&&t>=0?"number"==typeof e.expiresAt?Math.min(e.expiresAt,t):t:e.expiresAt)(e,t),"number"==typeof e.expiresAt&&e.expiresAt<=Date.now()&&(e.isExpired=!0)},a={broadcast:!1,developerMode:!1,expiresAt:void 0,featureIdForTooltip:void 0,isExpired:!1},{actions:i,reducer:l}=(0,r.Z0)({name:"session",initialState:a,reducers:{ensureSessionExpiresNoLaterThan(e,t){o(e,t.payload)},ensureSessionIsNotLongerThan(e,t){const n=t.payload;if("number"==typeof n&&n>=0){const t=Date.now()+1e3*n;o(e,t)}},expireSession(e){o(e,Date.now())},setBroadcast(e,t){e.broadcast=Boolean(t.payload)},setDeveloperMode(e,t){e.developerMode=Boolean(t.payload)},setFeatureIdForTooltip(e,t){e.featureIdForTooltip=t.payload}}}),{setBroadcast:c,setDeveloperMode:s,ensureSessionExpiresNoLaterThan:u,ensureSessionIsNotLongerThan:f,expireSession:d,setFeatureIdForTooltip:p}=i,m=l},34809:(e,t,n)=>{"use strict";n.d(t,{q:()=>c,s:()=>l});n(52675),n(89463);var r=n(69592),o=n(59116),a=n(96034),i=n(49327);function l(e,t){t((0,i.FV)(e.ids))}function c(e,t){var n=(0,o.A)(e.status,function(e){return(0,a.A)({id:e.id,name:e.description,state:e.status,stateChangedAt:e.timestamp},r.A)});t((0,i.L3)(n))}},34890:(e,t,n)=>{"use strict";n.d(t,{L:()=>o,f:()=>a});var r=n(272),o=r.o.closeErrorDialog,a=r.o.showErrorMessage},35025:(e,t,n)=>{"use strict";n.d(t,{D:()=>l,y:()=>i});var r=n(46996),o=n(25508),a=n(2833);const i=(0,o.Ad)(o.i5,a),l=(0,o.Ad)(o.i5,{resultEqualityCheck:r.default})},35026:(e,t,n)=>{"use strict";n.d(t,{$D:()=>Y,$G:()=>xe,$I:()=>I,B9:()=>We,C3:()=>ve,Cg:()=>$,Dj:()=>X,Ee:()=>qe,GQ:()=>ee,Gw:()=>V,Jg:()=>L,LI:()=>ie,LU:()=>ze,Lv:()=>me,MB:()=>Z,Md:()=>te,NF:()=>oe,Nw:()=>_,OH:()=>C,Ol:()=>se,Ps:()=>B,QH:()=>ae,Rl:()=>q,SA:()=>j,TF:()=>ne,V2:()=>W,VT:()=>Ke,VZ:()=>F,V_:()=>fe,WQ:()=>Ve,XQ:()=>Ae,XW:()=>Ge,Xk:()=>w,Yu:()=>pe,Zz:()=>U,a2:()=>ke,cI:()=>he,f4:()=>K,fA:()=>G,hT:()=>Pe,ij:()=>De,jH:()=>x,lE:()=>Ne,lI:()=>re,m3:()=>P,nU:()=>z,ng:()=>Q,ok:()=>_e,p0:()=>Me,r5:()=>ce,sV:()=>D,tS:()=>Re,u3:()=>Fe,uu:()=>T,v0:()=>je,vT:()=>N,vi:()=>O,xS:()=>be,xg:()=>J,zY:()=>ue});var r=n(1932),o=n(97859),a=n(23514),i=n(21690),l=n(18803),c=n(25508),s=n(97674),u=n(80278),f=n(71042),d=n(26625),p=n(86181),m=n(37802),y=n(62528),g=n(27322),b=n(30325),v=n(16238),h=n(27989),A=n(40861),S=n(82642),E=n(39441);const O=(e,t)=>t,w=e=>e.mission.type??y.Pp.UNKNOWN,T=e=>e.mission.name,C=e=>e.mission.items.order,I=(0,g.qr)(m.CF),x=e=>e.mission.items.byId,j=(e,t)=>e.mission.items.byId[t],P=(0,c.Mz)(e=>e.mission.items,v.Im),k=(0,c.Mz)(P,e=>e.map((e,t)=>({index:t,item:e}))),_=(0,c.Mz)(k,(e,t)=>t,(e,t)=>e.filter(({item:{type:e}})=>e===t)),N=e=>e.mission.homePositions,R=(0,c.Mz)(N,b.z),D=e=>e.mission.landingPositions,M=(0,c.Mz)(D,b.z),L=e=>e.mission.takeoffHeadings,F=e=>e.mission.mapping,U=e=>{const t=F(e),n=t&&Array.isArray(t)?t.length:0,r=[];r.push(`# Mapping file generated at ${(new Date).toISOString()}`,"#","# showID droneID");for(let e=0;e<n;e++)r.push(`${e+1}${(0,o.default)(t[e])?"":` ${String(t[e])}`}`);return r.push(""),r.join("\n")},G=(0,c.Mz)(F,e=>e?(0,i.A)(e.length).filter(t=>(0,o.default)(e[t])):[]),V=e=>e.mission.mappingEditor.indexBeingEdited,B=(0,c.Mz)(F,e=>Object.fromEntries(e.flatMap((e,t)=>(0,o.default)(e)?[]:[[e,t]]))),z=(0,c.Mz)(F,V,(e,t)=>t>=0?e[t]:void 0),H=(0,g.qr)(m.ff),W=(0,c.Mz)(H,e=>e.length<=5?e.map(Number):E.Ml),q=(0,c.Mz)(F,e=>(0,b.z)(e).toSorted()),K=(0,c.Mz)(F,e=>!!e&&!e.every(o.default)),Y=e=>e.mission.preferredChannelIndex,$=e=>e.mission.commandsAreBroadcast,Z=e=>Boolean(e.mission.mappingEditor.calculating),J=(0,c.Mz)(G,N,Z,(e,t,n)=>e.length>0&&t.some(e=>!(0,o.default)(e))&&!n),X=e=>e.mission.mappingEditor.enabled,Q=e=>e.mission.geofenceAction||d.FU.KEEP_CURRENT,ee=(0,c.Mz)(Q,e=>{if(!(0,d.tw)(e))throw new Error("Invalid geofence action: "+String(e));return e}),te=e=>e.mission.geofencePolygonId,ne=(0,c.Mz)(te,f.kP,(e,t)=>"string"==typeof e?t[e]:void 0),re=(0,c.Mz)(ne,e=>e?.points),oe=(0,c.Mz)(te,f.kP,(e,t)=>void 0!==e&&void 0!==t[e]),ae=(0,c.Mz)(f.VQ,e=>e.filter(e=>e.attributes?.isExclusionZone)),ie=(0,c.Mz)(C,I,(e,t)=>{const n=t.map(t=>e.indexOf(t));return[Math.min(...n),Math.max(...n)]}),le=(0,c.Mz)(ie,I,(e,t)=>{const[n,r]=e;return n>=0&&r===n+t.length-1}),ce=e=>(0,c.Mz)(C,le,ie,(t,n,r)=>{if(!n)return!1;const[o,a]=r;return e<0?o>=Math.abs(e):a+e<t.length}),se=ce(-1),ue=ce(1),fe=e=>e.mission.editorPanel.followScroll,de=(e,t)=>(0,c.Mz)(P,n=>n.map((n,r)=>({id:n.id,item:n,[e]:t(n),index:r})).filter(t=>!(0,o.default)(t[e]))),pe=de("area",y.lJ),me=de("coordinate",y.K1),ye=de("altitude",y.A0),ge=(0,c.Mz)(N,me,pe,(e,t,n)=>(0,A.$0)([...(0,b.z)(e).map(({lon:e,lat:t})=>[e,t]),...t.map(({coordinate:{lon:e,lat:t}})=>[e,t]),...n.flatMap(({area:{points:e}})=>e)])),be=(0,c.Mz)(ge,e=>e.map((0,l.A)(h.Ur))),ve=(0,c.Mz)(ge,re,(e,t)=>{if(void 0!==t&&t.length>0&&void 0!==e&&e.length>0){const n=(0,A.ko)(t),r=(0,A.ko)(e);return n.isOk()&&r.isOk()&&(0,s.Ay)(n.value,r.value)}return!1}),he=(0,c.Mz)(N,me,pe,([e],t,n)=>{if(!e)return;const r=u.zx([e.lon,e.lat]);return(0,a.A)([...t.map(({coordinate:{lon:e,lat:t}})=>[e,t]),...n.flatMap(({area:{points:e}})=>e)].map(e=>(0,h.Q9)(r,u.zx(e))))}),Ae=(0,c.Mz)(ye,e=>(0,a.A)(e.map(e=>e.altitude.value))),Se=e=>{const t=e.length;if(t>0){let n=0,r=0;for(const{lon:t,lat:o}of e)n+=t,r+=o;return[n/t,r/t]}},Ee=(0,c.Mz)(R,Se),Oe=(0,c.Mz)(M,Se),we=(0,c.Mz)(Ee,e=>e?new h.f9({origin:e}):void 0),Te=(0,c.Mz)(Oe,e=>e?new h.f9({origin:e}):void 0),Ce=e=>{const{lon:t,lat:n}=e;return[t,n]},Ie=(e,t)=>t?(0,S.Y)(e.map(Ce).map(e=>t.fromLonLat(e))):1/0,xe=(0,c.Mz)(R,we,Ie),je=(0,c.Mz)(M,Te,Ie),Pe=e=>e.mission.plannerDialog.open,ke=e=>e.mission.plannerDialog.parameters.fromContext,_e=e=>e.mission.plannerDialog.parameters.fromUser,Ne=e=>e.mission.lastSuccessfulPlannerInvocationParameters,Re=e=>e.mission.plannerDialog.selectedType,De=e=>e.mission.plannerDialog.applyGeofence,Me=e=>e.mission.lastClearedMissionData,Le=(0,c.Mz)(N,P,([e],t)=>{const n=e&&{xy:u.zx([e.lon,e.lat]),z:{[p.Mb.GROUND]:e.agl,[p.Mb.HOME]:e.ahl,[p.Mb.MSL]:e.amsl}};try{return t.reduce((e,t)=>(0,r.jM)(e,r=>{const o={item:t},a=t=>{r._position.xy=t,e._position.xy&&(o.distance=(0,h.Q9)(e._position.xy,t),o.velocity=e._velocity.xy)},i=({value:t,reference:n})=>{r._altitudeReference=n,r._position.z[n]=t;const a=e._position.z[n];void 0===a||e._altitudeReference&&e._altitudeReference!==n||(o.distance=Math.abs(a-t),o.velocity=e._velocity.z)};switch(t.type){case y.IU.CHANGE_SPEED:r._velocity.xy=t.parameters.velocityXY??e._velocity.xy,r._velocity.z=t.parameters.velocityZ??e._velocity.z;break;case y.IU.TAKEOFF:case y.IU.CHANGE_ALTITUDE:i(t.parameters.alt);break;case y.IU.LAND:if(n&&void 0!==e._altitudeReference){const t=n.z[e._altitudeReference];void 0!==t&&i({value:t,reference:e._altitudeReference})}break;case y.IU.GO_TO:a(u.zx([t.parameters.lon,t.parameters.lat]));break;case y.IU.RETURN_TO_HOME:n&&a(n.xy)}r.segments.push(o)}),{_altitudeReference:void 0,_position:{xy:n?.xy,z:n?.z??{[p.Mb.GROUND]:void 0,[p.Mb.HOME]:void 0,[p.Mb.MSL]:void 0}},_velocity:{xy:void 0,z:void 0},segments:[]}).segments}catch(e){return[]}}),Fe=(0,c.Mz)(Le,e=>e.reduce(({distance:e,duration:t},n)=>({distance:e+(n.distance??0),duration:t+(void 0!==n.distance&&void 0!==n.velocity?(0,A.eY)(n.distance,n.velocity):0)}),{distance:0,duration:0})),Ue=e=>e.mission.progress.currentItemId,Ge=(0,c.Mz)(C,Ue,(e,t)=>void 0===t?void 0:e.indexOf(t)),Ve=e=>e.mission.progress.currentItemRatio,Be=(0,c.Mz)(P,e=>Number(e.find(e=>e.type===y.IU.MARKER&&e.parameters.marker===y.TG.START)?.parameters?.ratio??0)),ze=(0,c.Mz)(P,e=>Number(e.find(e=>e.type===y.IU.MARKER&&e.parameters.marker===y.TG.END)?.parameters?.ratio??1)),He=(0,c.Mz)(Le,Ue,Ve,(e,t,n)=>{const{doneDistance:r,totalDistance:o}=e.reduce((e,{item:{id:r,type:o,parameters:a},distance:i=0})=>{const{_isDone:l,_isNet:c,doneDistance:s,totalDistance:u}=e,f=r===t;return{...e,_isDone:l&&!f,...o===y.IU.MARKER&&(a.marker===y.TG.START?{_isNet:!0}:a.marker===y.TG.END?{_isNet:!1}:{}),...c&&{doneDistance:s+(f?i*(n??0):l?i:0),totalDistance:u+i}}},{_isDone:Boolean(t),_isNet:!1,doneDistance:0,totalDistance:0});return o>0?r/o:0}),We=(0,c.Mz)(Be,ze,He,(e,t,n)=>e+(t-e)*n),qe=(0,c.Mz)(We,e=>e>0&&e<1),Ke=(0,c.Mz)(Ne,T,P,N,Ue,Ve,(e,t,n,r,o,a)=>({lastSuccessfulPlannerInvocationParameters:e,name:t,items:n,homePositions:r,progress:{id:o,ratio:a}}))},35546:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(74848),o=(n(96540),n(49591)),a=n(61919),i=n(91949);const l=({mode:e,...t})=>(0,r.jsx)(a.qs,{inline:!0,status:o.nW.OFF,...t,children:e?(0,i.XV)(e):"----"})},36345:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});n(52675),n(69085);var r=n(5556),o=n.n(r),a=n(96540),i=n(61225),l=n(64504),c=n(28749),s=(n(89463),n(2259),n(45700),n(2008),n(23792),n(89572),n(2892),n(25843),n(83851),n(81278),n(79432),n(26099),n(16034),n(47764),n(98992),n(54520),n(3949),n(23500),n(62953),n(34164)),u=n(49591),f=n(61919),d=n(55258),p=n(44539),m=n(47530),y=n(75539),g=n(2652),b=n(35546),v=n(75595),h=n(40881);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(null,arguments)}var w=g.Vs,T=(0,u.n9)(function(e){return{row:{display:"flex",flexDirction:"row",flexWrap:"no-wrap",alignItems:"baseline",margin:e.spacing(0,-.5,.5,0),"& .muted":{color:e.palette.text.disabled}},uavIdCell:{display:"inline-block",fontWeight:"bold",overflow:"hidden"},pill:{margin:e.spacing(0,.5,0,0),verticalAlign:"text-top"},statusPill:{minWidth:88+Number.parseInt(e.spacing(.5),10),flex:1},modePill:{minWidth:48,flex:1},gpsPill:{minWidth:40,flex:1,outline:"none !important"},batteryIndicator:{display:"inline-block",flex:1,fontFamily:e.typography.fontFamily,minWidth:48,textAlign:"left",padding:e.spacing(0,.75),whiteSpace:"noWrap"},altitudeLabel:{flex:1,textAlign:"center",whiteSpace:"noWrap",margin:e.spacing(0,1,0,0)},numSatellitesLabel:{flex:1,textAlign:"center",whiteSpace:"noWrap"}}}),C=a.createElement("span",{className:"muted"},"\u2014"),I=function(e){var t=e.age,n=e.batteryFormatter,r=e.batteryStatus,o=e.details,i=e.gpsFix,l=e.heading,c=e.label,u=e.localPosition,d=e.mode,m=e.position,h=e.text,A=e.textSemantics,S=T(),E=i||{},I=E.type,x=E.numSatellites,j=u&&Array.isArray(u);return a.createElement(a.Fragment,null,a.createElement("div",{className:S.row},a.createElement("div",{className:S.uavIdCell},c),a.createElement("div",{className:S.batteryIndicator},a.createElement(p.A,O({formatter:n},r))),a.createElement("div",null,(0,g.d)(l,1,"\xb0",C))),a.createElement("div",{className:S.row},a.createElement(f.qs,{inline:!0,hollow:t===y.O.GONE,className:(0,s.A)(S.pill,S.statusPill),status:A},o||h)),a.createElement("div",{className:S.row},a.createElement(b.A,{mode:d,className:(0,s.A)(S.pill,S.modePill)}),a.createElement(v.A,{className:(0,s.A)(S.pill,S.gpsPill),fixType:I})),a.createElement("div",{className:S.row},j?w(u):a.createElement(a.Fragment,null,a.createElement("div",{className:S.altitudeLabel},(0,g.d)(null==m?void 0:m.ahl,1," m",C),a.createElement("span",{className:"muted"},"\xa0","AHL")),a.createElement("div",{className:S.numSatellitesLabel},(0,g.d)(x,0,"",C),a.createElement("span",{className:"muted"},"\xa0","sats")))))};I.propTypes={age:o().oneOf(Object.values(y.O)),batteryFormatter:o().instanceOf(d.K),batteryStatus:o().shape({cellCount:o().number,charging:o().bool,voltage:o().number,percentage:o().number}),details:o().string,gpsFix:o().shape({type:o().number,numSatellites:o().number}),heading:o().number,label:o().string,localPosition:o().arrayOf(o().number),mode:o().string,position:o().shape({ahl:o().number}),text:o().string,textSemantics:o().string};const x=(0,i.Ng)(function(){var e=(0,h.q5)();return function(t,n){var r=n.id,o=(0,h.Pz)(t,r);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){E(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({batteryFormatter:(0,m.sk)(t),gpsFix:null==o?void 0:o.gpsFix,heading:null==o?void 0:o.heading,label:r,localPosition:null==o?void 0:o.localPosition,missing:!o,mode:null==o?void 0:o.mode,position:null==o?void 0:o.position},e(t,n.id))}})(I);var j=n(37802),P=n(49680),k=["featureId"];function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(null,arguments)}var N=a.memo(function(e){var t=e.featureId;return(0,j.wy)(t)?a.createElement(x,{id:(0,j.Xc)(t)}):null});N.propTypes={featureId:o().string};var R=function(e){var t=e.featureId,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,k),r=function(e){return Boolean(e)&&(0,j.wy)(e)}(t);return a.createElement(c.W1,_({followCursor:!0,ignoreAttributes:!0,mouseOnly:!0,duration:0,placement:"right",plugins:[l.M],visible:r,content:r?a.createElement(N,{featureId:t}):null},n))};R.propTypes={featureId:o().string};const D=(0,i.Ng)(function(e){return{featureId:(0,P.Oo)(e)}},{})(R)},36348:(e,t,n)=>{"use strict";n.d(t,{G3:()=>a,GB:()=>i,_w:()=>l,wl:()=>o});var r=n(32250);const o=navigator.platform.includes("Mac"),a=(navigator.platform.includes("Win32")||navigator.platform.includes("Windows"),o?r.zM:r.j8),i=o?"Cmd":"Ctrl",l=navigator.maxTouchPoints>0},37177:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,k:()=>a});var r=n(38967);const o=new r.MiniSignal,a=e=>{o.dispatch(e)},i=o},37566:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>b,CY:()=>g,D$:()=>p,Dh:()=>f,lC:()=>m,td:()=>y,wr:()=>d});var r=n(43525),o=n(65307),a=n(15786),i=n(16054),l=n(37802),c=n(89933);const{actions:s,reducer:u}=(0,o.Z0)({name:"map/selection",initialState:[],reducers:{addToSelection:(e,t)=>(0,c.c)(e,t.payload),clearSelection(e){e.length=0},removeFromSelection:(e,t)=>(0,c.c)(e,[],t.payload),selectAllUAVs:()=>(0,c.c)([],(0,c.G)()),setSelection:(e,t)=>(0,c.c)([],t.payload),toggleInSelection:(e,t)=>(0,c.c)([],(0,r.A)(e,t.payload))},extraReducers(e){e.addCase(a.Hk,(e,t)=>(0,c.c)(e,[],t.payload.map(l.Du).filter(Boolean))),e.addCase(i.Oy,(e,t)=>(0,c.c)(e,[],t.payload.map(l.S2).filter(Boolean)))}}),{addToSelection:f,clearSelection:d,removeFromSelection:p,selectAllUAVs:m,setSelection:y,toggleInSelection:g}=s,b=u},37624:(e,t,n)=>{"use strict";n.d(t,{Q:()=>l,z:()=>c});var r=n(25508),o=n(37802),a=n(27322),i=n(16238);const l=(0,r.Mz)(e=>e.docks,i.Im),c=(0,a.qr)(o.y_)},37802:(e,t,n)=>{"use strict";n.d(t,{H4:()=>F,aU:()=>D,IP:()=>U,Ws:()=>M,kt:()=>L,cE:()=>i,LM:()=>l,Kg:()=>c,Du:()=>s,Mc:()=>b,N9:()=>v,y_:()=>h,hy:()=>A,JT:()=>S,p$:()=>E,CF:()=>O,ff:()=>C,Xf:()=>w,Xc:()=>T,VV:()=>u,TT:()=>I,FX:()=>x,GK:()=>j,ag:()=>P,D4:()=>k,Sc:()=>R,aP:()=>_,wy:()=>N,lm:()=>f,S2:()=>d,PI:()=>g,Ru:()=>p,O3:()=>m,ZO:()=>y});const r=e=>t=>e+t,o=e=>t=>t?.startsWith(e),a=e=>t=>{if(t.startsWith(e))return t.slice(e.length)},i=r("area$"),l=r("beacon$"),c=r("dock$"),s=r("feature$"),u=r("home$"),f=r("land$"),d=r("missionItem$"),p=r("origin$"),m=r("planned$"),y=r("uav$"),g=r("mission$"),b=a("area$"),v=a("beacon$"),h=a("dock$"),A=a("feature$"),S=a("home$"),E=a("land$"),O=a("missionItem$"),w=a("origin$"),T=(a("planned$"),a("uav$")),C=a("mission$"),I=o("area$"),x=(o("beacon$"),o("dock$")),j=o("feature$"),P=o("home$"),k=(o("land$"),o("missionItem$")),_=o("origin$"),N=(o("planned$"),o("uav$")),R=o("mission$"),D="map",M="mission",L="netConvexHull",F="grossConvexHull",U="missionItemLineString"},37813:(e,t,n)=>{"use strict";n.d(t,{Mj:()=>k,P_:()=>_,_0:()=>N,VP:()=>R,$8:()=>D,qG:()=>M,b8:()=>L,iB:()=>Re,kh:()=>we,AO:()=>H,sN:()=>se,JL:()=>he,L_:()=>Se,Kh:()=>K,_:()=>z,Oy:()=>Ee,S6:()=>Oe,SJ:()=>Te,on:()=>Ie,EU:()=>je,R6:()=>xe,dK:()=>Q,SZ:()=>ye,xL:()=>X,Jn:()=>ee,gQ:()=>re,wA:()=>ne,Z1:()=>ae,Nm:()=>pe,EG:()=>de,K3:()=>ue,LP:()=>_e,I7:()=>Je,Op:()=>Pe,Dy:()=>Y,nX:()=>ke,dp:()=>Ne,Ok:()=>oe,eg:()=>Xe,bY:()=>De,pp:()=>Me,k2:()=>Le,ob:()=>Fe,ku:()=>me,Cs:()=>Ze,Ef:()=>W,J6:()=>et,MM:()=>ie,MC:()=>ce,ce:()=>ge,sc:()=>be,tS:()=>Ue,Rf:()=>F,fb:()=>U,El:()=>Ge,oH:()=>Ve,_q:()=>fe,Mv:()=>V,fX:()=>G,ut:()=>Be,nk:()=>$,kP:()=>Z,du:()=>B,WC:()=>ze});n(52675),n(89463),n(2259),n(28706),n(33771),n(46449),n(23418),n(23792),n(48598),n(62062),n(34782),n(93514),n(62010),n(25428),n(40150),n(87220),n(26099),n(27495),n(90906),n(38781),n(47764),n(11392),n(98992),n(81454),n(37550),n(62953);var r=n(25508),o=n(97674),a=n(41105),i=n(22315),l=n(40001),c=n(77500),s=n(29008),u=n(97859),f=n(23514),d=n(83398),p=n(77440),m=n(35026),y=n(2652),g=n(27989),b=n(40861),v=n(82642),h=n(39441),A=n(47530),S=n(71458),E=n(45134),O=n(32697);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}var T=function(e){return function(e){return"object"===w(e)&&1===e.version&&"object"===w(e.setpoints)&&Array.isArray(e.setpoints)}(e)&&(e.setpoints.length>0||Boolean(e.autoYaw))};function C(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}var k=function(e){return Boolean(e.show.preflight.manualChecksSignedOffAt)},_=function(e){return Boolean(e.show.preflight.onboardChecksSignedOffAt)},N=function(e){return"synced"===e.show.start.syncStatusWithServer},R=function(e){var t=e.show.start.uavIds;return t?t.length:0},D=function(e){return e.show.lastLoadAttemptFailed},M=function(e){return"error"===e.show.start.syncStatusWithServer},L=(0,r.Mz)(function(e){return e.show.sourceUrl},function(e){return e&&e.startsWith("file://")?e.slice(7):null}),F=function(e){return!(0,u.default)(Me(e))},U=function(e){return e.show.changedSinceLoaded},G=function(e){return Boolean(e.show.start.authorized)},V=function(e){return G(e)&&N(e)},B=function(e){return Boolean(e.show.preflight.takeoffAreaApprovedAt)},z=function(e){var t;return null===(t=e.show.data)||void 0===t?void 0:t.environment},H=function(e){var t=(0,c.A)(e,"show.data.settings");return"object"===P(t)?t:h.t0},W=(0,r.Mz)(H,function(e){return e.validation}),q=function(e){var t;return null===(t=e.show.data)||void 0===t?void 0:t.swarm},K=(0,r.Mz)(q,function(e){return Array.isArray(null==e?void 0:e.drones)?e.drones:h.Ml}),Y=function(e){return e.show.environment.type},$=function(e){return"indoor"===Y(e)},Z=function(e){return"outdoor"===Y(e)},J=(0,r.Mz)(K,function(e){return e.some(function(e){var t=(0,c.A)(e,"settings.yawControl");return T(t)})}),X=function(e){return(0,c.A)(e,"show.environment.outdoor.altitudeReference")||S.n_},Q=function(e){if(!Z(e))return null;var t=X(e);return t&&t.type===S.Mb.AMSL&&"number"==typeof t.value&&Number.isFinite(t.value)?t.value:null},ee=function(e){return(0,c.A)(e,"show.environment.outdoor.coordinateSystem")},te=(0,r.Mz)(function(e){return(0,c.A)(e,"show.environment.indoor.coordinateSystem")},function(e){return e?Number.parseFloat(e.orientation):0}),ne=(0,r.Mz)(ee,function(e){return e.origin}),re=(0,r.Mz)(ee,function(e){return Number.parseFloat(e.orientation)}),oe=(0,r.Mz)($,te,re,function(e,t,n){return e?t:n}),ae=function(e){return(0,c.A)(e,"show.environment.outdoor.takeoffHeading")||S.ay},ie=(0,r.Mz)($,function(e){return(0,c.A)(e,"show.environment.indoor.takeoffHeading")||S.ay},ae,function(e,t,n){return e?t:n}),le=function(e){var t=("object"===P(e)?e:S.ay).value;return("string"==typeof t?Number.parseFloat(t):"number"==typeof t?t:0)%360},ce=function(e){var t=ie(e);return le(t)},se=(0,r.Mz)(ie,oe,function(e,t){var n=("object"===P(e)?e:S.ay).type,r=le(e);switch(n){case S.us.NONE:return;case S.us.ABSOLUTE:return r;case S.us.RELATIVE:return(t+r)%360;default:return}}),ue=(0,r.Mz)(function(e){var t;return null===(t=e.show.environment)||void 0===t||null===(t=t.indoor)||void 0===t||null===(t=t.room)||void 0===t?void 0:t.firstCorner},function(e){var t;return null===(t=e.show.environment)||void 0===t||null===(t=t.indoor)||void 0===t||null===(t=t.room)||void 0===t?void 0:t.secondCorner},function(e,t){return[e||[-S.EZ.width/2,-S.EZ.depth/2,0],t||[S.EZ.width/2,S.EZ.depth/2,S.EZ.height]]}),fe=function(e){var t;return $(e)&&(null===(t=e.show.environment.indoor)||void 0===t||null===(t=t.room)||void 0===t?void 0:t.visible)},de=(0,r.Mz)(ee,function(e){return e&&e.origin?new g.f9(e):void 0}),pe=(0,r.Mz)(de,function(e){return e?function(t){if(!(0,u.default)(t)){var n=I(t,3),r=n[0],o=n[1],a=n[2],i=I(e.toLonLat([r,o]),2);return{lon:i[0],lat:i[1],amsl:void 0,ahl:a}}}:void 0}),me=(0,r.Mz)($,function(e){return e?s.default:void 0}),ye=(0,r.Mz)(K,function(e){return e.length}),ge=(0,r.Mz)(K,function(e){return e.map(function(e){var t=(0,c.A)(e,"settings.trajectory");return(0,E.U9)(t)?t:void 0})}),be=(0,d.createCachedSelector)(ge,pe,m.vi,function(e,t,n){if(void 0!==t){var r=e[n];return(0,E.U9)(r)?(0,E.WC)(r,{includeControlPoints:!0}).map(t):void 0}})({keySelector:m.vi}),ve=(0,r.Mz)(ge,function(e){return e.map(E.R9)}),he=(0,r.Mz)(ve,function(e){return(0,b.$0)(e.flat())}),Ae=function(e,t){return t?e.map(t):Array.from({length:e.length}).fill(void 0)},Se=(0,r.Mz)(he,pe,O._I),Ee=(0,r.Mz)(ge,function(e){return e.map(E.HG)}),Oe=(0,r.Mz)(Ee,pe,Ae),we=(0,r.Mz)(Oe,function(e){var t=I((0,b.l7)(e.map(function(e){return[e.lon,e.lat]})),2);return{lon:t[0],lat:t[1]}}),Te=(0,r.Mz)(m.lI,de,function(e,t){return Array.isArray(e)&&t&&t.fromLonLat?e.map(function(e){return t.fromLonLat(e)}):void 0}),Ce=(0,r.Mz)(ge,function(e){return e.map(E.bQ)}),Ie=(0,r.Mz)(Ce,pe,Ae),xe=(0,r.Mz)(ge,function(e){return(0,f.A)(e.map(E.ZW))}),je=(0,r.Mz)(ge,function(e){return(0,f.A)(e.map(E.K0))}),Pe=(0,r.Mz)(ge,function(e){return(0,f.A)(e.map(E.xJ))}),ke=((0,r.Mz)(Pe,y.a3),function(e){var t=e.show.progress;return"number"==typeof t?100*t:null}),_e=function(e){var t;return null!==(t=e.show.start.clock)&&void 0!==t?t:null},Ne=(0,r.Mz)(function(e){return e.show.data},function(e){return(e&&"object"===P(e.meta)?e.meta:null)||{}}),Re=function(e){return e.show.base64Blob},De=function(e){return e.show.start.method},Me=function(e){var t=e.show.start,n=t.clock,r=t.timeOnClock,o=t.utcTime,a=(0,u.default)(n)?o:r;return(0,u.default)(a)||Number.isNaN(a)?null:a},Le=(0,r.Mz)(_e,Me,function(e,t){return(0,u.default)(e)?t?(0,i.A)((0,l.A)(t)):void 0:e===p.v.MTC?t?(0,y.aD)(t,{padHours:!0})+" MTC":void 0:(0,y.aD)(t,{padHours:!0})+" on clock ".concat(e)}),Fe=(0,r.Mz)(Ne,ye,function(e,t){return e.title||"Show with ".concat(t," drones")}),Ue=function(e){return Boolean(e.show.data)},Ge=function(e){return Boolean((0,c.A)(e,"show.environment.outdoor.coordinateSystem.origin"))},Ve=function(e){return e.show.loading},Be=(0,r.Mz)(Se,m.lI,function(e,t){return e&&(e=e.map(function(e){return[e.lon,e.lat]})),!!(Array.isArray(t)&&t.length>0&&Array.isArray(e)&&e.length>0)&&(t=(0,b.ko)(t),e=(0,b.ko)(e),t.isOk()&&e.isOk()&&(0,o.Ay)(t.value,e.value))});function ze(e){var t=(0,a.A)(new Date,"yyyy-MM-dd_HH-mm-ss"),n=L(e),r=n?n.lastIndexOf("/"):-1,o=n&&r>=0?n.slice(r+1):n,i=o?o.lastIndexOf("."):-1,l=o&&i>0?o.slice(0,i):o;return l&&l.length>0?"".concat(l,"_mapping_").concat(t,".txt"):"mapping_".concat(t,".txt")}var He=(0,r.Mz)(Ee,v.Y),We=(0,r.Mz)(Ce,v.Y),qe=(0,r.Mz)(A.Iu,A.hP,$,function(e,t,n){return n?t:e}),Ke=qe,Ye=(0,r.Mz)(He,qe,function(e,t){return e>=t}),$e=(0,r.Mz)(We,Ke,function(e,t){return e>=t}),Ze=function(e){return D(e)?"loadingFailed":Ve(e)?"loading":Ue(e)?Ye(e)?$e(e)?"ok":"landingPositionsTooClose":"takeoffPositionsTooClose":"notLoaded"},Je=(0,r.Mz)(ye,Pe,je,He,J,function(e,t,n,r,o){return["".concat(e," drones")].concat(C((0,u.default)(t)?[]:[(0,y.a3)(t)]),C((0,u.default)(n)?[]:["max AHL ".concat((0,y.BO)(n,1))]),C(r>0&&Number.isFinite(r)?["spacing ".concat((0,y.BO)(Math.round(r,2),1))]:[]),C(o?["yaw controlled"]:[])).join(", ")}),Xe=function(e){var t;return null===(t=e.show.data)||void 0===t||null===(t=t.meta)||void 0===t?void 0:t.segments},Qe=(0,O.Sp)(q,Xe,pe),et=(Qe.getShowSegment,Qe.getSwarmSpecificationForShowSegment);Qe.getShowSegmentTrajectories,Qe.getConvexHullsOfShowSegmentTrajectories,Qe.getConvexHullOfShowSegment,Qe.getConvexHullOfShowSegmentInWorldCoordinates},37849:(e,t,n)=>{"use strict";n.d(t,{ZO:()=>f,iE:()=>s,le:()=>c,op:()=>u});var r=n(25508),o=n(37802),a=n(27322),i=n(16238);const l=e=>e.beacons,c=(0,r.Mz)(l,i.Im),s=(0,a.qr)(o.N9),u=e=>e?.name??e?.id??"Unnamed beacon",f=(0,r.Mz)(l,e=>{const t=[];for(const[n,r]of Object.entries(e.byId))void 0===r.name&&t.push(n);return t})},38365:(e,t,n)=>{"use strict";n.d(t,{i:()=>c});var r=n(69592),o=n(59116),a=n(96034),i=n(61587),l=n(69091);function c(e,t){var n=(0,o.A)(e.status,function(e){return(0,a.A)({id:e.id,epoch:(0,l.Ab)(e.epoch),referenceTime:e.retrievedAt,running:e.running,ticks:e.ticks,ticksPerSecond:e.ticksPerSecond||1},r.A)});t((0,i.u)(n))}},39064:(e,t,n)=>{"use strict";n.d(t,{CZ:()=>N,HM:()=>_,Y_:()=>L,Ys:()=>D,bf:()=>F,dg:()=>G,fd:()=>U,hU:()=>B,jF:()=>R,kZ:()=>M,xM:()=>q});n(89463),n(2259),n(28706),n(52675),n(45700),n(2008),n(23792),n(89572),n(62010),n(2892),n(83851),n(81278),n(40875),n(79432),n(10287),n(26099),n(3362),n(47764),n(98992),n(54520),n(3949),n(23500),n(62953);var r=n(90),o=n(65738),a=n(97859),i=n(59116),l=n(92866),c=n(77855),s=n(39206),u=n(47530),f=n(58718),d=n(67932),p=n(39982),m=n(72732),y=n(3471),g=n(63101);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}var v=["target"],h=["transport"];function A(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function S(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return E(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(E(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,E(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,E(f,"constructor",s),E(s,"constructor",c),c.displayName="GeneratorFunction",E(s,o,"GeneratorFunction"),E(f),E(f,o,"Generator"),E(f,r,function(){return this}),E(f,"toString",function(){return"[object Generator]"}),(S=function(){return{w:a,m:d}})()}function E(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}E=function(e,t,n,r){function a(t,n){E(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},E(e,t,n,r)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){T(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var I=(0,g.Ay)("messaging"),x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.reportSuccess,i=void 0===a||a,c=n.reportFailure,s=void 0===c||c;t=(0,l.A)(t);var u,p,m=(0,r.A)(t,o.A).true||0,g=t.length-m;m&&s?(p=d.N.ERROR,u=g>1?"".concat(e," sent for ").concat(g," UAVs, failed for ").concat(m):g?"".concat(e," sent for one UAV, failed for ").concat(m):m>1?"".concat(e," failed for ").concat(m," UAVs"):"".concat(e," failed")):i&&(p=d.N.SUCCESS,g>1?u="".concat(e," sent for ").concat(g," UAVs"):g&&(u="".concat(e," sent successfully"))),u&&y.Ay.dispatch((0,f.Ds)({message:u,semantics:p}))},j=function(e,t,n){var r,o=(e||"an unknown command").toLowerCase();return n?"Are you sure you want to broadcast ".concat(o," to all UAVs?"):(r=Array.isArray(t)&&0!==t.length?1===t.length?" on UAV ".concat(t[0]):" on ".concat(t.length," UAVs"):"","Are you sure you want to execute ".concat(o).concat(r,"?"))},P=function(e){var t=e.type,n=e.name,r=e.mapper,o=void 0===r?void 0:r,a=e.reportFailure,i=void 0===a||a,l=e.reportSuccess,s=void 0===l||l,f=e.skipConfirmation,d=void 0!==f&&f,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return function(){var e,r=(e=S().m(function e(r,a){var l,f,g,b,v;return S().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,f=o?o(a):a,g=Boolean(null==f||null===(l=f.transport)||void 0===l?void 0:l.broadcast),d||!(0,u.ns)(y.Ay.getState(),r,g)){e.n=2;break}return e.n=1,y.Ay.dispatch((0,c.dk)(j(n,r,g),{title:"Confirmation needed"}));case 1:if(e.v){e.n=2;break}return e.a(2);case 2:return e.n=3,m.A.startAsyncOperation(w({type:t,ids:r},f),p);case 3:b=e.v,x(n,b,{reportFailure:i,reportSuccess:s}),e.n=5;break;case 4:e.p=4,v=e.v,I.error("".concat(n,": ").concat(String(v)));case 5:return e.a(2)}},e,null,[[0,4]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){C(a,r,o,i,l,"next",e)}function l(e){C(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e,t){return r.apply(this,arguments)}}()},k=P({type:"UAV-SIGNAL",name:"Light signal command",mapper:function(e){return w({signals:["light"],duration:5e3},e)},reportSuccess:!1,skipConfirmation:!0}),_=P({type:"UAV-SIGNAL",name:"Light signal command",mapper:function(e){return w({signals:["light"],duration:1e3*s.l},e)},reportSuccess:!1,reportFailure:!1,skipConfirmation:!0}),N=P({type:"UAV-TAKEOFF",name:"Takeoff command"}),R=P({type:"UAV-LAND",name:"Landing command"}),D=P({type:"UAV-HOVER",name:"Position hold command"}),M=P({type:"UAV-RTH",name:"Return to home command"}),L=P({type:"UAV-HALT",name:"Shutdown command"}),F=P({type:"UAV-RST",name:"Reset command"}),U=P({type:"UAV-SLEEP",name:"Low-power mode command"}),G=P({type:"UAV-WAKEUP",name:"Resume from low-power mode command"}),V=P({type:"UAV-FLY",name:"Fly to target command",mapper:function(e){var t=e.target;return{target:[Math.round(1e7*t.lat),Math.round(1e7*t.lon),(0,a.default)(t.amsl)?null:Math.round(1e3*t.amsl),(0,a.default)(t.ahl)?null:Math.round(1e3*t.ahl),(0,a.default)(t.agl)?null:Math.round(1e3*t.agl)]}},skipConfirmation:!0}),B=function(e,t){var n=t.target,r=A(t,v);if((0,a.default)(n))throw new Error("No target given in arguments");var o=n.lat,i=n.lon,l=n.amsl,c=n.ahl,s=n.agl;if(!(0,a.default)(l)&&!(0,a.default)(c)&&!(0,a.default)(s))throw new Error("only one of AMSL, AHL and AGL may be given");var u=r;return(0,a.default)(l)?(0,a.default)(c)?(0,a.default)(s)?u.target={lat:o,lon:i}:u.target={lat:o,lon:i,agl:s}:u.target={lat:o,lon:i,ahl:c}:u.target={lat:o,lon:i,amsl:l},V(e,u)},z=P({type:"UAV-MOTOR",name:"Motor off command",mapper:function(e){return w(w({},e),{},{start:!1})}}),H=P({type:"UAV-MOTOR",name:"Motor on command",mapper:function(e){return w(w({},e),{},{start:!0})}}),W={calibrateCompass:P({type:"UAV-CALIB",name:"Calibrate compass",mapper:function(e){e.transport;return w(w({},A(e,h)),{},{component:"compass"})}},{timeout:p.VR}),flashLight:k,shutdown:L,land:R,holdPosition:D,reset:F,returnToHome:M,sleep:U,takeOff:N,turnMotorsOff:z,turnMotorsOn:H,wakeUp:G};function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getTargetedUAVIds,n=e.getTransportOptions;if("function"!=typeof t)throw new TypeError("getTargetedUAVIds() must be a function");return(0,i.A)(W,function(e){return function(){return function(r,o){var a,i=o(),l=t(i),c={};n&&(c.transport=n(i),0===(null===(a=c.transport)||void 0===a?void 0:a.channel)&&delete c.transport.channel);e(l,c)}}})}},39206:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r,l:()=>o});const r=5,o=5},39441:(e,t,n)=>{"use strict";n.d(t,{Ml:()=>l,kP:()=>i,t0:()=>c,vR:()=>a});var r=n(15036),o=n(65307);function a(e,t,{minDelay:n}={}){let a=t;return n&&n>0&&(a=(...e)=>(0,r.A)(t(...e),n)),(0,o.VP)(e,(...e)=>({payload:a(...e)}))}const i=e=>({prepare:()=>({payload:void 0}),reducer:e}),l=Object.seal(Object.defineProperty([],"length",{writable:!1})),c=Object.freeze({})},39714:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAANUlEQVR4nI2QMQoAMAwCz5L/f9mOzZIaN0E9UDyZhaaQz6atgBHgambEJ5wBKoS0WaIvfT+6K2MIECN19MAAAAAASUVORK5CYII="},39982:(e,t,n)=>{"use strict";n.d(t,{Ex:()=>o,VR:()=>s,VV:()=>r,Vd:()=>i,dP:()=>l,sH:()=>c,uv:()=>a});const r=185,o=414,a=472,i=r+o,l=48+a,c=100,s=90},40535:(e,t,n)=>{"use strict";n.d(t,{Sw:()=>a,dX:()=>o,t2:()=>i});var r=n(98964);function o(e){}function a(e){e&&(0,r.Uz)(e.layer)}function i(e){e&&((0,r.m_)(e.layer),(0,r.Uz)(e.layer))}},40861:(e,t,n)=>{"use strict";n.d(t,{$0:()=>A,CX:()=>b,HR:()=>y,RZ:()=>v,dc:()=>O,eY:()=>C,eh:()=>f,fB:()=>u,hR:()=>h,hw:()=>m,ko:()=>S,l7:()=>p,mS:()=>T,xW:()=>d});var r=n(29008),o=n(88389),a=n(21690),i=n(80278),l=n(93291),c=n.n(l),s=n(67912);const u=e=>Array.isArray(e)&&2===e.length&&e.every(e=>"number"==typeof e);function f(e){return e*Math.PI/180}function d(e){return 180*e/Math.PI}function p(e,t=2){const n=Array.from({length:t},()=>0),r=e&&Array.isArray(e)?e.length:0;if(0===r)return n;for(const r of e)for(let e=0;e<t;e++)n[e]=(n[e]??0)+(r[e]??0);for(let e=0;e<t;e++)n[e]=(n[e]??0)/r;return n}function m(e){const t=[0,0];for(const n of e.map(f))t[0]+=Math.cos(n),t[1]+=Math.sin(n);const n=d(Math.atan2(t[1],t[0]));return n<0?n+360:n}function y(e,t,{distanceFunction:n,getter:o=r.default}){const a=e.map(o),i=t.map(o);return a.map(e=>i.map(t=>n(e,t)))}const g=(e,t)=>e[0]*t[0]+e[1]*t[1],b=(e,t)=>Math.hypot(e[0]-t[0],e[1]-t[1]),v=(e,t)=>Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2);function h(e){if(!Array.isArray(e)||e.length<2)return;const t=e.at(0),n=e.at(-1);if(!u(t)||!u(n))return;const r=t.length;let o=!0;if(r===n.length){o=!1;for(let e=0;e<r;e++)if(t[e]!==n[e]){o=!0;break}}o&&e.push(t)}const A=e=>c()(e).map(t=>e[t]);function S(e){if(0===e.length)return(0,s._q)("at least one point is required to create a geometry");if(1===e.length&&u(e[0]))return(0,s.ok)(i.zx(e[0]).geometry);if(2===e.length)return(0,s.ok)(i.wi(e).geometry);const t=[...e];return h(t),(0,s.ok)(i.n1([t]).geometry)}const E=([e,t])=>Math.hypot(e,t),O=(e,t)=>Math.PI/2-Math.atan2(t[1]-e[1],t[0]-e[0]),w=(e,t)=>{if(t<3)return e;if(e.length<=t)return e;const n=t=>e.at(t%e.length),r=(t,n)=>{e[(t+e.length)%e.length]=n},i=(0,o.A)((0,a.A)(e.length),e=>((e,t,n)=>{const r=[t[0]-e[0],t[1]-e[1]],o=[n[0]-t[0],n[1]-t[1]];return Math.acos(g(r,o)/(E(r)*E(o)))})(n(e-1),n(e),n(e+1))),l=(([e,t,n,r,o])=>{const a=(e,t)=>[e[1]-t[1],t[0]-e[0]],i=a(e,t),l=a(t,r),c=a(r,o),s=g(i,e),u=g(l,n),f=g(c,o),d=i[0]*l[1]-i[1]*l[0],p=c[0]*l[1]-c[1]*l[0];return[e,[(l[1]*s-i[1]*u)/d,(-l[0]*s+i[0]*u)/d],[(l[1]*f-c[1]*u)/p,(-l[0]*f+c[0]*u)/p],o]})([-2,-1,0,1,2].map(e=>n(i+e)));return r(i-2,l[0]),r(i-1,l[1]),r(i+1,l[2]),r(i+2,l[3]),e.splice(i,1),w(e,t)},T=([e,...t],n)=>{const r=w(t,n);return u(r[0])?(0,s.ok)([...r,r[0]]):(0,s._q)("polygons need to have at least three 2D vertices")},C=(e,t,n=2.5)=>{const r=t/n,o=r*(t/2);if(e>2*o){return 2*r+(e-2*o)/t}{const t=e/2;return 2*(Math.sqrt(2*t*n)/n)}}},40881:(e,t,n)=>{"use strict";n.d(t,{BB:()=>Q,Ev:()=>T,I6:()=>ne,Lz:()=>B,O6:()=>z,O9:()=>V,OJ:()=>W,OX:()=>k,Pz:()=>x,T4:()=>K,TX:()=>F,Ty:()=>oe,WF:()=>J,WW:()=>Z,X6:()=>de,YZ:()=>X,Yd:()=>L,aq:()=>fe,dR:()=>Y,fR:()=>se,fk:()=>j,gd:()=>I,jE:()=>ie,jd:()=>re,kX:()=>ee,mP:()=>N,q5:()=>ue,sj:()=>te,u$:()=>H,uC:()=>_,yS:()=>P,y_:()=>$,yl:()=>pe,ys:()=>me,zG:()=>le});var r=n(76618),o=n(97859),a=n(84045),i=n(30679),l=n(52490),c=n(83398),s=n(25508),u=n(19395),f=n(35026),d=n(47530),p=n(37813),m=n(45134),y=n(32499),g=n(46258),b=n(79891),v=n(86181),h=n(37802),A=n(75539),S=n(27322),E=n(40861),O=n(39441),w=n(35025);const T=e=>e.uavs.order,C=(e,t)=>t,I=e=>e.uavs.byId,x=(e,t)=>e.uavs.byId[t],j=(e,t)=>x(e,t)?.position,P=(0,s.Mz)(I,e=>Object.values(e).map(e=>e.position).filter(v.Ee)),k=(e,t)=>{const n=x(e,t);return n?n.localPosition:void 0},_=(e,t)=>x(e,t)?.heading,N=e=>{const t=Y(e).map(t=>_(e,t)).filter(e=>"number"==typeof e);return(0,E.hw)(t)},R=(0,c.createCachedSelector)(f.Ps,f.vT,C,(e,t,n)=>{const r=e[n];if(void 0!==r)return t[r]})({keySelector:C}),D=(0,c.createCachedSelector)(f.Ps,p.Oy,C,(e,t,n)=>{const r=e[n];if(void 0!==r)return t[r]})({keySelector:C}),M=(0,c.createCachedSelector)(f.Ps,f.Jg,C,(e,t,n)=>{const r=e[n];if(void 0!==r)return t[r]})({keySelector:C}),L=((0,c.createCachedSelector)(f.Ps,p.ce,C,(e,t,n)=>{const r=e[n];if(void 0===r)return;const o=t[r];return(0,m.U9)(o)?(0,m.WC)(o,{includeControlPoints:!0}):void 0})({keySelector:C}),(0,c.createCachedSelector)(f.Ps,p.ce,p.ku,C,(e,t,n,r)=>{const o=e[r];if(void 0===n)return;if(void 0===o)return;const a=t[o];return(0,m.U9)(a)?(0,m.WC)(a,{includeControlPoints:!0}).map(n):void 0})({keySelector:C})),F=(0,c.createCachedSelector)(f.Ps,p.ce,p.Nm,C,(e,t,n,r)=>{const o=e[r];if(void 0===n)return;if(void 0===o)return;const a=t[o];return(0,m.U9)(a)?(0,m.WC)(a,{includeControlPoints:!0}).map(n):void 0})({keySelector:C}),U=(0,c.createCachedSelector)(R,j,(e,t)=>{if(!(0,o.default)(e))return(0,o.default)(t)?Number.POSITIVE_INFINITY:(0,l.Yf)([e.lon,e.lat],[t.lon,t.lat])})({keySelector:C}),G=(0,c.createCachedSelector)(D,k,(e,t)=>{if(!(0,o.default)(e))return(0,o.default)(t)?Number.POSITIVE_INFINITY:(0,E.CX)(e,t)})({keySelector:C}),V=e=>{const t=(0,f.VZ)(e),n={},r=(0,p.nk)(e)?G:U;for(const a of t)(0,o.default)(a)||(x(e,a)?n[a]=r(e,a):n[a]=void 0);return n},B=(0,s.Mz)(V,d.QA,(e,t)=>Object.entries(e).reduce((e,[n,r])=>("number"==typeof r&&r>t&&e.push(n),e),[])),z=e=>{const t=V(e);let n=-1;for(const e of Object.values(t))!(0,o.default)(e)&&e>n&&(n=e);return n<0?void 0:n},H=(0,c.createCachedSelector)(M,_,(e,t)=>{if(!(0,o.default)(e)&&!(0,o.default)(t)){return(e-t+540)%360-180}})({keySelector:C}),W=(0,c.createCachedSelector)(x,e=>(0,g.px)((e?e.light:0)||0))({keySelector:C}),q=e=>t=>T(t).filter(n=>{const r=x(t,n);return r?.age===e}),K=q(A.O.ACTIVE),Y=(0,s.Mz)(K,I,(e,t)=>e.filter(e=>{const n=t[e];return!!n&&!ce(n)})),$=q(A.O.INACTIVE),Z=(0,s.Mz)(e=>{const t=(0,f.VZ)(e),n={};for(const r of t)(0,o.default)(r)||(n[r]=H(e,r));return n},d.gb,(e,t)=>Object.entries(e).reduce((e,[n,r])=>(!(0,o.default)(r)&&Math.abs(r)>t&&e.push(n),e),[])),J=(0,s.Mz)(f.VZ,I,(e,t)=>e.filter(e=>{if((0,o.default)(e))return!1;const n=t[e]?.age;return(0,o.default)(n)||n===A.O.GONE})),X=(0,S.qr)(h.Xc),Q=(0,s.Mz)(X,e=>1===e.length?e[0]:void 0),ee=(0,s.Mz)(X,e=>1===e.length?e:O.Ml),te=e=>(e=>{const t=X(e);return Array.isArray(t)?t.length:0})(e)<=5?X(e):O.Ml,ne=q(A.O.GONE),re=(0,s.Mz)(f.Ps,T,(e,t)=>t.filter(t=>(0,o.default)(e[t]))),oe=(0,s.Mz)(f.Ps,f.Rl,I,(e,t,n)=>{const o=[];for(const r of t){const t=n[r];if(t)for(const n of t.errors)n!==b.A.ON_GROUND&&o.push([n,[r,e[r]??null]])}return(0,i.A)(Object.entries((0,r.A)(o,e=>e[0])),([e,t])=>Number.parseInt(e,10)).map(([e,t])=>({code:e,uavIdsAndIndices:t.map(e=>e[1])}))}),ae=e=>{const{errors:t}=e??{};return!(!Array.isArray(t)||t.length<=0)&&(1!==t.length||t[0]!==b.A.ON_GROUND)},ie=(0,s.Mz)(f.Rl,I,(e,t)=>{for(const n of e)if(ae(t[n]))return!1;return!0});function le(e){let t;if(e.age===A.O.GONE)return u.n.OFF;if(e.errors&&e.errors.length>0&&(t=(0,y.V)(e.errors),t>=y.AI.WARNING))return(0,y.O0)(t);if(e.age===A.O.INACTIVE)return u.n.MISSING;const n=Math.max(...e.errors);return n===b.A.RETURN_TO_HOME?u.n.RTH:n===b.A.ON_GROUND?u.n.SUCCESS:void 0!==t&&t>=y.AI.INFO?(0,y.O0)(t):u.n.SUCCESS}const ce=e=>e.errors.includes(b.A.SLEEPING);function se(e){let t,n,r,o,a=b.A.NO_ERROR;if(e)if(e.errors&&e.errors.length>0){a=Math.max(...e.errors);const t=(0,y.kx)(a);r=b.A.abbreviate(a),o=a===b.A.RETURN_TO_HOME?u.n.RTH:a===b.A.ON_GROUND?u.n.SUCCESS:(0,y.O0)(t)}else e.position&&Math.abs(e.position.ahl??0)>=.3?(r="airborne",n=`${(e.position.ahl??0).toFixed(2)}m`,o=u.n.SUCCESS):(r="ready",o=u.n.SUCCESS);else t=void 0,r="missing",o=u.n.WARNING;return!e||o!==u.n.SUCCESS&&o!==u.n.INFO&&o!==u.n.WARNING||(e.age===A.O.GONE?("ready"===r&&(r="gone"),o=u.n.OFF):e.age===A.O.INACTIVE&&("ready"!==r&&a!==b.A.ON_GROUND||(r="no telem"),o=u.n.MISSING)),e&&(t=le(e)),{age:e?.age,status:t,details:n??r,gone:!!e&&(e.age===A.O.GONE||e.age===A.O.INACTIVE),text:r,textSemantics:o,batteryStatus:e?.battery}}const ue=()=>(0,w.D)(x,se),fe=(0,s.Mz)(T,I,(e,t)=>(0,a.A)(e,[e=>Math.max(...t[e].errors.filter(e=>(0,y.kx)(e)>y.AI.INFO))],["desc"])),de=e=>e.uavs.panel.followMapSelection,pe=e=>e.uavs.panel.selectedTab,me=e=>e.uavs.panel.selectedUAVId},41241:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>u,O7:()=>c,Q2:()=>s,eH:()=>l});var r=n(65307);const o={hideHeaders:!1,isFixed:!1,state:void 0},{actions:a,reducer:i}=(0,r.Z0)({name:"workbench",initialState:o,reducers:{setWorkbenchHasHeaders(e,{payload:t}){e.hideHeaders=!(t??1)},setWorkbenchIsFixed(e,{payload:t}){e.isFixed=t??!1},saveWorkbenchState:{prepare:e=>({payload:e.getState()}),reducer(e,t){e.state=t.payload}}}}),{setWorkbenchIsFixed:l,setWorkbenchHasHeaders:c,saveWorkbenchState:s}=a,u=i},41895:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(74848);n(96540);const o=(0,n(9792).A)((0,r.jsx)("path",{d:"M21,12v-2h-2V7l-3-3l-2,2l-2-2l-2,2L8,4L5,7v3H3v2h2v2H3v2h2v4h14v-4h2v-2h-2v-2H21z M16,6.83l1,1V10h-2V7.83l0.41-0.41 L16,6.83z M12,6.83l0.59,0.59L13,7.83V10h-2V7.83l0.41-0.41L12,6.83z M11,14v-2h2v2H11z M13,16v2h-2v-2H13z M7,7.83l1-1l0.59,0.59 L9,7.83V10H7V7.83z M7,12h2v2H7V12z M7,16h2v2H7V16z M17,18h-2v-2h2V18z M17,14h-2v-2h2V14z"}),"PlacesFence")},42095:(e,t,n)=>{"use strict";function r(e){var t;return Boolean(null===(t=e.mapCaching)||void 0===t?void 0:t.enabled)}n.d(t,{j:()=>r})},42634:()=>{},44131:(e,t,n)=>{"use strict";e.exports=n.p+"fd1931c83fb432d22683.woff"},44539:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(34477),o=n(34164),a=n(5556),i=n.n(a),l=n(96540),c=n(49591),s=n(71036),u=n(55258),f=(0,c.n9)(function(e){return{root:{padding:"0 2px",textAlign:"center",userSelect:"none",width:"100%"},batteryFull:{color:s.Ay.success,fontWeight:"bold"},batteryWarning:{backgroundColor:s.Ay.warning,borderRadius:"".concat(2*e.shape.borderRadius,"px"),color:e.palette.getContrastText(s.Ay.warning)},batteryError:{backgroundColor:s.Ay.error,borderRadius:"".concat(2*e.shape.borderRadius,"px"),color:e.palette.getContrastText(s.Ay.error),fontWeight:"bold"}}}),d=function(e){var t=e.charging,n=e.className,a=e.cellCount,i=e.formatter,c=void 0===i?u.h:i,s=e.percentage,d=e.voltage,p=c.getBatteryStatus(d,s,a),m=c.getBatteryLabel(d,s,a),y=c.getBatteryIcon(s,p,t),g=f(),b=(0,o.A)(n,g.root,g["battery".concat(p)]);return l.createElement(r.A,{className:b,sx:{fontSize:"small"}},y,m)};d.propTypes={cellCount:i().number,className:i().string,charging:i().bool,formatter:i().instanceOf(u.K),percentage:i().oneOfType([i().number,i().string]),voltage:i().oneOfType([i().number,i().string])};const p=d},44552:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAFUlEQVQY02NgGJzgPxTjZDMNQkcDAOi4Bf2rdMdGAAAAAElFTkSuQmCC"},44690:(e,t,n)=>{"use strict";n.d(t,{A:()=>c,o:()=>l});var r=n(82041),o=n(65307),a=n(16238);const i=(0,a.q9)(r.A.map.locations),{actions:l,reducer:c}=(0,o.Z0)({name:"saved-locations",initialState:i,reducers:{addSavedLocation(e,t){(0,a.BS)(e,t.payload)},createNewSavedLocation(e,t){(0,a.xQ)(e,t)},deleteSavedLocation(e,t){(0,a.T$)(e,t.payload)},updateSavedLocation(e,t){(0,a.M5)(e,t.payload)}}})},45106:(e,t,n)=>{"use strict";n.d(t,{m:()=>r});const r=e=>void 0!==e.origin},45134:(e,t,n)=>{"use strict";n.d(t,{HG:()=>s,K0:()=>d,R9:()=>c,U9:()=>g,WC:()=>p,ZW:()=>f,bQ:()=>u,kN:()=>y,xJ:()=>m});var r=n(23149),o=n(23514),a=n(26144),i=n(40861);const l=([e,t,n])=>[e,t],c=e=>(0,i.$0)(p(e,{includeControlPoints:!0}).map(l)),s=e=>g(e)?e.points.at(0)[1]:void 0,u=e=>g(e)?e.points.at(-1)[1]:void 0,f=e=>{if(!g(e))return;const{points:t=[]}=e;if(0===t.length)return;const n=t[0][1];return(0,o.A)(e.points.map(e=>{const t=e[1];return(0,i.CX)(l(t),l(n))}))},d=e=>{if(g(e))return(0,o.A)(e.points.map(([e,t])=>t[2]))},p=(e,{includeControlPoints:t=!1}={})=>{if(!g(e))return[];const{points:n=[]}=e;if(t){const e=[];for(const t of n)t.length>2&&Array.isArray(t[2])&&e.push(...t[2]),e.push(t[1]);return e}return n.map(e=>e[1])},m=e=>{if(!g(e))return;const{points:t,takeoffTime:n}=e;if(t.length>0){const e=t.at(-1);if(Array.isArray(e)&&e.length>1)return e[0]+(n??0)}};function y(e,t){return{...e,points:(0,a.trajectorySegmentsInTimeWindow)(e.points,t)}}const g=e=>(0,r.A)(e)&&"version"in e&&1===e.version&&"points"in e&&Array.isArray(e.points)&&e.points.length>0},45633:(e,t,n)=>{"use strict";var r;n.d(t,{Ui:()=>a,bA:()=>r,sV:()=>o}),function(e){e.GENERAL="general",e.ATTRIBUTES="attributes",e.POINTS="points"}(r||(r={}));const o=[r.GENERAL,r.ATTRIBUTES],a={[r.GENERAL]:"General",[r.ATTRIBUTES]:"Attributes",[r.POINTS]:"Points"}},46258:(e,t,n)=>{"use strict";n.d(t,{FA:()=>s,L4:()=>o,U2:()=>l,px:()=>a,v$:()=>c});var r=n(44913);function o(e){const t=(63488&e)>>11,n=(2016&e)>>5,r=31&e;return(t<<3)+(t>>2)<<16|(n<<2)+(n>>4)<<8|(r<<3)+(r>>2)}function a(e){return(0,r.A)(o(e||0)).string()}const i={"FW-UPLOAD":!0,"LOG-DATA":!0,"LOG-INF":!0,"OBJ-CMD":!0,"PRM-GET":!0,"PRM-SET":!0,"PRM-SET-MANY":!0,"UAV-CALIB":!0,"UAV-FLY":!0,"UAV-HALT":!0,"UAV-HOVER":!0,"UAV-LAND":!0,"UAV-MOTOR":!0,"UAV-RST":!0,"UAV-RTH":!0,"UAV-SIGNAL":!0,"UAV-SLEEP":!0,"UAV-TAKEOFF":!0,"UAV-TEST":!0,"UAV-WAKEUP":!0};function l(e){const{body:t}=e||{},{type:n}=t||{};if(!n)throw new Error("Received message has no type");if("ACK-NAK"===n)throw new Error(t.reason??"ACK-NAK received; no reason given");return e}function c(e,t){const{body:n}=l(e),r=n,{type:o}=r;if(i[o]){const{error:e,receipt:n,result:o}=r;if(e&&void 0!==e[t])throw new Error(e[t]??"Failed to execute command");if(o&&void 0!==o[t])return{result:o[t]};if(n&&void 0!==n[t])return{receipt:n[t]};throw new Error("Server did not provide a response or receipt for the command")}throw new Error(`${o} messages do not contain receipts`)}function s(e,t,n={}){const r=e?.body?.error;if("object"==typeof r&&void 0!==r[t]){if("string"==typeof r[t])throw new TypeError(r[t]);{const{error:e}=n;throw new Error(e||`Failed to retrieve result for ID ${t} from response`)}}const{key:o="status"}=n,a=e?.body?.[o];if("object"==typeof a&&null!==a&&void 0!==a[t])return a[t];throw new Error(`No result for ID ${t} but no error either; this should not have happened.`)}},46465:(e,t,n)=>{"use strict";e.exports=n.p+"a0ffa3fec5fb5d4576e3.ttf"},46925:(e,t,n)=>{"use strict";n.d(t,{BJ:()=>i,PV:()=>s,dy:()=>c});var r=n(67912),o=n(27989),a=n(40861);const i=({horizontalMargin:e,maxVertexCount:t,simplify:n})=>i=>(0,o.h3)(i,e).andThen(e=>n?(0,a.mS)(e,t):(0,r.ok)(e)),l=({rounding:e=10,minimum:t}={})=>(n=0,r=0)=>Math.max(t??e,Math.ceil((n+r)/e)*e),c=l({minimum:30}),s=l({minimum:30})},46972:(e,t,n)=>{"use strict";n.d(t,{Pu:()=>y,Qf:()=>m,R6:()=>p,iH:()=>b,jK:()=>g});n(52675),n(89463),n(2259),n(45700),n(23418),n(23792),n(62062),n(34782),n(89572),n(62010),n(2892),n(5506),n(26099),n(16034),n(27495),n(90906),n(38781),n(47764),n(98992),n(81454),n(62953);var r=n(71042),o=n(40881),a=n(18728),i=n(27989),l=n(35026);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={EXCLUSION_ZONE_POLYGONS:"exclusionZonePolygons",NET_MISSION_END_RATIO:"netMissionEndRatio",NET_MISSION_START_RATIO:"netMissionStartRatio",SELECTED_COORDINATE:"selectedCoordinate",SELECTED_LINE_STRING_FEATURE:"selectedLineStringFeature",SELECTED_MARKER_FEATURE:"selectedMarkerFeature",SELECTED_POLYGON_FEATURE:"selectedPolygonFeature",SELECTED_UAV_COORDINATE:"selectedUAVCoordinate"},m=Object.values(p),y={DYNAMIC:"dynamic",STATIC:"static"},g=d(d(d(d(d(d(d(d({},p.EXCLUSION_ZONE_POLYGONS,y.DYNAMIC),p.NET_MISSION_END_RATIO,y.DYNAMIC),p.NET_MISSION_START_RATIO,y.DYNAMIC),p.SELECTED_COORDINATE,y.DYNAMIC),p.SELECTED_LINE_STRING_FEATURE,y.STATIC),p.SELECTED_MARKER_FEATURE,y.DYNAMIC),p.SELECTED_POLYGON_FEATURE,y.STATIC),p.SELECTED_UAV_COORDINATE,y.DYNAMIC);function b(e,t){for(var n={},r=0,o=Object.entries(e);r<o.length;r++){var a=s(o[r],2),i=a[0],l=a[1],c=E[i];c&&"function"==typeof c&&c(n,l,t)}return n}function v(e,t,n){"string"==typeof t&&(t=[t]);var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(t);try{for(o.s();!(r=o.n()).done;){e[r.value]=n}}catch(e){o.e(e)}finally{o.f()}}function h(e,t,n){var r=n(),a=(0,o.BB)(r);if(!a)throw new Error("Exactly one UAV must be selected");var l=(0,o.fk)(r,a);if(!l)throw new Error("The selected UAV does not have a GPS position yet");v(e,t,(0,i.$S)(l))}var A=function(e){return function(t){var n=t(),o=(0,r.gZ)(e)(n);if(!o)throw new Error("Exactly one feature of type '".concat(e,"' must be selected on the map"));return(0,r.je)(n,o)}};function S(e,t,n){var r=A(a.lo.POINTS)(n);v(e,t,(0,i.Ek)(r.points[0]))}var E=d(d(d(d(d(d(d(d({},p.EXCLUSION_ZONE_POLYGONS,function(e,t,n){var r=n();v(e,t,(0,l.QH)(r).map(function(e){var t=e.attributes;return{points:e.points.map(i.Ek),altitude:{min:null==t?void 0:t.minAltitude,max:null==t?void 0:t.maxAltitude}}}))}),p.NET_MISSION_END_RATIO,function(e,t,n){var r=n();v(e,t,(0,l.LU)(r))}),p.NET_MISSION_START_RATIO,function(e,t,n){var r=n();v(e,t,(0,l.B9)(r))}),p.SELECTED_COORDINATE,function(e,t,n){try{h(e,t,n)}catch(r){try{S(e,t,n)}catch(e){throw new Error("Exactly one UAV or exactly one marker must be selected!")}}}),p.SELECTED_LINE_STRING_FEATURE,function(e,t,n){v(e,t,A(a.lo.LINE_STRING)(n).points.map(i.Ek))}),p.SELECTED_MARKER_FEATURE,S),p.SELECTED_POLYGON_FEATURE,function(e,t,n){var r=A(a.lo.POLYGON)(n);v(e,t,{points:r.points.map(i.Ek),holes:r.holes.map(function(e){return e.map(i.Ek)})})}),p.SELECTED_UAV_COORDINATE,h)},47530:(e,t,n)=>{"use strict";n.d(t,{Ap:()=>j,Cu:()=>L,HI:()=>P,Iu:()=>O,Mq:()=>N,QA:()=>v,S6:()=>_,W_:()=>R,Wb:()=>T,Xt:()=>g,Yw:()=>w,bR:()=>k,bV:()=>A,d6:()=>U,fB:()=>S,fe:()=>y,gb:()=>h,hP:()=>E,jz:()=>F,ns:()=>M,sk:()=>b,x_:()=>D,xf:()=>C});n(52675),n(89463),n(2259),n(45700),n(2008),n(23418),n(23792),n(34782),n(89572),n(62010),n(2892),n(5506),n(83851),n(81278),n(79432),n(26099),n(27495),n(90906),n(38781),n(47764),n(98992),n(54520),n(3949),n(23500),n(62953);var r=n(25508),o=n(26693),a=n(55258),i=n(52614),l=n(94954),c=n(85683);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){var t;return(null===(t=e.settings.display)||void 0===t?void 0:t.altitudeSummaryType)||l.Vk.AMSL},g=(0,r.Mz)(function(e){return e.settings.uavs},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultBatteryCellCount,n=e.fullChargeVoltage,r=e.lowVoltageThreshold,o=e.criticalVoltageThreshold;return new i.F({defaultBatteryCellCount:t,voltageThresholds:{full:n,low:r,critical:o}})}),b=(0,r.Mz)(g,function(e){return e.settings.uavs},function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).preferredBatteryDisplayStyle,n=void 0===t?l.Ji.VOLTAGE:t;return new a.K({settings:e,style:n})}),v=function(e){var t;return(null!==(t=e.settings.uavs.placementAccuracy)&&void 0!==t?t:1e3)/1e3},h=function(e){var t;return null!==(t=e.settings.uavs.takeoffHeadingAccuracy)&&void 0!==t?t:20},A=function(e){var t=e.settings.threeD,n=t.scenery,r=t.lighting;return"day"===n?"light":"night"===n?"dark":"light"===r?"light":"dark"},S=function(e){var t;return null!==(t=e.settings.uavs.maxUploadConcurrency)&&void 0!==t?t:8},E=function(e){var t;return(null!==(t=e.settings.uavs.minIndoorTakeoffSpacing)&&void 0!==t?t:200)/1e3},O=function(e){var t;return(null!==(t=e.settings.uavs.minOutdoorTakeoffSpacing)&&void 0!==t?t:400)/1e3},w=function(e){return e.settings.uavs.preferredBatteryDisplayStyle},T=function(e){var t=e.settings.threeD.scenery;return"day"===t||"night"===t?"outdoor":"indoor"===t?"indoor":"auto"===t?"auto":"outdoor"},C=(0,r.Mz)(function(e){return e.settings.uavs},function(e){var t=e.warnThreshold,n=e.goneThreshold,r=e.forgetThreshold,o=e.autoRemove;return{goneThreshold:Math.max(1e3,1e3*n),warnThreshold:Math.max(1e3,1e3*t),forgetThreshold:o?Math.max(1e3,1e3*r):Number.POSITIVE_INFINITY}}),I=[],x={key:c.ur.DEFAULT,reverse:!1},j=function(e){var t;return(null===(t=e.settings.display)||void 0===t?void 0:t.uavListFilters)||I},P=function(e){return e.settings.display.uavListLayout},k=function(e){return"grid"===P(e)?"horizontal":"vertical"};function _(e){var t;return(null===(t=e.settings.display)||void 0===t?void 0:t.uavListSortPreference)||x}var N=function(e){var t;return!(null!==(t=e.settings.display)&&void 0!==t&&t.hideEmptyMissionSlots)},R=function(e){var t;return null===(t=e.settings.display)||void 0===t?void 0:t.showMissionIds},D=function(e){var t;return null===(t=e.settings.display)||void 0===t?void 0:t.experimentalFeaturesEnabled};function M(e,t,n){var r=function(e){var t;return(null===(t=e.settings.uavs)||void 0===t?void 0:t.uavOperationConfirmationStyle)||l.eB.NEVER}(e);switch(r){case l.eB.ALWAYS:return!0;case l.eB.ONLY_MULTIPLE:return n||Array.isArray(t)&&t.length>1;default:return!1}}var L=function(e){var t;return null===(t=e.settings.display)||void 0===t?void 0:t.hideInactiveSegmentsOnDarkLCD},F=function(e){var t;return null===(t=e.settings.display)||void 0===t?void 0:t.optimizeUIForTouch},U=(0,r.Mz)(function(e){return e.settings.apiKeys},function(e){for(var t={},n=0,r=Object.entries(p(p({},o.A),e));n<r.length;n++){var a=u(r[n],2),i=a[0],l=a[1];t[String(i).toUpperCase()]=String(l||o.A[i])||""}return t})},47790:()=>{},48641:(e,t,n)=>{"use strict";n.d(t,{Mc:()=>s,Rk:()=>i,Xw:()=>l,mg:()=>c});var r=n(25508),o=n(16238),a=n(14968);const i=(0,r.Mz)(e=>e.connections,o.Im),l=(0,r.Mz)(a.Kk,o.Im),c=(0,r.Mz)(l,e=>e.slice().reverse()),s=(0,r.Mz)(l,e=>e.filter(e=>e.visible??!0))},48909:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(31601),o=n.n(r),a=n(76314),i=n.n(a)()(o());i.push([e.id,'/**\n * CSS styling for <kbd> tags.\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2015 Auth0, Inc. <support@auth0.com> (http://auth0.com)\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nkbd {\n  font-family: \'Fira Sans\', Arial, sans-serif;\n  display: inline-block;\n  border-radius: 3px;\n  padding: 0px 4px;\n  box-shadow: 1px 1px 1px #777;\n  margin: 2px;\n  background: #eee;\n  font-weight: normal;\n  color: #555;\n  cursor: pointer;\n\n  /* Prevent selection */\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\nkbd:hover, kbd:hover * {\n  color: black;\n  /* box-shadow: 1px 1px 1px #333; */\n}\nkbd:active, kbd:active * {\n  color: black;\n  box-shadow: 1px 1px 0px #ddd inset;\n}\n\nkbd kbd {\n  padding: 0px;\n  margin: 0 1px;\n  box-shadow: 0px 0px 0px black;\n  vertical-align: baseline;\n  background: none;\n}\n\nkbd kbd:hover {\n  box-shadow: 0px 0px 0px black;\n}\n\nkbd:active kbd {\n  box-shadow: 0px 0px 0px black;\n  background: none;\n}\n\n/* Deep blue */\nkbd.deep-blue, .deep-blue kbd {\n  background: steelblue;\n  color: #eee;\n}\n\nkbd.deep-blue:hover, kbd.deep-blue:hover *, .deep-blue kbd:hover {\n  color: white;\n}\n\n/* Dark apple */\nkbd.dark-apple, .dark-apple kbd {\n  background: black;\n  color: #ddd;\n}\n\nkbd.dark-apple:hover, kbd.dark-apple:hover *, .dark-apple kbd:hover {\n  color: white;\n}\n\n/* Type writer */\nkbd.type-writer, .type-writer kbd {\n  border-radius: 10px;\n  background: #333;\n  color: white;\n}\n',""]);const l=i},49326:(e,t,n)=>{"use strict";e.exports=n.p+"0f2bf7a72d52c52151d0.png"},49327:(e,t,n)=>{"use strict";n.d(t,{mN:()=>f,Ay:()=>m,FV:()=>d,L3:()=>p});var r=n(65307),o=n(16238),a=n(91949);const i=e=>({id:e,name:e,state:a.KN.DISCONNECTED,stateChangedAt:void 0});function l(e,t,n){const{byId:r,order:o}=e;r[t]={...r[t]??i(t),...n},o.includes(t)||o.push(t)}const c=o.Tg,{actions:s,reducer:u}=(0,r.Z0)({name:"connections",initialState:c,reducers:{clearConnectionList(e){(0,o.d5)(e)},removeConnectionsByIds(e,t){(0,o.Zj)(e,t.payload)},updateConnections(e,t){for(const[n,r]of Object.entries(t.payload))l(e,n,r)}}}),{clearConnectionList:f,removeConnectionsByIds:d,updateConnections:p}=s,m=u},49648:(e,t,n)=>{"use strict";n.d(t,{Iy:()=>x,JB:()=>E,lB:()=>O,o3:()=>C});n(52675),n(89463),n(2259),n(78350),n(23418),n(23792),n(62062),n(34782),n(30237),n(62010),n(26099),n(27495),n(90906),n(38781),n(47764),n(98992),n(30670),n(3949),n(81454),n(23500),n(62953);var r=n(66401),o=n(97859),a=n(18803),i=n(61225),l=n(85448),c=n(15786),s=n(78196),u=n(53054),f=n(6659),d=n(27989),p=n(40861),m=n(18728),y=n(37802);function g(e,t){return S(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||h(e,t)||v()}function b(e){return S(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||v()}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function S(e){if(Array.isArray(e))return e}function E(e){if((0,o.default)(e))return!1;var t=e.getId();return(0,y.GK)(t)||(0,y.D4)(t)}function O(e){if((0,o.default)(e))return!1;var t=e.getId();return(0,y.GK)(t)||(0,y.TT)(t)||(0,y.aP)(t)||(0,y.D4)(t)}var w=function(e){return e.map((0,a.A)(d.Al))};function T(e){var t=e.getType(),n=e.getCoordinates();switch(t){case"Point":return[{type:m.lo.POINTS,points:w([n])}];case"Circle":var r=e.getCenter();return[{type:m.lo.CIRCLE,points:w([r,[r[0]+e.getRadius(),r[1]]])}];case"LineString":return[{type:m.lo.LINE_STRING,points:w(n)}];case"Polygon":return(0,d.Sx)(n.map(w)).map(function(e){return e.map(function(e){return e.slice(0,-1)})}).map(function(e){var t=b(e),n=t[0],r=A(t).slice(1);return{type:m.lo.POLYGON,points:n,holes:r}});case"MultiPolygon":return e.getPolygons().flatMap(T);default:throw new Error("Unsupported feature geometry type: "+t)}}function C(e){return T(e.getGeometry())}function I(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.event,i=o.type,d={},m=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(e);try{var v=function(){var e=n.value,r=e.getId(),o=(0,y.hy)(r);if(o){var c=b(C(e)),m=c[0],v=A(c).slice(1);return d[o]=m,v.forEach(function(e){t((0,l.g5)(o,e))}),0}var h=(0,y.Xf)(r);if(h){if(h===y.aU+"$x"||h===y.aU+"$y"){var S=g(C(e),1)[0],E=h===y.aU+"$y",O=e.getGeometry().getCoordinates(),w=S.points[0],T=90-(0,p.xW)(Math.atan2(O[1][1]-O[0][1],O[1][0]-O[0][0]));E&&(T+=90),t((0,s._F)({position:w,angle:T}))}return 0}if((0,y.Mc)(r)===y.H4)return"transform"===i&&("move"===a.subType&&a.delta?t((0,f.Ck)(a.delta)):"rotate"===a.subType&&a.angleDelta&&a.origin&&t((0,f.mR)((0,p.xW)(a.angleDelta),a.origin))),0;var I=(0,y.CF)(r);return I?(t((0,u.Lz)(I,C(e)[0])),0):void 0};for(m.s();!(n=m.n()).done;)v()}catch(e){m.e(e)}finally{m.f()}(0,r.A)(d)||t((0,c.oP)(d))}var x=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];(0,i.vA)(function(){I.apply(void 0,t)})}},49680:(e,t,n)=>{"use strict";function r(e){return e.session?.featureIdForTooltip}function o(e){return e.session?.broadcast}function a(e){return e.session?.developerMode}n.d(t,{Oo:()=>r,Si:()=>o,r2:()=>a})},49721:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(85072),o=n.n(r),a=n(97825),i=n.n(a),l=n(77659),c=n.n(l),s=n(55056),u=n.n(s),f=n(10540),d=n.n(f),p=n(41113),m=n.n(p),y=n(14024),g={};g.styleTagTransform=m(),g.setAttributes=u(),g.insert=c().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=d();o()(y.A,g);const b=y.A&&y.A.locals?y.A.locals:void 0},49947:(e,t,n)=>{"use strict";e.exports=n.p+"c21727b877af05fcd8e8.woff2"},50256:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});n(52675),n(89463),n(2259),n(45700),n(28706),n(23418),n(74423),n(23792),n(62062),n(34782),n(26910),n(89572),n(62010),n(2892),n(40875),n(79432),n(10287),n(26099),n(60825),n(27495),n(90906),n(38781),n(21699),n(47764),n(98992),n(81454),n(62953);var r=n(75796),o=n(48227),a=n(55370),i=n(57862),l=n(25418),c=n(91799),s=n(82181),u=n(32483),f=n(49068),d=n(30073),p=n(40644),m=n(17613),y=n(16738),g=n(37603),b=n(33682),v=n(54930),h=n(83869),A=n(57456),S=n(5556),E=n.n(S),O=n(96540),w=n(78641),T=n(72732);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D(r.key),r)}}function P(e,t,n){return t=_(t),function(e,t){if(t&&("object"==C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,k()?Reflect.construct(t,n||[],_(e).constructor):t.apply(e,n))}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k=function(){return!!e})()}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function R(e,t,n){return(t=D(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}var M=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),R(n=P(this,t,[e]),"_tryUpdateDeviceList",function(){T.A._emitter&&T.A.sendMessage({type:"DEV-LIST",ids:Object.keys(w.Ay._uavsById)}).then(n._deviceListReceived)}),R(n,"_deviceListReceived",function(e){for(var t=e.body.devices,r={All:{}},o=0,a=Object.keys(t);o<a.length;o++){var i=a[o];r[i]={};for(var l=0,c=Object.keys(t[i].children);l<c.length;l++){var s=c[l];for(var u in s in r.All||(r.All[s]={}),r[i][s]={},t[i].children[s].children)t[i].children[s].children[u].operations.includes("read")&&(u in r.All[s]||(r.All[s][u]={unit:t[i].children[s].children[u].unit}),r[i][s][u]={unit:t[i].children[s].children[u].unit})}}n.setState({available:r})}),R(n,"_handleChange",function(e){var t=e.target.name;n.setState(R({},t,e.target.value))}),R(n,"_handleClick",function(){var e=n.state,t=e.available,r=e.selectedChannel,o=e.selectedDevice,a=e.selectedUAV;if("All"===n.state.selectedUAV){var i=[];for(var l in(0,v.A)(t,"All"))o in t[l]&&r in t[l][o]&&i.push("/".concat(l,"/").concat(o,"/").concat(r));T.A.sendMessage({type:"DEV-UNSUB",paths:n.state.subscriptions}),T.A.sendMessage({type:"DEV-SUB",paths:i}),n.setState({subscriptions:i,unit:t[a][o][r].unit})}else{var c=n.currentPath;T.A.sendMessage({type:"DEV-SUB",paths:[c]}),n.setState(function(e){return{subscriptions:e.subscriptions.concat(c),unit:t[a][o][r].unit}})}}),R(n,"_removeSubscription",function(e){T.A.sendMessage({type:"DEV-UNSUB",paths:[e]}),n.setState(function(t){return{subscriptions:(0,A.default)(t.subscriptions,e)}})}),R(n,"showDialog",function(){n._tryUpdateDeviceList(),n.setState({visible:!0})}),R(n,"_hideDialog",function(){n.props.setSubscriptions(n.state.subscriptions),n.props.setUnit(n.state.unit),n.setState({visible:!1})}),n.state={visible:!1,subscriptions:e.subscriptions,unit:e.unit,available:{},selectedUAV:null,selectedDevice:null,selectedChannel:null},n._removeSubscription=n._removeSubscription.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(t,e),n=t,(S=[{key:"render",value:function(){var e=this,t=this.state,n=t.available,v=t.selectedChannel,A=t.selectedDevice,S=t.selectedUAV,E=t.subscriptions,w=t.visible,T=Object.keys(n).sort().map(function(e){return O.createElement(g.A,{key:e,value:e},e)});0===T.length&&T.push(O.createElement(g.A,{key:"__empty__",value:""},O.createElement("em",null,"No UAV")));var C=S?Object.keys(n[S]).sort().map(function(e){return O.createElement(g.A,{key:e,value:e},e)}):[],x=A?Object.keys(n[S][A]).sort().map(function(e){return O.createElement(g.A,{key:e,value:e},e)}):[],j=I(E).sort().map(function(t){return O.createElement(p.Ay,{key:t},O.createElement(y.A,{primary:t}),O.createElement(m.A,null,O.createElement(u.A,{edge:"end","aria-label":"Unsubscribe",size:"large",onClick:(0,h.A)(e._removeSubscription,t)},O.createElement(r.A,null))))}),P=[O.createElement(o.A,{key:"done",color:"primary",onClick:this._hideDialog},"Done")],k={minWidth:120,margin:8,verticalAlign:"text-bottom"};return O.createElement(a.A,{fullWidth:!0,open:w,maxWidth:"sm"},O.createElement(l.A,null,O.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},O.createElement(s.A,{row:!0},O.createElement(c.A,{style:k},O.createElement(f.A,{htmlFor:"selectedUAV"},"UAV"),O.createElement(b.A,{value:S||"",inputProps:{name:"selectedUAV",id:"selectedUAV"},onChange:this._handleChange},T)),O.createElement(c.A,{style:k},O.createElement(f.A,{htmlFor:"selectedDevice"},"Device"),O.createElement(b.A,{value:A||"",inputProps:{name:"selectedDevice",id:"selectedDevice"},onChange:this._handleChange},C)),O.createElement(c.A,{style:k},O.createElement(f.A,{htmlFor:"selectedChannel"},"Channel"),O.createElement(b.A,{value:v||"",inputProps:{name:"selectedChannel",id:"selectedChannel"},onChange:this._handleChange},x))),O.createElement(o.A,{style:{marginBottom:6},disabled:E.includes(this.currentPath),onClick:this._handleClick},"Subscribe")),O.createElement(d.A,null,j)),O.createElement(i.A,null,P))}},{key:"currentPath",get:function(){return"/".concat(this.state.selectedUAV,"/").concat(this.state.selectedDevice,"/").concat(this.state.selectedChannel)}}])&&j(n.prototype,S),E&&j(n,E),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,S,E}(O.Component);R(M,"propTypes",{subscriptions:E().arrayOf(E().string),unit:E().string,setSubscriptions:E().func,setUnit:E().func})},51012:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>h,GY:()=>d,Pl:()=>f,Q3:()=>y,RQ:()=>g,Xu:()=>m,eV:()=>p,jr:()=>v,np:()=>u,po:()=>b});var r=n(57231),o=n(65307),a=n(16238),i=n(39441);const l={averagingResults:a.Tg,averagingDialog:{open:!1,selectedUAVIds:[]}},{actions:c,reducer:s}=(0,o.Z0)({name:"measurement",initialState:l,reducers:{closeAveragingDialog:(0,i.kP)(e=>{e.averagingDialog.open=!1}),showAveragingDialog:(0,i.kP)(e=>{e.averagingDialog.open=!0}),setSelectedUAVIdsForAveragingMeasurement(e,t){e.averagingDialog.selectedUAVIds=[...t.payload]},startAveragingUAVCoordinateById(e,t){const n=t.payload;(0,a.ch)(e.averagingResults,{id:n,startedAt:Date.now(),lastSampleAt:void 0,numSamples:0,extraSamplingTime:0,sampling:!0,mean:{lat:0,lon:0,amsl:0,ahl:0},sqDiff:{lat:0,lon:0,amsl:0,ahl:0}})},pauseAveragingUAVCoordinatesByIds(e,t){const n=t.payload,r=e.averagingResults;for(const e of n){const t=r.byId[e];t&&"number"==typeof t.startedAt&&(t.sampling=!1,t.extraSamplingTime+=Date.now()-t.startedAt,t.startedAt=void 0,t.lastSampleAt=void 0)}},restartAveragingUAVCoordinatesByIds(e,t){const n=t.payload,r=e.averagingResults;for(const e of n){const t=r.byId[e];t&&(r.byId[e]={...t,startedAt:Date.now(),lastSampleAt:void 0,numSamples:0,extraSamplingTime:0,sampling:!0,mean:{lat:0,lon:0,amsl:0,ahl:0},sqDiff:{lat:0,lon:0,amsl:0,ahl:0}})}},resumeAveragingUAVCoordinatesByIds(e,t){const n=t.payload;for(const t of n){const n=e.averagingResults.byId[t];n&&(n.sampling=!0,n.startedAt=Date.now())}},stopAveragingUAVCoordinatesByIds(e,t){const n=t.payload;(0,a.Zj)(e.averagingResults,n),e.averagingDialog.selectedUAVIds=(0,r.A)(e.averagingDialog.selectedUAVIds,e.averagingResults.order)},updateAveragingByIds(e,t){for(const[n,r]of Object.entries(t.payload)){const t=e.averagingResults.byId[n];t&&(t.mean={...t.mean,...r.mean},t.sqDiff={...t.sqDiff,...r.sqDiff},void 0!==r.numSamples&&(t.numSamples=r.numSamples),void 0!==r.lastSampleAt&&(t.lastSampleAt=r.lastSampleAt))}}}}),{closeAveragingDialog:u,pauseAveragingUAVCoordinatesByIds:f,restartAveragingUAVCoordinatesByIds:d,resumeAveragingUAVCoordinatesByIds:p,setSelectedUAVIdsForAveragingMeasurement:m,showAveragingDialog:y,startAveragingUAVCoordinateById:g,stopAveragingUAVCoordinatesByIds:b,updateAveragingByIds:v}=c,h=s},51069:()=>{},51300:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>f,JQ:()=>u,Mj:()=>s});var r=n(65307),o=n(84692),a=n(39441);const i={dialogVisible:!1,selectedLayer:void 0},{actions:l,reducer:c}=(0,r.Z0)({name:"layer-settings-dialog",initialState:i,reducers:{showLayerSettingsDialog(e,{payload:t}){e.dialogVisible=!0,e.selectedLayer=t},closeLayerSettingsDialog:(0,a.kP)(e=>{e.dialogVisible=!1})},extraReducers(e){e.addCase(o.e5,(e,t)=>{e.selectedLayer===t.payload&&(e.dialogVisible=!1,e.selectedLayer=void 0)})}}),{showLayerSettingsDialog:s,closeLayerSettingsDialog:u}=l,f=c},51533:(e,t,n)=>{"use strict";n.d(t,{ED:()=>h,MH:()=>v,Re:()=>b,Xm:()=>A,ap:()=>E});var r=n(38316),o=n.n(r),a=n(25508),i=n(94954),l=n(2652),c=n(27989),s=n(26926);const u=/\.?0+([\xb0\u2032\u2033'"]?)$/,f=(0,c.YG)({digits:2,unit:l.sg}),d=(0,c.Hc)({digits:2,unit:l.sg}),p=(0,c.YG)({digits:7,reverse:!0,separator:" ",unit:"\xb0"}),m={[i.Sq.DEGREES]:([e,t])=>o()(t,e).format("Xdd",{decimalPlaces:7}),[i.Sq.DEGREES_MINUTES]:([e,t])=>o()(t,e).format("XDDmm",{decimalPlaces:4}),[i.Sq.DEGREES_MINUTES_SECONDS]:([e,t])=>o()(t,e).format("XDDMMss",{decimalPlaces:3}),[i.Sq.SIGNED_DEGREES]:p,[i.Sq.SIGNED_DEGREES_MINUTES]:([e,t])=>o()(t,e).format("-DDmm",{decimalPlaces:4}),[i.Sq.SIGNED_DEGREES_MINUTES_SECONDS]:([e,t])=>o()(t,e).format("-DDMMss",{decimalPlaces:3})},y={[i.Sq.DEGREES]:e=>o()(0,e).format("Xdd",{decimalPlaces:7,latLonSeparator:"|"}).split("|")[1].replace(u,"$1"),[i.Sq.DEGREES_MINUTES]:e=>o()(0,e).format("XDDmm",{decimalPlaces:4,latLonSeparator:"|"}).split("|")[1].replace(u,"$1"),[i.Sq.DEGREES_MINUTES_SECONDS]:e=>o()(0,e).format("XDDMMss",{decimalPlaces:3,latLonSeparator:"|"}).split("|")[1].replace(u,"$1"),[i.Sq.SIGNED_DEGREES]:e=>p([e,0]).split(" ")[1].replace(u,"$1"),[i.Sq.SIGNED_DEGREES_MINUTES]:e=>o()(0,e).format("-DDmm",{decimalPlaces:4,latLonSeparator:"|"}).split("|")[1].replace(u,"$1"),[i.Sq.SIGNED_DEGREES_MINUTES_SECONDS]:e=>o()(0,e).format("-DDMMss",{decimalPlaces:3,latLonSeparator:"|"}).split("|")[1].replace(u,"$1")},g={[i.Sq.DEGREES]:e=>o()(e,0).format("Xdd",{decimalPlaces:7,latLonSeparator:"|"}).split("|")[0].replace(u,"$1"),[i.Sq.DEGREES_MINUTES]:e=>o()(e,0).format("XDDmm",{decimalPlaces:4,latLonSeparator:"|"}).split("|")[0].replace(u,"$1"),[i.Sq.DEGREES_MINUTES_SECONDS]:e=>o()(e,0).format("XDDMMss",{decimalPlaces:3,latLonSeparator:"|"}).split("|")[0].replace(u,"$1"),[i.Sq.SIGNED_DEGREES]:e=>p([0,e]).split(" ")[0].trim().replace(u,"$1"),[i.Sq.SIGNED_DEGREES_MINUTES]:e=>o()(e,0).format("-DDmm",{decimalPlaces:4,latLonSeparator:"|"}).split("|")[0].replace(u,"$1"),[i.Sq.SIGNED_DEGREES_MINUTES_SECONDS]:e=>o()(e,0).format("-DDMMss",{decimalPlaces:3,latLonSeparator:"|"}).split("|")[0].replace(u,"$1")},b=e=>e.settings.display.coordinateFormat,v=(0,a.Mz)(b,e=>m[e]||p),h=(0,a.Mz)(b,e=>g[e]||g[i.Sq.SIGNED_DEGREES]),A=(0,a.Mz)(b,e=>y[e]||y[i.Sq.SIGNED_DEGREES]),S=((0,a.Mz)(s.dk,e=>{if(void 0!==e)return t=>f(e.fromLonLat(t))}),(0,a.Mz)(s.dk,e=>{if(void 0!==e)return t=>d((0,c.q8)(e.fromLonLat(t)))}),(0,a.Mz)(s.dk,e=>{if(void 0!==e)return t=>{const n=e.fromLonLat(t);return f(n)+"<br/>"+d((0,c.q8)(n))}})),E=(0,a.Mz)(v,S,(e,t)=>n=>{const r=e(n);return void 0===t?r:r+"<br/>"+t(n)})},51870:(e,t,n)=>{"use strict";n.d(t,{Av:()=>u,Ay:()=>g,Bx:()=>s,Im:()=>y,bo:()=>i,qy:()=>d,rE:()=>p,yE:()=>m});var r=n(65307),o=n(25508);const a=new class{#t={};#n=new TextEncoder;write=async e=>{const t=Array.from(new Uint8Array(await window.crypto.subtle.digest("SHA-1",this.#n.encode(e))),e=>e.toString(16).padStart(2,"0")).join("");return this.#t[t]=e,t};read=e=>this.#t[e]};var i;!function(e){e.LOADING="loading",e.ERROR="error",e.SUCCESS="success"}(i||(i={}));const{actions:l,reducer:c}=(0,r.Z0)({name:"log-download",initialState:{},reducers:{setLogDownloadProgress:{prepare:(e,t,n)=>({payload:{uavId:e,logId:t,progress:n}}),reducer(e,{payload:{uavId:t,logId:n,progress:r}}){(e[t]??={})[n]={status:i.LOADING,progress:r}}},setLogDownloadError:{prepare:(e,t,n)=>({payload:{uavId:e,logId:t,error:n}}),reducer(e,{payload:{uavId:t,logId:n,error:r}}){(e[t]??={})[n]={status:i.ERROR,error:r}}},setLogDownloadValue:{prepare:(e,t,n)=>({payload:{uavId:e,logId:t,value:n}}),reducer(e,{payload:{uavId:t,logId:n,value:r}}){(e[t]??={})[n]={status:i.SUCCESS,value:r}}}}}),{setLogDownloadError:s,setLogDownloadProgress:u,setLogDownloadValue:f}=l,d=(e,t)=>n=>{n(u(e,t))},p=(e,t,n)=>async r=>{const o=await a.write(n);r(f(e,t,o))},m=(e,t)=>n=>n.logDownload[e]?.[t],y=(e,t)=>(0,o.Mz)(m(e,t),e=>{if(e?.status===i.SUCCESS)return a.read(e.value)}),g=c},52195:(e,t,n)=>{"use strict";e.exports=n.p+"c1c64df77b3cc7dc595a.png"},52614:(e,t,n)=>{"use strict";n.d(t,{F:()=>c,m:()=>r});var r,o=n(49591),a=n(74974);!function(e){e.FULL="Full",e.NEAR_FULL="NearFull",e.OK="Ok",e.WARNING="Warning",e.ERROR="Error",e.UNKNOWN="Unknown"}(r||(r={}));const i={[r.FULL]:o.nW.OFF,[r.NEAR_FULL]:o.nW.OFF,[r.OK]:o.nW.OFF,[r.WARNING]:o.nW.WARNING,[r.ERROR]:o.nW.ERROR,[r.UNKNOWN]:o.nW.OFF},l={[r.FULL]:95,[r.NEAR_FULL]:60,[r.OK]:20,[r.WARNING]:10};class c{defaultBatteryCellCount;fullChargeVoltage;nearFullChargeVoltage;okVoltageThreshold;lowVoltageThreshold;criticalVoltageThreshold;emptyVoltage;constructor({defaultBatteryCellCount:e=a.Fu,voltageThresholds:{full:t=a.r0,low:n=a.X8,critical:r=a.Wq,empty:o=a.yu}={}}={}){this.defaultBatteryCellCount=e,this.fullChargeVoltage=t,this.nearFullChargeVoltage=t-.1*(t-n),this.okVoltageThreshold=t-.4*(t-n),this.lowVoltageThreshold=n,this.criticalVoltageThreshold=Math.min(r,n),this.emptyVoltage=Math.min(o,this.criticalVoltageThreshold)}estimatePercentageFromVoltagePerCell=e=>e<=this.emptyVoltage?0:e>=this.fullChargeVoltage?100:Math.round((e-this.emptyVoltage)/(this.fullChargeVoltage-this.emptyVoltage)*100);estimatePercentageFromVoltage=(e,t)=>{const n=this.getVoltagePerCell(e,t);return this.estimatePercentageFromVoltagePerCell(n)};getSemanticBatteryStatus=(e,t,n)=>{const r=this.getBatteryStatus(e,t,n);return i[r]};getBatteryStatus=(e,t,n)=>{if(t)return t>l[r.FULL]?r.FULL:t>l[r.NEAR_FULL]?r.NEAR_FULL:t>l[r.OK]?r.OK:t>l[r.WARNING]?r.WARNING:r.ERROR;const o=this.getVoltagePerCell(e,n);return o>this.nearFullChargeVoltage?r.FULL:o>=this.okVoltageThreshold?r.NEAR_FULL:o>=this.lowVoltageThreshold?r.OK:o>=this.criticalVoltageThreshold?r.WARNING:r.ERROR};getVoltagePerCell=(e,t=this.defaultBatteryCellCount)=>!e||t<1?0:e/t}},52706:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});const r="missionItemUpload"},53051:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAKUlEQVR4nGNgYGD4z4Af/Mdg4FKASwCnDf8JKSBoAtEmEXQTQd8RDCcA6+4Q8OvIgasAAAAASUVORK5CYII="},53054:(e,t,n)=>{"use strict";n.d(t,{CV:()=>Q,Dn:()=>X,Ig:()=>Ee,Kt:()=>re,LM:()=>Se,Lz:()=>de,O_:()=>be,_L:()=>ue,a6:()=>oe,c1:()=>se,dZ:()=>te,dd:()=>ge,fC:()=>fe,h9:()=>ne,lY:()=>ee,o2:()=>le,tv:()=>ie,uf:()=>me,ut:()=>ce});n(52675),n(89463),n(2259),n(83237),n(45700),n(28706),n(2008),n(23418),n(23792),n(48598),n(62062),n(34782),n(89572),n(62010),n(33110),n(36033),n(2892),n(32637),n(25843),n(9868),n(69085),n(83851),n(81278),n(40875),n(79432),n(10287),n(26099),n(3362),n(84864),n(57465),n(27495),n(87745),n(90906),n(38781),n(31415),n(47764),n(71761),n(25440),n(11392),n(42762),n(73772),n(98992),n(54520),n(3949),n(81454),n(8872),n(23500),n(62953);var r=n(41105),o=n(1932),a=n(97859),i=n(41470),l=n(93340),c=n(34890),s=n(37566),u=n(85448),f=n(71042),d=n(77855),p=n(26239),m=n(37813),y=n(58718),g=n(67932),b=n(86676),v=n(40881),h=n(92895),A=n(98978),S=n(72732),E=n(18728),O=n(37802),w=n(62528),T=n(57632),C=n(92680),I=n(27989),x=n(75348),j=n(39441),P=n(74144),k=n(52706),_=n(46972),N=n(35026),R=n(16054),D=n(89536);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){F(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function F(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(){U=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,o){var a=RegExp(e,r);return t.set(a,o||t.get(e)),G(a,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce(function(t,n){var o=r[n];if("number"==typeof o)t[n]=e[o];else{for(var a=0;void 0===e[o[a]]&&a+1<o.length;)a++;t[n]=e[o[a]]}return t},Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var o=n.indices;o&&(o.groups=r(o,this))}return n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var a=t.get(this);return e[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)(>|$)/g,function(e,t,n){if(""===n)return e;var r=a[t];return Array.isArray(r)?"$"+r.join("$"):"number"==typeof r?"$"+r:""}))}if("function"==typeof o){var i=this;return e[Symbol.replace].call(this,n,function(){var e=arguments;return"object"!=V(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,i)),o.apply(this,e)})}return e[Symbol.replace].call(this,n,o)},U.apply(this,arguments)}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=W(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function H(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function K(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return Y(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Y(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Y(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,Y(f,"constructor",s),Y(s,"constructor",c),c.displayName="GeneratorFunction",Y(s,o,"GeneratorFunction"),Y(f),Y(f,o,"Generator"),Y(f,r,function(){return this}),Y(f,"toString",function(){return"[object Generator]"}),(K=function(){return{w:a,m:d}})()}function Y(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Y=function(e,t,n,r){function a(t,n){Y(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},Y(e,t,n,r)}function $(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Z(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){$(a,r,o,i,l,"next",e)}function l(e){$(a,r,o,i,l,"throw",e)}i(void 0)})}}var J=(0,j.vR)("mission/calculateMapping",function(){var e=Z(K().m(function e(t){var n,r,o,a,i=arguments;return K().w(function(e){for(;;)switch(e.n){case 0:for(n=i.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=i[o];return e.n=1,P.A.findGreedyAssignment.apply(P.A,r);case 1:a=e.v,t.result=a;case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),{minDelay:500}),X=function(){return function(){var e=Z(K().m(function e(t,n){var r,o,i,l,c,s,u,f,d,p,y,g,b,h,A,S,E,O,w,T;return K().w(function(e){for(;;)switch(e.n){case 0:return r=n(),o=(0,m.nk)(r),i=o?(0,m.Oy)(r):(0,N.vT)(r),l=o?v.OX:v.fk,c=(0,N.fA)(r),s=c.filter(function(e){return!(0,a.default)(i[e])}),u=s.map(function(e){return{index:e,position:i[e]}}).filter(function(e){var t=e.position;return o?Array.isArray(t):!(0,a.default)(t)}),f=(0,v.jd)(r),d=f.map(function(e){return{uavId:e,position:l(r,e)}}).filter(function(e){var t=e.position;return o?Array.isArray(t):!(0,a.default)(t)}),p=o?function(e){return[e.position[0],e.position[1]]}:function(e){return[e.position.lon,e.position.lat]},y=o?"euclidean":"geodetic",g=o?1:3,b={result:void 0},e.n=1,t(J(b,d.map(p),u.map(p),{distanceMetric:y,threshold:g}));case 1:h=b.result,A=H((0,N.VZ)(r)),S=z(h);try{for(S.s();!(E=S.n()).done;)O=B(E.value,2),w=O[0],T=O[1],A[u[T].index]=d[w].uavId}catch(e){S.e(e)}finally{S.f()}t((0,R.$q)(A));case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()},Q=function(){return function(e){e((0,R.MH)()),e(X())}},ee=function(){return function(e,t){e((0,R.MH)());var n=t(),r=(0,v.Ev)(n),o=(0,N.VZ)(n).length;if(r.length>=o)e((0,R.$q)((0,l.A)(r).slice(0,o)));else{var a,i=H((0,N.VZ)(n)),c=(0,l.A)(Array.from(Array.from({length:o}).keys())),s=z(r);try{for(s.s();!(a=s.n()).done;){var u=a.value;i[c.pop()]=u}}catch(e){s.e(e)}finally{s.f()}e((0,R.$q)(i))}}},te=function(){return function(){var e=Z(K().m(function e(t,n){var r,o,a,i,l,c,s,u;return K().w(function(e){for(;;)switch(e.n){case 0:if(r=n(),(0,m.kP)(r)){e.n=1;break}throw new Error("Virtual drones are supported for outdoor missions only");case 1:if(o=(0,m.Jn)(r),a=(0,m.EG)(r),i=(0,m.Ok)(r),o.origin&&"object"===V(o.origin)){e.n=2;break}throw new Error("Outdoor coordinate system not set up yet");case 2:return l=(0,N.vT)(r).filter(Boolean),c=l.length,s=String(c).length,e.n=3,S.A.query.getConfigurationOfExtension("virtual_uavs");case 3:return(u=e.v).origin=o.origin.slice(0,2),u.orientation=i,u.type=o.type,u.takeoff_area={type:"explicit",coordinates:l.map(function(e){var t=e.lat,n=e.lon,r=B(a.fromLonLat([n,t]),2),o=r[0],i=r[1];return[o.toFixed(2),i.toFixed(2)]})},u.id_format="{0:0".concat(s,"}"),u.count=u.takeoff_area.coordinates.length,e.n=4,S.A.execute.configureExtension("virtual_uavs",u);case 4:return e.n=5,S.A.execute.reloadExtension("virtual_uavs");case 5:t((0,y.Te)("Virtual drones configured successfully."));case 6:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()},ne=function(){return function(){var e=Z(K().m(function e(t,n){var r,o,a;return K().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=(0,N.Zz)(n()),o=(0,m.WC)(n()),e.p=1,e.n=2,(0,C.Gq)(r,o,{title:"Export mapping",properties:["createDirectory","showOverwriteConfirmation","dontAddToRecent"]});case 2:e.n=4;break;case 3:e.p=3,a=e.v,t((0,y.Qg)("Error while exporting mapping: ".concat(String(a))));case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t,n){return e.apply(this,arguments)}}()},re=function(){return function(){var e=Z(K().m(function e(t,n){var r,o,a,i,l,c,s,u,f,d,p,m;return K().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,C.iA)({title:"Import mapping",properties:["openFile","dontAddToRecent"]});case 1:r=e.v,o=(0,N.VZ)(n()).concat(),a=r.split("\n"),i=0,l=z(a),e.p=2,l.s();case 3:if((c=l.n()).done){e.n=8;break}if(s=(s=c.value).trim(),i++,0!==s.length&&!s.startsWith("#")){e.n=4;break}return e.a(3,7);case 4:if(u=s.match(U(/^(\d+)(\s+(.*))?$/,{index:1,uavId:3}))){e.n=5;break}throw new Error("Malformed line ".concat(i," in mapping file"));case 5:if(f=u.groups.uavId,d=Number.parseInt(u.groups.index,10),Number.isInteger(d)&&!(d<=0)){e.n=6;break}throw new Error("Invalid mission index in line ".concat(i," of mapping file"));case 6:d<=o.length&&(o[d-1]=f&&f.length>0?f:null);case 7:e.n=3;break;case 8:e.n=10;break;case 9:e.p=9,p=e.v,l.e(p);case 10:return e.p=10,l.f(),e.f(10);case 11:t((0,R.$q)(o)),e.n=13;break;case 12:e.p=12,m=e.v,t((0,y.Qg)("Error while importing mapping: ".concat(String(m))));case 13:return e.a(2)}},e,null,[[2,9,10,11],[0,12]])}));return function(t,n){return e.apply(this,arguments)}}()},oe=function(){return function(e,t){var n=t(),r=(0,v.WF)(n);e((0,R.Wb)(r))}},ae=function(){return function(e,t){var n=t(),r=(0,v.BB)(n);if(r){var o=(0,v.fk)(n,r);e((0,R.FH)(1)),e((0,R.$q)([r])),o&&e((0,R.fH)([o]))}else{var a=(0,f.gZ)(E.lo.POINTS)(n);e((0,R.FH)(1)),e((0,R.$q)([a]));var i=B((0,f.je)(n,a).points[0],2),l=i[0],c=i[1];e((0,R.fH)([{lon:l,lat:c,agl:0,amsl:void 0}]))}}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.IU.UNKNOWN,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){var o=r(),a=(0,N.jH)(o),i={id:(0,x.KN)("missionItem",a),type:e,parameters:t};return n((0,R.B)({item:i})),i}},le=function(e){return function(){var t=Z(K().m(function t(n,r){var o,a,i;return K().w(function(t){for(;;)switch(t.n){case 0:return o=r(),a=(0,N.jH)(o)[e],t.n=1,n((0,d.an)({initialValues:a.parameters,schema:L({title:w.XV[a.type],type:"object"},w.kE[a.type])}));case 1:i=t.v,n((0,R.RQ)(e,i));case 2:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}()},ce=function(e){return function(t){var n=e.lon,r=e.lat;t(ie(w.IU.GO_TO,{lon:n,lat:r}))}},se=function(e){if(1!==e&&-1!==e)throw new Error("Only delta = +/-1 is supported");return function(t,n){var r=n();if((0,N.r5)(e)(r)){var o=B((0,N.LI)(r),2),a=o[0],i=o[1];-1===e?t((0,R.JK)(a-1,i)):1===e&&t((0,R.JK)(i+1,a))}}},ue=function(){return function(e,t){var n=(0,N.$I)(t());e((0,R.Oy)(n))}},fe=function(e){return(0,s.td)(e.map(O.S2))},de=function(e,t){return function(n,r){var a=(0,N.SA)(r(),e);n((0,R.RQ)(a.id,(0,o.jM)(a.parameters,function(e){switch(a.type){case w.IU.GO_TO:var n=B(t.points[0],2);e.lon=n[0],e.lat=n[1];break;case w.IU.UPDATE_FLIGHT_AREA:e.flightArea.polygons[0].points=t.points}})))}},pe=function(e){return function(t){var n,r=[],o=z(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;a&&(0,w.SO)(a)&&r.push(a)}}catch(e){o.e(e)}finally{o.f()}t((0,R.Vh)(r))}},me=function(){return function(e,t){var n=t();if(void 0!==(0,v.BB)(n)){var r=(0,D.ef)(n);e((0,h.mP)({job:{type:k.j,payload:r}}))}}},ye=function(e){return e.type===w.IU.UPDATE_FLIGHT_AREA?(0,o.jM)(e,function(e){var t,n=z(e.parameters.flightArea.polygons);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.points=r.points.map(I.Yo)}}catch(e){n.e(e)}finally{n.f()}}):e},ge=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).resume,t=void 0!==e&&e;return function(){var e=Z(K().m(function e(n,r){var o,a,l,s,f,d,m,v,h,O,T,C,I,x;return K().w(function(e){for(;;)switch(e.p=e.n){case 0:o=r(),a=t?structuredClone((0,N.lE)(o)):{missionType:(0,N.tS)(o),fromUser:(0,N.ok)(o),fromContext:(0,N.a2)(o),valuesFromContext:{}},l=a.missionType,s=a.fromUser,f=a.fromContext,d=a.valuesFromContext,m=t?(0,i.A)(f,function(e,t){return _.jK[t]===_.Pu.DYNAMIC}):f,_.R6.SELECTED_UAV_COORDINATE in m&&n((0,b.Bl)()),_.R6.SELECTED_COORDINATE in m&&(n((0,b.Bl)()),n((0,u.en)(E.lo.POINTS))),_.R6.SELECTED_POLYGON_FEATURE in m&&n((0,u.en)(E.lo.POLYGON)),_.R6.SELECTED_LINE_STRING_FEATURE in m&&n((0,u.en)(E.lo.LINE_STRING)),e.p=1,Object.assign(d,(0,_.iH)(m,r)),e.n=3;break;case 2:return e.p=2,I=e.v,n((0,c.f)("Error while setting parameters",I)),e.a(2);case 3:return v=L(L({},d),s),h=null,O=null,e.p=4,e.n=5,S.A.execute.planMission({id:l,parameters:v});case 5:if(T=e.v,h=T.name,O=T.items,Array.isArray(O)){e.n=6;break}throw new TypeError("Expected an array of mission items");case 6:e.n=8;break;case 7:e.p=7,(x=e.v)instanceof A.F0?n((0,c.f)("Failed to plan mission on the server",x)):n((0,c.f)("Error while invoking mission planner",x));case 8:Array.isArray(O)&&(n((0,R.V7)(w.Pp.WAYPOINT)),n((0,R.CA)(h)),n(pe(O.map(ye))),n(ae()),n((0,R.$V)()),(0,N.ij)(o)&&"user"!==(null===(C=(0,N.TF)(o))||void 0===C?void 0:C.owner)&&n((0,p.E5)()),n((0,R.RK)({missionType:l,fromUser:s,fromContext:f,valuesFromContext:d})),n((0,y.Ds)({message:"Mission planned successfully. Would you like to export it?",semantics:g.N.SUCCESS,buttons:[{label:"Export",action:Se()}],permanent:!0,topic:"export-suggestion"})));case 9:return e.a(2)}},e,null,[[4,7],[1,2]])}));return function(t,n){return e.apply(this,arguments)}}()},be=function(){return function(e,t){e(ve()),e((0,R.V7)(w.Pp.UNKNOWN)),e((0,R.CA)(null)),e((0,R.RK)(null)),e(pe([])),e((0,R.FH)(0)),e((0,y.Ds)({message:"Previous mission cleared.",semantics:g.N.INFO,buttons:[{label:"Undo",action:Ae()}],permanent:!0,topic:"mission-cleared"}))}},ve=function(){return function(e,t){e((0,R.z$)((0,N.VT)(t())))}},he=function(e){var t=e.lastSuccessfulPlannerInvocationParameters,n=e.name,r=e.items,o=e.homePositions,a=e.progress,i=a.id,l=a.ratio;return function(e,a){var c,s;e((0,R.V7)(w.Pp.WAYPOINT)),e((0,R.CA)(n)),e(pe(r)),e((0,R.FH)(o.length)),e((0,R.fH)(o)),e((0,R.n2)(i)),e((0,R.NO)(l)),t&&(e((0,R.RK)(t)),e((0,R.Ky)(t.missionType)),e((0,R.gG)(t.fromUser)),e((c=t.fromContext,s=t.valuesFromContext,function(e,t){var n,r,o,a,i,l,f,d=t(),p=z(null!==(n=c[_.R6.SELECTED_LINE_STRING_FEATURE])&&void 0!==n?n:[]);try{for(p.s();!(f=p.n()).done;){var m=f.value;e((0,u.$q)({type:E.lo.LINE_STRING,points:s[m].map(I.Yo),label:m,owner:"user"},["type","points"]))}}catch(e){p.e(e)}finally{p.f()}var y,g=z([].concat(H(null!==(r=c[_.R6.SELECTED_MARKER_FEATURE])&&void 0!==r?r:[]),H(0===(0,v.Ev)(d).length?[].concat(H(null!==(o=c[_.R6.SELECTED_UAV_COORDINATE])&&void 0!==o?o:[]),H(null!==(a=c[_.R6.SELECTED_COORDINATE])&&void 0!==a?a:[])):[])));try{for(g.s();!(y=g.n()).done;){var b=y.value;e((0,u.$q)({type:E.lo.POINTS,points:[(0,I.Yo)(s[b])],label:b,owner:"user"},["type","points"]))}}catch(e){g.e(e)}finally{g.f()}var h,A=z(null!==(i=c[_.R6.SELECTED_POLYGON_FEATURE])&&void 0!==i?i:[]);try{for(A.s();!(h=A.n()).done;){var S,O=h.value;e((0,u.$q)({type:E.lo.POLYGON,points:s[O].points.map(I.Yo),holes:null===(S=s[O].holes)||void 0===S?void 0:S.map(function(e){return e.map(I.Yo)}),label:O,owner:"user"},["type","points","holes"]))}}catch(e){A.e(e)}finally{A.f()}var w,T=z(null!==(l=c[_.R6.EXCLUSION_ZONE_POLYGONS])&&void 0!==l?l:[]);try{for(T.s();!(w=T.n()).done;){var C,x=w.value,j=z(s[x]);try{for(j.s();!(C=j.n()).done;){var P,k=C.value;e((0,u.$q)({type:E.lo.POLYGON,points:k.points.map(I.Yo),holes:null===(P=k.holes)||void 0===P?void 0:P.map(function(e){return e.map(I.Yo)}),label:x,owner:"user",attributes:{isExclusionZone:!0}},["type","points","holes"]))}}catch(e){j.e(e)}finally{j.f()}}}catch(e){T.e(e)}finally{T.f()}})))}},Ae=function(){return function(e,t){e(he((0,N.p0)(t()))),e((0,y.Ds)({topic:"mission-cleared"})),e((0,y.Te)("Mission restored successfully"))}},Se=function(){return function(e,t){var n=t(),o=(0,r.A)(new Date,"yyyy-MM-dd_HH-mm-ss"),a=(0,N.VT)(n),i={exportedAt:o,skybrushVersion:"cb4c1078"};(0,C.Gq)(JSON.stringify({meta:i,mission:a},null,2),"mission-export-".concat(o,".json"),{title:"Export mission data"}),e((0,y.Ds)({topic:"export-suggestion"})),e((0,y.Te)("Successfully exported mission"))}},Ee=function(e){return function(){var t=Z(K().m(function t(n,r){var o,a,i;return K().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,a=JSON,t.n=1,(0,T.Qv)(e);case 1:o=a.parse.call(a,t.v),n(he(o.mission)),n((0,y.Te)("Successfully imported mission")),t.n=3;break;case 2:t.p=2,i=t.v,n((0,y.Qg)("Error while importing mission: ".concat(i)));case 3:return t.a(2)}},t,null,[[0,2]])}));return function(e,n){return t.apply(this,arguments)}}()}},53123:(e,t,n)=>{"use strict";n.d(t,{g_:()=>r.A,g7:()=>T,T5:()=>C.Ay,XY:()=>Se,ri:()=>Ee.A,hy:()=>Ie});var r=n(7598),o=n(74848),a=n(30193),i=n(75811),l=n(20224),c=n(87945),s=n(68669),u=n(72057),f=n(39006),d=n(28964),p=n(15548),m=n(32483),y=n(83869),g=n(96540),b=n(32389),v=n(59952),h=n(28749),A=n(8244),S=n(9792);const E=(0,S.A)((0,o.jsx)("path",{d:"M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z"}),"ContentCut"),O=(0,S.A)((0,o.jsx)("path",{d:"M3 3 L20.38 15.16 L15.16 20.38 L3 3z"}),"EditFeature"),w={"add-marker":{tool:v.NL.DRAW_POINT,label:(0,A.tt)("DrawingToolbar.addMarker"),icon:i.A},"add-waypoint":{tool:v.NL.ADD_WAYPOINT,label:(0,A.tt)("DrawingToolbar.addWaypoint"),icon:c.A},"cut-hole":{tool:v.NL.CUT_HOLE,label:(0,A.tt)("DrawingToolbar.cutHole"),icon:E},"draw-circle":{tool:v.NL.DRAW_CIRCLE,label:(0,A.tt)("DrawingToolbar.drawCircle"),icon:l.A},"draw-path":{tool:v.NL.DRAW_PATH,label:(0,A.tt)("DrawingToolbar.drawPath"),icon:u.A},"draw-polygon":{tool:v.NL.DRAW_POLYGON,label:(0,A.tt)("DrawingToolbar.drawPolygon"),icon:f.A},"draw-rectangle":{tool:v.NL.DRAW_RECTANGLE,label:(0,A.tt)("DrawingToolbar.drawRectangle"),icon:a.A},"edit-feature":{tool:v.NL.EDIT_FEATURE,label:(0,A.tt)("DrawingToolbar.editFeature"),icon:O},select:{tool:v.NL.SELECT,label:(0,A.tt)("general.action.select"),icon:s.A},zoom:{tool:v.NL.ZOOM,label:(0,A.tt)("general.geometry.zoom"),icon:d.A}},T=(0,b.CI)()(({drawingTools:e,onToolSelected:t,selectedTool:n,t:r})=>{const a=e=>n===e?"primary":void 0;return(0,o.jsx)("div",{style:{display:"flex",flexFlow:"column nowrap"},children:e.flatMap(e=>[(0,o.jsx)(p.A,{},`drawing-toolbar-group:${e.join(",")}`),...e.map(e=>{const{tool:n,label:i,icon:l}=w[e];return(0,o.jsx)(h.W1,{content:i(r),placement:"right",children:(0,o.jsx)(m.A,{size:"large",onClick:(0,y.A)(t,n),children:(0,o.jsx)(l,{color:a(n)})})},e)})]).slice(1)})});var C=n(87163),I=(n(52675),n(89463),n(2259),n(45700),n(23418),n(74423),n(23792),n(62062),n(34782),n(89572),n(62010),n(2892),n(40875),n(10287),n(26099),n(3362),n(60825),n(27495),n(90906),n(38781),n(47764),n(98992),n(23215),n(81454),n(62953),n(82077)),x=n(17737),j=n(37007),P=n(82139),k=n(29608),_=n(92602),N=n(4510),R=n(15443),D=n(54192),M=n(35825),L=n(15147),F=n(35246),U=n(65944),G=n(55282),V=n(65341),B=n(12070),z=n(37603),H=n(5556),W=n.n(H),q=(n(28706),n(88564)),K=n(89610);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,te(r.key),r)}}function Z(e,t,n){return t=X(t),function(e,t){if(t&&("object"==Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,J()?Reflect.construct(t,n||[],X(e).constructor):t.apply(e,n))}function J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(J=function(){return!!e})()}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}function ee(e,t,n){return(t=te(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y(t)?t:t+""}var ne=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return ee(e=Z(this,t,[].concat(r)),"state",{open:!1,opening:!1,position:{top:0,left:0},context:void 0}),ee(e,"_handleClose",function(){document.body.removeEventListener("contextmenu",e._preventDefault),e.setState({open:!1,opening:!1})}),ee(e,"_preventDefault",function(t){e.state.opening?e.setState({opening:!1,open:!0}):e._handleClose(),t.preventDefault()}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(t,e),n=t,(r=[{key:"open",value:function(e,t){var n=this.props.contextProvider;this.context.addEventListener("contextmenu",this._preventDefault),this.setState({opening:!0,open:!1,context:n?n(t):t,position:e})}},{key:"render",value:function(){var e=this,t=this.props.children,n=this.state,r=n.context,o=n.open,a=n.opening,i=n.position,l=(0,K.default)(t)?t(r||{}):t,c=g.Children.map(l,function(t){return g.cloneElement(t,{onClick:t.props.onClick?function(n){t.props.onClick(n,r),e._handleClose()}:function(){e._handleClose()}})});return g.createElement(h.kF,{open:o||a,anchorReference:"anchorPosition",anchorPosition:i,onClose:this._handleClose},g.createElement(q.A,null,c))}}])&&$(n.prototype,r),o&&$(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(g.Component);ee(ne,"contextType",h.Bz),ee(ne,"propTypes",{children:W().oneOfType([W().node,W().func]),contextProvider:W().func});var re=n(80415),oe=n(41895),ae=n(18728),ie=n(39064);function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ce(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return se(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(se(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,se(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,se(f,"constructor",s),se(s,"constructor",c),c.displayName="GeneratorFunction",se(s,o,"GeneratorFunction"),se(f),se(f,o,"Generator"),se(f,r,function(){return this}),se(f,"toString",function(){return"[object Generator]"}),(ce=function(){return{w:a,m:d}})()}function se(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}se=function(e,t,n,r){function a(t,n){se(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},se(e,t,n,r)}function ue(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,he(r.key),r)}}function me(e,t,n){return t=ge(t),function(e,t){if(t&&("object"==le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ye()?Reflect.construct(t,n||[],ge(e).constructor):t.apply(e,n))}function ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ye=function(){return!!e})()}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}function be(e,t){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},be(e,t)}function ve(e,t,n){return(t=he(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e){var t=function(e,t){if("object"!=le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==le(t)?t:t+""}var Ae=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ve(e=me(this,t),"open",function(t,n){e._contextMenu.current&&e._contextMenu.current.open(t,n)}),ve(e,"_addPointToMission",function(t,n){var r=n.coords,o=e.props.addPointToMission;o&&o({lat:r[1],lon:r[0]})}),ve(e,"_moveSelectedUAVsAtCurrentAltitude",function(e,t){var n=t.coords,r=t.selectedUAVIds;ie.hU(r,{target:{lat:n[1],lon:n[0]}})}),ve(e,"_moveSelectedUAVsAtGivenAltitude",function(){var t,n=(t=ce().m(function t(n,r){var o,a;return ce().w(function(t){for(;;)switch(t.n){case 0:o=ue(r.coords),a=ue(r.selectedUAVIds),e.props.showFlyToTargetDialog({coords:o,uavIds:a});case 1:return t.a(2)}},t)}),function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){de(a,r,o,i,l,"next",e)}function l(e){de(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e,t){return n.apply(this,arguments)}}()),ve(e,"_cutSelectedFeatures",function(t,n){var r=e.props.cutFeature,o=n.selectedFeatures;r&&r(o[1].id,o[0].id)}),ve(e,"_editSelectedFeature",function(t,n){var r=e.props.editFeature,o=n.selectedFeatures;r&&r(o[0].id)}),ve(e,"_takeoffSelectedUAVs",function(e,t){var n=t.selectedUAVIds;ie.CZ(n)}),ve(e,"_landSelectedUAVs",function(e,t){var n=t.selectedUAVIds;ie.jF(n)}),ve(e,"_positionHoldSelectedUAVs",function(e,t){var n=t.selectedUAVIds;ie.Ys(n)}),ve(e,"_unsetSelectedFeatureAsGeofence",function(t,n){var r=e.props.clearGeofencePolygonId;r&&r()}),ve(e,"_setSelectedFeatureAsGeofence",function(t,n){var r,o=e.props.setGeofencePolygonId,a=n.selectedFeatures;o&&(null!==(r=a[0].attributes)&&void 0!==r&&r.isExclusionZone&&e._unsetSelectedFeatureAsExclusionZone(t,n),o(a[0].id))}),ve(e,"_unsetSelectedFeatureAsExclusionZone",function(t,n){var r=e.props.updateFeatureAttributes,o=n.selectedFeatures;r&&r({id:o[0].id,attributes:{isExclusionZone:!1}})}),ve(e,"_setSelectedFeatureAsExclusionZone",function(t,n){var r=e.props.updateFeatureAttributes,o=n.geofencePolygonId,a=n.selectedFeatures;r&&(a[0].id===o&&e._unsetSelectedFeatureAsGeofence(t,n),r({id:a[0].id,attributes:{isExclusionZone:!0}}))}),ve(e,"_openDetailsDialogForSelectedUAVs",function(t,n){var r=n.selectedUAVIds,o=e.props.openUAVDetailsDialog;o&&r.length>0&&o(r[0])}),ve(e,"_removeSelectedFeatures",function(t,n){var r=n.selectedFeatures,o=e.props.removeFeaturesByIds;o&&o(r.map(function(e){return e.id}))}),ve(e,"_resetUAVs",function(e,t){var n=t.selectedUAVIds;ie.bf(n)}),ve(e,"_returnSelectedUAVs",function(e,t){var n=t.selectedUAVIds;ie.kZ(n)}),ve(e,"_setMapCoordinateSystemOrigin",function(t,n){var r=n.coords;r&&e.props.setMapCoordinateSystemOrigin(r)}),ve(e,"_setShowCoordinateSystemOrigin",function(t,n){var r=n.coords;r&&e.props.setShowCoordinateSystemOrigin(r)}),ve(e,"_sleepSelectedUAVs",function(e,t){var n=t.selectedUAVIds;ie.fd(n)}),ve(e,"_shutdownSelectedUAVs",function(e,t){var n=t.selectedUAVIds;ie.Y_(n)}),ve(e,"_wakeUpSelectedUAVs",function(e,t){var n=t.selectedUAVIds;ie.dg(n)}),e._contextMenu=g.createRef(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this;return g.createElement(b.wD,null,function(t){return g.createElement(ne,{ref:e._contextMenu,contextProvider:e.props.contextProvider},function(n){var r,o,a=n.selectedFeatures,i=n.selectedUAVIds,l=n.geofencePolygonId,c=[],s=(null==a?void 0:a.length)>0,u=1===(null==a?void 0:a.length),f=(null==i?void 0:i.length)>0,d=1===(null==i?void 0:i.length);if(f&&c.push(g.createElement(z.A,{key:"fly",dense:!0,onClick:e._moveSelectedUAVsAtCurrentAltitude},g.createElement(B.A,null,g.createElement(N.A,null)),t("mapContextMenu.flyHere")),g.createElement(z.A,{key:"flyAtAltitude",dense:!0,onClick:e._moveSelectedUAVsAtGivenAltitude},g.createElement(B.A,null,g.createElement(N.A,null)),t("mapContextMenu.flyHereAtAltitude")),g.createElement(p.A,{key:"div1"}),g.createElement(z.A,{key:"takeoff",dense:!0,onClick:e._takeoffSelectedUAVs},g.createElement(B.A,null,g.createElement(D.A,null)),t("general.commands.takeoff")),g.createElement(z.A,{key:"poshold",dense:!0,onClick:e._positionHoldSelectedUAVs},g.createElement(B.A,null,g.createElement(_.A,null)),t("general.commands.positionHold")),g.createElement(z.A,{key:"home",dense:!0,onClick:e._returnSelectedUAVs},g.createElement(B.A,null,g.createElement(L.A,null)),t("general.commands.returnToHome")),g.createElement(z.A,{key:"land",dense:!0,onClick:e._landSelectedUAVs},g.createElement(B.A,null,g.createElement(R.A,null)),t("general.commands.land")),g.createElement(p.A,{key:"div2"}),g.createElement(z.A,{key:"message",dense:!0,disabled:!d,onClick:e._openDetailsDialogForSelectedUAVs},g.createElement(B.A,null,g.createElement(x.A,null)),t("mapContextMenu.details")),g.createElement(p.A,{key:"div3"}),g.createElement(z.A,{key:"wakeUp",dense:!0,onClick:e._wakeUpSelectedUAVs},g.createElement(B.A,null,g.createElement(re.A,null)),t("general.commands.powerOn")),g.createElement(z.A,{key:"sleep",dense:!0,onClick:e._sleepSelectedUAVs},g.createElement(B.A,null,g.createElement(F.A,null)),t("general.commands.sleep")),g.createElement(z.A,{key:"reset",dense:!0,onClick:e._resetUAVs},g.createElement(B.A,null,g.createElement(V.A,{color:"secondary"})),t("general.commands.reboot")),g.createElement(z.A,{key:"shutdown",dense:!0,onClick:e._shutdownSelectedUAVs},g.createElement(B.A,null,g.createElement(G.A,{color:"secondary"})),t("general.commands.powerOff")),g.createElement(p.A,{key:"div4"})),e.props.addPointToMission&&c.push(g.createElement(z.A,{key:"addPointToMission",dense:!0,onClick:e._addPointToMission},g.createElement(B.A,null,g.createElement(I.A,null)),"Add point to mission")),e.props.setMapCoordinateSystemOrigin&&c.push(g.createElement(z.A,{key:"setMapCoordinateSystemOrigin",dense:!0,onClick:e._setMapCoordinateSystemOrigin},g.createElement(B.A,null,g.createElement(U.A,null)),t("mapContextMenu.setMapOriginHere"))),e.props.setShowCoordinateSystemOrigin&&c.push(g.createElement(z.A,{key:"setShowCoordinateSystemOrigin",dense:!0,onClick:e._setShowCoordinateSystemOrigin},g.createElement(B.A,null,g.createElement(M.A,null)),t("mapContextMenu.setShowOriginHere"))),u){var m,y=[ae.lo.POLYGON].includes(a[0].type),b=a[0].id===l;c.push(g.createElement(p.A,{key:"div5"}),g.createElement(z.A,{key:"geofence",dense:!0,disabled:!y,onClick:b?e._unsetSelectedFeatureAsGeofence:e._setSelectedFeatureAsGeofence},g.createElement(B.A,null,g.createElement(oe.A,{color:b?"disabled":"action"})),t(b?"mapContextMenu.clearGeofence":"mapContextMenu.useAsGeofence")));var v=[ae.lo.POLYGON].includes(a[0].type),h=null===(m=a[0].attributes)||void 0===m?void 0:m.isExclusionZone;c.push(g.createElement(z.A,{key:"exclusionZone",dense:!0,disabled:!v,onClick:h?e._unsetSelectedFeatureAsExclusionZone:e._setSelectedFeatureAsExclusionZone},g.createElement(B.A,null,g.createElement(j.A,{color:h?"disabled":"action"})),t(h?"mapContextMenu.clearExclusionZone":"mapContextMenu.useAsExclusionZone")))}return s&&2===a.length&&a.every(function(e){return e.type===ae.lo.POLYGON})&&c.push(g.createElement(z.A,{key:"cut",dense:!0,onClick:e._cutSelectedFeatures},g.createElement(B.A,null,g.createElement(E,null)),t("mapContextMenu.subtractPolygon",{minuend:null!==(r=a[1].label)&&void 0!==r?r:t("mapContextMenu.unnamedPolygon"),subtrahend:null!==(o=a[0].label)&&void 0!==o?o:t("mapContextMenu.unnamedPolygon")}))),s&&c.push(g.createElement(p.A,{key:"div6"}),g.createElement(z.A,{key:"setProperties",dense:!0,disabled:!u,onClick:e._editSelectedFeature},g.createElement(B.A,null,g.createElement(k.A,null)),t("mapContextMenu.properties")),g.createElement(z.A,{key:"remove",dense:!0,disabled:!s,onClick:e._removeSelectedFeatures},g.createElement(B.A,null,g.createElement(P.A,null)),t("general.action.remove"))),c})})}}],r&&pe(n.prototype,r),o&&pe(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(g.Component);ve(Ae,"propTypes",{addPointToMission:W().func,clearGeofencePolygonId:W().func,contextProvider:W().func,cutFeature:W().func,editFeature:W().func,openUAVDetailsDialog:W().func,removeFeaturesByIds:W().func,setGeofencePolygonId:W().func,setMapCoordinateSystemOrigin:W().func,setShowCoordinateSystemOrigin:W().func,showFlyToTargetDialog:W().func,updateFeatureAttributes:W().func});const Se=Ae;var Ee=n(4729),Oe=n(34477),we=n(49565),Te=function(e){var t=e.children,n=e.style;return g.createElement(we.A,{className:"widget",style:n},t)};Te.propTypes={children:W().oneOfType([W().arrayOf(W().node),W().node]),style:W().object};const Ce=Te,Ie=({left:e,top:t})=>(0,o.jsxs)(o.Fragment,{children:[e&&(0,o.jsx)(Ce,{style:{top:64,left:8},children:(0,o.jsx)(Oe.A,{sx:{display:"flex",flexDirection:"column"},children:e})},"Widget.LeftToolbar"),t&&(0,o.jsx)(Ce,{style:{top:8,left:40},children:(0,o.jsx)(Oe.A,{sx:{display:"flex",flexDirection:"row"},children:t})},"Widget.TopToolbar")]})},53275:(e,t,n)=>{"use strict";var r,o;n.d(t,{Q:()=>o,Z:()=>r}),function(e){e.TCP="tcp",e.WS="ws"}(r||(r={})),function(e){e.AUTO="auto",e.MANUAL="manual"}(o||(o={}))},53453:(e,t,n)=>{"use strict";n.d(t,{rW:()=>Ae,aH:()=>Ee,lh:()=>Se});var r=n(74848),o=n(96540),a=n(61919),i=n(98964),l=n(25508),c=n(61225),s=n(42095),u=n(84692),f=n(61212),d=n(47530),p=n(87788),m=n(42162),y=n(77803),g=n(46859),b=n(81709),v=(n(77929),n(13628)),h=n(953),A=n(29276),S=n(81426),E=n(49700);const O=function(){const e=new v.default({color:""}),t=new h.default({color:"",width:1}),n=new A.default({fill:e}),r=new A.default({fill:e,stroke:t}),o=new A.default({stroke:t}),a=new A.default({text:new S.default({text:"",fill:e,stroke:t})}),i={};function l(e){let t=i[e];return t||(t=new A.default({image:new E.A({src:"https://unpkg.com/@mapbox/maki@4.0.0/icons/"+e+"-15.svg",crossOrigin:"anonymous"})}),i[e]=t),t}const c=[];return function(i,s){let u=0;const f=i.get("layer"),d=i.get("class"),p=i.get("type"),m=i.get("scalerank"),y=i.get("labelrank"),g=i.get("admin_level"),b=i.get("maritime"),v=i.get("disputed"),h=i.get("maki"),A=i.getGeometry()?.getType();if("landuse"===f)switch(d){case"park":e.setColor("#d8e8c8"),c[u++]=n;break;case"cemetery":e.setColor("#e0e4dd"),c[u++]=n;break;case"hospital":e.setColor("#fde"),c[u++]=n;break;case"school":e.setColor("#f0e8f8"),c[u++]=n;break;case"wood":e.setColor("rgb(233,238,223)"),c[u++]=n}else"waterway"===f&&"river"!==d&&"stream"!==d&&"canal"!==d||"waterway"===f&&"river"===d?(t.setColor("#a0c8f0"),t.setWidth(1),c[u++]=o):"waterway"!==f||"stream"!==d&&"canal"!==d?"water"===f?(e.setColor("#a0c8f0"),c[u++]=n):"aeroway"===f&&"Polygon"===A?(e.setColor("rgb(242,239,235)"),c[u++]=n):"aeroway"===f&&"LineString"===A&&s<=76.43702828517625?(t.setColor("#f0ede9"),t.setWidth(1),c[u++]=o):"building"===f?(e.setColor("#f2eae2"),t.setColor("#dfdbd7"),t.setWidth(1),c[u++]=r):"tunnel"===f&&"motorway_link"===d?(t.setColor("#e9ac77"),t.setWidth(1),c[u++]=o):"tunnel"===f&&"service"===d?(t.setColor("#cfcdca"),t.setWidth(1),c[u++]=o):"tunnel"!==f||"street"!==d&&"street_limited"!==d?"tunnel"===f&&"main"===d&&s<=1222.99245256282||"tunnel"===f&&"motorway"===d?(t.setColor("#e9ac77"),t.setWidth(1),c[u++]=o):"tunnel"===f&&"path"===d?(t.setColor("#cba"),t.setWidth(1),c[u++]=o):"tunnel"===f&&"major_rail"===d?(t.setColor("#bbb"),t.setWidth(2),c[u++]=o):"road"===f&&"motorway_link"===d?(t.setColor("#e9ac77"),t.setWidth(1),c[u++]=o):"road"!==f||"street"!==d&&"street_limited"!==d||"LineString"!==A?"road"===f&&"main"===d&&s<=1222.99245256282||"road"===f&&"motorway"===d&&s<=4891.96981025128?(t.setColor("#e9ac77"),t.setWidth(1),c[u++]=o):"road"===f&&"path"===d?(t.setColor("#cba"),t.setWidth(1),c[u++]=o):"road"===f&&"major_rail"===d?(t.setColor("#bbb"),t.setWidth(2),c[u++]=o):"bridge"===f&&"motorway_link"===d||"bridge"===f&&"motorway"===d?(t.setColor("#e9ac77"),t.setWidth(1),c[u++]=o):"bridge"===f&&"service"===d?(t.setColor("#cfcdca"),t.setWidth(1),c[u++]=o):"bridge"!==f||"street"!==d&&"street_limited"!==d?"bridge"===f&&"main"===d&&s<=1222.99245256282?(t.setColor("#e9ac77"),t.setWidth(1),c[u++]=o):"bridge"===f&&"path"===d?(t.setColor("#cba"),t.setWidth(1),c[u++]=o):"bridge"===f&&"major_rail"===d?(t.setColor("#bbb"),t.setWidth(2),c[u++]=o):"admin"===f&&g>=3&&0===b||"admin"===f&&2===g&&0===v&&0===b||"admin"===f&&2===g&&1===v&&0===b?(t.setColor("#9e9cab"),t.setWidth(1),c[u++]=o):"admin"===f&&g>=3&&1===b||"admin"===f&&2===g&&1===b?(t.setColor("#a0c8f0"),t.setWidth(1),c[u++]=o):"country_label"===f&&1===m?(a.getText()?.setText(i.get("name_en")),a.getText()?.setFont('bold 11px "Open Sans", "Arial Unicode MS"'),e.setColor("#334"),t.setColor("rgba(255,255,255,0.8)"),t.setWidth(2),c[u++]=a):"country_label"===f&&2===m&&s<=19567.87924100512?(a.getText()?.setText(i.get("name_en")),a.getText()?.setFont('bold 10px "Open Sans", "Arial Unicode MS"'),e.setColor("#334"),t.setColor("rgba(255,255,255,0.8)"),t.setWidth(2),c[u++]=a):"country_label"===f&&3===m&&s<=9783.93962050256?(a.getText()?.setText(i.get("name_en")),a.getText()?.setFont('bold 9px "Open Sans", "Arial Unicode MS"'),e.setColor("#334"),t.setColor("rgba(255,255,255,0.8)"),t.setWidth(2),c[u++]=a):"country_label"===f&&4===m&&s<=4891.96981025128?(a.getText()?.setText(i.get("name_en")),a.getText()?.setFont('bold 8px "Open Sans", "Arial Unicode MS"'),e.setColor("#334"),t.setColor("rgba(255,255,255,0.8)"),t.setWidth(2),c[u++]=a):"marine_label"===f&&1===y&&"Point"===A||"marine_label"===f&&2===y&&"Point"===A?(a.getText()?.setText(i.get("name_en")),a.getText()?.setFont('italic 11px "Open Sans", "Arial Unicode MS"'),e.setColor("#74aee9"),t.setColor("rgba(255,255,255,0.8)"),t.setWidth(1),c[u++]=a):"marine_label"===f&&3===y&&"Point"===A?(a.getText()?.setText(i.get("name_en")),a.getText()?.setFont('italic 10px "Open Sans", "Arial Unicode MS"'),e.setColor("#74aee9"),t.setColor("rgba(255,255,255,0.8)"),t.setWidth(1),c[u++]=a):"marine_label"===f&&4===y&&"Point"===A?(a.getText()?.setText(i.get("name_en")),a.getText()?.setFont('italic 9px "Open Sans", "Arial Unicode MS"'),e.setColor("#74aee9"),t.setColor("rgba(255,255,255,0.8)"),t.setWidth(1),c[u++]=a):"place_label"===f&&"city"===p&&s<=1222.99245256282?(a.getText()?.setText(i.get("name_en")),a.getText()?.setFont('11px "Open Sans", "Arial Unicode MS"'),e.setColor("#333"),t.setColor("rgba(255,255,255,0.8)"),t.setWidth(1),c[u++]=a):"place_label"===f&&"town"===p&&s<=305.748113140705?(a.getText()?.setText(i.get("name_en")),a.getText()?.setFont('9px "Open Sans", "Arial Unicode MS"'),e.setColor("#333"),t.setColor("rgba(255,255,255,0.8)"),t.setWidth(1),c[u++]=a):"place_label"===f&&"village"===p&&s<=38.21851414258813?(a.getText()?.setText(i.get("name_en")),a.getText()?.setFont('8px "Open Sans", "Arial Unicode MS"'),e.setColor("#333"),t.setColor("rgba(255,255,255,0.8)"),t.setWidth(1),c[u++]=a):"place_label"===f&&s<=19.109257071294063&&("hamlet"===p||"suburb"===p||"neighbourhood"===p)?(a.getText()?.setText(i.get("name_en")),a.getText()?.setFont('bold 9px "Arial Narrow"'),e.setColor("#633"),t.setColor("rgba(255,255,255,0.8)"),t.setWidth(1),c[u++]=a):("poi_label"===f&&s<=19.109257071294063&&1===m&&"marker"!==h||"poi_label"===f&&s<=9.554628535647032&&2===m&&"marker"!==h||"poi_label"===f&&s<=4.777314267823516&&3===m&&"marker"!==h||"poi_label"===f&&s<=2.388657133911758&&4===m&&"marker"!==h||"poi_label"===f&&s<=1.194328566955879&&m>=5&&"marker"!==h)&&(c[u++]=l(h)):(t.setColor("#cfcdca"),t.setWidth(1),c[u++]=o):(t.setColor("#cfcdca"),t.setWidth(1),c[u++]=o):(t.setColor("#cfcdca"),t.setWidth(1),c[u++]=o):(t.setColor("#a0c8f0"),t.setWidth(1),c[u++]=o);return c.length=u,c}}();var w,T=n(82041),C=n(26693);!function(e){let t,n,r,o,a;!function(e){e.AERIAL_WITH_LABELS="bingMaps.aerialWithLabels",e.ROAD="bingMaps.road"}(t=e.BING||(e.BING={})),function(e){e.DEFAULT="googleMaps.default",e.SATELLITE="googleMaps.satellite",e.ROADS="googleMaps.roads"}(n=e.GOOGLE||(e.GOOGLE={})),function(e){e.SATELLITE="mapbox.satellite",e.STATIC="mapbox.static",e.VECTOR="mapbox.vector"}(r=e.MAPBOX||(e.MAPBOX={})),function(e){e.BASIC="maptiler.basic",e.HYBRID="maptiler.hybrid",e.SATELLITE="maptiler.satellite",e.STREETS="maptiler.streets"}(o=e.MAPTILER||(e.MAPTILER={})),e.NEXTZEN="nextzen",e.OSM="osm",function(e){e.TERRAIN="stamen.terrain",e.TONER="stamen.toner",e.WATERCOLOR="stamen.watercolor"}(a=e.STAMEN||(e.STAMEN={}))}(w||(w={}));const I=[w.OSM,w.STAMEN.TERRAIN];C.A.MAPBOX&&I.push(w.MAPBOX.STATIC,w.MAPBOX.SATELLITE),C.A.MAPTILER&&I.push(w.MAPTILER.BASIC,w.MAPTILER.SATELLITE,w.MAPTILER.HYBRID),T.A.map.tileProviders.bingMaps&&C.A.BING&&I.push(w.BING.AERIAL_WITH_LABELS,w.BING.ROAD),T.A.map.tileProviders.googleMaps&&C.A.GOOGLE&&I.push(w.GOOGLE.DEFAULT,w.GOOGLE.SATELLITE,w.GOOGLE.ROADS);const x={mapbox:['\xa9 <a href="https://www.mapbox.com/map-feedback/">Mapbox</a>','\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>'],maptiler:['\xa9 <a href="https://www.maptiler.com/copyright/">Maptiler</a>','\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>'],nextzen:"Map data &copy; OpenStreetMap contributors, Who's On First, Natural Earth, and openstreetmapdata.com",stamen:['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.','&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors']},j={[w.BING.AERIAL_WITH_LABELS]:{label:"Bing Maps (aerial with labels)"},[w.BING.ROAD]:{label:"Bing Maps (road)"},[w.GOOGLE.DEFAULT]:{label:"Google Maps"},[w.GOOGLE.SATELLITE]:{label:"Google Maps (satellite)"},[w.GOOGLE.ROADS]:{label:"Google Maps (roads)"},[w.MAPBOX.STATIC]:{label:"Mapbox",attributions:x.mapbox},[w.MAPBOX.SATELLITE]:{label:"Mapbox satellite",attributions:x.mapbox},[w.MAPBOX.VECTOR]:{label:"Mapbox vector",attributions:x.mapbox},[w.MAPTILER.BASIC]:{label:"Maptiler",attributions:x.maptiler},[w.MAPTILER.HYBRID]:{label:"Maptiler hybrid",attributions:x.maptiler},[w.MAPTILER.SATELLITE]:{label:"Maptiler satellite",attributions:x.maptiler},[w.MAPTILER.STREETS]:{label:"Maptiler streets",attributions:x.maptiler},[w.NEXTZEN]:{label:"Nextzen",attributions:x.nextzen},[w.OSM]:{label:"OpenStreetMap"},[w.STAMEN.TERRAIN]:{label:"Stamen terrain",attributions:x.stamen},[w.STAMEN.TONER]:{label:"Stamen toner",attributions:x.stamen},[w.STAMEN.WATERCOLOR]:{label:"Stamen watercolor",attributions:x.stamen}};function P(e){const t=j[e];return t?t.label:"unknown"}const k=({children:e,type:t,zIndex:n})=>{switch(t){case w.MAPBOX.VECTOR:case w.NEXTZEN:return(0,r.jsx)(b.qd.VectorTile,{declutter:!0,style:O,zIndex:n,children:e});default:return(0,r.jsx)(b.qd.WebGLTile,{zIndex:n,children:e})}},_=new g.A,N=({layer:e,zIndex:t,LayerSource:n})=>{const o=e.parameters.source;return(0,r.jsx)(k,{type:o,zIndex:t,children:(0,r.jsx)(n,{type:o})})},R=(0,c.Ng)(null,(e,t)=>({onLayerSourceChanged(n,r){e((0,u.At)({layerId:t.layerId,source:r}))}}))(({layer:e,onLayerSourceChanged:t})=>{const n=I.map(e=>(0,r.jsx)(p.A,{value:e,label:P(e),style:{marginTop:5},control:(0,r.jsx)(m.A,{})},e));return(0,r.jsx)(y.A,{name:"source.base",value:e.parameters.source,onChange:(e,n)=>t(e,n),children:n},"baseProperties")}),D=(e,t)=>{const n=e.getImage();(n instanceof HTMLImageElement||n instanceof HTMLVideoElement)&&(n.src=t)};const M=(0,l.Mz)(s.j,f.KL,f.nt,(e,t,n)=>{return e&&t&&n?(r=n,(e,t)=>{const n=`${r}/map-cache/_?url=`+encodeURIComponent(t);D(e,n)}):D;var r}),L=(0,c.Ng)(e=>({apiKeys:(0,d.d6)(e),tileLoadFunction:M(e)}),{})(({apiKeys:e,tileLoadFunction:t,type:n})=>{const o=function(e){const t=j[e],n=t?.attributions;return Array.isArray(n)?n:n?[n]:[]}(n);switch(n){case w.MAPBOX.STATIC:return(0,r.jsx)(b.sP.XYZ,{attributions:o,tilePixelRatio:2,tileSize:512,tileLoadFunction:t,url:`https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/512/{z}/{x}/{y}@2x?access_token=${e.MAPBOX}`});case w.MAPBOX.SATELLITE:return(0,r.jsx)(b.sP.XYZ,{attributions:o,tilePixelRatio:2,tileSize:512,tileLoadFunction:t,url:`https://api.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}@2x.jpg90?access_token=${e.MAPBOX}`});case w.MAPBOX.VECTOR:return(0,r.jsx)(b.sP.VectorTile,{attributions:o,format:_,tileLoadFunction:t,url:`https://{a-d}.tiles.mapbox.com/v4/mapbox.mapbox-streets-v8/{z}/{x}/{y}.vector.pbf?access_token=${e.MAPBOX}`});case w.MAPTILER.BASIC:return(0,r.jsx)(b.sP.XYZ,{tileLoadFunction:t,tilePixelRatio:2,tileSize:512,url:`https://api.maptiler.com/maps/basic/{z}/{x}/{y}@2x.png?key=${e.MAPTILER}`});case w.MAPTILER.HYBRID:return(0,r.jsx)(b.sP.XYZ,{tileLoadFunction:t,tilePixelRatio:2,tileSize:512,url:`https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}@2x.jpg?key=${e.MAPTILER}`});case w.MAPTILER.SATELLITE:return(0,r.jsx)(b.sP.XYZ,{tileLoadFunction:t,tileSize:512,url:`https://api.maptiler.com/tiles/satellite-v2/{z}/{x}/{y}.jpg?key=${e.MAPTILER}`});case w.MAPTILER.STREETS:return(0,r.jsx)(b.sP.XYZ,{tileLoadFunction:t,tilePixelRatio:2,tileSize:512,url:`https://api.maptiler.com/maps/streets/{z}/{x}/{y}@2x.png?key=${e.MAPTILER}`});case w.NEXTZEN:return(0,r.jsx)(b.sP.VectorTile,{attributions:o,format:_,maxZoom:16,tileLoadFunction:t,url:`https://tile.nextzen.org/tilezen/vector/v1/512/all/{z}/{x}/{y}.mvt?api_key=${e.NEXTZEN}`});case w.OSM:return(0,r.jsx)(b.sP.OSM,{tileLoadFunction:t,url:"https://tile.skybrush.io/osm/{z}/{x}/{y}.png"});case w.STAMEN.TERRAIN:return(0,r.jsx)(b.sP.StadiaMaps,{tileLoadFunction:t,layerName:"stamen_terrain"});case w.STAMEN.TONER:return(0,r.jsx)(b.sP.StadiaMaps,{tileLoadFunction:t,layerName:"stamen_toner"});case w.STAMEN.WATERCOLOR:return(0,r.jsx)(b.sP.StadiaMaps,{tileLoadFunction:t,layerName:"stamen_watercolor"});case w.GOOGLE.DEFAULT:case w.GOOGLE.ROADS:case w.GOOGLE.SATELLITE:{const o=n===w.GOOGLE.SATELLITE?"satellite":n===w.GOOGLE.DEFAULT?"terrain":"roadmap",a=n===w.GOOGLE.DEFAULT?["layerRoadmap"]:[];return(0,r.jsx)(b.sP.Google,{highDpi:!0,apiKey:e.GOOGLE,tileLoadFunction:t,mapType:o,layerTypes:a,scale:"scaleFactor2x"})}case w.BING.AERIAL_WITH_LABELS:return(0,r.jsx)(b.sP.BingMaps,{apiKey:e.BING,imagerySet:"AerialWithLabels",maxZoom:19});case w.BING.ROAD:return(0,r.jsx)(b.sP.BingMaps,{apiKey:e.BING,imagerySet:"Road"});default:return null}});var F=n(51533),U=n(22944);const G=()=>(0,U.A)("(prefers-color-scheme: dark)");var V=n(94954);const B=(e=!1)=>new S.default({font:"14px 'Fira Sans',Calibri,sans-serif",textBaseline:"bottom",fill:new v.default({color:e?"rgba(255, 255, 255, 1)":"rgba(0,0,0,1)"}),stroke:new h.default({color:e?"rgba(0, 0, 0, 1)":"rgba(255,255,255,1)",width:3})}),z=(e=!1)=>new S.default({font:"14px 'Fira Sans',Calibri,sans-serif",textAlign:"end",fill:new v.default({color:e?"rgba(255, 255, 255, 1)":"rgba(0,0,0,1)"}),stroke:new h.default({color:e?"rgba(0, 0, 0, 1)":"rgba(255,255,255,1)",width:3})}),H={light:B(),dark:B(!0)},W={light:z(),dark:z(!0)},q=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600],K=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,1/120,1/300,1/600,1/1200,1/6e3],Y=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001];const $=({coordinateformat:e,latFormatter:t,layer:n,lonFormatter:o,zIndex:a})=>{const i=G(),l=function(e){switch(e){case V.Sq.DEGREES:case V.Sq.SIGNED_DEGREES:return Y;case V.Sq.DEGREES_MINUTES:case V.Sq.SIGNED_DEGREES_MINUTES:return K;default:return q}}(e);return(0,r.jsx)(b.qd.Graticule,{showLabels:!0,intervals:l,latLabelFormatter:t,latLabelStyle:W[i?"dark":"light"],lonLabelFormatter:o,lonLabelStyle:H[i?"dark":"light"],zIndex:a})};var Z=n(58718),J=(n(52675),n(89463),n(2259),n(45700),n(23792),n(62062),n(89572),n(2892),n(40875),n(10287),n(26099),n(60825),n(47764),n(98992),n(81454),n(62953),n(48227)),X=n(91799),Q=n(77024),ee=n(49068),te=n(37603),ne=n(33682),re=n(58132),oe=n(5556),ae=n.n(oe);function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ge(r.key),r)}}function se(e,t,n){return t&&ce(e.prototype,t),n&&ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ue(e,t,n){return t=de(t),function(e,t){if(t&&("object"==ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fe()?Reflect.construct(t,n||[],de(e).constructor):t.apply(e,n))}function fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(fe=function(){return!!e})()}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}function pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}function ye(e,t,n){return(t=ge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e){var t=function(e,t){if("object"!=ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ie(t)?t:t+""}var be=function(e){function t(e){var n;le(this,t),ye(n=ue(this,t,[e]),"_onLayersChanged",function(e){n.setState({layers:e.target.value})}),ye(n,"_onUrlChanged",function(e){n.setState({url:e.target.value})}),ye(n,"_handleClick",function(){var e=n.state,t=e.layers,r=e.url;n.props.setLayerParameters({layers:t,url:r}),n.props.showMessage("Layer settings saved successfully.")});var r=e.layer.parameters,o=r.layers,a=r.url;return n.state={layers:o||"",url:a||""},n}return pe(t,e),se(t,[{key:"render",value:function(){var e=i.XM.map(function(e){return o.createElement(te.A,{key:e,value:e},e.toUpperCase())}),t=this.props,n=t.changeTileServerType,r=t.layer,a=this.state,l=a.url,c=a.layers,s=r.parameters;return o.createElement("div",null,o.createElement(X.A,{fullWidth:!0},o.createElement(ee.A,{htmlFor:"tile-server-type"},"Tile server type"),o.createElement(ne.A,{value:s.type,input:o.createElement(Q.A,{id:"tile-server-type"}),onChange:n},e)),o.createElement(re.A,{fullWidth:!0,label:"Tile server URL",margin:"normal",value:l,onChange:this._onUrlChanged}),s.type===i.Aq.XYZ?o.createElement("div",null,o.createElement("small",null,"Use ",o.createElement("code",null,"{x}"),", ",o.createElement("code",null,"{y}"),",",o.createElement("code",null,"{-y}")," and ",o.createElement("code",null,"{z}")," in the server URL template for the x and y coordinates and the zoom level. Use tokens like",o.createElement("code",null,"{a-c}")," to denote multiple servers handling the same tileset.")):o.createElement(re.A,{fullWidth:!0,label:"Layers",margin:"normal",placeholder:"Layers to show (comma-separated)",value:c,onChange:this._onLayersChanged}),o.createElement("div",{style:{textAlign:"center",paddingTop:"1em"}},o.createElement(J.A,{onClick:this._handleClick},"Save settings")))}}])}(o.Component);ye(be,"propTypes",{layer:ae().object.isRequired,changeTileServerType:ae().func,setLayerParameters:ae().func,showMessage:ae().func});var ve=function(e){function t(){return le(this,t),ue(this,t,arguments)}return pe(t,e),se(t,[{key:"render",value:function(){var e=this._sourceFromParameters(this.props.layer.parameters);return o.createElement("div",null,o.createElement(b.qd.Tile,{zIndex:this.props.zIndex},e))}},{key:"_sourceFromParameters",value:function(e){var t=e.type,n=e.url,r=e.layers;switch(t){case i.Aq.WMS:return o.createElement(b.sP.TileWMS,{url:n,params:{LAYERS:r,TILED:!0}});case i.Aq.XYZ:return o.createElement(b.sP.XYZ,{url:n});case i.Aq.TILE_CACHE:var a=(n&&n.length>0&&"/"===n.charAt(n.length-1)?n:n+"/")+"1.0.0/"+r+"/{z}/{x}/{-y}.png";return o.createElement(b.sP.XYZ,{url:a});default:return[]}}}])}(o.Component);ye(ve,"propTypes",{layer:ae().object,zIndex:ae().number});var he=(0,c.Ng)(null,function(e,t){return{changeTileServerType:function(n){e((0,u.K_)(t.layerId,{type:n.target.value}))},setLayerParameters:function(n){e((0,u.K_)(t.layerId,n))},showMessage:function(t){e((0,Z.Ds)(t))}}})(be);const Ae=({layers:e,layerComponents:t,onFeaturesModified:n,selectedTool:o})=>{const a=[];let i=0;for(const l of e){const e=t[l.type];void 0!==e&&(a.push((0,r.jsx)(e,{layer:l,selectedTool:o,zIndex:i,onFeaturesModified:n},`${l.id}_rendered`)),i++)}return(0,r.jsx)(r.Fragment,{children:a})},Se={[i.mb.BASE]:R,[i.mb.TILE_SERVER]:he,[i.mb.UNAVAILABLE]:()=>(0,r.jsx)("div",{style:{position:"relative",height:48},children:(0,r.jsx)(a.qq,{text:"This layer is unavailable under the license of the\n            currently connected server."})},"_hint")},Ee={[i.mb.BASE]:({layer:e,zIndex:t})=>(0,r.jsx)(N,{layer:e,zIndex:t,LayerSource:L}),[i.mb.GRATICULE]:({layer:e,zIndex:t})=>{const n=(0,c.d4)(F.ED),o=(0,c.d4)(F.Xm),a=(0,c.d4)(F.Re);return(0,r.jsx)($,{layer:e,coordinateformat:a,latFormatter:n,lonFormatter:o,zIndex:t})},[i.mb.TILE_SERVER]:ve}},54244:(e,t,n)=>{"use strict";e.exports=n.p+"b4e7a0530d8f59d6bf37.woff2"},54301:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});n(69085);var r=n(15548),o=n(96540);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(null,arguments)}var i=(0,n(49591).n9)(function(e){return{divider:{alignSelf:"stretch",height:"auto",margin:e.spacing(1,.5)}}});const l=function(e){var t=i();return o.createElement(r.A,a({className:t.divider},e))}},54996:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,o:()=>o});var r=n(65307);const{actions:o,reducer:a}=(0,r.Z0)({name:"deauthentication-dialog",initialState:{open:!1},reducers:{closeDeauthenticationDialog(e){e.open=!1},showDeauthenticationDialog(e){e.open=!0}}})},55258:(e,t,n)=>{"use strict";n.d(t,{K:()=>L,h:()=>F});n(52675),n(89463),n(2259),n(45700),n(23792),n(89572),n(2892),n(9868),n(26099),n(47764),n(62953);var r=n(20841),o=n(99236),a=n(85058),i=n(93621),l=n(89147),c=n(76078),s=n(86397),u=n(10986),f=n(31047),d=n(77233),p=n(92350),m=n(50880),y=n(42853),g=n(96545),b=n(58426),v=n(81105),h=n(97859),A=n(96540),S=n(49591),E=n(52614),O=n(94954);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function C(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function I(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}var j=I(I(I(I(I(I({},E.m.FULL,10),E.m.NEAR_FULL,9),E.m.OK,8),E.m.WARNING,3),E.m.ERROR,0),E.m.UNKNOWN,11),P={marginLeft:-8,marginTop:-2,verticalAlign:"bottom"},k={},_=[A.createElement(s.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(s.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(r.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(o.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(a.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(a.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(i.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(l.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(l.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(c.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(b.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement("span",{key:"batteryIcon",style:k}," ")],N=[A.createElement(s.A,{key:"batteryIcon"}),A.createElement(s.A,{key:"batteryIcon"}),A.createElement(r.A,{key:"batteryIcon"}),A.createElement(o.A,{key:"batteryIcon"}),A.createElement(a.A,{key:"batteryIcon"}),A.createElement(a.A,{key:"batteryIcon"}),A.createElement(i.A,{key:"batteryIcon"}),A.createElement(l.A,{key:"batteryIcon"}),A.createElement(l.A,{key:"batteryIcon"}),A.createElement(c.A,{key:"batteryIcon"}),A.createElement(b.A,{key:"batteryIcon"}),A.createElement(v.A,{key:"batteryIcon"})],R=[A.createElement(u.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(u.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(u.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(f.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(d.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(d.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(p.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(m.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(m.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(y.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement(g.A,{key:"batteryIcon",fontSize:"small",style:P}),A.createElement("span",{key:"batteryIcon",style:k})],D=[A.createElement(u.A,{key:"batteryIcon"}),A.createElement(u.A,{key:"batteryIcon"}),A.createElement(u.A,{key:"batteryIcon"}),A.createElement(f.A,{key:"batteryIcon"}),A.createElement(d.A,{key:"batteryIcon"}),A.createElement(d.A,{key:"batteryIcon"}),A.createElement(p.A,{key:"batteryIcon"}),A.createElement(m.A,{key:"batteryIcon"}),A.createElement(m.A,{key:"batteryIcon"}),A.createElement(y.A,{key:"batteryIcon"}),A.createElement(g.A,{key:"batteryIcon"}),A.createElement(v.A,{key:"batteryIcon"})],M=function(e,t){return"number"==typeof e?e.toFixed(t):String(e)},L=C(function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.settings,o=n.style,a=void 0===o?O.Ji.VOLTAGE:o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),I(this,"getBatteryIcon",function(e,t,n){var r=void 0===e?j[t]:Math.round(Math.min(Math.max(e,0),100)/10);return(n?R:_)[r]}),I(this,"getBatteryLabel",function(e,n,r){if((0,h.default)(n)){if((0,h.default)(e))return"???";if(t._style===O.Ji.FORCED_PERCENTAGE){var o=t._settings.estimatePercentageFromVoltage(e,r);return(0,h.default)(o)?"".concat(M(e,1),"V"):"".concat(M(o,0),"%")}return"".concat(M(e,1),"V")}return t._style!==O.Ji.VOLTAGE||(0,h.default)(e)?"".concat(M(n,0),"%"):"".concat(M(e,1),"V")}),I(this,"getBatteryStatus",function(e,n,r){return t._settings?t._settings.getBatteryStatus(e,n,r):E.m.UNKNOWN}),I(this,"getLargeBatteryIcon",function(e,t,n){var r=void 0===e?j[t]:Math.round(Math.min(Math.max(e,0),100)/10);return(n?D:N)[r]}),I(this,"getSemanticBatteryStatus",function(e,n,r){return t._settings?t._settings.getSemanticBatteryStatus(e,n,r):S.nW.OFF}),r instanceof E.F?this._settings=r:this._settings=new E.F(r),this._style=a}),F=new L},56311:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>f,Xe:()=>s,il:()=>c,p:()=>l,ul:()=>u});var r=n(65307),o=n(39441);const{actions:a,reducer:i}=(0,r.Z0)({name:"hotkeys",initialState:{dialogVisible:!1,pendingUAVId:""},reducers:{setPendingUAVId(e,t){e.pendingUAVId=t.payload},startPendingUAVIdTimeout(){},showHotkeyDialog:(0,o.kP)(e=>{e.dialogVisible=!0}),closeHotkeyDialog:(0,o.kP)(e=>{e.dialogVisible=!1})}}),{closeHotkeyDialog:l,showHotkeyDialog:c,setPendingUAVId:s,startPendingUAVIdTimeout:u}=a,f=i},56504:()=>{},56527:(e,t,n)=>{"use strict";n.d(t,{A_:()=>T,C4:()=>U,DS:()=>P,Kn:()=>R,LK:()=>D,Ob:()=>_,Q6:()=>F,as:()=>B,ft:()=>M,l6:()=>w,lg:()=>G,mP:()=>V,r2:()=>k,rl:()=>z,s3:()=>x,tc:()=>N});var r=n(74848),o=n(31600),a=n(70791),i=n(32483),l=n(88634),c=n(58132),s=n(97859),u=n(7506),f=n(73333),d=n(5556),p=n.n(d),m=n(96540),y=n(90952),g=n(42941),b=n(2652),v=n(27989),h=n(40861),A=n(69091),S=n(66380);const E=(e,t)=>((e=e??{}).htmlInput={...t??{},...e.htmlInput??{}},e),O=(e,t)=>((e=e??{}).input={endAdornment:(0,r.jsx)(l.A,{position:"end",children:t}),...e.input??{}},e),w=({formControlProps:e,margin:t="dense",...n})=>(0,r.jsx)(u.l6,{formControlProps:{variant:"filled",margin:t,...e},...n}),T=e=>(0,r.jsx)(u.A_,{variant:"filled",...e}),C=e=>{e.preventDefault()},I=({input:e,meta:t,...n})=>{const[s,u]=(0,g.A)(!0),{name:f,onChange:d,value:p,...m}=e,y=(Boolean(t.submitError)&&!t.dirtySinceLastSubmit||Boolean(t.error))&&Boolean(t.touched);return(0,r.jsx)(c.A,{variant:"filled",...n,name:f,type:s?"password":"text",helperText:y?Boolean(t.error)||Boolean(t.submitError):void 0,error:y,value:p,slotProps:{htmlInput:{autoComplete:"current-password",...m,type:s?"password":"text"},input:{endAdornment:(0,r.jsx)(l.A,{position:"end",children:(0,r.jsx)(i.A,{"aria-label":"toggle password visibility",size:"large",onClick:u,onMouseDown:C,children:s?(0,r.jsx)(o.A,{}):(0,r.jsx)(a.A,{})})})}},onChange:d})},x=e=>(0,r.jsx)(y.D0,{component:I,...e}),j=({slotProps:e,...t})=>(0,r.jsx)(T,{type:"number",slotProps:O(e,"\xb0"),...t}),P=({fieldProps:e,slotProps:t,...n})=>(0,r.jsx)(j,{fieldProps:{format:v.n0,formatOnBlur:!0,parse:e=>e,validate:(0,S.fj)([S.mw,S.E2]),...e},slotProps:E(t,{step:.1}),...n}),k=({fieldProps:e,slotProps:t,...n})=>(0,r.jsx)(j,{fieldProps:{validate:(0,S.fj)([S.mw,S.E2,(0,S.Tq)(-90,90)]),...e},slotProps:E(t,{step:.001}),...n}),_=({fieldProps:e,slotProps:t,...n})=>(0,r.jsx)(j,{fieldProps:{validate:(0,S.fj)([S.mw,S.E2,(0,S.Tq)(-180,180)]),...e},slotProps:E(t,{step:.001}),...n}),N=({formatter:e,...t})=>{const n=(0,m.useMemo)(()=>(e=>({formatOnBlur:!0,format(t){const n=(0,h.fB)(t)?t:(0,v.EK)(t);try{return(e||v.iw)(n)||String(t)}catch{return String(t)}},validate(e){if(!(0,v.EK)(e))return"Invalid coordinate"}}))(e),[e]);return(0,r.jsx)(T,{fieldProps:n,...t})};N.propTypes={formatter:p().func};const R=({slotProps:e,max:t,min:n=0,step:o,unit:a="m",...i})=>(0,r.jsx)(T,{type:"number",slotProps:O(E(e,{max:t,min:n,step:o}),a),...i}),D=({slotProps:e,max:t,min:n=0,step:o,...a})=>(0,r.jsx)(T,{type:"number",slotProps:O(E(e,{max:t,min:n,step:o}),"s"),...a}),M=({min:e,max:t,...n})=>{const o=(0,m.useMemo)(()=>(({min:e,max:t})=>({formatOnBlur:!0,format(e){const t="number"==typeof e?e:(0,A.Kw)(e);return Number.isNaN(t)?"string"==typeof e?e:"":(0,b.aD)(t,{padHours:!0})},validate(n){const r=(0,A.Kw)(n);return Number.isFinite(r)?"number"==typeof e&&r<e?0===e?"Duration must be non-negative":"Duration too short":"number"==typeof t&&r>t?"Duration too long":void 0:"Invalid duration"}}))({min:e,max:t}),[e,t]);return(0,r.jsx)(T,{fieldProps:o,...n})},L=({defaultProps:e={},displayName:t,formatOptions:n,unit:o}={})=>{const a=o?{endAdornment:(0,r.jsx)(l.A,{position:"end",children:o})}:void 0;n={mantissa:3,trimMantissa:!0,...n};const i=e=>(0,f.A)(e).format(n),u=({max:t,min:n,size:o,step:l,value:u,onChange:f,onBlur:d,...p})=>{t??=e.max,n??=e.min,l??=e.step,o??=e.size;const[y,g]=(0,m.useState)(()=>i(u));(0,m.useEffect)(()=>{g(i(u))},[u]);const b=(0,m.useCallback)(e=>{const r=((e,{max:t,min:n,step:r}={})=>{if(e){let o=Number.parseFloat(e);if(!Number.isNaN(o)&&Number.isFinite(o)||(o=0),!(0,s.default)(r)){const e=(0,s.default)(n)?0:n;o=Math.round((o-e)/r)*r+e}return!(0,s.default)(t)&&o>t&&(o=t),!(0,s.default)(n)&&o<n&&(o=n),o}return 0})(String(e.target.value),{max:t,min:n,step:l});r!==u&&f?(f(e),g(i(r))):g(i(u)),d&&d(e)},[t,n,l,u,d,f]),v=(0,m.useCallback)(e=>{g(String(e.target.value))},[]);return(0,r.jsx)(c.A,{slotProps:{input:a,htmlInput:{size:o,type:"text",inputMode:"decimal",pattern:"[\\-0-9+.,]*"}},variant:"filled",value:y,onBlur:b,onChange:v,...p})};return t&&(u.displayName=t),u},F=L({displayName:"SimpleAngleField",defaultProps:{max:360,min:0,step:.1},unit:"degrees"}),U=L({displayName:"SimpleDistanceField",unit:"m"}),G=L({displayName:"SimpleDurationField",unit:"seconds",defaultProps:{min:0,size:"small"}}),V=L({displayName:"SimpleNumericField"}),B=L({displayName:"SimpleVelocityField",unit:"m/s",defaultProps:{min:0,size:"small"}}),z=L({displayName:"SimpleVoltageField",unit:"V",defaultProps:{min:0,size:"small"}})},57632:(e,t,n)=>{"use strict";n.d(t,{C2:()=>i,Qv:()=>l,_5:()=>r,g6:()=>a});const r=async(e={})=>{const t=await(async e=>new Promise((t,n)=>{const r=Object.assign(document.createElement("input"),{type:"file",...e});r.addEventListener("change",e=>{e.target&&t(e.target.files)}),r.addEventListener("cancel",()=>{n(new Error("File selection canceled"))}),r.click()}))(e);if(1===t.length)return t[0];throw new Error("Exactly one file should be selected")},o=e=>async t=>new Promise(n=>{const r=new FileReader;r.addEventListener("load",()=>{n(r.result)}),r[`readAs${e}`](t)}),a=o("ArrayBuffer"),i=o("DataURL"),l=o("Text")},57754:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>j,Ck:()=>E,FZ:()=>y,Fs:()=>m,K9:()=>C,Rr:()=>O,ZC:()=>v,_c:()=>T,c6:()=>x,dx:()=>w,js:()=>b,tD:()=>g,ui:()=>I,ur:()=>S,wA:()=>A,zU:()=>p});var r=n(65307),o=n(43525),a=n(44294),i=n(89933),l=n(27989),c=n(40861);const s={open:!1,selection:n(39441).Ml,settings:{dronesVisible:!0},showData:void 0,adaptResult:void 0},u={historyInit(){},historyJump(){},historyRedo(){},historySnap(){},historyUndo(){}},{reducer:f,actions:d}=(0,r.Z0)({name:"show-configurator",initialState:s,reducers:{...u,showDialog(e,t){e.open=!0,void 0!==t.payload&&(e.showData=t.payload)},closeDialog:e=>({...s,settings:{...e.settings}}),updateSelection:{prepare:(e,t)=>({payload:{mode:e,ids:t}}),reducer(e,t){const{mode:n,ids:r}=t.payload;"add"===n?e.selection=(0,i.c)(e.selection,r):"clear"===n?e.selection=[]:"remove"===n?e.selection=(0,i.c)(e.selection,[],r):"set"===n?e.selection=(0,i.c)([],r):"toggle"===n&&(e.selection=(0,i.c)([],(0,o.A)(e.selection,r)))}},setDronesVisible(e,t){e.settings.dronesVisible=t.payload},initializeWithData(e,t){e.showData=t.payload,e.adaptResult=void 0},setAdaptResult(e,t){e.adaptResult=t.payload},moveHomePositionsByMapCoordinateDelta(e,t){if(void 0===e.showData)return;const{delta:n,drones:r}=t.payload,o=void 0===r?()=>!0:e=>e in r,a=(0,l.Yn)(e.showData.coordinateSystem.origin,n),i=new l.f9(e.showData.coordinateSystem).fromLonLat(a);e.showData.homePositions=e.showData.homePositions.map((e,t)=>void 0!==e&&o(t)?[e[0]+i[0],e[1]+i[1],e[2]]:e)},moveHomePositionsToLonLat(e,t){if(void 0===e.showData)return;const n=new l.f9(e.showData.coordinateSystem);for(const[r,o]of t.payload){if(void 0===o)continue;const t=n.fromLonLat(o),a=e.showData.homePositions[r];e.showData.homePositions[r]=[t[0],t[1],a?a[2]:0]}},moveOutdoorShowOriginByMapCoordinateDelta(e,t){void 0!==e.showData&&(e.showData.coordinateSystem.origin=(0,l.Yn)(e.showData.coordinateSystem.origin,t.payload))},rotateHomePositions(e,t){if(void 0===e.showData)return;const{rotationOriginInMapCoordinates:n,angle:r,drones:o}=t.payload,i=void 0===o?()=>!0:e=>e in o,s=new l.f9(e.showData.coordinateSystem).fromLonLat((0,l.Al)(n));e.showData.homePositions=e.showData.homePositions.map((e,t)=>{if(void 0===e||!i(t))return e;const n=new a.default(e);n.rotate((0,c.eh)(-r),s);const o=n.getFlatCoordinates();return o.length<2?void 0:[o[0],o[1],e[2]]})},rotateShow(e,t){if(void 0===e.showData)return;const{rotationOriginInMapCoordinates:n,angle:r}=t.payload,o=(0,l.Ur)(e.showData.coordinateSystem.origin),i=new a.default(o);i.rotate((0,c.eh)(-r),n);const s=(0,l.Al)(i.getFlatCoordinates()),u=Number.parseFloat(e.showData.coordinateSystem.orientation)+r;Number.isFinite(u)&&(e.showData.coordinateSystem.origin=s,e.showData.coordinateSystem.orientation=u.toFixed(1))}}}),{closeDialog:p,historyInit:m,historyJump:y,historyRedo:g,historySnap:b,historyUndo:v,initializeWithData:h,moveHomePositionsByMapCoordinateDelta:A,moveHomePositionsToLonLat:S,moveOutdoorShowOriginByMapCoordinateDelta:E,rotateHomePositions:O,rotateShow:w,setAdaptResult:T,setDronesVisible:C,showDialog:I,updateSelection:x}=d,j=f},58364:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>c,eY:()=>l,wW:()=>i});var r=n(65307);const{actions:o,reducer:a}=(0,r.Z0)({name:"light-control",initialState:{active:!1,color:"#ffffff"},reducers:{setColor(e,t){"string"==typeof t.payload&&(e.color=t.payload)},setLightControlActive(e,t){e.active=Boolean(t.payload)}}}),{setColor:i,setLightControlActive:l}=o,c=a},58477:(e,t,n)=>{"use strict";var r;n.d(t,{I:()=>r}),function(e){e.GEOFENCE="geofence",e.SETTINGS="settings"}(r||(r={}))},58718:(e,t,n)=>{"use strict";n.d(t,{Ds:()=>a,Qg:()=>i,Te:()=>l});var r=n(37177),o=n(67932);function a(e){return()=>{(0,r.k)("string"==typeof e?{message:e}:e)}}function i(e){return a({message:e,semantics:o.N.ERROR})}function l(e){return a({message:e,semantics:o.N.SUCCESS})}},58917:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,_U:()=>c,xx:()=>l});var r=n(65307),o=n(39441);const{actions:a,reducer:i}=(0,r.Z0)({name:"version-check",initialState:{dialog:{open:!1}},reducers:{closeVersionCheckDialog:(0,o.kP)(e=>{e.dialog.open=!1}),showVersionCheckDialog:(0,o.kP)(e=>{e.dialog.open=!0})}}),{closeVersionCheckDialog:l,showVersionCheckDialog:c}=a,s=i},59169:()=>{},59952:(e,t,n)=>{"use strict";n.d(t,{L:()=>a,NL:()=>r,o8:()=>i});var r,o=n(27989);function a(e){return e?.startsWith("draw")}function i(e,t){switch(e){case r.DRAW_POINT:return{type:"Point"};case r.DRAW_CIRCLE:return{type:"Circle"};case r.DRAW_RECTANGLE:return{geometryFunction:(0,o.Pk)(()=>t?-t.getView().getRotation():0),type:"Circle"};case r.DRAW_PATH:return{type:"LineString"};case r.DRAW_POLYGON:return{type:"Polygon"};default:return{type:"Point"}}}!function(e){e.SELECT="select",e.ZOOM="zoom",e.PAN="pan",e.DRAW_POINT="drawPoint",e.DRAW_CIRCLE="drawCircle",e.DRAW_RECTANGLE="drawRectangle",e.DRAW_PATH="drawPath",e.DRAW_POLYGON="drawPolygon",e.CUT_HOLE="cutHole",e.EDIT_FEATURE="editFeature",e.ADD_WAYPOINT="addWaypoint"}(r||(r={}))},61212:(e,t,n)=>{"use strict";n.d(t,{$9:()=>H,D0:()=>b,IN:()=>E,JU:()=>N,K2:()=>L,KL:()=>M,O2:()=>V,Sw:()=>A,Tt:()=>v,UJ:()=>k,XE:()=>_,XP:()=>g,Y5:()=>f,Ye:()=>m,_O:()=>B,_r:()=>z,aw:()=>T,c0:()=>S,f1:()=>G,jG:()=>D,li:()=>p,my:()=>d,nG:()=>P,nm:()=>y,nt:()=>h,q9:()=>F,vD:()=>I,wR:()=>j,zk:()=>x});var r=n(25508),o=n(97859),a=n(99589),i=n(91949),l=n(16238),c=n(71379),s=n(91236),u=n(53275);const f=e=>e.servers.token??void 0,d=e=>e.servers.current.timeSync.clockSkew,p=(0,r.Mz)(e=>e.servers.current.timeSync,({clockSkew:e,roundTripTime:t})=>!(0,o.default)(e)&&!(0,o.default)(t)&&t<=c.f&&Math.abs(e)<=t/2?0:e),m=e=>e.servers.current.timeSync.roundTripTime,y=e=>e.dialogs.serverSettings.protocol||u.Z.WS,g=e=>e.dialogs.serverSettings.hostName,b=e=>e.dialogs.serverSettings.port,v=((0,r.Mz)(e=>e.dialogs.serverSettings,({hostName:e,port:t})=>e?`${e}:${t}`:void 0),(0,r.Mz)(e=>e.dialogs.serverSettings,y,({hostName:e,port:t,isSecure:n},r)=>{const o=r===u.Z.WS?n?"https":"http":r;return e?`${o}://${e}:${t}`:void 0})),h=(0,r.Mz)(e=>e.dialogs.serverSettings,e=>e.servers.current.ports,y,({hostName:e,isSecure:t,port:n},r,o)=>{const a=t?"https":"http",i="number"==typeof r.http?r.http:0;return e&&i>0?`${a}://${e}:${i}`:o===u.Z.WS?`http://${e}:${n}`:`http://${e}:${n-1}`}),A=e=>e.servers.current.version,S=e=>(0,r.Mz)(A,t=>{try{return!!t&&a.satisfies(t,e,{loose:!0})}catch(e){return!1}}),E=e=>e.servers.current,O=e=>e.servers.current.features,w=e=>e.servers.current.license,T=(0,r.Mz)(e=>e.servers.detected,l.Im),C=(0,r.Mz)(E,e=>e.state===i.KN.CONNECTED?e.authentication:s.uY),I=(0,r.Mz)(C,e=>e.user),x=(0,r.Mz)(C,e=>e.valid),j=(0,r.Mz)(I,Boolean),P=e=>e.servers.isAuthenticating,k=(0,r.Mz)(E,e=>e.state===i.KN.CONNECTED),_=(0,r.Mz)(E,e=>e.state===i.KN.CONNECTING),N=(0,r.Mz)(C,e=>e.methods&&e.methods.length>0),R=e=>(0,r.Mz)(O,t=>Boolean(t[e])),D=R("virtual_uavs"),M=R("map_cache"),L=R("studio"),F=(U="pro",(0,r.Mz)(w,e=>e?.features?.some(e=>e.type===U)));var U;const G=(0,r.Mz)(C,e=>e.required),V=e=>e.servers.current.timeSync.adjusting,B=e=>e.servers.current.timeSync.calculating,z=(0,r.Mz)(e=>e.servers.current.timeSync,({clockSkew:e,roundTripTime:t})=>!(0,o.default)(e)&&!(0,o.default)(t)&&Math.abs(e)>Math.max(t/2,c.X)),H=e=>e.servers.timeSyncDialog.open},61587:(e,t,n)=>{"use strict";n.d(t,{At:()=>s,Ay:()=>d,u:()=>f});var r=n(65307),o=n(16238),a=n(31404);const i=o.Tg,{actions:l,reducer:c}=(0,r.Z0)({name:"clocks",initialState:i,reducers:{clearClockList(e){(0,o.d5)(e)},setClockState(e,{payload:{id:t,...n}}){(0,a.Yc)(e,t,n)},setClockStateMultiple(e,{payload:t}){for(const[n,r]of Object.entries(t))(0,a.Yc)(e,n,r)}}}),{clearClockList:s,setClockState:u,setClockStateMultiple:f}=l,d=c},62528:(e,t,n)=>{"use strict";n.d(t,{A0:()=>_,IU:()=>E,K1:()=>k,Pp:()=>S,SO:()=>j,TG:()=>r,XV:()=>C,kE:()=>x,lJ:()=>P,y8:()=>T});var r,o=n(74848),a=n(8567),i=n(92602),l=n(4510),c=n(15443),s=n(54192),u=n(42317),f=n(69503),d=n(15147),p=n(66539),m=n(17718),y=n(63666),g=n(46821),b=n(29301),v=n(23149),h=(n(96540),n(41895)),A=n(86181);!function(e){e.START="start",e.END="end"}(r||(r={}));var S,E;!function(e){e.SHOW="show",e.WAYPOINT="waypoint",e.UNKNOWN=""}(S||(S={})),function(e){e.CHANGE_ALTITUDE="changeAltitude",e.CHANGE_FLIGHT_MODE="changeFlightMode",e.CHANGE_HEADING="changeHeading",e.CHANGE_SPEED="changeSpeed",e.GO_TO="goTo",e.HOVER="hover",e.LAND="land",e.MARKER="marker",e.RETURN_TO_HOME="returnToHome",e.SET_PARAMETER="setParameter",e.SET_PAYLOAD="setPayload",e.TAKEOFF="takeoff",e.UNKNOWN="",e.UPDATE_FLIGHT_AREA="updateFlightArea",e.UPDATE_GEOFENCE="updateGeofence",e.UPDATE_SAFETY="updateSafety"}(E||(E={}));var O;!function(e){e.TURN_ON="on",e.TURN_OFF="off",e.TRIGGER="trigger",e.TRIGGER_AT_INTERVAL="triggerInterval",e.TRIGGER_AT_DISTANCE="triggerDistance"}(O||(O={}));const w=e=>{return(0,v.A)(e)&&"id"in e&&"string"==typeof e.id&&"type"in e&&(t=e.type,Object.values(E).includes(t))&&"parameters"in e&&(0,v.A)(e.parameters);var t},T={[E.CHANGE_ALTITUDE]:(0,o.jsx)(f.A,{}),[E.CHANGE_FLIGHT_MODE]:(0,o.jsx)(l.A,{}),[E.CHANGE_HEADING]:(0,o.jsx)(m.A,{}),[E.CHANGE_SPEED]:(0,o.jsx)(b.A,{}),[E.GO_TO]:"#",[E.HOVER]:(0,o.jsx)(p.A,{}),[E.LAND]:(0,o.jsx)(c.A,{}),[E.MARKER]:(0,o.jsx)(i.A,{}),[E.RETURN_TO_HOME]:(0,o.jsx)(d.A,{}),[E.SET_PARAMETER]:(0,o.jsx)(g.A,{}),[E.SET_PAYLOAD]:(0,o.jsx)(a.A,{}),[E.TAKEOFF]:(0,o.jsx)(s.A,{}),[E.UNKNOWN]:"?",[E.UPDATE_FLIGHT_AREA]:(0,o.jsx)(u.A,{}),[E.UPDATE_GEOFENCE]:(0,o.jsx)(h.A,{}),[E.UPDATE_SAFETY]:(0,o.jsx)(y.A,{})},C={[E.CHANGE_ALTITUDE]:"Change altitude",[E.CHANGE_FLIGHT_MODE]:"Change flight mode",[E.CHANGE_HEADING]:"Change heading",[E.CHANGE_SPEED]:"Change speed",[E.GO_TO]:"Go to waypoint",[E.HOVER]:"Hover at position",[E.LAND]:"Land",[E.MARKER]:"Marker",[E.RETURN_TO_HOME]:"Return to home",[E.SET_PARAMETER]:"Set parameter",[E.SET_PAYLOAD]:"Set payload",[E.TAKEOFF]:"Takeoff",[E.UNKNOWN]:"Unknown mission item",[E.UPDATE_FLIGHT_AREA]:"Update flight area",[E.UPDATE_GEOFENCE]:"Update geofence",[E.UPDATE_SAFETY]:"Update safety parameters"},I={title:"Altitude",type:"object",properties:{value:{title:"Value",description:"The altitude to reach in [m]",type:"number",minimum:0,exclusiveMinimum:0},reference:{title:"Reference",description:"The altitude reference to use",type:"string",enum:Object.values(A.Mb),default:A.Mb.HOME}},required:["value","reference"]},x={[E.CHANGE_ALTITUDE]:{properties:{alt:I},required:["alt"]},[E.CHANGE_FLIGHT_MODE]:{properties:{},required:[]},[E.CHANGE_HEADING]:{properties:{heading:{title:"Heading",type:"object",properties:{value:{title:"Value",description:"The absolute heading to turn to in [deg]",type:"number"},mode:{title:"Mode",description:"The heading mode to use",type:"string",enum:Object.values(A.GH),default:A.GH.ABSOLUTE}}}},required:["heading"]},[E.CHANGE_SPEED]:{properties:{velocityXY:{title:"Horizontal speed",description:"The horizontal velocity to use in [m/s]",type:"number",minimum:0,exclusiveMinimum:0},velocityZ:{title:"Vertical speed",description:"The vertical velocity to use in [m/s]",type:"number",minimum:0,exclusiveMinimum:0}},required:[]},[E.GO_TO]:{properties:{lat:{title:"Latitude",description:"The latitude to go to in [deg]",type:"number",minimum:-90,maximum:90},lon:{title:"Longitude",description:"The longitude to go to in [deg]",type:"number",minimum:-180,maximum:180}},required:["lat","lon"]},[E.HOVER]:{properties:{duration:{title:"Duration",description:"Duration of the hover in [s]",type:"number",minimum:0}},required:["duration"]},[E.LAND]:{properties:{},required:[]},[E.MARKER]:{properties:{},required:[]},[E.RETURN_TO_HOME]:{properties:{},required:[]},[E.SET_PARAMETER]:{properties:{},required:[]},[E.SET_PAYLOAD]:{properties:{},required:[]},[E.TAKEOFF]:{properties:{alt:I},required:[]},[E.UNKNOWN]:{properties:{},required:[]},[E.UPDATE_FLIGHT_AREA]:{properties:{},required:[]},[E.UPDATE_GEOFENCE]:{properties:{},required:[]},[E.UPDATE_SAFETY]:{properties:{},required:[]}},j=e=>{if(!w(e))return!1;switch(e.type){case E.CHANGE_ALTITUDE:{const{alt:t,velocityZ:n}=e.parameters;return(0,A.VP)(t)&&(void 0===n||Number.isFinite(n))}case E.CHANGE_FLIGHT_MODE:{const{mode:t}=e.parameters;return"string"==typeof t}case E.CHANGE_HEADING:{const{heading:t,rate:n}=e.parameters;return(0,A.Vq)(t)&&(void 0===n||Number.isFinite(n))}case E.CHANGE_SPEED:{const{velocityXY:t,velocityZ:n}=e.parameters;return(void 0===t||Number.isFinite(t))&&(void 0===n||Number.isFinite(n))}case E.GO_TO:{const{lat:t,lon:n,alt:r,velocityXY:o,velocityZ:a}=e.parameters;return Number.isFinite(t)&&Number.isFinite(n)&&(void 0===r||(0,A.VP)(r))&&(void 0===o||Number.isFinite(o))&&(void 0===a||Number.isFinite(a))}case E.HOVER:{const{duration:t}=e.parameters;return Number.isFinite(t)}case E.LAND:{const{velocityZ:t}=e.parameters;return void 0===t||Number.isFinite(t)}case E.MARKER:{const{marker:n,ratio:o}=e.parameters;return t=n,Object.values(r).includes(t)&&Number.isFinite(o)}case E.RETURN_TO_HOME:{const{velocityXY:t,velocityZ:n}=e.parameters;return(void 0===t||Number.isFinite(t))&&(void 0===n||Number.isFinite(n))}case E.SET_PARAMETER:{const{name:t,value:n}=e.parameters;return"string"==typeof t&&("boolean"==typeof n||"number"==typeof n&&Number.isFinite(n)||"string"==typeof n)}case E.SET_PAYLOAD:{const{name:t,action:n,value:r}=e.parameters;return"string"==typeof t&&(e=>Object.values(O).includes(e))(n)&&(void 0===r||Number.isFinite(r))}case E.TAKEOFF:{const{alt:t,velocityZ:n}=e.parameters;return(0,A.VP)(t)&&(void 0===n||Number.isFinite(n))}case E.UNKNOWN:return!1;case E.UPDATE_FLIGHT_AREA:{const{coordinateSystem:t}=e.parameters;return"string"==typeof t&&"geodetic"===t}case E.UPDATE_GEOFENCE:{const{coordinateSystem:t}=e.parameters;return"string"==typeof t&&"geodetic"===t}case E.UPDATE_SAFETY:{const{safety:t}=e.parameters;return Boolean(t)}}var t};function P(e){if(j(e)&&e.type===E.UPDATE_FLIGHT_AREA){const{flightArea:t}=e.parameters;return t.polygons?.[0]}}function k(e){if(j(e)&&e.type===E.GO_TO){const{lon:t,lat:n}=e.parameters;return{lon:t,lat:n}}}function _(e){if(j(e))return e.type===E.GO_TO||e.type===E.TAKEOFF||e.type===E.CHANGE_ALTITUDE?e.parameters.alt:void 0}},63101:(e,t,n)=>{"use strict";n.d(t,{$b:()=>s,Ay:()=>m,LW:()=>d,x1:()=>f});n(52675),n(89463),n(2259),n(45700),n(23792),n(89572),n(2892),n(26099),n(47764),n(62953);var r=n(71036),o=n(6326),a=n(91949),i=n(3471);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={DEBUG:0,INFO:10,WARNING:20,ERROR:30,FATAL:40},u=c(c(c(c(c({},s.DEBUG,r.Ay.off),s.INFO,(0,r.M7)(a.AI.INFO)),s.WARNING,(0,r.M7)(a.AI.WARNING)),s.ERROR,(0,r.M7)(a.AI.ERROR)),s.FATAL,(0,r.M7)(a.AI.FATAL));function f(e){return e<=s.DEBUG?u[s.DEBUG]:e<=s.INFO?u[s.INFO]:e<=s.WARNING?u[s.WARNING]:e<=s.ERROR?u[s.ERROR]:e<=s.FATAL?u[s.FATAL]:r.Ay.off}function d(e){return"CRITICAL"===e&&(e="FATAL"),s[e]||"DEBUG"}function p(e){var t=function(t,n){i.Ay.dispatch((0,o.fp)({level:t,message:String(n),module:e}))};this.debug=t.bind(this,s.DEBUG),this.error=t.bind(this,s.ERROR),this.info=t.bind(this,s.INFO),this.log=this.info,this.warn=t.bind(this,s.WARNING),this.assert=function(e,t){e||this.debug(t)}.bind(this)}const m=function(e){return new p(String(e||""))}},63779:()=>{},64688:()=>{},65756:(e,t,n)=>{"use strict";n.d(t,{Ag:()=>c,Ay:()=>u,Lt:()=>s,mh:()=>l});var r=n(65307);const o={loading:!1,error:void 0,data:void 0,lastUpdateAttemptAt:void 0,lastUpdatedAt:void 0},{actions:a,reducer:i}=(0,r.Z0)({name:"weather",initialState:o,reducers:{clearWeatherData(e){e.data=void 0,e.error=void 0,e.lastUpdatedAt=void 0,e.lastUpdateAttemptAt=void 0},loadingPromisePending(e){e.loading=!0},loadingPromiseFulfilled(e,t){e.data=t.payload,e.loading=!1,e.error=void 0},loadingPromiseRejected:{prepare:e=>({payload:String(e)}),reducer(e,t){e.loading=!1,e.error=t.payload}},setLastUpdateTimestamp(e,t){e.lastUpdatedAt=Number(t.payload)},setLastUpdateAttemptTimestamp(e,t){e.lastUpdateAttemptAt=Number(t.payload)}}}),{clearWeatherData:l,setLastUpdateTimestamp:c,setLastUpdateAttemptTimestamp:s}=a,u=i},65963:(e,t,n)=>{"use strict";n.d(t,{T_:()=>O,c3:()=>A,k3:()=>E,p_:()=>S});var r=n(74848),o=n(30073),a=n(40644),i=n(95884),l=n(77500),c=n(29008),s=n(42531),u=n(89610),f=n(83869),d=n(43525),p=n(5556),m=n.n(p),y=n(96540),g=n(61919),b=n(32250),v=n(36348);const h=(e,t)=>{switch(typeof e){case"string":return(0,r.jsx)(g.qq,{ref:t,text:e});case"undefined":return null;default:return e?(0,r.jsx)("div",{children:e}):null}};function A(e,t={}){const{backgroundHint:n,dataProvider:r,displayName:o,listFactory:a,postprocess:i}=w(t);e=C(e);const l=y.forwardRef((t,o)=>{const l=r(t),c=i(l.map(n=>e(n,t)),t);return T(c)?a(t,c,o):h(n,o)});return o&&(l.displayName=o),l}function S({activateItem:e,getSelection:t,setSelection:n,getListItems:r}){return n||e?(o,a)=>(i,l)=>{const c=l(),s=t?t(c):[];let u;if((0,v.G3)(a.nativeEvent||a)&&n)u=n((0,d.A)(s,[o]));else if((0,b.m5)(a.nativeEvent||a)&&r&&n){const e=r(c);if(s.length>0){const t=s.at(-1),r=e.indexOf(t),a=e.indexOf(o),i=e.slice(Math.min(r,a),Math.max(r,a)+1),l=i.indexOf(t);l>=0&&l!==i.length-1&&(i.splice(l,1),i.push(t)),u=n(i)}}else{const t=s&&1===s.length&&s[0]===o;e&&t?(u=a.detail>1?e(o):null,a.detail>1&&window.getSelection()?.removeAllRanges()):n&&!t&&(u=n([o]))}u&&i(u)}:null}function E(e,t={}){const{backgroundHint:n,dataProvider:r,displayName:o,listFactory:a,postprocess:i}=w(t);e=C(e);const l=y.forwardRef((t,o)=>{const l=r(t),c=i(l.map(n=>e(n,{...t,onChange:void 0,onItemSelected:t.onChange?e=>{t.onChange(e,n)}:void 0},n.id===t.value)),t);return T(c)?a(t,c,o):h(n,o)});return l.propTypes={onChange:m().func,value:m().string},o&&(l.displayName=o),l}function O(e,t={}){const{backgroundHint:n,dataProvider:r,displayName:o,listFactory:a,postprocess:i}=w(t);e=C(e);const l=y.forwardRef((t,o)=>{const l=r(t),c=function({activateItem:e,getSelection:t,setSelection:n}){return n||e?r=>o=>{const a=t?t():[];if((0,v.G3)(o.nativeEvent||o)&&n&&n((0,d.A)(a,[r])),a&&1===a.length&&a[0]===r){if(!e)return;e(r)}n&&n([r])}:()=>{}}({activateItem:t.onActivate,getSelection:()=>t.value,setSelection:t.onChange}),u=i(l.map(n=>e(n,{...t,onChange:void 0,onItemSelected:c(n.id)},(0,s.A)(t.value,n.id))),t);return T(u)?a(t,u,o):h(n,o)});return l.propTypes={onActivate:m().func,onChange:m().func,value:m().arrayOf(m().string).isRequired},o&&(l.displayName=o),l}const w=e=>{return{postprocess:c.default,...e,dataProvider:(t=e.dataProvider,(0,u.default)(t)?t:e=>(0,l.A)(e,t)),listFactory:I(e.listFactory)};var t};function T(e){return Array.isArray(e)&&e.length>0}function C(e){if(Object.prototype.isPrototypeOf.call(y.Component,e)){const t=e===a.Ay||e==i.A?"onTouchTap":"onClick";return(n,r,o=!1)=>y.createElement(e,{...n,key:n.id,[t]:r.onItemSelected,selected:o})}return e}function I(e){return void 0===e?(e,t,n)=>{const r=e;return y.createElement(o.A,{dense:r.dense||r.mini,disablePadding:r.disablePadding||r.mini,ref:n},t)}:Object.prototype.isPrototypeOf.call(y.Component,e)?(0,f.A)(y.createElement,e):e}},66020:()=>{},66089:()=>{},66380:(e,t,n)=>{"use strict";n.d(t,{E2:()=>i,Tq:()=>f,Tu:()=>u,fH:()=>p,fj:()=>d,jZ:()=>s,lq:()=>a,mw:()=>o,nd:()=>l,yj:()=>c});const r=e=>null==e||""===e,o=e=>{if(r(e))return"Value is required"},a=e=>t=>r(t)?void 0:e(t),i=e=>{if(!Number.isFinite(Number(e)))return"Value must be a number"},l=e=>{if(!Number.isInteger(Number(e)))return"Value must be an integer"},c=e=>{if(1!==Math.sign(Number(e)))return"Value must be positive"};function s(e){return t=>{if(Number(t)<e)return`Minimum allowed value is ${e}`}}function u(e){return t=>{if(Number(t)>e)return`Maximum allowed value is ${e}`}}function f(e,t){return e>t&&([e,t]=[t,e]),n=>{if(Number(n)<e||Number(n)>t)return`Value must be between ${e} and ${t}`}}function d(e){return t=>e.map(e=>e(t)).find(Boolean)}function p(e){return t=>{const n={};for(const r of Object.keys(e)){const o=d([e[r]].flat())(t[r]);o&&(n[r]=o)}return n}}},66947:(e,t,n)=>{"use strict";e.exports=n.p+"95ccd0f851a9715276ce.png"},67089:(e,t,n)=>{"use strict";n.d(t,{Gj:()=>u,Ay:()=>m,eR:()=>d,RA:()=>p,E9:()=>s,vz:()=>f});var r,o=n(65307),a=n(39441);!function(e){e.LIVE_CAM="liveCam",e.SCHEDULE="schedule",e.STATUS="status",e.STORAGE="storage"}(r||(r={}));const i={open:!1,selectedDockId:void 0,selectedTab:r.STATUS},{actions:l,reducer:c}=(0,o.Z0)({name:"dock-details",initialState:i,reducers:{openDockDetailsDialog(e,{payload:t}){e.selectedDockId=t,e.open=!0},closeDockDetailsDialog:(0,a.kP)(e=>{e.open=!1}),setSelectedTabInDockDetailsDialog(e,{payload:t}){e.selectedTab=t}}}),{openDockDetailsDialog:s,closeDockDetailsDialog:u,setSelectedTabInDockDetailsDialog:f}=l,d=e=>e.dialogs.dockDetails.selectedDockId,p=e=>e.dialogs.dockDetails.selectedTab,m=c},67309:(e,t,n)=>{"use strict";e.exports=n.p+"3e448884afe00630c246.ttf"},67932:(e,t,n)=>{"use strict";var r;n.d(t,{N:()=>r}),function(e){e.SUCCESS="success",e.WARNING="warning",e.ERROR="error",e.INFO="info",e.DEFAULT="default"}(r||(r={}))},69091:(e,t,n)=>{"use strict";n.d(t,{Ab:()=>c,Kw:()=>l});var r=n(1806),o=n(39622),a=n(32084);const i={unix:0};function l(e){if(""===e)return 0;const t=e.split(":");if(t.length<=3){const e=t.map(e=>e.length>0?Number.parseFloat(e):0);if(e.every(e=>Number.isFinite(e)))return e.reduce((e,t)=>60*e+t,0)}return Number.NaN}const c=e=>(0,a.A)(e)&&(0,o.A)(i,e)?i[e]:s(e),s=e=>(0,r.A)(e).getTime()},69897:(e,t,n)=>{"use strict";var r,o,a;n.d(t,{OX:()=>r,_9:()=>a,mb:()=>o}),function(e){e.INDOOR="indoor",e.OUTDOOR="outdoor"}(r||(r={})),function(e){e.SYNCED="synced",e.NOT_SYNCED="notSynced",e.IN_PROGRESS="inProgress",e.ERROR="error"}(o||(o={})),function(e){e.RC="rc",e.AUTO="auto"}(a||(a={}))},70353:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});const r=(0,n(65307).VP)("objects/notifyObjectsDeletedOnServer")},71036:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>y,Jy:()=>u,M7:()=>m,VM:()=>c.VM,m_:()=>d});var r=n(79239),o=n(78034),a=n(82390),i=n(44913),l=n(59116),c=n(49591),s=n(91949);const u={...c.Jy,main:o.A[500],geofence:r.A[700],grossShowConvexHull:"#fc0",netShowConvexHull:"#fc0fc0",flightArea:"#0c4",plannedTrajectory:"#08f",missionItem:"#0cf",auxiliaryMissionItem:"#f80",currentMissionItem:"#0fc",doneMissionItem:"#0f8",selectedMissionItem:"#fc0",positionHold:a.A.A400},f=e=>"object"==typeof e?(0,l.A)(e,f):Object.freeze((0,i.A)(e).rgb().array()),d=f(u),p=new Map([[s.AI.CRITICAL,u.seriousWarning],[s.AI.DEBUG,u.off],[s.AI.ERROR,u.error],[s.AI.INFO,u.info],[s.AI.WARNING,u.warning]]),m=e=>p.has(e)?p.get(e):u.missing,y=u},71042:(e,t,n)=>{"use strict";n.d(t,{I_:()=>A,TG:()=>y,TX:()=>w,VQ:()=>g,bR:()=>h,gZ:()=>O,je:()=>b,kP:()=>m,lg:()=>S,sU:()=>E,xt:()=>v});var r=n(23255),o=n(87480),a=n(74722),i=n(25508),l=n(18728),c=n(37802),s=n(27322),u=n(30325),f=n(16238),d=n(75348),p=n(39441);const m=e=>e.features.byId,y=e=>e.features.order,g=(0,i.Mz)(e=>e.features,f.Im),b=(e,t)=>e.features.byId[t],v=(e,t,n)=>{const{type:i}=t;if(!i)throw new Error("Feature must have a type");if(!n){const t=(0,a.A)(m(e),e=>e.id),r=(0,o.A)((0,l.rv)(i));n=(0,d.OM)(r,t)}const c=Object.keys(e.features.byId);return(0,d.KN)((0,r.A)(n),c)},h=e=>e.dialogs.featureEditor.featureId,A=e=>e.dialogs.featureEditor.dialogVisible,S=e=>e.dialogs.featureEditor.selectedTab,E=(0,s.qr)(c.hy),O=((0,i.Mz)(E,e=>1===e.length?e[0]:void 0),e=>(0,i.Mz)((e=>(0,i.Mz)(E,m,(t,n)=>t.filter(t=>n?.[t]?.type===e)))(e),e=>1===e.length?e[0]:void 0)),w=((0,i.Mz)(E,e=>1===e.length?e:p.Ml),(0,i.Mz)(E,m,(e,t)=>(0,u.z)(e.map(e=>t[e]))));(0,i.Mz)(w,e=>e.map(e=>e.label)),(0,i.Mz)(w,e=>e.map(e=>e.type))},71379:(e,t,n)=>{"use strict";n.d(t,{X:()=>r,f:()=>o});const r=1e3,o=500},71458:(e,t,n)=>{"use strict";n.d(t,{EZ:()=>l,Mb:()=>r,_e:()=>s,ay:()=>i,jp:()=>c,n_:()=>a,us:()=>o});var r,o;n(26144);!function(e){e.AHL="ahl",e.AMSL="amsl"}(r||(r={})),function(e){e.NONE="none",e.ABSOLUTE="absolute",e.RELATIVE="relative"}(o||(o={}));const a={type:r.AHL,value:0},i={type:o.RELATIVE,value:0},l={width:12,depth:12,height:6},c="showUpload",s=Object.freeze({type:c})},72732:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});n(52675),n(89463),n(2259),n(23418),n(23792),n(34782),n(62010),n(26099),n(27495),n(90906),n(38781),n(47764),n(62953);var r=n(66401),o=n(61225),a=(n(28706),n(54743),n(11745),n(33110),n(40875),n(10287),n(3362),n(21489),n(48140),n(81630),n(72170),n(75044),n(69539),n(31694),n(89955),n(33206),n(44496),n(66651),n(12887),n(19369),n(66812),n(8995),n(31575),n(36072),n(88747),n(28845),n(29423),n(57301),n(373),n(86614),n(41405),n(33684),n(91706),n(96847),n(13293));function i(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var i=r&&r.prototype instanceof s?r:s,u=Object.create(i.prototype);return l(u,"_invoke",function(n,r,o){var a,i,l,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,i=0,l=e,d.n=n,c}};function p(n,r){for(i=n,l=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(l=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),i=u,l=m;(t=i<2?e:l)||!f;){a||(i?i<3?(i>1&&(d.n=-1),p(i,l)):d.n=l:d.v=l);try{if(s=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(f=d.n<0)?l:n.call(r,d))!==c)break}catch(t){a=e,i=1,l=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),u}var c={};function s(){}function u(){}function f(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(l(t={},r,function(){return this}),t),p=f.prototype=s.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=f,l(p,"constructor",f),l(f,"constructor",u),u.displayName="GeneratorFunction",l(f,o,"GeneratorFunction"),l(p),l(p,o,"Generator"),l(p,r,function(){return this}),l(p,"toString",function(){return"[object Generator]"}),(i=function(){return{w:a,m}})()}function l(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}l=function(e,t,n,r){function a(t,n){l(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},l(e,t,n,r)}function c(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,l,"next",e)}function l(e){c(a,r,o,i,l,"throw",e)}i(void 0)})}}function u(e){var t,n,r,o,a,i=e.length;for(t="",n=0;n<i;)switch((r=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[n++],a=e[n++],t+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&a)}return t}function f(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return new Uint8Array(t)}function d(){return(d=s(i().m(function e(t,n){var r,o,l,c,s,d,p;return i().w(function(e){for(;;)switch(e.n){case 0:if(r=(t||{}).data){e.n=1;break}return e.a(2);case 1:for(l=a.o4.toUint8Array(r),o=0;o<l.length;o++)l[o]^=85;if(0!==(c=u(l)).length){e.n=2;break}return e.a(2);case 2:if(0!==(s=c.indexOf(" "))){e.n=3;break}d="err Invalid command",e.n=7;break;case 3:if(!(s<0)){e.n=5;break}return e.n=4,m(c);case 4:d=e.v,e.n=7;break;case 5:return e.n=6,m(c.slice(0,s),c.slice(s+1));case 6:d=e.v;case 7:if(!n){e.n=9;break}for(p=f(d),o=0;o<p.length;o++)p[o]^=85;return e.n=8,n(a.o4.fromUint8Array(p));case 8:e.n=10;break;case 9:case 10:return e.a(2)}},e)}))).apply(this,arguments)}var p={};function m(e,t){return y.apply(this,arguments)}function y(){return(y=s(i().m(function e(t,n){var r,o,a,l;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=p[t],a=!1,e.p=1,!r){e.n=3;break}return e.n=2,r(n);case 2:o=e.v,e.n=4;break;case 3:throw new Error("no such command");case 4:a=!0,e.n=6;break;case 5:e.p=5,l=e.v,o=l.toString();case 6:return e.p=6,o=JSON.stringify(o),e.f(6);case 7:return e.a(2,"".concat(a?"ok":"err"," ").concat(o))}},e,null,[[1,5,6,7]])}))).apply(this,arguments)}var g=n(98810),b=n(94153),v=n(38365),h=n(84664),A=n(34809),S=n(70353);var E=n(6184),O=n(58718),w=n(91949),T=n(67932);function C(e){switch((e||"").toLowerCase()){case w.AI.ERROR:case w.AI.CRITICAL:return T.N.ERROR;case w.AI.WARNING:return T.N.WARNING;case w.AI.INFO:return T.N.INFO;default:return T.N.DEFAULT}}T.N.SUCCESS,T.N.ERROR,T.N.WARNING,T.N.INFO,T.N.DEFAULT;var I=n(78641),x=n(3471);function j(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var k=x.Ay.dispatch,_=x.Ay.getState,N=new g.Ay;N.registerNotificationHandlers({"BCN-INF":function(e){return(0,b.o0)(e.body,k,_)},"CLK-INF":function(e){return(0,v.i)(e.body,k)},"CONN-DEL":function(e){return(0,A.s)(e.body,k)},"CONN-INF":function(e){return(0,A.q)(e.body,k)},"DOCK-INF":function(e){return(0,h.$)(e.body,k)},"OBJ-DEL":function(e){return function(e,t){var n=e.ids;Array.isArray(n)&&0!==n.length&&t((0,S.D)(n))}(e.body,k)},"SYS-CLOSE":function(e){e.body&&e.body.reason&&k((0,O.Qg)(e.body.reason))},"SYS-MSG":function(e){e.body&&Array.isArray(e.body.items)&&(0,o.vA)(function(){var t,n=[],o=j(e.body.items);try{for(o.s();!(t=o.n()).done;){var a=t.value;(0,r.A)(a.sender)?k((0,O.Ds)({message:a.message,semantics:C(a.severity)})):n.push({message:a.message,uavId:a.sender,severity:a.severity})}}catch(e){o.e(e)}finally{o.f()}k((0,E.D0)(n))})},"UAV-INF":function(e){return I.Ay.handleUAVInformationMessage(e.body,k)},"X-DBG-REQ":function(e){return function(e,t){return d.apply(this,arguments)}(e.body,N.execute.sendDebugMessage)}});const R=N},72759:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAIklEQVR4nGNgYGD4z4Ad/Mdg4ODDBXCZRFgCp5EEHQMXBwAQAgz0SVCcggAAAABJRU5ErkJggg=="},73776:()=>{},73970:(e,t,n)=>{"use strict";e.exports=n.p+"d1d8bc4c326ab51962ca.ttf"},74144:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(59688),o=n.n(r);const a=new(n(97563).s)(new URL(n.p+n.u(950),n.b)),i=o().pool(a.toString(),{maxWorkers:8}),l={estimateShowCoordinateSystem:(...e)=>i.exec("estimateShowCoordinateSystem",e),findGreedyAssignment:(...e)=>i.exec("findGreedyAssignment",e),loadShow:(e,t={})=>{const n=[e,t];let r;return e instanceof Uint8Array&&(r={transfer:[e.buffer]}),i.exec("loadShow",n,r)}}},74651:(e,t,n)=>{"use strict";var r;n.d(t,{Qb:()=>c,iF:()=>a,lb:()=>l,po:()=>i,uw:()=>r}),function(e){e.ALL="all",e.COMPATIBLE="compatible",e.MISSION="mission",e.SINGLE="single"}(r||(r={}));const o={};function a(e){return o[e]??void 0}function i(e){return a(e)?.title??"Upload data"}function l(e){return a(e)?.scope??r.ALL}function c(e){const t=e?.type;if("string"!=typeof t||0===t.length)throw new Error("Job specification does not have a type");if(o[t])throw new Error(`Upload job type ${t} is already registered`);if(!e.executor)throw new Error("Job specification does not have an executor");return o[t]=e,()=>{delete o[t]}}},74974:(e,t,n)=>{"use strict";n.d(t,{Fu:()=>r,Wq:()=>i,X8:()=>a,r0:()=>o,yu:()=>l});const r=3,o=4.2,a=3.6,i=3.4,l=3.3},75348:(e,t,n)=>{"use strict";n.d(t,{KN:()=>o,OM:()=>a,ls:()=>i});var r=n(23255);function o(e,t){const n=Array.isArray(t);if(n){if(!t.includes(e))return e}else if(!(e in t))return e;let r,o=0;for(;;)if(o++,r=`${e}_${o}`,n){if(!t.includes(r))return r}else if(!(r in t))return r}function a(e,t){if(!t.includes(e))return e;const n=e.match(/^(.*)\s+(\d+)$/),r=n?n[1]:e.trimEnd();let o,a=n?Number.parseInt(n[2],10):0;for(;;)if(a++,o=`${r} ${a}`,!t.includes(o))return o}function i(e,t){return o((0,r.A)(e),t)}},75539:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,O:()=>r});var r,o=n(13293),a=n(46996),i=n(97859),l=n(41811),c=n(61225),s=n(91949);!function(e){e.ACTIVE="active",e.INACTIVE="inactive",e.GONE="gone",e.FORGOTTEN="forgotten"}(r||(r={}));class u{_debug;_debugAsByteArray;_debugString;_errors;_id;_mostSevereError;_position;age;battery;gpsFix;heading;lastUpdated;light;localPosition;localVelocity;mode;velocity;rssi;_positionMemoizer;constructor(e){this._debug=void 0,this._debugAsByteArray=void 0,this._debugString=void 0,this._id=e,this._errors=[],this._mostSevereError=0,this._position=void 0,this.battery={voltage:void 0,percentage:void 0,charging:void 0},this.gpsFix={type:s.os.NO_GPS,numSatellites:void 0,horizontalAccuracy:void 0,verticalAccuracy:void 0},this.heading=void 0,this.lastUpdated=void 0,this.light=65535,this.localPosition=void 0,this.localVelocity=void 0,this.mode=void 0,this.velocity=void 0,this.rssi=[],this._positionMemoizer=(0,l.A)(e=>({...e}))}get agl(){return this._position?.agl}get ahl(){return this._position?.ahl}get amsl(){return this._position?.amsl}get debug(){if(void 0===this._debugAsByteArray&&void 0!==this._debug)try{const e=o.o4.atob(this._debug);this._debugAsByteArray=new Uint8Array(new ArrayBuffer(e.length));for(let t=0;t<e.length;t++)this._debugAsByteArray[t]=e.codePointAt(t)}catch{this._debugAsByteArray=new Uint8Array}return this._debugAsByteArray}get debugString(){return void 0===this._debugString&&void 0!==this.debug&&(this._debugString=Array.from(this.debug).map(e=>e>=32&&e<128?String.fromCodePoint(e):".").join("")),this._debugString}get error(){return this._errors&&this._errors.length>0?this._errors[0]:void 0}get errors(){return this._errors}get id(){return this._id}get lat(){return this._position?.lat}get lon(){return this._position?.lon}get mostSevereError(){return this._mostSevereError}get hasLocalPosition(){return!(0,i.default)(this.localPosition)}get position(){return this._position?.lat&&this._position?.lon?this._positionMemoizer(this._position):void 0}set position(e){(0,c.bN)(this._position,e)||(this._position=e)}handleUAVStatusInfo=e=>{const{timestamp:t,position:n,positionXYZ:r,heading:o,mode:l,gps:c,errors:u,battery:f,light:d,debug:p,velocity:m,velocityXYZ:y,rssi:g}=e;let b,v=!1;if(t&&(this.lastUpdated=t,v=!0),n&&(this.position={lat:n[0]/1e7,lon:n[1]/1e7,amsl:(0,i.default)(n[2])?void 0:n[2]/1e3,ahl:(0,i.default)(n[3])?void 0:n[3]/1e3,agl:(0,i.default)(n[4])?void 0:n[4]/1e3},v=!0),r&&Array.isArray(r)&&r.length>=3&&(this.localPosition=[r[0]/1e3,r[1]/1e3,r[2]/1e3],v=!0),void 0!==o&&this.heading!==o/10&&(this.heading=o/10,v=!0),void 0!==m&&this.velocity!==m&&(this.velocity=[m[0]/1e3,m[1]/1e3,m[2]/1e3],v=!0),y&&(this.localVelocity=[y[0]/1e3,y[1]/1e3,y[2]/1e3],v=!0),void 0!==d&&this.light!==d&&(this.light=d,v=!0),void 0!==l&&this.mode!==l&&(this.mode=l,v=!0),void 0!==c&&Array.isArray(c)&&(this.gpsFix.type=c.length>0?c[0]:s.os.NO_GPS,this.gpsFix.numSatellites=c.length>1&&"number"==typeof c[1]?c[1]:void 0,this.gpsFix.horizontalAccuracy="number"==typeof c[2]?c[2]/1e3:void 0,this.gpsFix.verticalAccuracy="number"==typeof c[3]?c[3]/1e3:void 0,v=!0),void 0!==p&&this._debug!==p&&(this._debug=p,this._debugAsByteArray=void 0,this._debugString=void 0,v=!0),b=Array.isArray(u)?u:u?[u]:[],(0,a.default)(this._errors,b)||(this._errors.splice(0,this._errors.length,...b),this._mostSevereError=Math.max(0,...this._errors),v=!0),Array.isArray(f)){const[e,t,n]=f;this.battery.voltage!==e/10&&(this.battery.voltage=e/10,v=!0),this.battery.percentage!==t&&(this.battery.percentage=t,v=!0),this.battery.charging!==n&&(this.battery.charging=n,v=!0)}return Array.isArray(g)&&(this.rssi=g),v};toJSON(){const e=this.hasLocalPosition?structuredClone(this.localPosition):void 0;return{id:this._id,age:this.age,battery:{...this.battery},debugString:this.debugString,errors:[...this._errors],gpsFix:{...this.gpsFix},heading:this.heading,lastUpdated:this.lastUpdated,light:this.light,localPosition:e,localVelocity:structuredClone(this.localVelocity),mode:this.mode,position:this.position,velocity:structuredClone(this.velocity),rssi:structuredClone(this.rssi)}}}},75595:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(74848),o=(n(96540),n(61919)),a=n(91949);const i=({fixType:e,...t})=>{const n=(0,a.Jj)(e);return(0,r.jsx)(o.qs,{inline:!0,hollow:Boolean(n),status:(0,a.Jq)(e),...t,children:n})}},77440:(e,t,n)=>{"use strict";var r;n.d(t,{v:()=>r}),function(e){e.SYSTEM="system",e.MISSION="mission",e.MTC="mtc",e.SHOW="show",e.END_OF_SHOW="end_of_show"}(r||(r={}))},77552:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(52675),n(89463),n(2259),n(23418),n(23792),n(34782),n(62010),n(26099),n(27495),n(90906),n(38781),n(47764),n(62953);var r=n(96540);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).absolute,t=void 0!==e&&e,n=o((0,r.useState)(null),2),a=n[0],i=n[1];return(0,r.useEffect)(function(){var e=t?"deviceorientationabsolute":"deviceorientation";return window.addEventListener(e,i),function(){window.removeEventListener(e,i)}},[t]),a}},77855:(e,t,n)=>{"use strict";n.d(t,{Jt:()=>c,an:()=>s,dk:()=>u,rb:()=>l});var r=n(7042),o=n(21417);let a;function i(e){void 0!==a&&(a(e),a=void 0)}function l(){return e=>{e((0,r.CF)()),i(void 0)}}function c(e){return void 0===e?l():t=>{t((0,r.gP)()),i(e)}}function s(e={}){return async t=>(i(void 0),t((0,r.jr)({type:o.r.GENERIC,...e})),new Promise(e=>{a=e}))}function u(e,t={}){return async n=>(i(void 0),n((0,r.jr)({type:o.r.CONFIRMATION,message:e,...t})),new Promise(e=>{a=e}))}},77965:()=>{},78196:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>m,Pg:()=>p,Zv:()=>d,_F:()=>u,dK:()=>f});var r=n(82041),o=n(65307),a=n(23068),i=n(10953);const l=(0,a.A)(r.A.map.origin,{position:r.A.map.view.position,angle:r.A.map.view.angle,type:i.h.NWU}),{reducer:c,actions:s}=(0,o.Z0)({name:"map/origin",initialState:l,reducers:{updateFlatEarthCoordinateSystem(e,t){const{angle:n,position:r,type:o}=t.payload;void 0!==r&&(e.position=r),void 0!==n&&(e.angle=n),void 0!==o&&(e.type=o)}}}),{updateFlatEarthCoordinateSystem:u}=s;function f(e){return u({position:e})}function d(e){return u({angle:e})}function p(e){return u({type:e})}const m=c},78641:(e,t,n)=>{"use strict";n.d(t,{yN:()=>u,Ay:()=>d,SM:()=>f});var r=n(74848),o=n(96540),a=n(66401),i=n(71720),l=n(38967),c=n(75539);const s=new class{_uavsById;uavsAdded;uavsUpdated;uavsRemoved;constructor(){this._uavsById={},this.uavsAdded=new l.MiniSignal,this.uavsUpdated=new l.MiniSignal,this.uavsRemoved=new l.MiniSignal}_createUAVById(e){return new c.A(e)}getAllUAVIds(){return Object.keys(this._uavsById).sort()}getAllUAVs(){return this.getAllUAVIds().map(e=>this._uavsById[e])}getUAVById(e){return this._uavsById[e]}getOrCreateUAVById(e){let t=this._uavsById[e];return t||(t=this._createUAVById(e),this._uavsById[e]=t),t}handleUAVInformationMessage(e){if(!e.status)return;const{addedUAVs:t,updatedUAVs:n}=(0,i.A)(e.status,(e,t,n)=>{let r=this.getUAVById(n);r||(r=this._createUAVById(n),this._uavsById[n]=r,e.addedUAVs.push(r));r.handleUAVStatusInfo(t)&&e.updatedUAVs.push(r)},{addedUAVs:new Array,updatedUAVs:new Array});(0,a.A)(t)||this.uavsAdded.dispatch(t),(0,a.A)(n)||this.uavsUpdated.dispatch(n)}removeUAVById(e){this.removeUAVsByIds([e])}removeUAVsByIds(e){const t=[];for(const n of e){const e=this._uavsById[n];void 0!==e&&(t.push(e),delete this._uavsById[n])}(0,a.A)(t)||this.uavsRemoved.dispatch(t)}},u=o.createContext(s),f=e=>o.forwardRef((t,n)=>(0,r.jsx)(u.Consumer,{children:o=>(0,r.jsx)(e,{...t,ref:n,flock:o})})),d=s},78982:()=>{},79368:()=>{},79685:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>D});n(52675),n(89463),n(2259),n(45700),n(2008),n(23418),n(74423),n(23792),n(62062),n(34782),n(89572),n(62010),n(2892),n(83851),n(81278),n(40875),n(79432),n(10287),n(26099),n(60825),n(27495),n(90906),n(38781),n(21699),n(47764),n(98992),n(54520),n(3949),n(81454),n(23500),n(62953);var r=n(7670),o=n(1685),a=n(70915),i=n(21409),l=n(60764),c=n(5556),s=n.n(c),u=n(97258),f=n(95025),d=n(33209),p=n(37813),m=n(37802),y=n(3471),g=n(27989);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function O(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function w(e,t,n){return t=C(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,T()?Reflect.construct(t,n||[],C(e).constructor):t.apply(e,n))}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(T=function(){return!!e})()}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function j(e,t,n){return(t=P(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}var k={move:function(e,t,n){var r=n[0]-t[0],o=n[1]-t[1];e.translate(r,o)},rotate:function(e,t,n){var r=Math.atan2(t[1]-this.center[1],t[0]-this.center[0]),o=Math.atan2(n[1]-this.center[1],n[0]-this.center[0])-r;e.rotate(o,this.center)}},_=function(e){function t(e){var n;S(this,t),j(n=w(this,t,[{handleDownEvent:function(e){var t=n.decideTypeFromEvent_(e);if(!t)return!1;var r=n.featureProvider_?n.featureProvider_(e.map):[];if(n.lastFeature_=n.featureAtPixel_(e.pixel,e.map,r),!n.lastCoordinate_&&n.lastFeature_){if(n.firstCoordinate_=e.coordinate,n.lastCoordinate_=e.coordinate,n.features_=r,n.transformation_={handler:k[t],type:t},"rotate"===t){var o,i=a.S5(),l=h(r);try{for(l.s();!(o=l.n()).done;){var c=o.value,s=c.getGeometry();(0,m.aP)(c.getId())?a.X$(i,a.Tr([s.getFirstCoordinate()])):a.X$(i,s.getExtent())}}catch(e){l.e(e)}finally{l.f()}if(n.transformation_.center=a.q1(i),(0,m.Mc)(n.lastFeature_.getId())===m.H4){var u=y.Ay.getState(),f=(0,d.dw)(u)?(0,d.G_)(u):(0,p.kh)(u);f&&(n.transformation_.center=(0,g.Ur)([f.lon,f.lat]))}}return n.dispatchEvent(new R(N.TRANSFORM_START,t,r,e.coordinate,[0,0],0,n.transformation_.center)),!0}return!1},handleDragEvent:function(e){if(!(n.targetPointers.length>1)&&n.lastCoordinate_){var t,r=e.coordinate,o=n.features_,a=n.transformation_.type,i=h(o);try{for(i.s();!(t=i.n()).done;){var l=t.value;n.transformation_.handler(l.getGeometry(),n.lastCoordinate_,r)}}catch(e){i.e(e)}finally{i.f()}n.lastCoordinate_=r;var c=n.calculateTotalDelta_(),s=n.calculateTotalAngleDelta_();n.dispatchEvent(new R(N.TRANSFORMING,a,o,r,c,s,n.transformation_.center))}},handleUpEvent:function(e){if(n.lastCoordinate_){var t=n.features_,r=n.calculateTotalDelta_(),o=n.calculateTotalAngleDelta_(),a=n.transformation_,i=a.center,l=a.type;return n.firstCoordinate_=null,n.lastCoordinate_=null,n.features_=null,n.transformation_=null,n.dispatchEvent(new R(N.TRANSFORM_END,l,t,e.coordinate,r,o,i)),!0}return!1}}]),"featureAtPixel_",function(e,t,r){var o;return r&&t.forEachFeatureAtPixel(e,function(e){if(r.includes(e))return o=e,!0},{hitTolerance:n.hitTolerance_,layerFilter:n.layerFilter_}),o});var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({moveCondition:f.Gk,rotateCondition:f.Zm},e);return n.firstCoordinate_=null,n.lastCoordinate_=null,n.features_=null,n.featureProvider_=r.featureProvider,n.layerFilter_=n.createLayerFilterFromOptions_(r),n.hitTolerance_=r.hitTolerance?r.hitTolerance:0,n.lastFeature_=null,n.moveCondition_=r.moveCondition,n.rotateCondition_=r.rotateCondition,n.transformation_=null,n}return I(t,e),O(t,[{key:"calculateTotalDelta_",value:function(){return[this.lastCoordinate_[0]-this.firstCoordinate_[0],this.lastCoordinate_[1]-this.firstCoordinate_[1]]}},{key:"calculateTotalAngleDelta_",value:function(){if(this.transformation_.center){var e=Math.atan2(this.firstCoordinate_[0]-this.transformation_.center[0],this.firstCoordinate_[1]-this.transformation_.center[1]);return Math.atan2(this.lastCoordinate_[0]-this.transformation_.center[0],this.lastCoordinate_[1]-this.transformation_.center[1])-e}}},{key:"createLayerFilterFromOptions_",value:function(e){if(e.layers){if("function"==typeof e.layers)return e.layers;var t=e.layers;return function(e){return t.includes(e)}}return r.A}},{key:"decideTypeFromEvent_",value:function(e){var t;if(0===(null==e?void 0:e.button)||0===(null==e||null===(t=e.originalEvent)||void 0===t?void 0:t.button)){if(this.moveCondition_(e))return"move";if(this.rotateCondition_(e))return"rotate"}}}])}(i.A),N={TRANSFORM_START:"transformStart",TRANSFORMING:"transforming",TRANSFORM_END:"transformEnd"},R=function(e){function t(e,n,r,o,a){var i,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return S(this,t),(i=w(this,t,[e])).subType=n,i.features=r,i.coordinate=o,i.delta=a,i.angleDelta=l,i.origin=c,i}return I(t,e),O(t,[{key:"hasMoved",get:function(){return this.delta&&Array.isArray(this.delta)&&(0!==this.delta[0]||0!==this.delta[1])||this.angleDelta&&0!==this.angleDelta}}])}(o.Ay);const D=(0,u.createOLInteractionComponent)("TransformFeatures",function(e){return new _(e)},{propTypes:{featureProvider:s().func.isRequired,hitTolerance:s().number,layers:s().oneOfType([s().func,s().arrayOf(l.default)]),moveCondition:s().func,rotateCondition:s().func,onTransformEnd:s().func,onTransforming:s().func,onTransformStart:s().func},events:["transformStart","transforming","transformEnd"],eventMap:{onTransformStart:"transformStart",onTransforming:"transforming",onTransformEnd:"transformEnd"},fragileProps:["featureProvider","hitTolerance","layers","moveCondition","rotateCondition"]})},79838:()=>{},79891:(e,t,n)=>{"use strict";var r;n.d(t,{A:()=>i}),function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.ON_GROUND=1]="ON_GROUND",e[e.LOGGING_DEACTIVATED=2]="LOGGING_DEACTIVATED",e[e.PREARM_CHECK_IN_PROGRESS=3]="PREARM_CHECK_IN_PROGRESS",e[e.AUTOPILOT_INITIALIZING=4]="AUTOPILOT_INITIALIZING",e[e.TAKEOFF=5]="TAKEOFF",e[e.LANDING=6]="LANDING",e[e.LANDED=7]="LANDED",e[e.MOTORS_RUNNING_WHILE_ON_GROUND=8]="MOTORS_RUNNING_WHILE_ON_GROUND",e[e.SLEEPING=9]="SLEEPING",e[e.FLIGHT_CONTROL_SUSPENDED=10]="FLIGHT_CONTROL_SUSPENDED",e[e.FLIGHT_CONTROL_SLOW_MODE=11]="FLIGHT_CONTROL_SLOW_MODE",e[e.RETURN_TO_HOME=63]="RETURN_TO_HOME",e[e.LOW_DISK_SPACE=64]="LOW_DISK_SPACE",e[e.RC_SIGNAL_LOST_WARNING=65]="RC_SIGNAL_LOST_WARNING",e[e.BATTERY_LOW_WARNING=66]="BATTERY_LOW_WARNING",e[e.TIMESYNC_ERROR=67]="TIMESYNC_ERROR",e[e.FAR_FROM_TAKEOFF_POSITION=68]="FAR_FROM_TAKEOFF_POSITION",e[e.INVALID_MISSION_CONFIGURATION=69]="INVALID_MISSION_CONFIGURATION",e[e.RADIO_MISSING=70]="RADIO_MISSING",e[e.GEOFENCE_VIOLATION_WARNING=71]="GEOFENCE_VIOLATION_WARNING",e[e.WIND_SPEED_WARNING=72]="WIND_SPEED_WARNING",e[e.DISARMED=73]="DISARMED",e[e.REBOOT_REQUIRED=74]="REBOOT_REQUIRED",e[e.DRIFT_FROM_DESIRED_POSITION=75]="DRIFT_FROM_DESIRED_POSITION",e[e.AUTOPILOT_COMM_TIMEOUT=128]="AUTOPILOT_COMM_TIMEOUT",e[e.AUTOPILOT_ACK_TIMEOUT=129]="AUTOPILOT_ACK_TIMEOUT",e[e.AUTOPILOT_PROTOCOL_ERROR=130]="AUTOPILOT_PROTOCOL_ERROR",e[e.PREARM_CHECK_FAILURE=131]="PREARM_CHECK_FAILURE",e[e.RC_SIGNAL_LOST_ERROR=132]="RC_SIGNAL_LOST_ERROR",e[e.GPS_SIGNAL_LOST=133]="GPS_SIGNAL_LOST",e[e.BATTERY_LOW_ERROR=134]="BATTERY_LOW_ERROR",e[e.TARGET_NOT_FOUND=135]="TARGET_NOT_FOUND",e[e.TARGET_TOO_FAR=136]="TARGET_TOO_FAR",e[e.CONFIGURATION_ERROR=137]="CONFIGURATION_ERROR",e[e.RC_NOT_CALIBRATED=138]="RC_NOT_CALIBRATED",e[e.WIND_SPEED_ERROR=139]="WIND_SPEED_ERROR",e[e.PAYLOAD_ERROR=140]="PAYLOAD_ERROR",e[e.PROXIMITY_ERROR=141]="PROXIMITY_ERROR",e[e.SIMULATED_ERROR=188]="SIMULATED_ERROR",e[e.CONTROL_ALGORITHM_ERROR=189]="CONTROL_ALGORITHM_ERROR",e[e.SENSOR_FAILURE=190]="SENSOR_FAILURE",e[e.UNSPECIFIED_ERROR=191]="UNSPECIFIED_ERROR",e[e.HW_SW_INCOMPATIBLE=192]="HW_SW_INCOMPATIBLE",e[e.MAGNETIC_ERROR=193]="MAGNETIC_ERROR",e[e.GYROSCOPE_ERROR=194]="GYROSCOPE_ERROR",e[e.ACCELEROMETER_ERROR=195]="ACCELEROMETER_ERROR",e[e.PRESSURE_SENSOR_ERROR=196]="PRESSURE_SENSOR_ERROR",e[e.GPS_SIGNAL_LOST_CRITICAL=197]="GPS_SIGNAL_LOST_CRITICAL",e[e.MOTOR_MALFUNCTION=198]="MOTOR_MALFUNCTION",e[e.BATTERY_CRITICAL=199]="BATTERY_CRITICAL",e[e.NO_GPS_HOME_POSITION=200]="NO_GPS_HOME_POSITION",e[e.GEOFENCE_VIOLATION=201]="GEOFENCE_VIOLATION",e[e.INTERNAL_CLOCK_ERROR=202]="INTERNAL_CLOCK_ERROR",e[e.EXTERNAL_CLOCK_ERROR=203]="EXTERNAL_CLOCK_ERROR",e[e.REQUIRED_HW_COMPONENT_MISSING=204]="REQUIRED_HW_COMPONENT_MISSING",e[e.AUTOPILOT_INIT_FAILED=205]="AUTOPILOT_INIT_FAILED",e[e.AUTOPILOT_COMM_FAILED=206]="AUTOPILOT_COMM_FAILED",e[e.CRASH=207]="CRASH",e[e.SIMULATED_CRITICAL_ERROR=253]="SIMULATED_CRITICAL_ERROR",e[e.CRITICAL_SENSOR_FAILURE=254]="CRITICAL_SENSOR_FAILURE",e[e.UNSPECIFIED_CRITICAL_ERROR=255]="UNSPECIFIED_CRITICAL_ERROR"}(r||(r={}));const o={[r.NO_ERROR]:"ok",[r.ON_GROUND]:"ground",[r.LOGGING_DEACTIVATED]:"no log",[r.PREARM_CHECK_IN_PROGRESS]:"prearm",[r.AUTOPILOT_INITIALIZING]:"init",[r.TAKEOFF]:"takeoff",[r.LANDING]:"landing",[r.LANDED]:"landed",[r.MOTORS_RUNNING_WHILE_ON_GROUND]:"motors",[r.SLEEPING]:"sleep",[r.FLIGHT_CONTROL_SUSPENDED]:"paused",[r.FLIGHT_CONTROL_SLOW_MODE]:"slow",[r.RETURN_TO_HOME]:"RTH",[r.LOW_DISK_SPACE]:"storage",[r.RC_SIGNAL_LOST_WARNING]:"RC lost",[r.BATTERY_LOW_WARNING]:"lowbat",[r.TIMESYNC_ERROR]:"timesync",[r.FAR_FROM_TAKEOFF_POSITION]:"tkoffpos",[r.INVALID_MISSION_CONFIGURATION]:"mission",[r.RADIO_MISSING]:"no radio",[r.GEOFENCE_VIOLATION_WARNING]:"fence",[r.WIND_SPEED_WARNING]:"wind",[r.DISARMED]:"disarm",[r.REBOOT_REQUIRED]:"reboot",[r.DRIFT_FROM_DESIRED_POSITION]:"drift",[r.AUTOPILOT_COMM_TIMEOUT]:"comm t/o",[r.AUTOPILOT_ACK_TIMEOUT]:"ack t/o",[r.AUTOPILOT_PROTOCOL_ERROR]:"proto",[r.PREARM_CHECK_FAILURE]:"prearm",[r.RC_SIGNAL_LOST_ERROR]:"RC lost",[r.GPS_SIGNAL_LOST]:"no GPS",[r.BATTERY_LOW_ERROR]:"lowbat",[r.TARGET_NOT_FOUND]:"target",[r.TARGET_TOO_FAR]:"too far",[r.CONFIGURATION_ERROR]:"config",[r.RC_NOT_CALIBRATED]:"RC calib",[r.WIND_SPEED_ERROR]:"wind",[r.PAYLOAD_ERROR]:"payload",[r.PROXIMITY_ERROR]:"proximity",[r.SIMULATED_ERROR]:"simerr",[r.CONTROL_ALGORITHM_ERROR]:"control",[r.SENSOR_FAILURE]:"sensor",[r.UNSPECIFIED_ERROR]:"error",[r.HW_SW_INCOMPATIBLE]:"compat",[r.MAGNETIC_ERROR]:"mag",[r.GYROSCOPE_ERROR]:"gyro",[r.ACCELEROMETER_ERROR]:"acc",[r.PRESSURE_SENSOR_ERROR]:"baro",[r.GPS_SIGNAL_LOST_CRITICAL]:"GPS",[r.MOTOR_MALFUNCTION]:"motor",[r.BATTERY_CRITICAL]:"lowbat",[r.NO_GPS_HOME_POSITION]:"home",[r.GEOFENCE_VIOLATION]:"fence",[r.INTERNAL_CLOCK_ERROR]:"clk",[r.EXTERNAL_CLOCK_ERROR]:"extclk",[r.REQUIRED_HW_COMPONENT_MISSING]:"no HW",[r.AUTOPILOT_INIT_FAILED]:"initfail",[r.AUTOPILOT_COMM_FAILED]:"commfail",[r.CRASH]:"crash",[r.SIMULATED_CRITICAL_ERROR]:"simcrit",[r.CRITICAL_SENSOR_FAILURE]:"sensor",[r.UNSPECIFIED_CRITICAL_ERROR]:"fatal"},a={[r.NO_ERROR]:"No error",[r.ON_GROUND]:"Drone is on the ground with motors off",[r.LOGGING_DEACTIVATED]:"Logging deactivated",[r.PREARM_CHECK_IN_PROGRESS]:"Prearm check in progress",[r.AUTOPILOT_INITIALIZING]:"Autopilot initializing",[r.TAKEOFF]:"Drone is taking off",[r.LANDING]:"Drone is landing",[r.LANDED]:"Drone has landed successfully",[r.MOTORS_RUNNING_WHILE_ON_GROUND]:"Motors are running while on ground",[r.SLEEPING]:"Drone is in sleep mode",[r.FLIGHT_CONTROL_SUSPENDED]:"Flight control is suspended",[r.FLIGHT_CONTROL_SLOW_MODE]:"Flight control is in slow mode",[r.RETURN_TO_HOME]:"Drone is returning home",[r.LOW_DISK_SPACE]:"Low disk space",[r.RC_SIGNAL_LOST_WARNING]:"RC lost",[r.BATTERY_LOW_WARNING]:"Battery low",[r.TIMESYNC_ERROR]:"Timesync error",[r.FAR_FROM_TAKEOFF_POSITION]:"Drone is not at its designated takeoff position",[r.INVALID_MISSION_CONFIGURATION]:"Mission configuration error or mission out of geofence",[r.RADIO_MISSING]:"Radio channel offline",[r.GEOFENCE_VIOLATION_WARNING]:"Drone is outside geofence on ground",[r.WIND_SPEED_WARNING]:"Wind speed is high",[r.DISARMED]:"Drone not armed yet",[r.REBOOT_REQUIRED]:"Drone requires a reboot",[r.DRIFT_FROM_DESIRED_POSITION]:"Drift from desired position is large",[r.AUTOPILOT_COMM_TIMEOUT]:"Autopilot communication timeout",[r.AUTOPILOT_ACK_TIMEOUT]:"Autopilot acknowledgment timeout",[r.AUTOPILOT_PROTOCOL_ERROR]:"Autopilot communication protocol error",[r.PREARM_CHECK_FAILURE]:"Prearm check failure",[r.RC_SIGNAL_LOST_ERROR]:"RC signal lost",[r.GPS_SIGNAL_LOST]:"GPS signal lost or GPS error",[r.BATTERY_LOW_ERROR]:"Battery low",[r.TARGET_NOT_FOUND]:"Target not found",[r.TARGET_TOO_FAR]:"Target is too far",[r.CONFIGURATION_ERROR]:"Configuration error",[r.RC_NOT_CALIBRATED]:"RC not calibrated",[r.WIND_SPEED_ERROR]:"Wind speed is too high",[r.PAYLOAD_ERROR]:"Payload error",[r.PROXIMITY_ERROR]:"Proximity sensor error",[r.SIMULATED_ERROR]:"Simulated error",[r.CONTROL_ALGORITHM_ERROR]:"Error in control algorithm",[r.SENSOR_FAILURE]:"Unspecified sensor failure",[r.UNSPECIFIED_ERROR]:"Unspecified error",[r.HW_SW_INCOMPATIBLE]:"Incompatible hardware or software",[r.MAGNETIC_ERROR]:"Magnetometer error",[r.GYROSCOPE_ERROR]:"Gyroscope error",[r.ACCELEROMETER_ERROR]:"Accelerometer error",[r.PRESSURE_SENSOR_ERROR]:"Pressure sensor or altimeter error",[r.GPS_SIGNAL_LOST_CRITICAL]:"GPS error or GPS signal lost",[r.MOTOR_MALFUNCTION]:"Motor malfunction",[r.BATTERY_CRITICAL]:"Battery critical",[r.NO_GPS_HOME_POSITION]:"No GPS home position",[r.GEOFENCE_VIOLATION]:"Geofence violation",[r.INTERNAL_CLOCK_ERROR]:"Internal clock error",[r.EXTERNAL_CLOCK_ERROR]:"External clock error",[r.REQUIRED_HW_COMPONENT_MISSING]:"Required hardware component missing",[r.AUTOPILOT_INIT_FAILED]:"Autopilot initialization failed",[r.AUTOPILOT_COMM_FAILED]:"Autopilot communication failed",[r.CRASH]:"Drone crashed",[r.SIMULATED_CRITICAL_ERROR]:"Simulated critical error",[r.CRITICAL_SENSOR_FAILURE]:"Unspecified critical sensor failure",[r.UNSPECIFIED_CRITICAL_ERROR]:"Unspecified critical error"};!function(e){e.abbreviate=e=>o[e]||`E${e}`,e.describe=e=>a[e]||`Error ${e}`}(r||(r={}));const i=r},80109:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>u,H8:()=>s,en:()=>l,xu:()=>c});var r=n(65307),o=n(39441);const{actions:a,reducer:i}=(0,r.Z0)({name:"firmware-update",initialState:{dialog:{open:!1},supportingObjectIdsByTargetIds:{}},reducers:{hideFirmwareUpdateSetupDialog:(0,o.kP)(e=>{e.dialog.open=!1}),showFirmwareUpdateSetupDialog:(0,o.kP)(e=>{e.dialog.open=!0}),updateSupportingObjectIdsForTargetId:{prepare:(e,t)=>({payload:{targetId:e,objectIds:t}}),reducer(e,{payload:{targetId:t,objectIds:n}}){e.supportingObjectIdsByTargetIds[t]=n}}}}),{hideFirmwareUpdateSetupDialog:l,showFirmwareUpdateSetupDialog:c,updateSupportingObjectIdsForTargetId:s}=a,u=i},80415:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(74848);n(96540);const o=(0,n(9792).A)((0,r.jsx)("path",{d:"M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66.19-.34.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21z"}),"Bolt")},81607:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,o:()=>l});var r=n(65307),o=n(39441);const a={open:!1,selectedTab:n(20222).Ez.DISPLAY},{reducer:i,actions:l}=(0,r.Z0)({name:"app-settings",initialState:a,reducers:{closeAppSettingsDialog(e){e.open=!1},setAppSettingsDialogTab(e,t){e.selectedTab=t.payload},showAppSettingsDialog:(0,o.kP)(e=>{e.open=!0}),toggleAppSettingsDialog:(0,o.kP)(e=>{e.open=!e.open})}})},81963:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});n(52675),n(89463),n(2259),n(45700),n(23418),n(23792),n(34782),n(89572),n(62010),n(2892),n(69085),n(83851),n(81278),n(79432),n(27495),n(90906),n(38781),n(47764),n(3949),n(23500),n(62953),n(2008),n(26099),n(98992),n(54520);var r=n(48227),o=n(5556),a=n.n(o),i=n(96540),l=n(5079),c=n(11962),s=n(14257),u=n(2175),f=n(49591);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p=["accepts","children","component","componentProps","filter","multiple","onSelected","onSelectionFailed"];function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(null,arguments)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h=(0,f.n9)(function(e){return{dragHover:{background:e.palette.action.hover}}}),A=i.forwardRef(function(e,t){var n,o=e.accepts,a=e.children,c=e.component,u=void 0===c?r.A:c,f=e.componentProps,d=e.filter,v=e.multiple,A=e.onSelected,S=e.onSelectionFailed,E=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,p),O=h(),w=b((0,i.useState)(0),2),T=w[0],C=w[1],I=(0,i.useCallback)(function(e){var t,n=v?null==e?void 0:e.files:null==e||null===(t=e.files)||void 0===t?void 0:t[0];if(n){var r=!o||o(n)?A:S;null==r||r(n),C(T+1)}},[o,T,v,A,S]),x=(0,l.H)({accept:[s.FILE],collect:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.isOver()&&{className:O.dragHover})},drop:I}),j=b(x,2),P=j[0],k=j[1];return i.createElement(u,m({ref:(n=[t,k],e=>{for(const t of n)"function"==typeof t?t(e):"object"==typeof t&&null!==t&&(t.current=e)}),component:"label"},P,f,E),i.createElement("input",{key:T,hidden:!0,type:"file",accept:d,multiple:v,onChange:function(e){return I(e.target)}}),a)});A.propTypes={accepts:a().func,children:a().node,component:a().elementType,componentProps:a().object,filter:a().arrayOf(a().string),multiple:a().bool,onSelected:a().func,onSelectionFailed:a().func};const S=i.forwardRef(function(e,t){return i.createElement(c.Q,{backend:u.t2},i.createElement(A,m({ref:t},e)))})},82023:(e,t,n)=>{"use strict";n.d(t,{$:()=>p,K:()=>d});var r=n(74848),o=n(96540),a=n(81709),i=n(13271),l=n(61919),c=n(2645),s=n(78641),u=n(27989);const f=[{value:1}],d=({layer:e,setLayerParameters:t})=>{const{parameters:n}=e,{labelColor:a,scale:s}=n||{},u="string"==typeof a?a:"#000000",d="number"==typeof s?s:1,p=(0,o.useCallback)(e=>{t({labelColor:e.hex})},[t]),m=(0,o.useCallback)((e,n)=>{t({scale:n})},[t]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Mo,{children:"Label color"}),(0,r.jsx)(c.A,{color:u,onChangeComplete:p}),(0,r.jsx)(l.Mo,{children:"Icon size"}),(0,r.jsx)(i.Ay,{value:d,min:.2,max:2,marks:f,step:.1,onChange:m})]})},p=({layer:e,LayerSource:t,projection:n=u.Ur,selection:o,zIndex:i,labelHidden:l})=>(0,r.jsx)(a.qd.Vector,{updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:i,children:(0,r.jsx)(t,{selection:o,labelColor:e.parameters.labelColor??"",scale:e.parameters.scale??1,flock:s.Ay,projection:n,labelHidden:l})})},82642:(e,t,n)=>{"use strict";n.d(t,{Y:()=>c});var r=n(40861);const o=100;function a(e){const t=e.length;if(t<2)return;let n,o=1/0;for(let a=0;a<t;a++){const i=e[a];for(let l=a+1;l<t;l++){const t=e[l],a=(0,r.RZ)(i,t);a<o&&(o=a,n=[i,t])}}return void 0===n?void 0:[n[0],n[1],o]}function i(e,t){const n=e.length;if(n<o)return a(e);const l=Math.floor(n/2),c=e[l][t.principal],s=e.slice(0,l),u=e.slice(l),f=i(s,t),d=i(u,t);let p;if(p=void 0===f?d:void 0===d||f[2]<d[2]?f:d,void 0===p)throw new Error("nonStripResult should exist!");const m=function(e,t,n,o){const a=e.filter(e=>Math.abs(e[o.principal]-t)<n);if(a.length<2)return;let i,l=1/0;for(let e=0;e<a.length;e++){const t=a[e];for(let c=e+1;c<a.length;c++){const e=a[c];if(e[o.secondary]-t[o.secondary]>n)continue;const s=(0,r.RZ)(t,e);s<l&&(l=s,i=[t,e])}}return void 0===i?void 0:[i[0],i[1],l]}(e,c,Math.sqrt(p[2]),t);return void 0===m||p[2]<m[2]?p:m}function l(e){const t=e.length;let n;if(!(t<2)){if(t<o)n=a(e);else{const t=function(e){if(e.length<2)return{principal:0,secondary:1};let t=1/0,n=-1/0,r=1/0,o=-1/0;for(const a of e){const[e,i]=a;t=Math.min(t,e),n=Math.max(n,e),r=Math.min(r,i),o=Math.max(o,i)}return n-t>=o-r?{principal:0,secondary:1}:{principal:1,secondary:0}}(e),r=function(e,{principal:t}){return e.slice().sort((e,n)=>e[t]-n[t])}(e,t);n=i(r,t)}return void 0===n?void 0:[n[0],n[1],Math.sqrt(n[2])]}}function c(e){const t=l(e);return void 0===t?Number.POSITIVE_INFINITY:t[2]}},84664:(e,t,n)=>{"use strict";n.d(t,{$:()=>c});var r=n(69592),o=n(59116),a=n(96034),i=n(1488),l=n(94153);function c(e,t){var n=(0,o.A)(e.status,function(e){var t=e.id,n=e.position;return(0,a.A)({id:t,position:(0,l.k8)(n)},r.A)});t((0,i.z5)(n))}},84692:(e,t,n)=>{"use strict";n.d(t,{At:()=>v,Ay:()=>E,IJ:()=>b,Jq:()=>m,K_:()=>A,QG:()=>y,Sr:()=>S,VE:()=>p,e5:()=>g});var r=n(82041),o=n(23255),a=n(74722),i=n(65307),l=n(98964),c=n(16238),s=n(75348);const u=(0,c.q9)(r.A.map.layers.map(({id:e,type:t,label:n,parameters:r})=>(0,l.Kd)(e,t,n,r))),{reducer:f,actions:d}=(0,i.Z0)({name:"layers",initialState:u,reducers:{addLayer:{prepare:(e,t)=>({payload:{name:e,type:t}}),reducer(e,t){let{name:n}=t.payload;const{type:r}=t.payload;if(!r&&!n)for(const[n,r]of Object.entries(e.byId))if(!r.type||r.type===l.mb.UNTYPED)return void(t.id=n);if(!n){const t=(0,a.A)(e.byId,e=>e.label);n=(0,s.OM)("New layer",t)}const i=Object.keys(e.byId),c=(0,s.KN)((0,o.A)(n),i),u=(0,l.Kd)(c,r,"");t.id=c,e.byId[c]=u,e.order.push(c)}},adjustLayerZIndex:{prepare:(e,t)=>({payload:{id:e,delta:t}}),reducer(e,t){const{id:n,delta:r}=t.payload,{order:o}=e,a=o.indexOf(n),i=a<0?-1:Math.max(0,Math.min(a+r,o.length-1));return a>=0&&i>=0&&(o.splice(a,1),o.splice(i,0,n)),e}},changeLayerType:{prepare:(e,t)=>({payload:{id:e,type:t}}),reducer(e,t){const{id:n,type:r}=t.payload,o=e.byId[n];if(void 0===o);else if(o.type===l.mb.UNTYPED){const t=(0,a.A)(e.byId,e=>e.label),n=(0,s.OM)((0,l.Pr)(r),t),i=o.label,c=""===i?n:i;Object.assign(o,{type:r,label:c,parameters:(0,l.ci)(r),visible:!0})}return e}},removeLayer(e,{payload:t}){(0,c.T$)(e,t)},renameLayer:{prepare:(e,t)=>({payload:{id:e,name:t}}),reducer(e,t){const{id:n,name:r}=t.payload,o=e.byId[n];void 0===o||(o.label=r)}},selectMapSource(e,t){const{layerId:n,source:r}=t.payload,o=e.byId[n];void 0===o||(o.parameters.source=r)},setLayerParameterById:{prepare:(e,t,n)=>({payload:{layerId:e,parameter:t,value:n}}),reducer(e,t){const{layerId:n,parameter:r,value:o}=t.payload,a=e.byId[n];void 0===a||(a.parameters[r]=o)}},setLayerParametersById:{prepare:(e,t)=>({payload:{layerId:e,parameters:t}}),reducer(e,t){const{layerId:n,parameters:r}=t.payload,o=e.byId[n];void 0===o||Object.assign(o.parameters,r)}},toggleLayerVisibility(e,{payload:t}){const n=e.byId[t];void 0===n||(n.visible=!n.visible)}}}),{addLayer:p,adjustLayerZIndex:m,changeLayerType:y,removeLayer:g,renameLayer:b,selectMapSource:v,setLayerParameterById:h,setLayerParametersById:A,toggleLayerVisibility:S}=d,E=f},84953:(e,t,n)=>{"use strict";n.d(t,{$:()=>o});var r=n(39142);const o=(e,t,n=(0,r.A)(!0))=>{t.extend(e.getArray().filter(n)),e.on("add",e=>{n(e.element)&&t.push(e.element)}),e.on("remove",e=>{n(e.element)&&t.remove(e.element)})}},85188:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,p:()=>i});var r=n(65307);const{actions:o,reducer:a}=(0,r.Z0)({name:"sidebar",initialState:{open:!1},reducers:{setSidebarOpen(e,t){e.open=t.payload}}}),{setSidebarOpen:i}=o,l=a},85448:(e,t,n)=>{"use strict";n.d(t,{$q:()=>j,Du:()=>_,Ue:()=>x,en:()=>D,f7:()=>R,g5:()=>k,jQ:()=>I,ky:()=>M,r5:()=>L,tD:()=>N,u3:()=>T,zB:()=>C,zT:()=>P});n(52675),n(89463),n(2259),n(45700),n(28706),n(2008),n(50113),n(23418),n(23792),n(62062),n(34782),n(89572),n(62010),n(2892),n(83851),n(81278),n(79432),n(26099),n(27495),n(90906),n(38781),n(47764),n(98992),n(23215),n(54520),n(72577),n(3949),n(81454),n(23500),n(62953);var r=n(34556),o=n(97859),a=n(545),i=n(27920),l=n(37566),c=n(49680),s=n(34808),u=n(1229),f=n(37802),d=n(27322),p=n(71042),m=n(15786),y=n(95191);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e){return function(e){if(Array.isArray(e))return e}(e)||A(e)||h(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return function(e){if(Array.isArray(e))return S(e)}(e)||A(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function A(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){w(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=y.o.closeFeatureEditorDialog,C=y.o.setFeatureEditorDialogTab,I=y.o.showFeatureEditorDialog,x=function(e){return P(e,null)},j=function(e,t){return function(n,o){var a=o();(0,p.VQ)(a).find(function(n){return t.every(function(t){return(0,r.A)(n[t],e[t],function(e,t){if("number"==typeof e&&"number"==typeof t)return Math.round(1e7*e)===Math.round(1e7*t)})})})||n(x(e))}},P=function(e,t){return function(n,r){var o=(0,p.xt)(r(),e,t);n((0,m.sO)({id:o,feature:e}))}},k=function(e,t){return function(n,r){var o=r().features.byId[e];n(P(O(O({},o),t),e))}},_=function(e,t){return function(n,r){var o=r(),a=o.features.byId[e],c=o.features.byId[t],s=function(e){var t;return{type:"Feature",geometry:{type:"Polygon",coordinates:[e.points].concat(v(null!==(t=e.holes)&&void 0!==t?t:[]))}}},u=(0,i.A)(s(a),s(c));switch(u.geometry.type){case"Polygon":var d=b(u.geometry.coordinates),p=d[0],y=S(d).slice(1);n((0,m.oP)(w({},e,{points:p,holes:y})));break;case"MultiPolygon":n((0,m.Hk)([e]));var g,A=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(u.geometry.coordinates);try{for(A.s();!(g=A.n()).done;){var E=b(g.value),O=E[0],T=S(E).slice(1);n(k(e,{points:O,holes:T}))}}catch(e){A.e(e)}finally{A.f()}break;default:throw new Error("Unexpected geometry type: ".concat(u.geometry.type))}n((0,l.td)([(0,f.Du)(t)]))}},N=function(){return function(e,t){return e((0,m.Hk)((0,p.sU)(t())))}},R=function(e){return function(t,n){var r,o=(0,c.Oo)(n())||(null==e?void 0:e.getId());o&&t((r=o,function(e){var t;(0,f.wy)(r)?t=(0,u.Te)((0,f.Xc)(r)):(0,f.GK)(r)?t=I((0,f.hy)(r)):(0,f.FX)(r),t&&(e((0,s.yo)(null)),e(t))}))}},D=function(e){return function(t,n){var r=n(),o=(0,p.VQ)(r).filter(function(t){return t.type===e&&"user"===t.owner});if(1===o.length){var i=(0,a.default)((0,d.Lo)(r),function(t){return(0,f.GK)(t)&&(0,p.je)(r,(0,f.hy)(t)).type===e});t((0,l.td)([].concat(v(i),[(0,f.Du)(o[0].id)])))}}},M=function(e){return(0,l.td)((Array.isArray(e)?e:[]).filter(function(e){return!(0,o.default)(e)}).map(function(e){return(0,f.Du)(e)}))},L=function(e){return function(t,n){var r=n(),o=(0,p.je)(r,e);o&&t((0,m.Ui)({id:o.id,visible:!o.visible}))}}},85683:(e,t,n)=>{"use strict";n.d(t,{CR:()=>s,T0:()=>c,WL:()=>u,az:()=>f,ur:()=>r});var r,o=n(97859),a=n(63614),i=n(8244),l=n(91949);!function(e){e.DEFAULT="default",e.STATUS="status",e.FLIGHT_MODE="flightMode",e.BATTERY="battery",e.GPS_FIX="gpsFix",e.ALTITUDE_MSL="amsl",e.ALTITUDE_HOME="ahl",e.ALTITUDE_GROUND="agl",e.HEADING="heading",e.RSSI="rssi"}(r||(r={}));const c=[r.DEFAULT,r.STATUS,r.FLIGHT_MODE,r.BATTERY,r.RSSI,r.GPS_FIX,r.ALTITUDE_MSL,r.ALTITUDE_HOME,r.ALTITUDE_GROUND,r.HEADING],s={[r.DEFAULT]:(0,i.tt)("sorting.label.default"),[r.STATUS]:(0,i.tt)("sorting.label.status"),[r.FLIGHT_MODE]:(0,i.tt)("sorting.label.flightMode"),[r.BATTERY]:(0,i.tt)("sorting.label.battery"),[r.RSSI]:(0,i.tt)("sorting.label.rssi"),[r.GPS_FIX]:(0,i.tt)("sorting.label.gpsFix"),[r.ALTITUDE_MSL]:(0,i.tt)("sorting.label.amsl"),[r.ALTITUDE_HOME]:(0,i.tt)("sorting.label.ahl"),[r.ALTITUDE_GROUND]:(0,i.tt)("sorting.label.agl"),[r.HEADING]:(0,i.tt)("sorting.label.heading")},u={[r.DEFAULT]:(0,i.tt)("sorting.shortLabel.default"),[r.STATUS]:(0,i.tt)("sorting.shortLabel.status"),[r.FLIGHT_MODE]:(0,i.tt)("sorting.shortLabel.flightMode"),[r.BATTERY]:(0,i.tt)("sorting.shortLabel.battery"),[r.RSSI]:(0,i.tt)("sorting.shortLabel.rssi"),[r.GPS_FIX]:(0,i.tt)("sorting.shortLabel.gpsFix"),[r.ALTITUDE_MSL]:(0,i.tt)("sorting.shortLabel.amsl"),[r.ALTITUDE_HOME]:(0,i.tt)("sorting.shortLabel.ahl"),[r.ALTITUDE_GROUND]:(0,i.tt)("sorting.shortLabel.agl"),[r.HEADING]:(0,i.tt)("sorting.shortLabel.heading")},f=a(e=>{switch(e){case r.STATUS:return e=>e&&Array.isArray(e.errors)&&e.errors.length>0?Math.max(...e.errors):0;case r.FLIGHT_MODE:return e=>e?.mode??"";case r.BATTERY:return e=>{if((0,o.default)(e))return-1e4;const{battery:t}=e;return(0,o.default)(t.percentage)?(0,o.default)(t.voltage)?-1e4:t.voltage:t.percentage>=0?t.percentage+1e4:-1e4};case r.GPS_FIX:return e=>{if((0,o.default)(e))return-1e4;const{type:t=l.os.NO_FIX,numSatellites:n=0}=e?.gpsFix||{};return 100*Math.max(t,0)+Math.max(n,0)};case r.ALTITUDE_MSL:return e=>e?.position?.amsl??-1e4;case r.ALTITUDE_HOME:return e=>e?.position?.ahl??-1e4;case r.ALTITUDE_GROUND:return e=>e?.position?.agl??-1e4;case r.HEADING:return e=>e?.heading??720;case r.RSSI:return e=>e?.rssi?.[0]??-1;case r.DEFAULT:return}})},85690:(e,t,n)=>{"use strict";e.exports=n.p+"746c5b26af66e0ec66a2.png"},85876:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>d,Br:()=>f,VG:()=>s,e_:()=>c,vf:()=>u});var r=n(65307),o=n(16238),a=n(75348);const{actions:i,reducer:l}=(0,r.Z0)({name:"lcd-clock",initialState:{byId:{server:{id:"server",clockId:"system",preset:0},show:{id:"show",clockId:"show",preset:1}},order:["server","show"]},reducers:{addClockDisplay(e,t){const{clockId:n,preset:r}=t.payload,i=(0,a.KN)(n,e.order);(0,o.$$)(e,{id:i,clockId:n,preset:r})},removeClockDisplay(e,t){(0,o.T$)(e,t.payload)},setClockIdForClockDisplay(e,t){const{id:n,clockId:r}=t.payload,o=e.byId[n];o&&(o.clockId=r)},setPresetIndexForClockDisplay(e,t){const{id:n,preset:r}=t.payload,o=e.byId[n];o&&(o.preset=r)}}}),{addClockDisplay:c,removeClockDisplay:s,setClockIdForClockDisplay:u,setPresetIndexForClockDisplay:f}=i,d=l},86150:(e,t,n)=>{"use strict";n.d(t,{$u:()=>c,Ay:()=>s,Kx:()=>l});var r=n(65307),o=n(39441);const{actions:a,reducer:i}=(0,r.Z0)({name:"license-info",initialState:{dialog:{open:!1}},reducers:{closeLicenseInfoDialog:(0,o.kP)(e=>{e.dialog.open=!1}),showLicenseInfoDialog:(0,o.kP)(e=>{e.dialog.open=!0})}}),{closeLicenseInfoDialog:l,showLicenseInfoDialog:c}=a,s=i},86181:(e,t,n)=>{"use strict";n.d(t,{Ee:()=>o,GH:()=>a,Mb:()=>l,VP:()=>c,Vq:()=>i});var r=n(23149);const o=e=>null!=e&&!(e=>0===e.lat&&0===e.lon)(e);var a;!function(e){e.ABSOLUTE="absolute",e.WAYPOINT="waypoint"}(a||(a={}));const i=e=>(0,r.A)(e)&&"mode"in e&&"string"==typeof e.mode&&Object.values(a).includes(e.mode)&&"value"in e&&"number"==typeof e.value&&Number.isFinite(e.value);var l;!function(e){e.GROUND="ground",e.HOME="home",e.MSL="msl"}(l||(l={}));const c=e=>(0,r.A)(e)&&"reference"in e&&"string"==typeof e.reference&&Object.values(l).includes(e.reference)&&"value"in e&&"number"==typeof e.value&&Number.isFinite(e.value)},86676:(e,t,n)=>{"use strict";n.d(t,{Bl:()=>m,Bt:()=>u,KY:()=>p,Ph:()=>f,VD:()=>d});var r=n(97859),o=n(545),a=n(37566),i=n(78641),l=n(37802),c=n(27322),s=n(40881);const u=e=>()=>{e.length>0&&i.Ay.removeUAVsByIds(e)},f=()=>(e,t)=>{const n=(0,s.I6)(t());n.length>0&&e(u(n))},d=()=>(e,t)=>{const n=(0,s.YZ)(t()).filter(Boolean);n.length>0&&e(u(n))},p=e=>(0,a.td)((Array.isArray(e)?e:[]).filter(e=>!(0,r.default)(e)).map(e=>(0,l.ZO)(e))),m=()=>(e,t)=>{const n=t(),r=(0,s.Ev)(n);if(Array.isArray(r)&&1===r.length){const t=(0,o.default)((0,c.Lo)(n),l.wy);e((0,a.td)([...t,(0,l.ZO)(r[0])]))}}},86683:(e,t,n)=>{"use strict";n.d(t,{tc:()=>r.tc,Kn:()=>r.Kn,DS:()=>r.DS,r2:()=>r.r2,Ob:()=>r.Ob,s3:()=>r.s3,l6:()=>r.l6,Q6:()=>r.Q6,C4:()=>r.C4,lg:()=>r.lg,mP:()=>r.mP,rl:()=>r.rl,A_:()=>r.A_,Wp:()=>o});var r=n(56527);function o(e){const t=document.querySelector(`#${e}`);t&&t.dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0}))}},86833:()=>{},87163:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>y,R7:()=>p,bD:()=>m});var r=n(74848),o=n(96540),a=n(61225),i=n(81709),l=n(26926),c=n(27989),s=n(7598),u=n(53453),f=n(4729),d=n(59952);const p={map:{background:"#f8f4f0",height:"100%"},mapWrapper:{height:"100%",position:"relative"}},m={[d.NL.SELECT]:"tool-select",[d.NL.ZOOM]:"tool-zoom",[d.NL.PAN]:"tool-pan",[d.NL.DRAW_POINT]:"tool-draw tool-draw-point",[d.NL.DRAW_CIRCLE]:"tool-draw tool-draw-circle",[d.NL.DRAW_RECTANGLE]:"tool-draw tool-draw-rectangle",[d.NL.DRAW_PATH]:"tool-draw tool-draw-path",[d.NL.DRAW_POLYGON]:"tool-draw tool-draw-polygon",[d.NL.CUT_HOLE]:"tool-edit tool-cut-hole",[d.NL.EDIT_FEATURE]:"tool-edit tool-edit-feature"},y=(0,a.Ng)(e=>({mainMapViewProperties:{angle:(0,l.Ts)(e),position:(0,l.Gk)(e),zoom:(0,l.lW)(e)}}))(e=>{const{children:t,mainMapViewProperties:n,angle:a=n.angle,position:l=n.position,zoom:d=n.zoom,selectedTool:y,controlSettings:g={},layers:b,onFeaturesModified:v,onMapMoved:h,id:A,mapRef:S}=e,E=(0,o.useMemo)(()=>(0,r.jsx)(i.Ss,{center:(0,c.Ur)(l),rotation:-a*Math.PI/180,zoom:d,maxZoom:24,constrainRotation:!1}),[a,l,d]);return(0,r.jsx)("div",{style:p.mapWrapper,children:(0,r.jsxs)(s.A,{id:A,ref:S,loadTilesWhileInteracting:!0,view:E,useDefaultControls:!1,className:m[y],style:p.map,onMoveEnd:h,children:[(0,r.jsx)(u.rW,{...b,selectedTool:y,onFeaturesModified:v}),(0,r.jsx)(f.A,{...g}),t]})})})},87392:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});n(52675),n(89463),n(2259),n(45700),n(23792),n(62062),n(89572),n(2892),n(40875),n(10287),n(26099),n(60825),n(47764),n(98992),n(81454),n(62953);var r=n(17718),o=n(32483),a=n(58132),i=n(74022),l=n(93474),c=n(5556),s=n.n(c),u=n(96540),f=n(32389),d=n(81709),p=n(28749),m=n(27989),y=n(40861);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function v(e,t,n){return t=A(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],A(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function E(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}var w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(n=v(this,t,[e]),"state",{isFocused:!1,rotation:0}),n._updateRotationFromMapView=(0,i.A)(n._updateRotationFromMapView.bind(n),100),n._onFocus=n._onFocus.bind(n),n._onBlur=n._onBlur.bind(n),n._onChange=n._onChange.bind(n),n._onKeyDown=n._onKeyDown.bind(n),n._onButtonClick=n._onButtonClick.bind(n),n.state.rotation=(0,m.n0)(e.map.getView().getRotation()),e.map.on("change:view",function(e){e.target.getView().on("change:rotation",n._updateRotationFromMapView)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),n=t,c=[{key:"render",value:function(){var e=this;return u.createElement("div",{style:{marginRight:"12px"}},u.createElement(f.wD,null,function(t){return u.createElement(p.W1,{content:t("map.resetRotation")},u.createElement(o.A,{size:"large",onClick:e._onButtonClick},u.createElement(r.A,null)))}),u.createElement(a.A,{size:"small",style:{padding:"8px 0",width:this.props.fieldWidth},type:"number",value:this.state.isFocused?this.state.rotation:(0,m.n0)(this.state.rotation),variant:"standard",onFocus:this._onFocus,onBlur:this._onBlur,onChange:this._onChange,onKeyDown:this._onKeyDown}))}},{key:"_updateRotationFromMapView",value:function(e){this.setState({rotation:(0,y.xW)(-e.target.get("rotation"))})}},{key:"_onFocus",value:function(){this.setState(function(e){return{isFocused:!0,rotation:(0,m.n0)(e.rotation)}})}},{key:"_onBlur",value:function(){this.setState({isFocused:!1})}},{key:"_onChange",value:function(e){this.props.map.getView().setRotation((0,y.eh)(-e.target.value)),this.setState({rotation:e.target.value})}},{key:"_onKeyDown",value:function(e){"Enter"===e.key&&e.target.blur()}},{key:"_onButtonClick",value:function(){this.props.map.getView().animate({rotation:0,duration:this.props.resetDuration,easing:l.vT})}}],c&&b(n.prototype,c),s&&b(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,c,s}(u.Component);E(w,"propTypes",{fieldWidth:s().string,map:s().object,resetDuration:s().number});const T=(0,d.RM)(w)},88276:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>g,H4:()=>m,Nw:()=>p,uC:()=>y,zc:()=>d});n(28706),n(26099),n(38781);var r=n(74167),o=n(89610),a=n(5556),i=n.n(a),l=n(96540),c=n(70802),s=(0,n(63101).Ay)("error"),u=function(){window.location.reload()},f=function(e){var t=e.resetErrorBoundary;return l.createElement("div",{className:"error-panel"},l.createElement("div",{className:"error-icon"},l.createElement(c.A,{style:{width:48,height:48}})),l.createElement("div",null,"An unexpected error happened. Sorry for the inconvenience."),l.createElement("div",{className:"email-link"},"Please send us an email to let us know."),l.createElement("div",{className:"button-bar"},l.createElement("button",{type:"button",onClick:u},"Reload app"),t&&l.createElement("button",{type:"button",onClick:t},"Reset to factory defaults")))};f.propTypes={resetErrorBoundary:i().func};var d=f;function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e.toString&&(0,o.default)(e.toString)?t?"".concat(t,": ").concat(e.toString()):e.toString():t?"".concat(t,": ").concat(String(e)):String(e)}function m(e,t){if(e&&(e.isTimeout||e.hideStackTrace)){var n=e.isTimeout&&t?"".concat(t," timed out"):p(e);s.warn(n)}else{var r=p(e);s.error(r)}}function y(e,t){return function(){var n;try{n=e.apply(void 0,arguments)}catch(e){m(e,t)}if((0,r.A)(n))return n.catch(function(e){return m(e,t)})}}const g=m},89536:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>O,ef:()=>S});n(52675),n(89463),n(2259),n(28706),n(23418),n(23792),n(62062),n(34782),n(62010),n(69085),n(40875),n(10287),n(26099),n(3362),n(27495),n(90906),n(38781),n(47764),n(98992),n(81454),n(62953);var r=n(1932),o=n(9401),a=n(26625),i=n(26682),l=n(74651),c=n(72732),s=n(62528),u=n(27989),f=n(52706),d=n(35026);function p(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return m(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(m(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,m(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,m(f,"constructor",s),m(s,"constructor",c),c.displayName="GeneratorFunction",m(s,o,"GeneratorFunction"),m(f),m(f,o,"Generator"),m(f,r,function(){return this}),m(f,"toString",function(){return"[object Generator]"}),(p=function(){return{w:a,m:d}})()}function m(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}m=function(e,t,n,r){function a(t,n){m(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},m(e,t,n,r)}function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function h(){var e;return e=p().m(function e(t){var n,r,a,i,l;return p().w(function(e){for(;;)switch(e.n){case 0:if(n=t.uavId,r=t.payload,a=(null!=r?r:{}).items,Array.isArray(a)&&0!==a.length){e.n=1;break}return e.a(2);case 1:return i=c.A.createCancelToken(),(l=c.A.execute.uploadMission({uavId:n,data:r,format:"skybrush-live/mission-items"},{cancelToken:i}))[o.bO]=function(){return i.cancel({allowFailure:!0})},e.a(2,l)}},e)}),h=function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){v(a,r,o,i,l,"next",e)}function l(e){v(a,r,o,i,l,"throw",e)}i(void 0)})},h.apply(this,arguments)}function A(e,t){switch(e.type){case s.IU.UPDATE_FLIGHT_AREA:return(0,r.jM)(e,function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=g(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(e.parameters.flightArea.polygons);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.points=r.points.map(u.Ek)}}catch(e){n.e(e)}finally{n.f()}});case s.IU.UPDATE_GEOFENCE:return(0,r.jM)(e,function(e){e.parameters.coordinateSystem="geodetic",e.parameters.geofence=E(t)});case s.IU.UPDATE_SAFETY:return(0,r.jM)(e,function(e){Object.assign(e.parameters.safety,(0,i.g9)(t))});default:return e}}var S=function(e){return{version:1,name:(0,d.uu)(e),items:(0,d.m3)(e).map(function(t){return A(t,e)}),startPositions:(0,d.vT)(e).map(function(e){return e&&(0,u.$S)(e)})}},E=function(e){var t=(0,d.GQ)(e),n=(0,d.lI)(e),r=(0,d.QH)(e),o={version:1,enabled:!0,polygons:n?[{isInclusion:!0,points:n.map(u.Ek)}].concat(y(r.map(function(e){var t=e.attributes;return{isInclusion:!1,points:e.points.map(u.Ek),altitude:{min:null==t?void 0:t.minAltitude,max:null==t?void 0:t.maxAltitude}}}))):[],rallyPoints:[],maxAltitude:(0,i.Dp)(e),maxDistance:(0,i.zr)(e)};return t!==a.FU.KEEP_CURRENT&&(o.action=t),o};const O={executor:function(e){return h.apply(this,arguments)},scope:l.uw.SINGLE,title:"Upload mission items",type:f.j}},89826:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>c,SD:()=>i,o1:()=>s});var r=n(65307),o=n(39441),a=n(53275);const i=Boolean(window.bridge?.createTCPSocket),l={active:!1,protocol:i?a.Z.TCP:a.Z.WS,hostName:void 0,port:i?5001:5e3,isSecure:!1,dialogVisible:!1,selectedTab:a.Q.AUTO},{reducer:c,actions:s}=(0,r.Z0)({name:"server-settings-dialog",initialState:l,reducers:{closeServerSettingsDialog(e,t){Object.assign(e,t.payload,{dialogVisible:!1})},disconnectFromServer(e){e.active=!1},setServerSettingsDialogTab(e,t){e.selectedTab=t.payload},showServerSettingsDialog:(0,o.kP)(e=>{e.dialogVisible=!0}),updateServerSettings(e,t){Object.assign(e,t.payload)}}})},89933:(e,t,n)=>{"use strict";n.d(t,{G:()=>l,c:()=>c});var r=n(44757),o=n(41343),a=n(78641),i=n(37802);function l(){return Object.keys(a.Ay._uavsById).map(i.ZO)}function c(e,t,n=[]){const a=(0,r.A)(e,n);return t&&t.length>0?(a.splice(0,0,...t),(0,o.A)(a)):a}},90501:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>h,Of:()=>p,PZ:()=>y,Qj:()=>m,T1:()=>f,aE:()=>v,hE:()=>b,uW:()=>g});var r=n(65307),o=n(37566),a=n(37802),i=n(16238),l=n(9702);const c={...i.Tg,panel:{followMapSelection:!0,selectedTab:l.o.PREFLIGHT,selectedUAVId:void 0}},{actions:s,reducer:u}=(0,r.Z0)({name:"uavs",initialState:c,reducers:{addUAVs(e,t){for(const n of Object.values(t.payload))(0,i.so)(e,n);(0,i.k5)(e)},clearUAVList(e){(0,i.d5)(e)},_removeUAVsByIds(e,t){(0,i.Zj)(e,t.payload)},setSelectedTabInUAVDetailsPanel(e,{payload:t}){e.panel.selectedTab=t},setSelectedUAVIdInUAVDetailsPanel(e,{payload:t}){e.panel.selectedUAVId=t},toggleFollowMapSelectionInUAVDetailsPanel:{prepare:()=>({payload:null}),reducer(e){e.panel.followMapSelection=!e.panel.followMapSelection}},updateAgesOfUAVs(e,t){for(const[n,r]of Object.entries(t.payload)){const t=n?e.byId[n]:void 0;t&&(t.age=r)}},updateUAVs(e,t){for(const n of Object.values(t.payload))(0,i.H5)(e,n)}},extraReducers(e){e.addCase(o.td,(e,{payload:t})=>{if(e.panel.followMapSelection){const n=t.filter(a.wy);n.length>0&&(e.panel.selectedUAVId=(0,a.Xc)(n[0]))}})}}),{addUAVs:f,clearUAVList:d,setSelectedTabInUAVDetailsPanel:p,setSelectedUAVIdInUAVDetailsPanel:m,toggleFollowMapSelectionInUAVDetailsPanel:y,updateAgesOfUAVs:g,updateUAVs:b,_removeUAVsByIds:v}=s,h=u},90734:(e,t,n)=>{"use strict";function r(e){return(255&e)>=128}function o(e){return(255&e)>=64}n.d(t,{A:()=>r,y:()=>o})},91236:(e,t,n)=>{"use strict";n.d(t,{uY:()=>s,XP:()=>p,sX:()=>m,S6:()=>y,mZ:()=>g,HC:()=>A,e3:()=>S,W6:()=>E,yy:()=>O,nm:()=>w,Jp:()=>T,Ay:()=>F,d:()=>C,gW:()=>I,tQ:()=>x,am:()=>j,DY:()=>P,Z$:()=>k,wT:()=>_,_Y:()=>N,ww:()=>R,z_:()=>D,MX:()=>M});var r=n(65307),o=n(91949),a=n(95443),i=n(16238),l=n(39441);function c(e,t,n){const{hostName:r,label:o,port:a,protocol:i}=n.payload,l=`${r}:${a}:${t}:${i}`,c={id:l,hostName:r,label:o,port:a,protocol:i,type:t};n.key=l,void 0===e.detected.byId[l]?(n.wasAdded=!0,e.detected.order.push(l)):n.wasAdded=!1,e.detected.byId[l]=c}const s={methods:[],required:!1,user:"",valid:!1},u={current:{authentication:s,features:{},license:void 0,ports:{},state:o.KN.DISCONNECTED,timeSync:{adjusting:!1,adjustmentResult:void 0,calculating:!1,clockSkew:void 0,roundTripTime:void 0},version:void 0},isAuthenticating:!1,isScanning:!1,detected:i.Tg,token:(0,a.b)(),timeSyncDialog:{open:!1}},{actions:f,reducer:d}=(0,r.Z0)({name:"servers",initialState:u,reducers:{addDetectedServer(e,t){c(e,"detected",t)},addInferredServer(e,t){c(e,"inferred",t)},addServerFeatures(e,t){let{payload:n}=t;Array.isArray(n)||(n=[n]);for(let t of n){"object"!=typeof t&&(t={name:String(t),data:!0});const{name:n,data:r}=t;e.current.features[n]=r}},adjustServerTimePromisePending(e){e.current.timeSync.adjusting=!0,e.current.timeSync.adjustmentResult=void 0},adjustServerTimePromiseFulfilled(e){e.current.timeSync.adjusting=!1,e.current.timeSync.adjustmentResult=!0},adjustServerTimePromiseRejected(e){e.current.timeSync.adjusting=!1,e.current.timeSync.adjustmentResult=!1},authenticateToServerPromisePending(e){e.isAuthenticating=!0},authenticateToServerPromiseFulfilled(e){e.isAuthenticating=!1},authenticateToServerPromiseRejected(e){e.isAuthenticating=!1},clearAuthenticatedUser(e){e.current.authentication.user=""},clearAuthenticationToken(e){e.token=void 0},clearServerFeatures(e){e.current.features={}},clearServerLicense(e){e.current.license=void 0},clearServerPortMapping(e){e.current.ports={}},clearTimeSyncStatistics(e){e.current.timeSync={clockSkew:void 0,roundTripTime:void 0}},calculateClockSkewPromisePending(e){e.current.timeSync.calculating=!0},calculateClockSkewPromiseFulfilled(e,t){e.current.timeSync.calculating=!1;const{clockSkew:n,roundTripTime:r}=t.payload;e.current.timeSync.clockSkew="number"==typeof n&&Number.isFinite(n)?n:void 0,e.current.timeSync.roundTripTime="number"==typeof r&&Number.isFinite(r)?r:void 0},calculateClockSkewPromiseRejected(e){e.current.timeSync.calculating=!1},closeTimeSyncWarningDialog:(0,l.kP)(e=>{e.timeSyncDialog.open=!1}),openTimeSyncWarningDialog:(0,l.kP)(e=>{e.timeSyncDialog.open=!0}),removeAllDetectedServers(e){(0,i.d5)(e.detected)},setAuthenticatedUser(e,t){e.current.authentication.user=t.payload??""},setCurrentServerConnectionState(e,t){const n=t.payload;e.current.state=n,n===o.KN.DISCONNECTED&&(e.current.authentication=s)},setServerLicense(e,{payload:t}){e.current.license=t},setServerPortMapping(e,{payload:t}){e.current.ports=t},setServerVersion(e,{payload:t}){e.current.version=t},startScanning(e){e.isScanning=!0},stopScanning(e){e.isScanning=!1},updateCurrentServerAuthenticationSettings(e,t){const{methods:n,required:r,user:o}=t.payload;Array.isArray(n)&&(e.current.authentication.required=Boolean(r),e.current.authentication.methods=n.map(String),void 0!==o&&(e.current.authentication.user=o),e.current.authentication.valid=!0)},updateDetectedServerHostname(e,t){const{key:n,hostName:r}=t.payload,o=e.detected.byId[n];o&&(o.hostName=r)},updateDetectedServerLabel(e,t){const{key:n,label:r}=t.payload,o=e.detected.byId[n];o&&(o.label=r)}}}),{addDetectedServer:p,addInferredServer:m,addServerFeatures:y,authenticateToServerPromiseFulfilled:g,authenticateToServerPromisePending:b,authenticateToServerPromiseRejected:v,clearAuthenticatedUser:h,clearAuthenticationToken:A,clearServerFeatures:S,clearServerLicense:E,clearServerPortMapping:O,clearTimeSyncStatistics:w,closeTimeSyncWarningDialog:T,openTimeSyncWarningDialog:C,removeAllDetectedServers:I,setAuthenticatedUser:x,setCurrentServerConnectionState:j,setServerLicense:P,setServerPortMapping:k,setServerVersion:_,startScanning:N,stopScanning:R,updateCurrentServerAuthenticationSettings:D,updateDetectedServerHostname:M,updateDetectedServerLabel:L}=f,F=d},91436:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,Yq:()=>c,ic:()=>l});var r=n(65307),o=n(39441);const{actions:a,reducer:i}=(0,r.Z0)({name:"uav-control",initialState:{flyToTargetDialog:{open:!1,initialValues:{coords:"",mode:"relative",altitude:0}}},reducers:{closeFlyToTargetDialog:(0,o.kP)(e=>{e.flyToTargetDialog.open=!1}),openFlyToTargetDialog(e,{payload:{coords:t,mode:n="ahl",altitude:r=10}}){e.flyToTargetDialog.initialValues={coords:t,mode:n,altitude:r},e.flyToTargetDialog.open=!0}}}),{closeFlyToTargetDialog:l,openFlyToTargetDialog:c}=a,s=i},91949:(e,t,n)=>{"use strict";n.d(t,{AI:()=>a,DR:()=>A,GR:()=>s,Go:()=>o,Jj:()=>b,Jq:()=>v,KN:()=>r,RG:()=>O,S2:()=>h,XV:()=>d,Y9:()=>E,Zm:()=>i,aO:()=>p,ke:()=>m,nW:()=>l.n,os:()=>y,ri:()=>w});var r,o,a,i,l=n(19395);!function(e){e.DISCONNECTED="disconnected",e.CONNECTING="connecting",e.CONNECTED="connected",e.DISCONNECTING="disconnecting"}(r||(r={})),function(e){e.OUTBOUND="outbound",e.INBOUND="inbound",e.ERROR="error"}(o||(o={})),function(e){e.DEBUG="debug",e.INFO="info",e.WARNING="warning",e.ERROR="error",e.CRITICAL="critical"}(a||(a={})),function(e){e.UNKNOWN="unknown",e.TEXT="text",e.ARDUPILOT="ardupilot",e.ULOG="ulog",e.FLOCKCTRL="flockctrl"}(i||(i={}));const c={[i.UNKNOWN]:{label:"Unknown",description:"Unknown flight log format"},[i.TEXT]:{label:"Plain text",description:"Plain text flight log"},[i.ARDUPILOT]:{label:"ArduPilot",description:"ArduPilot flight log"},[i.ULOG]:{label:"PX4 ULog",description:"PX4 ULog flight log"},[i.FLOCKCTRL]:{label:"FlockCtrl",description:"FlockCtrl high-level flight log"}};function s(e){return(c[e]||c[i.UNKNOWN]).description}var u;!function(e){e.ACRO="acro",e.ALTITUDE_HOLD="alt",e.AUTO="auto",e.CIRCLE="circle",e.FLOW_HOLD="flow",e.FOLLOW="follow",e.GUIDED="guided",e.LAND="land",e.LOITER="loiter",e.MISSION="mission",e.OTHER="other",e.PRECISION_LANDING="precland",e.POSITION_HOLD="pos",e.RTH="rth",e.SHOW="show",e.SIMPLE="simple",e.STABILIZE="stab",e.TAKEOFF="takeoff",e.UNKNOWN="unknown"}(u||(u={}));const f={[u.ACRO]:{abbreviation:"Acro",label:"Acrobatic",description:"Acrobatic"},[u.ALTITUDE_HOLD]:{abbreviation:"Alt",label:"Altitude hold",description:"Altitude hold"},[u.AUTO]:{abbreviation:"Auto",label:"Automatic",description:"Automatic"},[u.CIRCLE]:{abbreviation:"Circ",label:"Circling",description:"Circling around point of interest"},[u.FLOW_HOLD]:{abbreviation:"Flow",label:"Optical flow hold",description:"Optical flow hold"},[u.FOLLOW]:{abbreviation:"Flw",label:"Following",description:"Following another device",status:l.n.SUCCESS},[u.GUIDED]:{abbreviation:"Guid",label:"Guided",description:"Guided by companion computer",status:l.n.SUCCESS},[u.LAND]:{abbreviation:"Land",label:"Landing",description:"Autonomous landing",status:l.n.WARNING},[u.LOITER]:{abbreviation:"Loit",label:"Loiter",description:"Posiiton hold with manual velocity control"},[u.MISSION]:{abbreviation:"Wp",label:"Mission",description:"Following pre-programmed mission",status:l.n.SUCCESS},[u.OTHER]:{abbreviation:"Othr",label:"Other",description:"Other, unspecified flight mode"},[u.PRECISION_LANDING]:{abbreviation:"Plnd",label:"Precision landing",description:"Autonomous precision landing"},[u.POSITION_HOLD]:{abbreviation:"Pos",label:"Position hold",description:"Position hold with manual attitude control"},[u.RTH]:{abbreviation:"RTH",label:"Return to home",description:"Autonomous return to home",status:l.n.RTH},[u.SHOW]:{abbreviation:"Show",label:"Drone show",description:"Executing a drone show",status:l.n.SUCCESS},[u.SIMPLE]:{abbreviation:"Simp",label:"Simple",description:"Simplified aided flight mode"},[u.STABILIZE]:{abbreviation:"Stab",label:"Stabilize",description:"Roll and pitch stabilization"},[u.TAKEOFF]:{abbreviation:"Take",label:"Takeoff",description:"Autonomous takeoff"},[u.UNKNOWN]:{abbreviation:"----",label:"Unknown",description:"Unknown flight mode"}},d=e=>(e=>Object.values(u).includes(e))(e)?f[e].abbreviation:e.slice(0,4);function p(e){const t=f[e];return t?t.label:String(e).toUpperCase()}function m(e){return(f[e]||f[u.UNKNOWN]).status}var y;!function(e){e[e.NO_GPS=0]="NO_GPS",e[e.NO_FIX=1]="NO_FIX",e[e.FIX_2D=2]="FIX_2D",e[e.FIX_3D=3]="FIX_3D",e[e.DGPS=4]="DGPS",e[e.RTK_FLOAT=5]="RTK_FLOAT",e[e.RTK_FIXED=6]="RTK_FIXED",e[e.STATIC=7]="STATIC",e[e.UNKNOWN=8]="UNKNOWN"}(y||(y={}));const g={[y.NO_GPS]:{abbreviation:"",description:"No GPS connected",status:l.n.ERROR},[y.NO_FIX]:{abbreviation:"",description:"No GPS fix obtained",status:l.n.ERROR},[y.FIX_2D]:{abbreviation:"2D",description:"2D GPS fix",status:l.n.WARNING},[y.FIX_3D]:{abbreviation:"3D",description:"3D GPS fix",status:l.n.WARNING},[y.DGPS]:{abbreviation:"DGPS",description:"3D GPS fix with DGPS/SBAS",status:l.n.SUCCESS},[y.RTK_FLOAT]:{abbreviation:"RTK",description:"RTK float",status:l.n.SUCCESS},[y.RTK_FIXED]:{abbreviation:"RTK+",description:"RTK fixed",status:l.n.SUCCESS},[y.STATIC]:{abbreviation:"STA",description:"Static position",status:l.n.SUCCESS},[y.UNKNOWN]:{abbreviation:"----",description:"Unknown GPS fix type",status:l.n.WARNING}};function b(e){return(g[e]||g[y.UNKNOWN]).abbreviation}function v(e){return(g[e]||g[y.UNKNOWN]).status}function h(e){return null==e||e<0?l.n.OFF:e>75?l.n.SUCCESS:e>50?l.n.WARNING:l.n.ERROR}var A;!function(e){e.OFF="off",e.PASS="pass",e.WARNING="warning",e.RUNNING="running",e.SOFT_FAILURE="softFailure",e.FAILURE="failure",e.ERROR="error",e.UNKNOWN="unknown"}(A||(A={}));const S={[A.OFF]:{description:"Disabled",overallDescription:"All preflight checks are disabled",status:l.n.OFF},[A.PASS]:{description:"OK",overallDescription:"Preflight checks passed",status:l.n.SUCCESS},[A.WARNING]:{description:"Needs attention",overallDescription:"Some preflight check items need attention",status:l.n.WARNING},[A.RUNNING]:{description:"Check in progress...",overallDescription:"Preflight checks are in progress...",status:l.n.WAITING},[A.SOFT_FAILURE]:{description:"Temporary failure",overallDescription:"Some preflight checks failed temporarily",status:l.n.WARNING},[A.FAILURE]:{description:"Failed",overallDescription:"Preflight checks failed",status:l.n.ERROR},[A.ERROR]:{description:"Error while executing test",overallDescription:"Error while executing preflight checks",status:l.n.CRITICAL},[A.UNKNOWN]:{description:"Unknown test result",overallDescription:"Unknown preflight test result",status:l.n.OFF}};function E(e){return(S[e]||S[A.UNKNOWN]).description}function O(e){return(S[e]||S[A.UNKNOWN]).overallDescription}function w(e){return(S[e]||S[A.UNKNOWN]).status}},92310:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var r=n(74848),o=n(81709),a=n(44757),i=n(42531),l=n(96540),c=n(40881),s=n(37802),u=n(98964),f=n(12239),d=n(29008),p=n(92866),m=n(38967),y=n(86717),g=n(44294);class b{projection;featureAdded;featureRemoved;_featuresByObjectId;_featureFactory;_featureIdFunction;_vectorSource;constructor(e,t){this._featuresByObjectId={},this._featureFactory=void 0,this._featureIdFunction=d.default,this._vectorSource=e,this.projection=t,this.featureAdded=new m.MiniSignal,this.featureRemoved=new m.MiniSignal}createOrUpdateFeatureById=(e,t)=>{t=this.projection?this.projection(t):t;const n=this.getFeatureById(e)??this._createFeatureById(e,t);return n.getGeometry()?.setCoordinates(t),n};_createFeatureById=(e,t)=>{const n=new g.default(t),r=this._featureFactory?this._featureFactory(e,n):new y.default(n),o=this._featureIdFunction(e);return r.setId(o),this._featuresByObjectId[e]=r,this._vectorSource&&this._vectorSource.addFeature(r),this.featureAdded.dispatch(r),r};getFeatureById=e=>this._featuresByObjectId[e];getFeatureArray=()=>(0,p.A)(this._featuresByObjectId);removeAllFeatures=()=>{this._vectorSource&&this._vectorSource.clear(),this._featuresByObjectId={}};removeFeatureById=e=>{const t=this.getFeatureById(e);return t&&this._vectorSource&&this._vectorSource.removeFeature(t),delete this._featuresByObjectId[e],t};get featureFactory(){return this._featureFactory}set featureFactory(e){this._featureFactory=e}get featureIdFunction(){return this._featureIdFunction}set featureIdFunction(e){this._featureIdFunction=e}get vectorSource(){return this._vectorSource}set vectorSource(e){if(this._vectorSource!==e&&(this._vectorSource&&this._vectorSource.clear(),this._vectorSource=e,this._vectorSource)){const e=this._vectorSource;(0,f.A)(this._featuresByObjectId,t=>e.addFeature(t))}}}var v=n(49700),h=n(29276),A=n(81426),S=n(13628);const E=n.p+"da17a5e486c03be05d7f.png",O=n.p+"c56587927ae56c9f1fda.png",w=n.p+"fd785e824996906d5f26.png",T=n.p+"aa4f81a03c0266969f2f.png",C=n.p+"dbf5668680c9e570435b.png";var I=n(19395),x=n(40861);const j={[I.n.INFO]:T,[I.n.WARNING]:C,[I.n.ERROR]:w,[I.n.CRITICAL]:w};class P extends y.default{uavId;_selected;_color;_labelColor;_heading;_scale;_status;_hideLabel;_iconImage;_selectionImage;constructor(e,t,n){super(t),this._selected=!1,this._color="",this._labelColor="",this._heading=0,this._scale=1,this._status=null,this._hideLabel=Boolean(n??!1),this._iconImage=null,this._selectionImage=null,this.uavId=e,this._setupStyle()}get heading(){return this._heading}set heading(e){if(this._heading!==e&&(this._heading=e,this._iconImage)){const e=this._headingToRotation();this._iconImage.setRotation(e),this._selectionImage&&this._selectionImage.setRotation(e)}}get selected(){return this._selected}set selected(e){this._selected!==e&&(this._selected=e,this._setupStyle())}get color(){return this._color}set color(e){this._color!==e&&(this._color=e,this._setupStyle())}get labelColor(){return this._labelColor}set labelColor(e){this._labelColor!==e&&(this._labelColor=e,this._setupStyle())}get scale(){return this._scale}set scale(e){this._scale!==e&&(this._scale=e,this._setupStyle())}get status(){return this._status}set status(e){this._status!==e&&(this._status=e,this._setupStyle())}_setupStyle(){const e=[],t=new v.A({rotateWithView:!0,rotation:this._headingToRotation(),scale:this._scale,src:j[this._status??""]??O});this._iconImage=t;const n=new h.default({image:t});e.push(n);const r=new v.A({rotateWithView:!0,rotation:this._headingToRotation(),scale:this._scale,src:E});this._selectionImage=r;const o=new h.default({image:r});if(this._selected&&e.splice(0,0,o),!this._hideLabel){const t=new h.default({text:new A.default({fill:new S.default({color:this._labelColor&&this._labelColor.length>0?this._labelColor:"black"}),font:"12px sans-serif",offsetY:4+20*this._scale,text:this.uavId||"undefined",textAlign:"center"})});e.push(t)}this.setStyle(e)}_headingToRotation(e){return void 0===e&&(e=this._heading),(0,x.eh)(e%360)}}class k extends l.Component{eventBindings;_featureManager;_sourceRef;constructor(e){super(e),this._sourceRef=null,this._featureManager=new b,this._featureManager.featureFactory=this._createFeatureFactory(),this._featureManager.featureIdFunction=s.ZO,this._featureManager.featureAdded.add(this._onFeatureAdded),this.eventBindings={}}componentDidUpdate(e){this._onFlockMaybeChanged(e.flock,this.props.flock),this._onSelectionMaybeChanged(e.selection,this.props.selection),this._onLabelColorMaybeChanged(e.labelColor,this.props.labelColor),this._onScaleMaybeChanged(e.scale,this.props.scale),this._featureManager.projection=this.props.projection,this.props.labelHidden!==e.labelHidden&&(this._featureManager.featureFactory=this._createFeatureFactory())}componentDidMount(){this.props.layer&&((0,u.Uz)(this.props.layer),(0,u.eS)(this.props.layer)),this._featureManager.projection=this.props.projection,this._onFlockMaybeChanged(void 0,this.props.flock),this._onSelectionMaybeChanged([],this.props.selection),this._onScaleMaybeChanged(0,this.props.scale)}componentWillUnmount(){this._onFlockMaybeChanged(this.props.flock,void 0),this._onSelectionMaybeChanged(this.props.selection,[]),this._featureManager.projection=void 0}render(){return(0,r.jsx)(o.sP.Vector,{ref:this._assignSourceRef})}_assignSourceRef=e=>{e!==this._sourceRef&&(this._sourceRef&&(this._featureManager.vectorSource=void 0),this._sourceRef=e,this._sourceRef&&(this._featureManager.vectorSource=e.source))};_createFeatureFactory=()=>(e,t)=>new P(e,t,this.props.labelHidden);_onFeatureAdded=e=>{e.selected=(0,i.A)(this.props.selection,e.getId())};_onFlockMaybeChanged=(e,t)=>{e!==t&&(e&&(e.uavsUpdated.detach(this.eventBindings.uavsUpdated),delete this.eventBindings.uavsUpdated,e.uavsRemoved.detach(this.eventBindings.uavsRemoved),delete this.eventBindings.uavsRemoved,this._featureManager.removeAllFeatures()),t&&(this.eventBindings.uavsUpdated=t.uavsUpdated.add(this._onUAVsUpdated),this.eventBindings.uavsRemoved=t.uavsRemoved.add(this._onUAVsRemoved),this._onUAVsUpdated(t.getAllUAVs())))};_onSelectionMaybeChanged=(e,t)=>{if(!this._sourceRef)return;const{source:n}=this._sourceRef,r=n.getFeatureById.bind(n);let o;o=(0,a.A)(t,e).map(r).filter(Boolean);for(const e of o)e.selected=!0;o=(0,a.A)(e,t).map(r).filter(Boolean);for(const e of o)e.selected=!1};_onLabelColorMaybeChanged=(e,t)=>{if(e===t)return;const n=this._featureManager.getFeatureArray();for(const e of n)e.labelColor=t};_onScaleMaybeChanged=(e,t)=>{if(e===t)return;const n=this._featureManager.getFeatureArray();for(const e of n)e.scale=t};_onUAVsRemoved=e=>{for(const t of e)this._featureManager.removeFeatureById(t.id)};_onUAVsUpdated=e=>{for(const t of e){if(0===t.lon&&0===t.lat)continue;if(void 0===t.lon||void 0===t.lat)continue;const e=this._featureManager.createOrUpdateFeatureById(t.id,[t.lon,t.lat]);void 0!==t.heading&&(e.heading=t.heading),e.status=(0,c.zG)(t),e.labelColor=this.props.labelColor,e.scale=this.props.scale}}}const _=(0,o.ou)(k)},92680:(e,t,n)=>{"use strict";n.d(t,{Gq:()=>c,iA:()=>i,sd:()=>l});var r=n(4213),o=n(57632);const a=async({maxSize:e,...t}={})=>new Blob([await(window?.bridge?.readBufferFromFile({maxSize:e,dialogOptions:t}))??await(0,o.g6)(await(0,o._5)())],{type:"application/octet-stream"});async function i(e={}){return(await a(e)).text()}async function l(e,t,n={}){const{writeBufferToFile:o}=window?.bridge??{};if(o)return o(await e.arrayBuffer(),t,n);(0,r.saveAs)(e,t)}async function c(e,t,n={}){return l(new Blob([e],{type:"text/plain;charset=utf-8"}),t,n)}},92895:(e,t,n)=>{"use strict";n.d(t,{FK:()=>C,uw:()=>I,AP:()=>x,yG:()=>P,gB:()=>k,kb:()=>_,OX:()=>N,gg:()=>R,Gf:()=>j,iZ:()=>M,VZ:()=>D,qy:()=>L,wM:()=>S,G:()=>E,wo:()=>O,yx:()=>w,Ay:()=>Y,nW:()=>T,mP:()=>F,dH:()=>U,SX:()=>V,i5:()=>B,ci:()=>H,tY:()=>z,lm:()=>G,aH:()=>q,tp:()=>K});var r=n(65307),o=n(71458),a=n(3825),i=n(16238),l=n(39441),c=n(52351),s=n(97859),u=n(24089),f=n(57456);const d=["failedItems","itemsInProgress","itemsWaitingToStart","itemsQueued","itemsFinished"];function p(e,t){(0,i.T$)(e.history,t)}function m(e){e.queues.failedItems=[],e.queues.itemsFinished=[],e.queues.itemsQueued=[],e.queues.itemsWaitingToStart=[],e.errors={},e.progresses={},e.dialog.showLastUploadResult=!1}function y(e,t){for(const n of t)delete e.errors[n]}const g=({target:e,doNotMoveWhenIn:t=[]}={})=>{const n=(0,f.default)(d,...e?[e]:[],...t);return(t,r)=>{const o=(0,c.A)(r.payload),a=e?t.queues[e]:void 0;for(const e of n){const n=t.queues[e];(0,u.A)(n,...o),"failedItems"===e&&y(t,o)}if(!(0,s.default)(a))for(const e of o)a.includes(e)||a.push(e)}},b=({source:e,target:t})=>(n,r)=>{const o=(0,c.A)(r.payload),a=n.queues[e],i=t?n.queues[t]:void 0;for(const e of o){const t=a.indexOf(e);t>=0&&(a.splice(t,1),i&&i.push(e))}if("failedItems"===e&&y(n,o),"itemsFinished"===t)for(const e of o)n.progresses[e]=1;else if("itemsInProgress"===e)for(const e of o)delete n.progresses[e]},v={currentJob:{type:void 0,payload:void 0,running:!1},history:{order:[],byId:{}},queues:{itemsInProgress:[],itemsWaitingToStart:[],itemsQueued:[],itemsFinished:[],failedItems:[]},errors:{},progresses:{},timing:{startedAt:void 0,estimatedEndAt:void 0},dialog:{open:!1,showLastUploadResult:!1,selectedJob:{type:void 0,payload:void 0},backAction:void 0},settings:{autoRetry:!1,flashFailed:!1,restrictToGlobalSelection:!1}},{actions:h,reducer:A}=(0,r.Z0)({name:"upload",initialState:v,reducers:{clearLastUploadResultForJobType(e,t){const{payload:n}=t;n&&p(e,n)},clearUploadQueue:(0,l.kP)(e=>{e.queues.itemsWaitingToStart=[]}),closeUploadDialog:(0,l.kP)(e=>{e.dialog.open=!1}),dismissLastUploadResult:(0,l.kP)(e=>{e.dialog.showLastUploadResult=!1}),putUavsInWaitingQueue:g({target:"itemsWaitingToStart",doNotMoveWhenIn:["itemsQueued","itemsInProgress"]}),removeUavsFromWaitingQueue:g({target:void 0,doNotMoveWhenIn:["itemsQueued","itemsInProgress"]}),setupNextUploadJob(e,t){const{payload:n}=t,{type:r,payload:o,targets:a}=n;e.currentJob.running||(e.currentJob.type=r,e.currentJob.payload=o,m(e),e.queues.itemsWaitingToStart=[...a])},setUploadAutoRetry(e,t){e.settings.autoRetry=Boolean(t.payload)},setFlashFailed(e,t){e.settings.flashFailed=Boolean(t.payload)},_enqueueFailedUploads:b({source:"failedItems",target:"itemsWaitingToStart"}),_enqueueSuccessfulUploads:b({source:"itemsFinished",target:"itemsWaitingToStart"}),_notifyUploadFinished(e,t){const{success:n,cancelled:r}=t.payload;if(e.queues.itemsWaitingToStart=[],e.queues.itemsInProgress=[],e.queues.itemsQueued=[],e.currentJob.running=!1,e.currentJob.type){const t={id:e.currentJob.type,payload:e.currentJob.payload,result:r?"cancelled":n?"success":"error"};(0,i.M5)(e.history,t)}e.dialog.showLastUploadResult=!0},_notifyUploadStartedAt(e,t){e.currentJob.running=!0,e.dialog.showLastUploadResult=!1,e.timing.startedAt=t.payload},_notifyUploadOnUavCancelled:b({source:"itemsInProgress",target:"itemsWaitingToStart"}),_notifyUploadOnUavFailed:b({source:"itemsInProgress",target:"failedItems"}),_notifyUploadOnUavQueued:b({source:"itemsWaitingToStart",target:"itemsQueued"}),_notifyUploadOnUavStarted:b({source:"itemsQueued",target:"itemsInProgress"}),_notifyUploadOnUavSucceeded:b({source:"itemsInProgress",target:"itemsFinished"}),_setErrorMessageForUAV:{reducer(e,t){const{uavId:n,message:r}=t.payload;r?e.errors[n]=r:delete e.errors[n]},prepare:(e,t)=>({payload:{uavId:e,message:String(t)}})},_setEstimatedCompletionTime(e,t){e.timing.estimatedEndAt=Number.isFinite(t.payload)?t.payload:void 0},_setProgressInfoForUAV:{reducer(e,t){const{uavId:n,progress:r}=t.payload;r>=0&&r<=1?e.progresses[n]=r:delete e.progresses[n]},prepare:(e,t)=>({payload:{uavId:e,progress:t}})},openUploadDialogKeepingCurrentJob(e,t){const{payload:n}=t,{backAction:r}=n??{};e.dialog.selectedJob?.type&&(e.dialog.open=!0,e.dialog.backAction=r)},openUploadDialogForJob(e,t){const{payload:n}=t,{job:r,options:o}=n??{},{type:a,payload:i}=r??{},{backAction:l,restrictToGlobalSelection:c}=o??{};a&&(e.currentJob.running||e.dialog.selectedJob?.type===a||m(e),e.dialog.backAction=l,e.dialog.selectedJob={type:a,payload:i},e.dialog.showLastUploadResult=!1,e.dialog.open=!0,void 0!==c&&(e.settings.restrictToGlobalSelection=c))},setRestrictToGlobalSelection(e,t){e.settings.restrictToGlobalSelection=t.payload},toggleRestrictToGlobalSelection(e){e.settings.restrictToGlobalSelection=!e.settings.restrictToGlobalSelection},startUpload:(0,l.kP)(()=>{}),cancelUpload:(0,l.kP)(()=>{})},extraReducers(e){e.addCase(a.j8,e=>{p(e,o._e.type)})}}),{cancelUpload:S,clearLastUploadResultForJobType:E,clearUploadQueue:O,closeUploadDialog:w,dismissLastUploadResult:T,_enqueueFailedUploads:C,_enqueueSuccessfulUploads:I,_notifyUploadFinished:x,_notifyUploadStartedAt:j,_notifyUploadOnUavCancelled:P,_notifyUploadOnUavFailed:k,_notifyUploadOnUavQueued:_,_notifyUploadOnUavStarted:N,_notifyUploadOnUavSucceeded:R,_setEstimatedCompletionTime:D,_setErrorMessageForUAV:M,_setProgressInfoForUAV:L,openUploadDialogForJob:F,openUploadDialogKeepingCurrentJob:U,setupNextUploadJob:G,putUavsInWaitingQueue:V,removeUavsFromWaitingQueue:B,setUploadAutoRetry:z,setFlashFailed:H,setRestrictToGlobalSelection:W,startUpload:q,toggleRestrictToGlobalSelection:K}=h,Y=A},94153:(e,t,n)=>{"use strict";n.d(t,{d2:()=>f,k8:()=>c,o0:()=>u});n(62010);var r=n(97859),o=n(69592),a=n(59116),i=n(96034),l=n(99387),c=function(e){return e&&Array.isArray(e)&&(0!==e[0]||0!==e[1])?{lat:e[0]/1e7,lon:e[1]/1e7,amsl:(0,r.default)(e[2])?null:e[2]/1e3,ahl:(0,r.default)(e[3])?null:e[3]/1e3,agl:(0,r.default)(e[4])?null:e[4]/1e3}:null},s=function(e){return e&&"number"==typeof e?e/10:null};function u(e,t){var n=(0,a.A)(e.status,function(e){var t=e.id,n=e.active,r=e.heading,a=e.position;return(0,i.A)({id:t,position:c(a),heading:s(r),active:n},o.A)});t((0,l.EX)(n))}function f(e,t){var n=(0,a.A)(e.result,function(e){var t=e.id,n=e.name;return(0,i.A)({id:t,name:n},o.A)});t((0,l.EX)(n))}},94203:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>g,IP:()=>m,Iy:()=>d,W4:()=>y,YN:()=>p,_N:()=>u,fU:()=>s,i2:()=>f});var r=n(97859),o=n(65307),a=n(39441);const i={stats:{lastUpdatedAt:void 0,satellites:{},messages:{},antenna:{descriptor:void 0,height:void 0,position:void 0,positionECEF:void 0,serialNumber:void 0,stationId:void 0},survey:{accuracy:void 0,flags:0}},dialog:{open:!1,antennaPositionFormat:n(16248).p.LON_LAT,surveySettingsEditorVisible:!1}},{actions:l,reducer:c}=(0,o.Z0)({name:"rtk",initialState:i,reducers:{closeRTKSetupDialog:(0,a.kP)(e=>{e.dialog.open=!1}),closeSurveySettingsPanel:(0,a.kP)(e=>{e.dialog.surveySettingsEditorVisible=!1}),showRTKSetupDialog:(0,a.kP)(e=>{e.dialog.open=!0}),resetRTKStatistics(e){e.stats.lastUpdatedAt=void 0,e.stats.antenna={},e.stats.satellites={},e.stats.messages={},e.stats.survey={}},setAntennaPositionFormat(e,t){e.dialog.antennaPositionFormat=t.payload},toggleSurveySettingsPanel:(0,a.kP)(e=>{e.dialog.surveySettingsEditorVisible=!e.dialog.surveySettingsEditorVisible}),updateRTKStatistics(e,t){const{antenna:n,lastUpdatedAt:o,messages:a,satellites:i,survey:l}=t.payload;e.stats.antenna=n,e.stats.lastUpdatedAt=o,e.stats.messages=a,e.stats.satellites=i,void 0===e.stats.survey&&(e.stats.survey={}),(0,r.default)(l.accuracy)||(e.stats.survey.accuracy=l.accuracy),(0,r.default)(l.flags)||(e.stats.survey.flags=l.flags)}}}),{closeRTKSetupDialog:s,closeSurveySettingsPanel:u,resetRTKStatistics:f,setAntennaPositionFormat:d,showRTKSetupDialog:p,toggleSurveySettingsPanel:m,updateRTKStatistics:y}=l,g=c},94746:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(85072),o=n.n(r),a=n(97825),i=n.n(a),l=n(77659),c=n.n(l),s=n(55056),u=n.n(s),f=n(10540),d=n.n(f),p=n(41113),m=n.n(p),y=n(7125),g={};g.styleTagTransform=m(),g.setAttributes=u(),g.insert=c().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=d();o()(y.A,g);const b=y.A&&y.A.locals?y.A.locals:void 0},94954:(e,t,n)=>{"use strict";var r;n.d(t,{Gl:()=>d,Ji:()=>u,Ri:()=>y,Sq:()=>l,Vk:()=>r,Wf:()=>i,eB:()=>p,pe:()=>s}),function(e){e.AMSL="amsl",e.AHL="ahl",e.AGL="agl",e.XYZ="xyz"}(r||(r={}));const o={[r.AMSL]:"Altitude above mean sea level",[r.AHL]:"Altitude above home level",[r.AGL]:"Altitude above ground level",[r.XYZ]:"Altitude in local coordinate system"},a={[r.AMSL]:"AMSL",[r.AHL]:"AHL",[r.AGL]:"AGL",[r.XYZ]:"Z coordinate"},i=(e,{short:t=!1}={})=>(t?a:o)[e]||"Unknown altitude type";var l;!function(e){e.DEGREES="d",e.DEGREES_MINUTES="dm",e.DEGREES_MINUTES_SECONDS="dms",e.SIGNED_DEGREES="-d",e.SIGNED_DEGREES_MINUTES="-dm",e.SIGNED_DEGREES_MINUTES_SECONDS="-dms"}(l||(l={}));const c={[l.DEGREES]:"Decimal degrees",[l.DEGREES_MINUTES]:"Degrees and minutes",[l.DEGREES_MINUTES_SECONDS]:"Degrees, minutes and seconds",[l.SIGNED_DEGREES]:"Decimal degrees (signed)",[l.SIGNED_DEGREES_MINUTES]:"Degrees and minutes (signed)",[l.SIGNED_DEGREES_MINUTES_SECONDS]:"Degrees, minutes and seconds (signed)"},s=e=>c[e]||"Unknown format";var u;!function(e){e.VOLTAGE="voltage",e.PERCENTAGE="percentage",e.FORCED_PERCENTAGE="forcedPercentage"}(u||(u={}));const f={[u.VOLTAGE]:"Prefer voltage",[u.PERCENTAGE]:"Prefer percentage and show voltage if unknown",[u.FORCED_PERCENTAGE]:"Prefer percentage and estimate it from voltage if needed"},d=e=>f[e]||"Unknown style";var p;!function(e){e.NEVER="never",e.ONLY_MULTIPLE="onlyMultiple",e.ALWAYS="always"}(p||(p={}));const m={[p.NEVER]:"Never ask for confirmation",[p.ONLY_MULTIPLE]:"Confirm when the operation may affect multiple UAVs",[p.ALWAYS]:"Always ask for confirmation"},y=e=>m[e]||"Unknown style"},95025:(e,t,n)=>{"use strict";n.d(t,{Fm:()=>i,Gk:()=>r.always,He:()=>a,IO:()=>r.altShiftKeysOnly,IT:()=>o,Js:()=>r.altKeyOnly,Kg:()=>r.shiftKeyOnly,N1:()=>r.pointerMove,TS:()=>r.noModifierKeys,Zm:()=>r.never,fs:()=>r.primaryAction,k5:()=>r.platformModifierKeyOnly,qG:()=>r.doubleClick});n(36348);var r=n(58704);const o=e=>e.originalEvent instanceof MouseEvent&&1===e.originalEvent.button&&e.originalEvent.shiftKey&&e.originalEvent.altKey,a=e=>"contextmenu"===e.originalEvent.type,i=e=>e.originalEvent instanceof KeyboardEvent&&"keydown"===e.type&&"Escape"===e.originalEvent.code},95191:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,o:()=>i});var r=n(65307);const o={dialogVisible:!1,featureId:void 0,selectedTab:n(45633).bA.GENERAL},{reducer:a,actions:i}=(0,r.Z0)({name:"feature-editor",initialState:o,reducers:{closeFeatureEditorDialog(e){e.dialogVisible=!1},showFeatureEditorDialog(e,t){e.dialogVisible=!0,e.featureId=t.payload},setFeatureEditorDialogTab(e,t){e.selectedTab=t.payload}}})},95443:(e,t,n)=>{"use strict";function r(){const e=new URL(window.location.href);return e?.searchParams?.get?.("token")??void 0}n.d(t,{b:()=>r})},98774:(e,t,n)=>{"use strict";n.d(t,{E:()=>C,AL:()=>P,zn:()=>j,Ay:()=>V,I_:()=>U,cl:()=>D,ph:()=>T});var r=n(74848),o=n(59116),a=n(41811),i=n(63614),l=n.n(i),c=(n(96540),n(44294)),s=n(12060),u=n(29276),f=n(49700),d=n(86936),p=n(81426),m=n(81709),y=n(71036),g=n(37802),b=n(98964),v=n(2652),h=n(27989),A=n(40861),S=n(26649);const E=n.p+"ffba6053d77016803ab6.svg",O=(0,a.A)((e,t)=>new u.default({image:new f.A({src:E,rotateWithView:!0,rotation:(0,A.eh)(e),color:t})})),w={skipSelection:!0},T=(e,t,n,o)=>(0,r.jsx)(m.Xj,{id:n,properties:w,style:O(e,o),children:(0,r.jsx)(m.N4.Point,{coordinates:(0,h.Ur)(t)})},n);var C;!function(e){e.GROSS="gross",e.NET="net"}(C||(C={}));const I={[C.GROSS]:(0,g.cE)(g.H4),[C.NET]:(0,g.cE)(g.kt)},x={byVariant:{[C.GROSS]:new u.default({stroke:(0,S.SC)(y.Ay.grossShowConvexHull)}),[C.NET]:new u.default({stroke:(0,S.SC)(y.Ay.netShowConvexHull)})},selection:new u.default({stroke:S.nM})},j=(e,t,n)=>{const o=I[n];if(!e)return[];const a=e.map(e=>(0,h.Ur)([e.lon,e.lat]));(0,A.hR)(a);const i=t.includes(o);return[(0,r.jsx)(m.Xj,{id:o,style:[...i?[x.selection]:[],x.byVariant[n]],children:(0,r.jsx)(m.N4.Polygon,{coordinates:a})},n)]},P=12*.6,k=(e,t,n)=>(r,o)=>{const a=r.getGeometry();if(!(a instanceof c.default))return;const i=(0,s.hO)("EPSG:3857",o,a.getCoordinates()),l=!t||"number"!=typeof t.minimumDistanceBetweenPositions||"number"!=typeof t.estimatedLabelWidth||t.minimumDistanceBetweenPositions>t.estimatedLabelWidth*i;return[e.marker,...t?.selection?.includes?.(String(r.getId()))?[e.selection]:[],...l&&!n?.hideLabels?[e.label(String(r.getId()))]:[]]},_={base:new d.A({fill:(0,S.GS)(y.Ay.markers.landing),points:3,radius:6,rotation:Math.PI,stroke:S.XA}),selected:new d.A({fill:(0,S.GS)(y.Ay.markers.landing),points:3,radius:6,rotation:Math.PI,stroke:S.T1})},N=(0,o.A)(_,e=>new u.default({image:e})),R=l()(e=>new u.default({text:new p.default({font:"12px sans-serif",offsetY:-12,text:(0,v.J8)(Number((0,g.p$)(e))),textAlign:"center"})})),D=(e,t,n)=>Array.isArray(e)?e.map((e,o)=>{if(!e)return null;const a=`land.${o}`,i=(0,g.lm)(o.toString()),l=(0,h.Ur)([e.lon,e.lat]);return(0,r.jsx)(m.Xj,{id:i,style:k({label:R,marker:N.base,selection:N.selected},t,n),children:(0,r.jsx)(m.N4.Point,{coordinates:l})},a)}).filter(Boolean):[],M={base:new d.A({fill:(0,S.GS)(y.Ay.markers.takeoff),points:3,radius:6,stroke:S.XA}),selected:new d.A({fill:(0,S.GS)(y.Ay.markers.takeoff),points:3,radius:6,stroke:S.T1})},L=(0,o.A)(M,e=>new u.default({image:e})),F=l()(e=>new u.default({text:new p.default({font:"12px sans-serif",offsetY:12,text:(0,v.J8)(Number((0,g.JT)(e))),textAlign:"center"})})),U=(e,t,n)=>Array.isArray(e)?e.map((e,o)=>{if(!e)return null;const a=`home.${o}`,i=(0,g.VV)(o.toString()),l=(0,h.Ur)([e.lon,e.lat]);return(0,r.jsx)(m.Xj,{id:i,style:k({label:F,marker:L.base,selection:L.selected},t,n),children:(0,r.jsx)(m.N4.Point,{coordinates:l})},a)}).filter(Boolean):[],G=e=>{e&&((0,b.m_)(e.layer),(0,b.Uz)(e.layer))},V=e=>{const{children:t,zIndex:n}=e;return(0,r.jsx)(m.qd.Vector,{ref:G,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:n,children:(0,r.jsx)(m.sP.Vector,{children:t})})}},98810:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>ke,AL:()=>ge});var r=n(39622),o=n(23149),a=n(44329),i=n(97313),l=n(21358),c=n(72030),s=n(23380),u=n(98978),f=n(46258),d=(n(52675),n(89463),n(2259),n(45700),n(28706),n(2008),n(23418),n(74423),n(23792),n(34782),n(89572),n(62010),n(33110),n(2892),n(5506),n(40875),n(10287),n(26099),n(16034),n(3362),n(27495),n(90906),n(38781),n(21699),n(47764),n(98992),n(54520),n(37550),n(62953),n(77500)),p=n(62315),m=n(30679),y=n(63614),g=n.n(y),b=n(27989),v=n(88276),h=n(11191);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function w(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function T(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}function C(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return I(s,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,l=0,c=e,d.n=n,i}};function p(n,r){for(l=n,c=r,t=0;!f&&s&&!o&&t<u.length;t++){var o,a=u[t],p=d.p,m=a[2];n>3?(o=m===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(l=0,d.v=r,d.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,d.n=m,l=0))}if(o||n>1)return i;throw f=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),l=u,c=m;(t=l<2?e:c)||!f;){a||(l?l<3?(l>1&&(d.n=-1),p(l,c)):d.n=c:d.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,o,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(I(t={},r,function(){return this}),t),f=s.prototype=l.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,I(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,I(f,"constructor",s),I(s,"constructor",c),c.displayName="GeneratorFunction",I(s,o,"GeneratorFunction"),I(f),I(f,o,"Generator"),I(f,r,function(){return this}),I(f,"toString",function(){return"[object Generator]"}),(C=function(){return{w:a,m:d}})()}function I(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}I=function(e,t,n,r){function a(t,n){I(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},I(e,t,n,r)}function x(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){x(a,r,o,i,l,"next",e)}function l(e){x(a,r,o,i,l,"throw",e)}i(void 0)})}}function P(e,t,n,r){return k.apply(this,arguments)}function k(){return(k=j(C().m(function e(t,n,r,o){var a,i,l,c;return C().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.sendMessage({type:"X-SHOW-ADAPT",show:n,transformations:r,environment:{location:{origin:(0,b.Ek)(o.origin),orientation:o.orientation}}},{timeout:600});case 1:if("X-SHOW-ADAPT"!==(null==(i=e.v)||null===(a=i.body)||void 0===a?void 0:a.type)){e.n=2;break}return e.a(2,i.body);case 2:throw new Error(null!==(l=null==i||null===(c=i.body)||void 0===c?void 0:c.reason)&&void 0!==l?l:"Unknown error.");case 3:return e.a(2)}},e)}))).apply(this,arguments)}function _(e,t){return N.apply(this,arguments)}function N(){return(N=j(C().m(function e(t,n){var r,o;return C().w(function(e){for(;;)switch(e.n){case 0:if(r=!1,"string"==typeof n&&(n=[n],r=!0),Array.isArray(n)&&!n.some(function(e){return"string"!=typeof e})){e.n=1;break}throw new Error("Invalid ID array:"+JSON.stringify(n));case 1:return e.n=2,t.sendMessage({type:"BCN-PROPS",ids:n});case 2:if(o=e.v,!r){e.n=3;break}return e.a(2,(0,f.FA)(o,n[0],{key:"result",error:"Failed to retrieve basic properties of beacon: ".concat(n[0])}));case 3:return e.a(2,o.body.result);case 4:return e.a(2)}},e)}))).apply(this,arguments)}function R(e,t){return D.apply(this,arguments)}function D(){return(D=j(C().m(function e(t,n){var r;return C().w(function(e){for(;;)switch(e.n){case 0:return(0,h.r)(n),e.n=1,t.sendMessage({type:"EXT-CFG",ids:[n]});case 1:return r=e.v,e.a(2,(0,f.FA)(r,n,{error:"Failed to retrieve configuration for extension: ".concat(n)}))}},e)}))).apply(this,arguments)}function M(e){return L.apply(this,arguments)}function L(){return L=j(C().m(function e(t){var n,r,o,a,i=arguments;return C().w(function(e){for(;;)switch(e.n){case 0:return r=(i.length>1&&void 0!==i[1]?i[1]:{}).supports,e.n=1,t.sendMessage({type:"FW-OBJECT-LIST",supports:r});case 1:if("FW-OBJECT-LIST"!==(null==(o=e.v)||null===(n=o.body)||void 0===n?void 0:n.type)){e.n=2;break}return e.a(2,null!==(a=o.body.ids)&&void 0!==a?a:[]);case 2:return e.a(2,[]);case 3:return e.a(2)}},e)})),L.apply(this,arguments)}function F(e){return U.apply(this,arguments)}function U(){return U=j(C().m(function e(t){var n,r,o,a,i,l,c,s,u,f=arguments;return C().w(function(e){for(;;)switch(e.n){case 0:return r=(f.length>1&&void 0!==f[1]?f[1]:{}).supportedBy,e.n=1,t.sendMessage({type:"FW-TARGET-LIST",supportedBy:r});case 1:if("FW-TARGET-LIST"!==(null==(o=e.v)||null===(n=o.body)||void 0===n?void 0:n.type)){e.n=5;break}if(!((i=null!==(a=o.body.ids)&&void 0!==a?a:[]).length>0)){e.n=3;break}return e.n=2,t.sendMessage({type:"FW-TARGET-INF",ids:i});case 2:return s=e.v,u=null!==(l=null==s||null===(c=s.body)||void 0===c?void 0:c.result)&&void 0!==l?l:{},e.a(2,(0,m.A)(u,["name","id"]));case 3:case 5:return e.a(2,[]);case 4:e.n=6;break;case 6:return e.a(2)}},e)})),U.apply(this,arguments)}function G(e,t,n){return V.apply(this,arguments)}function V(){return V=j(C().m(function e(t,n,r){var o,a,i,l,c=arguments;return C().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=(c.length>3&&void 0!==c[3]?c[3]:{}).onProgress,n&&"string"==typeof n){e.n=1;break}throw new Error("Expected non-empty UAV ID");case 1:if(r&&"string"==typeof r){e.n=2;break}throw new Error("Expected non-empty log ID");case 2:return e.p=2,e.n=3,t.startAsyncOperationForSingleId(n,{type:"LOG-DATA",logId:r,uavId:n},{idProp:null,onProgress:o,single:!0});case 3:a=e.v,e.n=5;break;case 4:throw e.p=4,l=e.v,i=(0,v.Nw)(l),new Error("Failed to retrieve log ".concat(r," for UAV ").concat(n,": ").concat(i));case 5:return e.a(2,a)}},e,null,[[2,4]])})),V.apply(this,arguments)}function B(e,t){return z.apply(this,arguments)}function z(){return(z=j(C().m(function e(t,n){var r,o,a;return C().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n&&"string"==typeof n){e.n=1;break}throw new Error("Expected non-empty UAV ID");case 1:return e.p=1,e.n=2,t.startAsyncOperationForSingleId(n,{type:"LOG-INF"});case 2:r=e.v,e.n=4;break;case 3:throw e.p=3,a=e.v,o=(0,v.Nw)(a),new Error("Failed to retrieve log list for UAV ".concat(n,": ").concat(o));case 4:return e.a(2,r)}},e,null,[[1,3]])}))).apply(this,arguments)}function H(e){return W.apply(this,arguments)}function W(){return(W=j(C().m(function e(t){var n;return C().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.sendMessage({type:"LCN-INF"});case 1:return n=e.v,e.a(2,n.body&&"LCN-INF"===n.body.type&&"object"===A(n.body.license)?n.body.license:void 0)}},e)}))).apply(this,arguments)}function q(e,t){return K.apply(this,arguments)}function K(){return(K=j(C().m(function e(t,n){var r;return C().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.sendMessage({type:"X-MSN-TYPE-SCHEMA",ids:[n]});case 1:if(!(r=e.v).body||"X-MSN-TYPE-SCHEMA"!==r.body.type||"object"!==A(r.body.items)||"object"!==A(r.body.items[n])){e.n=2;break}return e.a(2,r.body.items[n]);case 2:return e.a(2,{});case 3:return e.a(2)}},e)}))).apply(this,arguments)}function Y(e){return $.apply(this,arguments)}function $(){return $=j(C().m(function e(t){var n,r,o,a,i,l=arguments;return C().w(function(e){for(;;)switch(e.n){case 0:return r=(l.length>1&&void 0!==l[1]?l[1]:{}).features,e.n=1,t.sendMessage({type:"X-MSN-TYPE-LIST"});case 1:if(!(n=e.v).body||"X-MSN-TYPE-LIST"!==n.body.type){e.n=4;break}if(!((o=(0,d.A)(n,"body.ids")||[]).length>0)){e.n=3;break}return e.n=2,t.sendMessage({type:"X-MSN-TYPE-INF",ids:o});case 2:return n=e.v,a=(0,d.A)(n,"body.items")||{},i=Object.values(a).filter(function(e){return!Array.isArray(r)||r.some(function(t){return e.features.includes(t)})}),e.a(2,(0,m.A)(i,["name","id"]));case 3:e.n=5;break;case 4:return e.a(2,[]);case 5:return e.a(2)}},e)})),$.apply(this,arguments)}function Z(e,t){return J.apply(this,arguments)}function J(){return(J=j(C().m(function e(t,n){var r,o;return C().w(function(e){for(;;)switch(e.n){case 0:if(n&&"string"==typeof n){e.n=1;break}throw new Error("Expected non-empty UAV ID");case 1:return e.n=2,t.sendMessage({type:"UAV-PREFLT",ids:[n]});case 2:if(o=e.v,"UAV-PREFLT"!==(null===(r=o.body)||void 0===r?void 0:r.type)||!o.body.result||!o.body.result[n]){e.n=3;break}return e.a(2,o.body.result[n]);case 3:throw new Error("Unexpected response for preflight status query");case 4:return e.a(2)}},e)}))).apply(this,arguments)}function X(e){return Q.apply(this,arguments)}function Q(){return(Q=j(C().m(function e(t){var n,r,o,a,i,l,c;return C().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.sendMessage({type:"RTK-LIST"});case 1:if(!(n=e.v).body||"RTK-LIST"!==n.body.type){e.n=4;break}if(!((r=(0,d.A)(n,"body.ids")||[]).length>0)){e.n=3;break}return e.n=2,t.sendMessage({type:"RTK-INF",ids:r});case 2:for(n=e.v,o=(0,d.A)(n,"body.preset")||{},a=0,i=Object.entries(o);a<i.length;a++)l=S(i[a],2),c=l[0],l[1].id=c;return e.a(2,(0,m.A)(Object.values(o),["title","id"]));case 3:e.n=5;break;case 4:return e.a(2,[]);case 5:return e.a(2)}},e)}))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=j(C().m(function e(t){var n;return C().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.sendMessage({type:"RTK-SURVEY"});case 1:return n=e.v,e.a(2,n.body&&"RTK-SURVEY"===n.body.type&&n.body.settings?(0,p.default)(n.body.settings,["accuracy","duration"]):{})}},e)}))).apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return(re=j(C().m(function e(t){var n;return C().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.sendMessage({type:"RTK-STAT"});case 1:if(!(n=e.v).body||"RTK-STAT"!==n.body.type){e.n=2;break}return e.a(2,{antenna:n.body.antenna,messages:n.body.messages,messagesTx:n.body.messages_tx,cnr:n.body.cnr,survey:n.body.survey});case 2:throw new Error("Unexpected response for RTK subsystem status query");case 3:return e.a(2)}},e)}))).apply(this,arguments)}function oe(e){return ae.apply(this,arguments)}function ae(){return(ae=j(C().m(function e(t){var n;return C().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.sendMessage({type:"X-RTK-SOURCE"});case 1:if(!(n=e.v).body||"X-RTK-SOURCE"!==n.body.type){e.n=2;break}return e.a(2,(0,d.A)(n,"body.id"));case 2:return e.a(2,null)}},e)}))).apply(this,arguments)}function ie(e){return le.apply(this,arguments)}function le(){return(le=j(C().m(function e(t){var n;return C().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.sendMessage({type:"SYS-PORTS"});case 1:return n=e.v,e.a(2,n.body&&"SYS-PORTS"===n.body.type&&"object"===A(n.body.ports)?n.body.ports:void 0)}},e)}))).apply(this,arguments)}function ce(e){return se.apply(this,arguments)}function se(){return(se=j(C().m(function e(t){var n,r;return C().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.sendMessage({type:"SHOW-CFG"});case 1:if(n=e.v,!(r=(0,d.A)(n,"body.configuration"))||"object"!==A(r)){e.n=2;break}return e.a(2,r);case 2:throw new Error("No show configuration returned");case 3:return e.a(2)}},e)}))).apply(this,arguments)}function ue(e,t){return fe.apply(this,arguments)}function fe(){return(fe=j(C().m(function e(t,n){var r;return C().w(function(e){for(;;)switch(e.n){case 0:if(Array.isArray(n)&&!(n.length<2)){e.n=1;break}throw new Error("Invalid position");case 1:return e.n=2,t.sendMessage({type:"WTH-AT",position:(0,b.Ek)(n)});case 2:if(!(r=e.v).body||"WTH-AT"!==r.body.type){e.n=3;break}return e.a(2,r.body.weather);case 3:throw new Error("Unexpected response for weather query");case 4:return e.a(2)}},e)}))).apply(this,arguments)}var de=g()(function(){var e=j(C().m(function e(t){var n;return C().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.sendMessage("EXT-LIST");case 1:return n=e.v,e.a(2,n.body)}},e)}));return function(t){return e.apply(this,arguments)}}(),{maxAge:5e3,promise:!0});function pe(e,t){return me.apply(this,arguments)}function me(){return(me=j(C().m(function e(t,n){var r;return C().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,de(t);case 1:if(r=e.v,!Array.isArray((0,d.A)(r,"loaded"))){e.n=2;break}return e.a(2,r.loaded.includes(n));case 2:return e.a(2,!1)}},e)}))).apply(this,arguments)}var ye=w(function e(t){var n,r,o,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o={adaptShow:P,getBasicBeaconProperties:_,getConfigurationOfExtension:R,getFirmwareUpdateObjects:M,getFirmwareUpdateTargets:F,getFlightLog:G,getFlightLogList:B,getLicenseInformation:H,getMissionTypes:Y,getMissionTypeSchemas:q,getPreflightStatus:Z,getRTKPresets:X,getRTKStatus:ne,getRTKSurveySettings:ee,getSelectedRTKPresetId:oe,getServerPortMapping:ie,getShowConfiguration:ce,getWeatherInformation:ue,isExtensionLoaded:pe,listExtensions:de},(r=T(r="_queries"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o;for(var i=function(){var e=S(c[l],2),n=e[0],r=e[1];a[n]=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.apply(void 0,[t].concat(n))}},l=0,c=Object.entries(this._queries);l<c.length;l++)i()});function ge(e){const t=e&&e.length>0?e.split(/\s+/):[""];return{command:t[0]??"",args:t.slice(1),kwds:{}}}function be(e={}){return(0,o.A)(e)||(e={type:e}),{"$fw.version":"1.0",id:(0,a.Ak)(8),body:e}}class ve extends Error{constructor(e){super(e??"Message hub emitter changed while waiting for a response")}}class he extends Error{constructor(e){super(e??"No emitter was associated to the message hub")}}class Ae extends Error{messageId;userMessage;hideStackTrace;isTimeout;constructor(e){super(`Response to message ${e} timed out`),this.messageId=e,this.userMessage="Response timed out",this.hideStackTrace=!0,this.isTimeout=!0}}class Se extends Error{receipt;userMessage;hideStackTrace;constructor(e){super(),this.receipt=e,this.message=`Response to command ${e} timed out`,this.userMessage="Response timed out",this.hideStackTrace=!0}}class Ee extends Se{constructor(e){super(e),this.message+=" (no response from target)",this.userMessage+=" (no response from target)",this.hideStackTrace=!0}}class Oe extends Se{constructor(e){super(e),this.message+=" (no response from server)",this.userMessage+=" (no response from server)",this.hideStackTrace=!0}}class we extends Error{receipt;constructor(e,t){super(t??`Cancellation of operation ${e} failed`),this.receipt=e}}class Te{_hub;_receipt;constructor(e){this._hub=e,this._receipt=void 0}_activate(e,t){if(this._hub!==e)throw new Error("Cancel token is owned by a different hub");if(!t)throw new Error("Receipt ID must not be empty");if(this._receipt)throw new Error("This token is already activated");this._receipt=t}cancel=async({allowFailure:e}={})=>{if(!this._hub)throw new Error("This token is not activated yet");if(!this._receipt)throw new Error("This token has already been used");const t=this._receipt;let n;try{n=await this._hub._sendCancellationRequest([t])}catch(e){n=[t]}if(!e&&n&&Object.keys(n).length>0)throw new we(t)}}class Ce{_messageId;_deferred;_timeoutId;_timeoutCallback;constructor(e,{timeout:t=5,onTimeout:n}={}){this._messageId=e,this._deferred=(0,i.A)(),t>0?(this._timeoutId=setTimeout(this._onTimeout,1e3*t),this._timeoutCallback=n):(this._timeoutId=void 0,this._timeoutCallback=void 0)}get messageId(){return this._messageId}resolve(e){this._clearTimeoutIfNeeded(),this._deferred.resolve(e)}reject(e){this._clearTimeoutIfNeeded(),this._deferred.reject(e)}async wait(){return this._deferred.promise}_clearTimeoutIfNeeded(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=void 0,this._timeoutCallback=void 0)}_onTimeout=()=>{this.reject(new Ae(this.messageId)),this._timeoutCallback&&this._timeoutCallback(this.messageId)}}class Ie{_receipt;_deferred;_timeoutInMsec;_timeoutId;_progressCallback;_resumeCallback;_timeoutCallback;constructor(e,{timeout:t=5,onProgress:n,onResume:r,onTimeout:o}={}){this._receipt=e,this._deferred=(0,i.A)(),this._progressCallback=n,this._resumeCallback=r,t>0?(this._timeoutInMsec=1e3*t,this._timeoutId=setTimeout(this._onTimeout,this._timeoutInMsec),this._timeoutCallback=o):(this._timeoutInMsec=void 0,this._timeoutId=void 0,this._timeoutCallback=void 0)}notifyCancelled(e){this._clearTimeoutIfNeeded(),this._deferred.reject(e)}processResponseMessageBody=e=>{const{error:t,result:n}=e;this._clearTimeoutIfNeeded(),void 0!==t?this._deferred.reject(new Error(t)):void 0!==n?this._deferred.resolve(n):this._deferred.reject(new Error("Malformed response was provided by the server"))};processStatusUpdateMessageBody=e=>{const{progress:t,suspended:n=!1}=e;this._restartTimeoutIfNeeded(),(t||n)&&this._progressCallback&&this._progressCallback({progress:t,suspended:n,resume:this._resumeCallback})};get receipt(){return this._receipt}serverSideTimeout(){this.notifyCancelled(new Ee(this.receipt))}async wait(){return this._deferred.promise}_clearTimeoutIfNeeded(){void 0!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=void 0,this._timeoutCallback=void 0)}_onTimeout=()=>{this._timeoutCallback&&this._timeoutCallback(this.receipt),this._deferred.reject(new Oe(this.receipt))};_restartTimeoutIfNeeded(){this._clearTimeoutIfNeeded(),void 0!==this._timeoutInMsec&&(this._timeoutId=setTimeout(this._onTimeout,this._timeoutInMsec))}}class xe{_hub;constructor(e){this._hub=void 0,this._setHub(e)}get hub(){return this._hub}_onAttachedToHub(){}_onDetachingFromHub(){throw new Error("You may not detach this object from its message hub")}_setHub(e){e!==this._hub&&(this._hub&&this._onDetachingFromHub(),this._hub=e,this._hub&&this._onAttachedToHub())}}class je extends xe{timeout;_pendingOperations;_earlyResponses;constructor(e,{timeout:t=60}={}){super(e),this.timeout=t,this._pendingOperations={},this._earlyResponses={}}_onAttachedToHub(){this._hub.registerNotificationHandlers({"ASYNC-RESP":this._onResponseReceived.bind(this),"ASYNC-ST":this._onStatusUpdateReceived.bind(this),"ASYNC-TIMEOUT":this._onTimeoutReceived.bind(this),"OBJ-CMD":this._onResponseReceived.bind(this)})}cancelAll(e){for(const t of Object.values(this._pendingOperations))t.notifyCancelled(e);this._pendingOperations={},this._earlyResponses={}}async handleMultiAsyncResponseForSingleId(e,t,n={}){const{cancelToken:r,noThrow:o,onProgress:a,timeout:i}=n,{receipt:l,result:c}=(0,f.v$)(e,t);if(!l)return c;{const e=new Ie(l,{timeout:"number"==typeof i&&i>0?i:this.timeout,onProgress:a,onResume:async e=>{await this._sendSingleResumeRequest(l,e)},onTimeout:this._onResponseTimedOut});r&&this._hub&&r._activate(this._hub,l),this._earlyResponses[l]&&(e.processResponseMessageBody(this._earlyResponses[l]),delete this._earlyResponses[l]),this._pendingOperations[l]=e;try{return await e.wait()}catch(e){if(o)return e;throw e}finally{delete this._pendingOperations[l]}}}_onResponseReceived(e){const{id:t}=e.body,n=this._pendingOperations[t];n?n.processResponseMessageBody(e.body):this._earlyResponses[t]=e.body}_onStatusUpdateReceived(e){const{id:t}=e.body,n=this._pendingOperations[t];n&&n.processStatusUpdateMessageBody(e.body)}_onResponseTimedOut=async e=>{if(this._hub)try{await this._hub._sendCancellationRequest([e])}catch{}};_onTimeoutReceived(e){const{ids:t}=e.body;for(const e of t){const t=this._pendingOperations[e];t&&t.serverSideTimeout()}}_sendSingleResumeRequest(e,t){if(this._hub)return void 0!==t?this._hub._sendResumeRequest([e],{[e]:t}):this._hub._sendResumeRequest([e])}}class Pe extends xe{_subscriptions;_subscriptionsOnServer=null;_subscriptionUpdateInProgress=null;constructor(e){super(e),this._subscriptions=new Map}async requestSubscriptionUpdates(){if(!this._hub)return void(this._subscriptionsOnServer=null);if(!this._hub.canSend())return void(this._subscriptionsOnServer=null);let e;try{e=await this._hub.sendMessage("DEV-LISTSUB")}catch(e){return}const t=e?.body?.paths;if(!Array.isArray(t))throw this._subscriptionsOnServer=null,new Error("DEV-LISTSUB expected to return an array of paths");this._subscriptionsOnServer=new Set(t),await this._updateSubscriptions()}async subscribe(e,t){const n=!this._subscriptions.has(e);n&&this._subscriptions.set(e,[]);const r=this._subscriptions.get(e);r.push(t);try{n&&await this._updateSubscriptions()}catch(n){const o=r.indexOf(t);throw o>=0&&r.splice(o,1),this._subscriptions.get(e)===r&&0===r.length&&this._subscriptions.delete(e),n}return()=>this.unsubscribe(e,t)}async unsubscribe(e,t){const n=this._subscriptions.get(e);if(!n)return;const r=n.indexOf(t);r>=0&&(n.splice(r,1),0===n.length&&this._subscriptions.delete(e),await this._updateSubscriptions())}_onAttachedToHub(){this._hub&&(this._hub.registerNotificationHandlers({"DEV-INF":this._onDeviceTreeNodeValuesChanged.bind(this)}),this.requestSubscriptionUpdates())}_onDeviceTreeNodeValuesChanged(e){for(const[t,n]of Object.entries(e.body.values))this._handleUpdatedValueOfDeviceTreeNode(t,n)}_handleUpdatedValueOfDeviceTreeNode(e,t){const n=this._subscriptions.get(e);if(n)for(const e of n)e(t)}async _updateSubscriptions(){if(this._subscriptionUpdateInProgress)return await this._subscriptionUpdateInProgress.promise,void await this._updateSubscriptions();if(null===this._subscriptionsOnServer)return;const e=[],t=[];let n=!1;for(const t of this._subscriptions.keys())this._subscriptionsOnServer.has(t)||e.push(t);for(const e of this._subscriptionsOnServer)this._subscriptions.has(e)||t.push(e);if((0!==t.length||0!==e.length)&&this._hub){if(this._subscriptionUpdateInProgress=(0,i.A)(),t.length>0){const e=await this._hub.sendMessage({type:"DEV-UNSUB",paths:t});if(e?.body?.error&&(n=!0),e?.body?.success)for(const t of e?.body?.success)this._subscriptionsOnServer.delete(t)}if(e.length>0){let t=await this._hub.sendMessage({type:"DEV-SUB",paths:e,lazy:!0});if(t?.body?.error&&(n=!0),t?.body?.success){for(const e of t?.body?.success)this._subscriptionsOnServer.add(e);let e=await this._hub.sendMessage({type:"DEV-INF",paths:t?.body?.success});for(const[t,n]of Object.entries(e.body.values))this._handleUpdatedValueOfDeviceTreeNode(t,n)}}n&&setTimeout(()=>this._updateSubscriptions(),5e3),this._subscriptionUpdateInProgress.resolve(),this._subscriptionUpdateInProgress=null}}}class ke{_emitter;timeout;_asyncOperationManager;_deviceTreeSubscriptionManager;_executor;_query;_pendingResponses;_notificationHandlers;_waitUntilReadyDeferred;constructor(e,{timeout:t=5}={}){this.emitter=e,this.timeout=t,this._notificationHandlers={},this._pendingResponses={},this._waitUntilReadyDeferred=void 0,this._executor=void 0,this._query=void 0,this._onMessageTimedOut=this._onMessageTimedOut.bind(this),this._asyncOperationManager=new je(this),this._deviceTreeSubscriptionManager=new Pe(this)}get emitter(){return this._emitter}set emitter(e){if(this._emitter===e)return;const t=new ve;this._asyncOperationManager.cancelAll(t),this.cancelAllPendingResponses(),this._emitter=e,this._emitter&&this._waitUntilReadyDeferred&&(this._waitUntilReadyDeferred.resolve(),this._waitUntilReadyDeferred=void 0)}get execute(){return this._executor||(this._executor=(0,u.Z7)(this)),this._executor}get query(){return this._query||(this._query=new ye(this)),this._query}cancelAllPendingResponses(){for(const e of Object.values(this._pendingResponses))e.reject(new ve);this._pendingResponses={}}canSend(){return Boolean(this._emitter)}createCancelToken(){return new Te(this)}processIncomingMessage(e){const{refs:t}=e;if(t){const n=this._pendingResponses[t];n&&n.resolve(e)}else{const t=this._notificationHandlers[e?.body?.type];if(t)for(const n of t)n(e)}}registerNotificationHandler(e,t){(0,r.A)(this._notificationHandlers,e)||(this._notificationHandlers[e]=[]),this._notificationHandlers[e].push(t)}registerNotificationHandlers(e){for(const[t,n]of Object.entries(e))this.registerNotificationHandler(t,n)}unregisterNotificationHandler(e,t){const n=this._notificationHandlers[e];if(!n||!n.includes(t))throw new Error(`Unable to unregister handler from ${e}. Handler doesn't exist.`);n.splice(n.indexOf(t))}unregisterNotificationHandlers(e){for(const[t,n]of Object.entries(e))this.unregisterNotificationHandler(t,n)}async sendCommandRequest(e,t){const{uavId:n,command:r,args:o,kwds:a}=e,i=(0,s.D8)([n],r,o,a),l=await this.sendMessage(i);return this._asyncOperationManager.handleMultiAsyncResponseForSingleId(l,n,t)}async sendMessage(e={},{timeout:t}={}){if(!this._emitter)throw new he;const n=be(e),r=n.id,o=new Ce(r,{timeout:t??this.timeout,onTimeout:this._onMessageTimedOut});this._emitter("fw",n),this._pendingResponses[r]=o;try{return await o.wait()}finally{delete this._pendingResponses[n.id]}}sendNotification(e={}){this._emitter&&this._emitter("fw",be(e))}async subscribe(e,t){return this._deviceTreeSubscriptionManager.subscribe(e,t)}async startAsyncOperation(e,t){const{type:n}=e;if(!n)throw new Error("Message must have a type");const r=await this.sendMessage(e);return this._processMultiAsyncOperationResponse(r,n,t)}async startAsyncOperationForSingleId(e,t,n={}){const{ids:r,type:o}=t,{idProp:a,onProgress:i,single:l=!1}=n;if(!o)throw new Error("Message must have a type");if(r&&!Array.isArray(r))throw new Error("Message must not have an ids key");(0,h.p)(e),null!==a&&(t[a??(l?"id":"ids")]=[e]);let c=await this.sendMessage(t);if(l){const t={...c};for(const n of["error","result","receipt"])Object.prototype.hasOwnProperty.call(c.body,n)&&(t.body[n]={[e]:c.body[n]});c=t}const s=i?l?(e,...t)=>i(...t):i:void 0,u=await this._processMultiAsyncOperationResponse(c,o,{onProgress:s});if(Object.prototype.hasOwnProperty.call(u,e)){const t=u[e];if(t instanceof Error)throw t;return t}throw new Error(`Server did not return a response for ID ${e}`)}waitUntilReady(e){return void 0!==this._emitter?Promise.resolve():(void 0===this._waitUntilReadyDeferred&&(this._waitUntilReadyDeferred=(0,i.A)()),e&&e>0?(0,c.A)(this._waitUntilReadyDeferred.promise,{milliseconds:1e3*e}):this._waitUntilReadyDeferred.promise)}_onMessageTimedOut(e){}async _processMultiAsyncOperationResponse(e,t,{timeout:n,onProgress:r}={}){if(e){if(e.body){if("ACK-NAK"===e.body.type)throw new Error(`Execution rejected by server; reason: ${e.body.reason||"unknown"}`);if(e.body.type!==t)throw new Error(`Response has an unexpected type: ${e.body.type}, expected ${t}`);{const{body:t}=e,{error:o,result:a,receipt:i}=t,c={...a};for(const e of Object.keys(o??[]))c[e]=new Error(String(o[e]));for(const t of Object.keys(i||[]))try{c[t]=this._asyncOperationManager.handleMultiAsyncResponseForSingleId(e,t,{onProgress:e=>r?.(t,e),noThrow:!0,timeout:n})}catch(e){c[t]=e instanceof Error?e:new Error(String(e))}return(0,l.A)(c)}}throw new Error("Response has no body")}throw new Error("Response should not be empty")}async _sendCancellationRequest(e){const t=(0,s.j8)(e),n=await this.sendMessage(t),{body:r}=(0,f.U2)(n),{error:o}=r;return o&&Object.keys(o).length>0?o:{}}async _sendResumeRequest(e,t={}){const n=(0,s.Po)(e,t),r=await this.sendMessage(n),{body:o}=(0,f.U2)(r),{error:a}=o;return a&&Object.keys(a).length>0?a:{}}}},98978:(e,t,n)=>{"use strict";n.d(t,{F0:()=>l,Z7:()=>s});var r=n(88276),o=n(23380),a=n(46258),i=n(11191);class l extends Error{constructor(e){super(e),this.name="ServerPlanError"}}const c={configureExtension:async function(e,t,n){(0,i.r)(t);const r=await e.sendMessage({type:"EXT-SETCFG",ids:{[t]:n}}),o=(0,a.FA)(r,t,{error:`Failed to retrieve configuration for extension: ${t}`});return Boolean(o)},planMission:async function(e,{id:t,parameters:n}){const r=await e.sendMessage({type:"X-MSN-PLAN",id:t,parameters:n}),{type:o,result:a}=r.body;if("X-MSN-PLAN"!==o)throw new l(r.body.reason);if("skybrush-live/mission-items"!==a?.format)throw new Error(`Mission plan has an unknown format: ${a?.format}`);const{payload:i}=a;if(1!==i?.version||!Array.isArray(i.items))throw new Error("Mission plan response must be in version 1 format");return i},reloadExtension:async function(e,t){(0,i.r)(t);const n=await e.sendMessage({type:"EXT-RELOAD",ids:[t]}),r=(0,a.FA)(n,t,{error:`Failed to reload extension: ${t}`});return Boolean(r)},resetUAV:async function(e,t){try{await e.startAsyncOperationForSingleId(t,{type:"UAV-RST"})}catch(e){const n=(0,r.Nw)(e);throw new Error(`Failed to reset UAV ${t}: ${n}`)}},sendDebugMessage:async function(e,t){await e.sendMessage({type:"X-DBG-RESP",data:t})},setParameter:async function(e,{uavId:t,name:n,value:a}){const i=(0,o.JU)(t,n,a);try{await e.startAsyncOperationForSingleId(t,i)}catch(e){const o=(0,r.Nw)(e);throw new Error(`Failed to set parameter ${n} on UAV ${t}: ${o}`)}},setParameters:async function(e,{uavId:t,parameters:n},a){const i=(0,o.sG)(t,n);let l;try{l=await e.startAsyncOperationForSingleId(t,i,a)}catch(e){const n=(0,r.Nw)(e);throw new Error(`Failed to set parameters on UAV ${t}: ${n}`)}const{failed:c=[],success:s=!1}=l;if(!s)throw Array.isArray(c)&&c.length>0?new Error(`Failed to set parameters on UAV ${t}: ${c.slice(0,5).join(", ")}`):new Error(`Failed to set parameters on UAV ${t}`)},setRTKCorrectionsSource:async function(e,t){if("ACK-ACK"!==(await e.sendMessage({type:"X-RTK-SOURCE",id:t})).body.type)throw new Error("Failed to set new RTK correction source")},setShowConfiguration:async function(e,t){if("ACK-ACK"!==(await e.sendMessage({type:"SHOW-SETCFG",configuration:t})).body.type)throw new Error("Failed to set new show configuration on the server")},setShowLightConfiguration:async function(e,t){if("ACK-ACK"!==(await e.sendMessage({type:"SHOW-SETLIGHTS",configuration:t})).body.type)throw new Error("Failed to set new light configuration on the server")},startRTKSurvey:async function(e,t){if("ACK-ACK"!==(await e.sendMessage({type:"RTK-SURVEY",settings:t})).body.type)throw new Error("Failed to start RTK survey on the server")},uploadDroneShow:async function(e,{uavId:t,data:n},o){(0,i.p)(t);try{await e.sendCommandRequest({uavId:t,command:"__show_upload",kwds:{show:n}},{timeout:300,...o})}catch(e){throw new Error((0,r.Nw)(e.message||e,`Failed to upload show data to UAV ${t}`))}},uploadFirmware:async function(e,{objectId:t,target:n,blob:a},i){const l=(0,o.Kt)(t,n,a);try{await e.startAsyncOperationForSingleId(t,l,i)}catch(e){const n=(0,r.Nw)(e);throw new Error(`Failed to upload firmware update to UAV ${t}: ${n}`)}},uploadMission:async function(e,{uavId:t,data:n,format:o},a){(0,i.p)(t);try{await e.sendCommandRequest({uavId:t,command:"__mission_upload",args:[n,o]},{timeout:300,...a})}catch(e){throw new Error((0,r.Nw)(e.message||e,`Failed to upload mission to UAV ${t}`))}}};function s(e){const t={};for(const[n,r]of Object.entries(c))t[n]=(...t)=>r(e,...t);return t}},98999:(e,t,n)=>{"use strict";n.d(t,{J5:()=>p,K$:()=>h,Lp:()=>g,aU:()=>m,eg:()=>v,i7:()=>y});n(52675),n(89463),n(2259),n(45700),n(2008),n(23792),n(62062),n(34782),n(89572),n(2892),n(25428),n(9868),n(83851),n(81278),n(79432),n(26099),n(47764),n(98992),n(54520),n(3949),n(81454),n(23500),n(62953);var r=n(38967),o=n(70915),a=n(27989);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var l=["margin"],c=["rotation","zoom"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=new r.MiniSignal,m=new r.MiniSignal,y=new r.MiniSignal,g=new r.MiniSignal;function b(e){return Array.isArray(e)&&e.length>=2?e.slice(0,2):[e.lon,e.lat]}function v(e,t){var n=u({margin:16,duration:500},t),r=n.margin,i=d(n,l),c=(0,o.Tr)(e.map(function(e){return(0,a.Ur)(b(e))})),s=r&&r>0?(0,o.r)(c,r):c;g.dispatch(s,i)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.rotation,r=t.zoom,o=u({duration:500},d(t,c)),a=b(e);if(Array.isArray(a)&&a.length>=2){var i={center:{lon:a[0],lat:a[1]}};Number.isFinite(n)&&(i.rotation=Number(n).toFixed(1)),Number.isFinite(r)&&(i.zoom=Number(r).toFixed(1)),y.dispatch(i,o)}}},99387:(e,t,n)=>{"use strict";n.d(t,{IE:()=>u,Ay:()=>p,EX:()=>d});var r=n(65307),o=n(70353),a=n(16238);function i(e,t,n){const r=e.byId[t];r?Object.assign(r,n):(e.byId[t]=Object.assign({id:t,position:void 0,heading:void 0,active:!1},n),e.order.push(t))}const l=a.Tg,{actions:c,reducer:s}=(0,r.Z0)({name:"beacons",initialState:l,reducers:{clearBeaconList(e){(0,a.d5)(e)},setBeaconState(e,{payload:{id:t,...n}}){i(e,t,n)},setBeaconStateMultiple(e,{payload:t}){for(const[n,r]of Object.entries(t))i(e,n,r)}},extraReducers(e){e.addCase(o.D,(e,t)=>{(0,a.dE)(e,t.payload)})}}),{clearBeaconList:u,setBeaconState:f,setBeaconStateMultiple:d}=c,p=s},99580:()=>{}}]);